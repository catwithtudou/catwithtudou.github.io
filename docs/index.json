[{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":" æŠŠè¿™æ®µæ—¶é—´çœ‹çš„ç›¸å…³ä¹¦ç±å’Œåç»­è®¡åˆ’çœ‹çš„ä¹¦ç±è¿›è¡Œæ•´ç†ï¼Œæ±‡æ€»åˆ°è¯¥æ–‡æ¡£ä¸­å¹¶ä¿æŒæŒç»­æ›´æ–°â€¦. ","date":"2024-01-10","objectID":"/posts/daily_life/reading/3.html/:0:0","tags":["æ—¥å¸¸ç”Ÿæ´»"],"title":"å­¦ä¹ æ¸…å•","uri":"/posts/daily_life/reading/3.html/"},{"categories":null,"content":"Ever doesnâ€™t mean forever Hope to realize what I really want updated in 20231030 ğŸ‘¨â€ğŸ’» As a server engineer in Bytedance (202207-~) ğŸ«£ The most important thing at present is to maintain a stable mentality and return to the original intention ğŸ¤• Recently, the thing I have been learning is Rust And LangChain âš¡ Always the self-reflection ","date":"2024-01-09","objectID":"/about/:1:0","tags":null,"title":"About Me","uri":"/about/"},{"categories":null,"content":"List of recently read books See the doc ","date":"2024-01-09","objectID":"/about/:2:0","tags":null,"title":"About Me","uri":"/about/"},{"categories":["rust"],"content":" ä»¥ä¸‹æ˜¯ã€ŠRust è¯­è¨€åœ£ç»ã€‹é«˜é˜¶éƒ¨åˆ†çš„é˜…è¯»ç¬”è®°ï¼ˆğŸ‘·æ–½å·¥ä¸­ï¼‰ å…·ä½“å†…å®¹è¯·çœ‹é£ä¹¦æ–‡æ¡£ ","date":"2023-12-26","objectID":"/posts/rust/1.html/:0:0","tags":["rust","note"],"title":"ã€ŠRustè¯­è¨€åœ£ç»ã€‹é«˜é˜¶éƒ¨åˆ†é˜…è¯»ç¬”è®°","uri":"/posts/rust/1.html/"},{"categories":["rust"],"content":"å…·ä½“å†…å®¹è¯·çœ‹é£ä¹¦æ–‡æ¡£ ","date":"2023-11-13","objectID":"/posts/rust/2.html/:0:0","tags":["rust"],"title":"åˆè¯†ğŸ£RustğŸ¦€ï¸","uri":"/posts/rust/2.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":" ä»¥ä¸‹ä¸ºè€¶é²å¤§å­¦å…¬å¼€è¯¾ã€Œå“²å­¦â€”â€”æ­»äº¡ã€çš„ç¬”è®°è®°å½•ã€‚ å¯¹äºæ­»äº¡çš„æ™®éè§‚ç‚¹ï¼š æˆ‘ä»¬æ‹¥æœ‰çµé­‚ï¼Œè¿™æ˜¯æ¯”è‚‰ä½“æ›´é‡è¦çš„äº‹ç‰©ï¼Œç²¾ç¥ä¸Šçš„éç‰©è´¨çš„ã€‚æ­»äº¡åªèƒ½æ¯ç­è‚‰ä½“ï¼Œè€Œä¸èƒ½æ‘§æ¯çµé­‚ã€‚é€šè¿‡çµé­‚å¾—åˆ°æ°¸ç”Ÿï¼Œä»¥æ­¤é¢å¯¹æ­»äº¡çš„å¯æ€•å’Œææƒ§ï¼› æ•™æˆåœ¨åé¢ä¼šåé©³ä¸Šè¿°è§‚ç‚¹ï¼Œè¿˜ä¼šåé©³ç±»ä¼¼è‡ªæ€æ˜¯ä¸é“å¾·ä¸åˆç†çš„ã€æ°¸ç”Ÿæ˜¯ä¸å­˜åœ¨çš„ç­‰ã€‚ è¯¾ç¨‹çš„é‡ç‚¹æ˜¯åœ¨äºè‡ªå·±çš„æ·±æ€ç†Ÿè™‘ï¼Œè€Œä¸æ˜¯é‡ç‚¹äº‰è®ºè§‚ç‚¹çš„æ­£ç¡®ä¸å¦ã€‚ å°è¯•ä»ç†æ€§çš„è§’åº¦å»åˆ†ææ­»äº¡ã€‚ ","date":"2022-03-24","objectID":"/posts/daily_life/reading/3.html/:0:0","tags":["note","å“²å­¦","æ—¥å¸¸ç”Ÿæ´»","WIP"],"title":"ã€Šå“²å­¦-æ­»äº¡ã€‹notes","uri":"/posts/daily_life/reading/3.html/"},{"categories":["search engine"],"content":"åŸºäºè¯é¡¹å’ŒåŸºäºå…¨æ–‡æœç´¢ ","date":"2022-03-18","objectID":"/posts/search_engine/es/9.html/:1:0","tags":["search_engine","note","es"],"title":"ElasticSearchæ·±å…¥æœç´¢","uri":"/posts/search_engine/es/9.html/"},{"categories":["search engine"],"content":"åŸºäº Term çš„æŸ¥è¯¢ Term çš„é‡è¦æ€§ Term æ˜¯è¡¨è¾¾è¯­æ„çš„æœ€å°å•ä½ æœç´¢å’Œåˆ©ç”¨ç»Ÿè®¡è¯­è¨€æ¨¡å‹è¿›è¡Œè‡ªç„¶è¯­è¨€å¤„ç†éƒ½éœ€è¦å¤„ç† Term ç‰¹ç‚¹ Term Level Query:Term Query/Range Query/Exists Query/Prefix Query/Wildcard Query Term æŸ¥è¯¢å¯¹è¾“å…¥ä¸åšåˆ†è¯ï¼ˆä¼šå°†è¾“å…¥ä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œåœ¨å€’æ’ç´¢å¼•ä¸­æŸ¥æ‰¾å‡†ç¡®çš„è¯é¡¹ï¼Œå¹¶ä¸”ä½¿ç”¨ç›¸å…³åº¦ç®—åˆ†å…¬å¼ä¸ºæ¯ä¸ªåŒ…å«è¯¥è¯é¡¹çš„æ–‡æ¡£è¿›è¡Œç›¸å…³åº¦ç®—åˆ†ï¼‰ å¯ä»¥é€šè¿‡ Constant Score å°†æŸ¥è¯¢è½¬æ¢æˆä¸€ä¸ª Filteringï¼Œé¿å…ç®—åˆ†ï¼Œå¹¶åˆ©ç”¨ç¼“å­˜ï¼Œæé«˜æ€§èƒ½ DELETE products PUT products { \"settings\": { \"number_of_shards\": 1 } } POST /products/_bulk { \"index\": { \"_id\": 1 }} { \"productID\" : \"XHDK-A-1293-#fJ3\",\"desc\":\"iPhone\" } { \"index\": { \"_id\": 2 }} { \"productID\" : \"KDKE-B-9947-#kL5\",\"desc\":\"iPad\" } { \"index\": { \"_id\": 3 }} { \"productID\" : \"JODL-X-1937-#pV7\",\"desc\":\"MBP\" } GET /products POST /products/_search { \"query\": { \"term\": { \"desc\": { //\"value\": \"iPhone\" \"value\":\"iphone\" } } } } POST /products/_search { \"query\": { \"term\": { \"desc.keyword\": { //\"value\": \"iPhone\" //\"value\":\"iphone\" } } } } POST /products/_search { \"query\": { \"term\": { \"productID\": { \"value\": \"XHDK-A-1293-#fJ3\" } } } } POST /products/_search { //\"explain\": true, \"query\": { \"term\": { \"productID.keyword\": { \"value\": \"XHDK-A-1293-#fJ3\" } } } } ","date":"2022-03-18","objectID":"/posts/search_engine/es/9.html/:1:1","tags":["search_engine","note","es"],"title":"ElasticSearchæ·±å…¥æœç´¢","uri":"/posts/search_engine/es/9.html/"},{"categories":["search engine"],"content":"å¤åˆæŸ¥è¯¢ï¼ˆConstant Score è½¬ä¸º Filterï¼‰ å°† Query è½¬æˆ Filterï¼Œå¿½ç•¥ TF-IDF è®¡ç®—ï¼Œé¿å…ç›¸å…³æ€§ç®—åˆ†çš„å¼€é”€ Filter å¯ä»¥æœ‰æ•ˆåˆ©ç”¨ç¼“å­˜ POST /products/_search { \"explain\": true, \"query\": { \"constant_score\": { \"filter\": { \"term\": { \"productID.keyword\": \"XHDK-A-1293-#fJ3\" } } } } } ","date":"2022-03-18","objectID":"/posts/search_engine/es/9.html/:1:2","tags":["search_engine","note","es"],"title":"ElasticSearchæ·±å…¥æœç´¢","uri":"/posts/search_engine/es/9.html/"},{"categories":["search engine"],"content":"åŸºäºå…¨æ–‡çš„æŸ¥è¯¢ åŸºäºå…¨æ–‡æœ¬çš„æŸ¥æ‰¾ Match Query/Match Phrase Query/Query String Query ç‰¹ç‚¹ ç´¢å¼•å’Œæœç´¢æ—¶éƒ½ä¼šè¿›è¡Œåˆ†è¯ï¼ŒæŸ¥è¯¢å­—ç¬¦ä¸²å…ˆä¼ é€’åˆ°ä¸€ä¸ªåˆé€‚çš„åˆ†è¯å™¨ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªä¾›æŸ¥è¯¢çš„è¯é¡¹åˆ—è¡¨ æŸ¥è¯¢æ—¶å€™ï¼Œå…ˆä¼šå¯¹è¾“å…¥çš„æŸ¥è¯¢è¿›è¡Œåˆ†è¯ï¼Œç„¶åæ¯ä¸ªè¯é¡¹é€ä¸ªè¿›è¡Œåº•å±‚çš„æŸ¥è¯¢ï¼Œæœ€ç»ˆå°†ç»“æœè¿›è¡Œåˆå¹¶ã€‚å¹¶ä¸ºæ¯ä¸€ä¸ªæ–‡æ¡£ç”Ÿæˆä¸€ä¸ªç®—åˆ†ã€‚ #è®¾ç½® position_increment_gap DELETE groups PUT groups { \"mappings\": { \"properties\": { \"names\":{ \"type\": \"text\", \"position_increment_gap\": 0 } } } } GET groups/_mapping POST groups/_doc { \"names\": [ \"John Water\", \"Water Smith\"] } POST groups/_search { \"query\": { \"match_phrase\": { \"names\": { \"query\": \"Water Water\", \"slop\": 100 } } } } POST groups/_search { \"query\": { \"match_phrase\": { \"names\": \"Water Smith\" } } } ","date":"2022-03-18","objectID":"/posts/search_engine/es/9.html/:1:3","tags":["search_engine","note","es"],"title":"ElasticSearchæ·±å…¥æœç´¢","uri":"/posts/search_engine/es/9.html/"},{"categories":["é€šç”¨æŠ€æœ¯"],"content":" ä¸ºäº†å°ç„¦ å¥¹çœŸçš„ æˆ‘å“­æ­» åœ¨è®²è¿°å¦‚ä½•ä½¿ç”¨æ€ç»´å¯¼å›¾ä¹‹å‰ï¼Œæˆ‘ä»¬ä¸å¦¨å…ˆæ€è€ƒä¸ºä»€ä¹ˆåœ¨ä¸€å¼€å§‹æˆ‘ä»¬éœ€è¦æ€ç»´å¯¼å›¾ï¼Ÿ å¸¦ç€è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬é¦–å…ˆæ¥ç®€å•äº†è§£ä¸‹æ€ç»´å¯¼å›¾çš„æœ¬è´¨ã€‚ ","date":"2022-03-13","objectID":"/posts/common_tech/study_way/0.html/:0:0","tags":["é€šç”¨æŠ€æœ¯","å­¦ä¹ æ•ˆç‡"],"title":"æ€ç»´å¯¼å›¾çš„ä½¿ç”¨","uri":"/posts/common_tech/study_way/0.html/"},{"categories":["é€šç”¨æŠ€æœ¯"],"content":"æ€ç»´å¯¼å›¾çš„æœ¬è´¨ ç®€å•æ¦‚æ‹¬ä¸‹æ¥ï¼Œä¼ ç»Ÿæ€ç»´å¯¼å›¾çš„æœ¬è´¨å°±æ˜¯ä¿¡æ¯ç»“æ„çš„å¯è§†åŒ–ã€‚ å¦‚ä½•ç†è§£è¿™å¥è¯å‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬æ¥æ ¹æ®ä»¥ä¸‹å‡ æ–¹é¢æ¥ç†è§£ï¼š ä¿¡æ¯åŠä¿¡æ¯çš„è½½ä½“ è‡ªç„¶è¯­è¨€çš„ç¼ºé™· ä¼ ç»Ÿæ€ç»´å¯¼å›¾çš„æ„ä¹‰ ","date":"2022-03-13","objectID":"/posts/common_tech/study_way/0.html/:1:0","tags":["é€šç”¨æŠ€æœ¯","å­¦ä¹ æ•ˆç‡"],"title":"æ€ç»´å¯¼å›¾çš„ä½¿ç”¨","uri":"/posts/common_tech/study_way/0.html/"},{"categories":["é€šç”¨æŠ€æœ¯"],"content":"ä¿¡æ¯åŠä¿¡æ¯çš„è½½ä½“ ä»»ä½•ä¿¡æ¯ï¼Œéƒ½åŒ…å«ç€ï¼š ä¿¡æ¯çš„å†…å®¹ ä¿¡æ¯çš„é€»è¾‘ç»“æ„ æˆ‘ä»¬åœ¨åšä»»ä½•è¡Œä¸ºæ—¶éƒ½æ˜¯åœ¨ä¸ä¿¡æ¯è¿›è¡Œäº¤äº’ï¼Œæ¯”å¦‚é˜…è¯»ã€å¬è®²ã€è®²æˆç­‰ã€‚è€Œæˆ‘ä»¬ï¼ˆçš„å¤§è„‘ï¼‰ä¸ä¿¡æ¯äº¤äº’çš„åª’ä»‹æ€»æ˜¯é€šè¿‡è‡ªç„¶è¯­è¨€ï¼Œå³è‡ªç„¶è¯­è¨€ä½œä¸ºä¿¡æ¯çš„è½½ä½“ï¼ˆä¹‹ä¸€ï¼‰ã€‚ ","date":"2022-03-13","objectID":"/posts/common_tech/study_way/0.html/:1:1","tags":["é€šç”¨æŠ€æœ¯","å­¦ä¹ æ•ˆç‡"],"title":"æ€ç»´å¯¼å›¾çš„ä½¿ç”¨","uri":"/posts/common_tech/study_way/0.html/"},{"categories":["é€šç”¨æŠ€æœ¯"],"content":"è‡ªç„¶è¯­è¨€çš„ç¼ºé™· æˆ‘ä»¬çŸ¥é“ä¿¡æ¯æ˜¯äºŒç»´çš„ï¼Œä½†æ˜¯è‡ªç„¶è¯­è¨€æ˜¯ä¸€ç»´çš„ã€‚ å³è‡ªç„¶è¯­è¨€è™½ç„¶å¯ä»¥å‘ˆç°ä¿¡æ¯çš„æ‰€æœ‰å†…å®¹ï¼Œä½†å´éš¾ä»¥å‘ˆç°ä¿¡æ¯çš„ç»“æ„ã€‚ åœ¨è‡ªç„¶è¯­è¨€ä¸­ï¼Œä¿¡æ¯çš„ç»“æ„â€œéšè—â€äºä¿¡æ¯çš„å†…å®¹ã€‚ å½“æˆ‘ä»¬é€šè¿‡è‡ªç„¶è¯­è¨€ä¸ä¿¡æ¯äº¤äº’æ—¶ï¼Œå¤§è„‘å¯¹è‡ªç„¶è¯­è¨€åšå¦‚ä¸‹å¤„ç†ï¼š æå–è®°å¿†ä¸­çš„ä¿¡æ¯ï¼ŒåŒ…å«ä¿¡æ¯çš„å«ä¹‰å’Œæ‹“å±• æ•´ç†ä¿¡æ¯çš„ç»“æ„ï¼ŒåŒ…å«ä¿¡æ¯çš„é€»è¾‘ç»“æ„ åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼š è®°å¿†èƒ½åŠ›æ˜¯æœ‰é™çš„ å¤„ç†ä¿¡æ¯çš„é€»è¾‘ç»“æ„çš„èƒ½åŠ›æœ‰é™ æ‰€ä»¥ä¿¡æ¯å†…å®¹çš„é—å¿˜åŒæ—¶ä¹Ÿä¼šå¯¼è‡´ä¿¡æ¯ç»“æ„çš„ä¸¢å¤±ã€‚ ","date":"2022-03-13","objectID":"/posts/common_tech/study_way/0.html/:1:2","tags":["é€šç”¨æŠ€æœ¯","å­¦ä¹ æ•ˆç‡"],"title":"æ€ç»´å¯¼å›¾çš„ä½¿ç”¨","uri":"/posts/common_tech/study_way/0.html/"},{"categories":["é€šç”¨æŠ€æœ¯"],"content":"æ€ç»´å¯¼å›¾çš„æ„ä¹‰ è®°å½•æ˜¯æœ‰æ•ˆå¯¹æŠ—é—å¿˜çš„æ–¹å¼ï¼Œè®°å½•æ˜¯ä¸€ç§å¯è§†åŒ–ï¼š è‡ªç„¶è¯­è¨€æœ‰æ•ˆçš„å¯è§†åŒ–ä¿¡æ¯çš„å†…å®¹ ä¼ ç»Ÿæ€ç»´å¯¼å›¾æœ‰æ•ˆçš„å¯è§†åŒ–ä¿¡æ¯çš„ç»“æ„ ä¼ ç»Ÿæ€ç»´å¯¼å›¾å°±èƒ½å°†è‡ªç„¶è¯­è¨€éšè—çš„ä¿¡æ¯ç»“æ„åˆ†ç¦»å‡ºæ¥ï¼Œé€šè¿‡æ¸…æ™°ä¿¡æ¯ç»“æ„ï¼Œä½¿æˆ‘ä»¬ä¸ä¿¡æ¯äº¤äº’çš„æ•ˆç‡å’Œè´¨é‡æé«˜ã€‚ æ‰€ä»¥è¿™å°±æ˜¯æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦æ€ç»´å¯¼å›¾çš„åŸå› ã€‚ ","date":"2022-03-13","objectID":"/posts/common_tech/study_way/0.html/:1:3","tags":["é€šç”¨æŠ€æœ¯","å­¦ä¹ æ•ˆç‡"],"title":"æ€ç»´å¯¼å›¾çš„ä½¿ç”¨","uri":"/posts/common_tech/study_way/0.html/"},{"categories":["é€šç”¨æŠ€æœ¯"],"content":"å…¨å†…å®¹æ€ç»´å¯¼å›¾ ç°åœ¨æˆ‘ä»¬æåˆ°çš„æ€ç»´å¯¼å›¾å¤§å¤šéƒ½æ˜¯å…¨å†…å®¹æ€ç»´å¯¼å›¾ï¼Œå®ƒé€šè¿‡æ€ç»´å¯¼å›¾è½¯ä»¶ï¼Œå¼¥è¡¥äº†ä¼ ç»Ÿæ€ç»´å¯¼å›¾çš„å±€é™æ€§ï¼Œå³ä¿¡æ¯å‹ç¼©å’Œå­˜å‚¨é‡æœ‰é™ï¼Œå¯ä»¥åšåˆ°ï¼š å°†ä¿¡æ¯å®Œæ•´ï¼ˆå†…å®¹å’Œé€»è¾‘ç»“æ„ï¼‰åœ°å‘ˆç°å‡ºæ¥ è¿™ä¹Ÿç»™äº†æˆ‘ä»¬è‡ªå·±å»å‘æ˜å…¨å†…å®¹æ€ç»´å¯¼å›¾æ›´å¤šä½œç”¨çš„èƒ½åŠ›ã€‚ ","date":"2022-03-13","objectID":"/posts/common_tech/study_way/0.html/:1:4","tags":["é€šç”¨æŠ€æœ¯","å­¦ä¹ æ•ˆç‡"],"title":"æ€ç»´å¯¼å›¾çš„ä½¿ç”¨","uri":"/posts/common_tech/study_way/0.html/"},{"categories":["é€šç”¨æŠ€æœ¯"],"content":"æ€ç»´å¯¼å›¾çš„ä½¿ç”¨ è¿™é‡Œæˆ‘ä»¬ä¼šç®€å•è®²è¿°æ€ç»´å¯¼å›¾ä½¿ç”¨ä¸­å¸¸è§çš„ä½¿ç”¨æŠ€å·§ã€‚ ","date":"2022-03-13","objectID":"/posts/common_tech/study_way/0.html/:2:0","tags":["é€šç”¨æŠ€æœ¯","å­¦ä¹ æ•ˆç‡"],"title":"æ€ç»´å¯¼å›¾çš„ä½¿ç”¨","uri":"/posts/common_tech/study_way/0.html/"},{"categories":["é€šç”¨æŠ€æœ¯"],"content":"ä¸‹è½½æ€ç»´å¯¼å›¾è½¯ä»¶ å¸‚é¢ä¸Šçš„æ€ç»´å¯¼å›¾è½¯ä»¶æœ‰å¾ˆå¤šï¼Œè¿™é‡Œå°±ä¸è¯¦ç»†åˆ—ä¸¾äº†ã€‚ è¿™é‡Œæˆ‘æ¯”è¾ƒæ¨èä½¿ç”¨çš„æ˜¯XmindZenã€‚ ","date":"2022-03-13","objectID":"/posts/common_tech/study_way/0.html/:2:1","tags":["é€šç”¨æŠ€æœ¯","å­¦ä¹ æ•ˆç‡"],"title":"æ€ç»´å¯¼å›¾çš„ä½¿ç”¨","uri":"/posts/common_tech/study_way/0.html/"},{"categories":["é€šç”¨æŠ€æœ¯"],"content":"XmindZenå¸¸è§ä½¿ç”¨æŠ€å·§ ç¼–è¾‘ä¸»é¢˜æ–‡å­— é€‰ä¸­ä¸»é¢˜â€œåŒå‡»é¼ æ ‡â€æˆ–è€…æŒ‰ã€ç©ºæ ¼é”®ã€‘å°±å¯ä»¥è¿›è¡Œå†…å®¹çš„è¾“å…¥ æ·»åŠ åŒçº§ä¸»é¢˜ ç‚¹å·¥å…·æ çš„ã€ä¸»é¢˜ã€‘æ·»åŠ ï¼Œæˆ–ç”¨å¿«æ·é”®ã€enter/returnã€‘å¿«é€Ÿè¿›è¡Œæ·»åŠ  æ·»åŠ å­ä¸»é¢˜ å¯ä»¥ç‚¹å‡»å·¥å…·æ çš„ã€å­ä¸»é¢˜ã€‘ï¼Œä¹Ÿå¯ä»¥ç”¨å¿«æ·é”®ã€tabã€‘ åˆ é™¤ é€‰ä¸­ä¸»é¢˜æŒ‰ã€deleteã€‘ æ·»åŠ å¤–æ¡† é€‰ä¸­è¦æ¡†é€‰çš„ä¸»é¢˜æŒ‰å·¥å…·æ çš„ã€å¤–æ¡†ã€‘æˆ–å¿«æ·é”®ã€Ctrl+Shift+Bã€‘è¿›è¡Œæ·»åŠ  æ·»åŠ æ¦‚è¦ é€‰ä¸­ä¸»é¢˜æŒ‰å·¥å…·æ çš„ã€æ¦‚è¦ã€‘è¿›è¡Œæ·»åŠ  æ·»åŠ ç¬”è®° é€‰ä¸­ä¸»é¢˜æŒ‰å·¥å…·æ çš„ã€ç¬”è®°ã€‘æˆ–å¿«æ·é”®ã€Ctrl+Shift+Nã€‘è¿›è¡Œæ·»åŠ  è¶…é“¾æ¥/è”ç³»/å¤–æ¡†åŠŸèƒ½åº”ç”¨ é™„ä»¶/æ ‡ç­¾/å¤‡æ³¨åŠŸèƒ½åº”ç”¨ æ¦‚è¦/æŠ˜å å±•å¼€/å¤šç”»å¸ƒåŠŸèƒ½åº”ç”¨ ","date":"2022-03-13","objectID":"/posts/common_tech/study_way/0.html/:2:2","tags":["é€šç”¨æŠ€æœ¯","å­¦ä¹ æ•ˆç‡"],"title":"æ€ç»´å¯¼å›¾çš„ä½¿ç”¨","uri":"/posts/common_tech/study_way/0.html/"},{"categories":["é€šç”¨æŠ€æœ¯"],"content":"ç¤ºä¾‹ ","date":"2022-03-13","objectID":"/posts/common_tech/study_way/0.html/:2:3","tags":["é€šç”¨æŠ€æœ¯","å­¦ä¹ æ•ˆç‡"],"title":"æ€ç»´å¯¼å›¾çš„ä½¿ç”¨","uri":"/posts/common_tech/study_way/0.html/"},{"categories":["é€šç”¨æŠ€æœ¯"],"content":"å‚è€ƒ https://zhuanlan.zhihu.com/p/40169084 https://zhuanlan.zhihu.com/p/97023871 ","date":"2022-03-13","objectID":"/posts/common_tech/study_way/0.html/:3:0","tags":["é€šç”¨æŠ€æœ¯","å­¦ä¹ æ•ˆç‡"],"title":"æ€ç»´å¯¼å›¾çš„ä½¿ç”¨","uri":"/posts/common_tech/study_way/0.html/"},{"categories":["os"],"content":" ä»¥ä¸‹ä¸»è¦æ¥è‡ª LMOS å¤§ä½¬çš„æ“ä½œç³»ç»Ÿè¯¾ç¨‹ä¸­è®°å½•çš„ç¬”è®° æŒ‰ç…§ CPU åŠŸèƒ½å‡çº§è¿­ä»£çš„é¡ºåºï¼ŒCPU çš„å·¥ä½œæ¨¡å¼æœ‰ï¼š å®æ¨¡å¼ ä¿æŠ¤æ¨¡å¼ é•¿æ¨¡å¼ ","date":"2022-03-13","objectID":"/posts/os/common/3.html/:0:0","tags":["os","note"],"title":"cpuå·¥ä½œæ¨¡å¼","uri":"/posts/os/common/3.html/"},{"categories":["os"],"content":"å®æ¨¡å¼ å®æ¨¡å¼åˆç§°å®åœ°å€æ¨¡å¼ï¼š è¿è¡ŒçœŸå®çš„æŒ‡ä»¤ï¼Œä¸åŒºåˆ†ç›´æ¥æ‰§è¡Œ å‘å¾€å†…å­˜çš„åœ°å€æ˜¯çœŸå®çš„ï¼Œå¯¹ä»»ä½•åœ°å€ä¸åŠ é™åˆ¶åœ°å‘å¾€å†…å­˜ ","date":"2022-03-13","objectID":"/posts/os/common/3.html/:1:0","tags":["os","note"],"title":"cpuå·¥ä½œæ¨¡å¼","uri":"/posts/os/common/3.html/"},{"categories":["os"],"content":"å®æ¨¡å¼å¯„å­˜å™¨ ","date":"2022-03-13","objectID":"/posts/os/common/3.html/:1:1","tags":["os","note"],"title":"cpuå·¥ä½œæ¨¡å¼","uri":"/posts/os/common/3.html/"},{"categories":["os"],"content":"å®æ¨¡å¼ä¸‹è®¿é—®å†…å­˜ å¯ä»¥å‘ç°æ‰€æœ‰çš„å†…å­˜åœ°å€éƒ½æ˜¯ï¼š æ®µå¯„å­˜å™¨å·¦ç§» 4 ä½ å†åŠ ä¸Šä¸€ä¸ªé€šç”¨å¯„å­˜å™¨ä¸­çš„å€¼æˆ–è€…å¸¸æ•°å½¢æˆåœ°å€ æœ€åç”±è¿™ä¸ªåœ°å€å»è®¿é—®å†…å­˜ è¿™å°±æ˜¯åˆ†æ®µå†…å­˜ç®¡ç†æ¨¡å‹ã€‚ ä»£ç æ®µæ˜¯ç”± CS å’Œ IP ç¡®å®šçš„ï¼Œè€Œæ ˆæ®µæ˜¯ç”± SS å’Œ SP æ®µç¡®å®šçš„ã€‚ å®æ¨¡å¼ä¸‹çš„æ±‡ç¼–ä»£ç ï¼Œå…± 16 ä½ï¼š data SEGMENT ;å®šä¹‰ä¸€ä¸ªæ•°æ®æ®µå­˜æ”¾Hello World! hello DB 'Hello World!$' ;æ³¨æ„è¦ä»¥$ç»“æŸ data ENDS code SEGMENT ;å®šä¹‰ä¸€ä¸ªä»£ç æ®µå­˜æ”¾ç¨‹åºæŒ‡ä»¤ ASSUME CS:CODE,DS:DATA ;å‘Šè¯‰æ±‡ç¼–ç¨‹åºï¼ŒDSæŒ‡å‘æ•°æ®æ®µï¼ŒCSæŒ‡å‘ä»£ç æ®µ start: MOV AX,data ;å°†dataæ®µé¦–åœ°å€èµ‹å€¼ç»™AX MOV DS,AX ;å°†AXèµ‹å€¼ç»™DSï¼Œä½¿DSæŒ‡å‘dataæ®µ LEA DX,hello ;ä½¿DXæŒ‡å‘helloé¦–åœ°å€ MOV AH,09h ;ç»™AHè®¾ç½®å‚æ•°09Hï¼ŒAHæ˜¯AXé«˜8ä½ï¼ŒALæ˜¯AXä½8ä½ï¼Œå…¶å®ƒç±»ä¼¼ INT 21h ;æ‰§è¡ŒDOSä¸­æ–­è¾“å‡ºDSæŒ‡å‘çš„DXæŒ‡å‘çš„å­—ç¬¦ä¸²hello MOV AX,4C00h ;ç»™AXè®¾ç½®å‚æ•°4C00h INT 21h ;è°ƒç”¨4C00hå·åŠŸèƒ½ï¼Œç»“æŸç¨‹åº code ENDS END start ","date":"2022-03-13","objectID":"/posts/os/common/3.html/:1:2","tags":["os","note"],"title":"cpuå·¥ä½œæ¨¡å¼","uri":"/posts/os/common/3.html/"},{"categories":["os"],"content":"å®æ¨¡å¼ä¸­æ–­ å®æ¨¡å¼ä¸‹çš„ä¸­æ–­å®ç°è¿‡ç¨‹æ˜¯å…ˆä¿å­˜ CS å’Œ IP å¯„å­˜å™¨ï¼Œç„¶åè£…è½½æ–°çš„ CS å’Œ IP å¯„å­˜å™¨ã€‚ ä¸­æ–­çš„äº§ç”Ÿåˆ†ä¸ºä¸¤ç§ï¼š ç¡¬ä»¶ä¸­æ–­ï¼ˆä¸­æ–­æ§åˆ¶å™¨ç»™ CPU å‘é€äº†ä¸€ä¸ªç”µå­ä¿¡å·ï¼ŒCPU ä¼šå¯¹è¿™ä¸ªä¿¡å·ä½œå‡ºåº”ç­”ã€‚éšåä¸­æ–­æ§åˆ¶å™¨ä¼šå°†ä¸­æ–­å·å‘é€ç»™ CPUï¼‰ è½¯ä»¶ä¸­æ–­ï¼ˆ CPU æ‰§è¡Œäº†INTæŒ‡ä»¤ï¼Œè¿™ä¸ªæŒ‡ä»¤åé¢ä¼šè·Ÿéšä¸€ä¸ªå¸¸æ•°ï¼Œè¿™ä¸ªå¸¸æ•°å³æ˜¯è½¯ä¸­æ–­å·ï¼‰ å®ç°ä¸­æ–­éœ€è¦ï¼š å†…å­˜ä¸­æ”¾ä¸€ä¸ªä¸­æ–­å‘é‡è¡¨ ä¸­æ–­å‘é‡è¡¨çš„åœ°å€å’Œé•¿åº¦ç”± CPU çš„ç‰¹å®šå¯„å­˜å™¨ IDTR æŒ‡å‘ å®æ¨¡å¼ä¸‹ï¼Œè¡¨ä¸­çš„ä¸€ä¸ªæ¡ç›®ç”±ä»£ç æ®µåœ°å€å’Œæ®µå†…åç§»ç»„æˆã€‚CPU æ ¹æ® IDTR é€šè¿‡ä¸­æ–­å·è®¡ç®—ä¸­æ–­å‘é‡æ¡ç›®ï¼Œè¿›è€Œè£…è½½ CSï¼ˆè£…å…¥ä»£ç æ®µåŸºåœ°å€ï¼‰ã€IPï¼ˆè£…å…¥ä»£ç æ®µå†…åç§»ï¼‰å¯„å­˜å™¨ï¼Œæœ€ç»ˆå“åº”ä¸­æ–­ã€‚ ","date":"2022-03-13","objectID":"/posts/os/common/3.html/:1:3","tags":["os","note"],"title":"cpuå·¥ä½œæ¨¡å¼","uri":"/posts/os/common/3.html/"},{"categories":["os"],"content":"ä¿æŠ¤æ¨¡å¼ ä¸ºè§£å†³å®æ¨¡å¼ä¸­ CPU ï¼š å¯¹ä»»ä½•æŒ‡ä»¤éƒ½ä¸åŠ åŒºåˆ† å¯¹å†…å­˜çš„è®¿é—®éƒ½ä¸åŠ é™åˆ¶ åŸºäºä¸Šè¿°é—®é¢˜ CPU å®ç°äº†ä¿æŠ¤æ¨¡å¼ã€‚ åŒæ—¶ä¸ºäº†è§£å†³è½¯ä»¶è§„æ¨¡å¢å¤§å¸¦æ¥çš„å¯»å€é—®é¢˜ï¼Œä¿æŠ¤æ¨¡å¼ä¸‹çš„å¯„å­˜å™¨å’Œè¿ç®—å•ä½éƒ½è¦æ‰©å±•æˆ 32 ä½ã€‚ ","date":"2022-03-13","objectID":"/posts/os/common/3.html/:2:0","tags":["os","note"],"title":"cpuå·¥ä½œæ¨¡å¼","uri":"/posts/os/common/3.html/"},{"categories":["os"],"content":"ä¿æŠ¤æ¨¡å¼å¯„å­˜å™¨ ä¿æŠ¤æ¨¡å¼ç›¸æ¯”äºå®æ¨¡å¼ï¼Œå¢åŠ äº†ä¸€äº›æ§åˆ¶å¯„å­˜å™¨å’Œæ®µå¯„å­˜å™¨ï¼Œæ‰©å±•é€šç”¨å¯„å­˜å™¨çš„ä½å®½ï¼Œæ‰€æœ‰çš„é€šç”¨å¯„å­˜å™¨éƒ½æ˜¯ 32 ä½çš„ï¼Œè¿˜å¯ä»¥å•ç‹¬ä½¿ç”¨ä½ 16 ä½ï¼Œè¿™ä¸ªä½ 16 ä½åˆå¯ä»¥æ‹†åˆ†æˆä¸¤ä¸ª 8 ä½å¯„å­˜å™¨ã€‚ ","date":"2022-03-13","objectID":"/posts/os/common/3.html/:2:1","tags":["os","note"],"title":"cpuå·¥ä½œæ¨¡å¼","uri":"/posts/os/common/3.html/"},{"categories":["os"],"content":"ä¿æŠ¤æ¨¡å¼ç‰¹æƒçº§ ä¸ºåŒºåˆ†æŒ‡ä»¤å’Œèµ„æºå¯ä»¥è¢«è®¿é—®ï¼ŒCPU å®ç°äº† ç‰¹æƒçº§ã€‚ å¯ä»¥çœ‹åˆ°ä»å¤–åˆ°å†…å„æƒçº§ä¹‹é—´çš„è”ç³»ä¸åŒºåˆ«ã€‚å¦‚ R0 æ‹¥æœ‰æœ€å¤§æƒåŠ›ï¼Œå¯ä»¥è®¿é—®ä½ç‰¹æƒçº§çš„èµ„æºã€‚ ","date":"2022-03-13","objectID":"/posts/os/common/3.html/:2:2","tags":["os","note"],"title":"cpuå·¥ä½œæ¨¡å¼","uri":"/posts/os/common/3.html/"},{"categories":["os"],"content":"ä¿æŠ¤æ¨¡å¼æ®µæè¿°ç¬¦ ä¿æŠ¤æ¨¡å¼ä¸‹å†…å­˜è¿˜æ˜¯åˆ†æ®µæ¨¡å‹ï¼Œè¦å¯¹å†…å­˜è¿›è¡Œä¿æŠ¤ï¼Œå°±å¯ä»¥è½¬æ¢æˆå¯¹æ®µçš„ä¿æŠ¤ã€‚ æ®µæè¿°ç¬¦ ä¿æŠ¤æ¨¡å¼ä¸‹ 16 ä½çš„æ®µå¯„å­˜å™¨æ”¾ä¸ä¸‹ 32ä½çš„æ®µåŸºåœ°å€å’Œæ®µå†…åç§»ï¼Œé€šè¿‡å€Ÿå†…å­˜ç©ºé—´ï¼ŒæŠŠæè¿°ä¸€ä¸ªæ®µçš„ä¿¡æ¯å°è£…æˆç‰¹å®šæ ¼å¼çš„æ®µæè¿°ç¬¦ï¼Œæ”¾åœ¨å†…å­˜ä¸­ã€‚ å…¨å±€æè¿°ç¬¦ å¤šä¸ªæ®µæè¿°ç¬¦åœ¨å†…å­˜ä¸­å½¢æˆå…¨å±€æ®µæè¿°ç¬¦è¡¨ï¼Œè¯¥è¡¨çš„åŸºåœ°å€å’Œé•¿åº¦ç”± CPU å’Œ GDTR å¯„å­˜å™¨æŒ‡ç¤ºã€‚ è®¿é—®æ®µ ä¿æŠ¤æ¨¡å¼ä¸‹æ®µå¯„å­˜å™¨ä¼šå­˜æ”¾æ®µæè¿°ç¬¦ç´¢å¼•ï¼ˆè€Œä¸æ˜¯æ®µåŸºåœ°å€ï¼‰ è®¿é—®å†…å­˜åœ°å€æ—¶ï¼Œæ®µå¯„å­˜å™¨ä¸­çš„ç´¢å¼•ç»“åˆ GDTR å¯„å­˜å™¨æ‰¾åˆ°å†…å­˜ä¸­çš„æ®µæè¿°ç¬¦ï¼Œå†æ ¹æ®å…¶ä¸­æ®µä¿¡æ¯åˆ¤æ–­æ˜¯å¦èƒ½è®¿é—®æˆåŠŸã€‚ ","date":"2022-03-13","objectID":"/posts/os/common/3.html/:2:3","tags":["os","note"],"title":"cpuå·¥ä½œæ¨¡å¼","uri":"/posts/os/common/3.html/"},{"categories":["os"],"content":"ä¿æŠ¤æ¨¡å¼æ®µé€‰æ‹©å­ ä¿æŠ¤æ¨¡å¼ä¸‹çš„æ®µå¯„å­˜å™¨å­˜æ”¾çš„æœ‰å½±å­å¯„å­˜å™¨ã€æ®µæè¿°ç¬¦ç´¢å¼•ã€æè¿°ç¬¦è¡¨ç´¢å¼•ã€æƒé™çº§åˆ«ç»„æˆçš„ï¼š å½±å­å¯„å­˜å™¨ï¼šç¡¬ä»¶æ“ä½œï¼Œé«˜é€Ÿç¼“å­˜æå‡æ€§èƒ½ï¼Œ64ä½é€‚é…æ®µæè¿°ç¬¦æ•°æ® ä½ä¸‰ä½çš„ TI å’Œ RPLï¼šå¯¹é½æ®µæè¿°ç¬¦çš„8å­—èŠ‚ï¼Œæ¯ä¸ªç´¢å¼•ä½3ä½éƒ½ä¸º0 CPLï¼ˆå½“å‰æƒé™çº§åˆ«ï¼‰ï¼šé€šå¸¸ç”± CS å’Œ SS ä¸­ RPL ç»„æˆï¼Œå½“ CPL å¤§äºç›®æ ‡æ®µ DPL åˆ™ç¦æ­¢è®¿é—® ","date":"2022-03-13","objectID":"/posts/os/common/3.html/:2:4","tags":["os","note"],"title":"cpuå·¥ä½œæ¨¡å¼","uri":"/posts/os/common/3.html/"},{"categories":["os"],"content":"ä¿æŠ¤æ¨¡å¼å¹³å¦æ¨¡å‹ åˆ†æ®µæ¨¡å‹æœ‰å¾ˆå¤šæƒé™ï¼Œç°ä»£æ“ä½œç³»ç»Ÿå¤§å¤šä½¿ç”¨åˆ†é¡µæ¨¡å‹ã€‚ åœ¨ x86 CPU ä¸­ä¸èƒ½ç›´æ¥ä½¿ç”¨åˆ†é¡µæ¨¡å‹ï¼Œéœ€è¦åœ¨åˆ†æ®µæ¨¡å‹çš„å‰æä¸‹ï¼Œæ ¹æ®éœ€è¦å†³å®šæ˜¯å¦è¦å¼€å¯åˆ†é¡µã€‚å› ä¸ºç¡¬ä»¶çš„è§„å®šï¼Œæˆ‘ä»¬åªèƒ½ç®€åŒ–è®¾è®¡ï¼Œæ¥ä½¿åˆ†æ®µæˆä¸ºä¸€ç§â€œè™šè®¾â€ï¼Œå³ä¿æŠ¤æ¨¡å¼çš„å¹³å¦æ¨¡å‹ã€‚ CPU 32 ä½çš„å¯„å­˜å™¨æœ€å¤šåªèƒ½äº§ç”Ÿ 4GB å¤§å°çš„åœ°å€ï¼Œè€Œä¸€ä¸ªæ®µé•¿åº¦ä¹Ÿåªèƒ½æ˜¯ 4GBï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠï¼š æ‰€æœ‰æ®µçš„åŸºåœ°å€è®¾ä¸º 0 æ®µçš„é•¿åº¦è®¾ä¸º 0xFFFFF æ®µé•¿åº¦çš„ç²’åº¦è®¾ä¸º 4KB è¿™æ ·æ‰€æœ‰çš„æ®µéƒ½æŒ‡å‘åŒä¸€ä¸ªï¼ˆ0~4GB-1ï¼‰å­—èŠ‚å¤§å°çš„åœ°å€ç©ºé—´ã€‚ GDT_START: knull_dsc: dq 0 ;ç¬¬ä¸€ä¸ªæ®µæè¿°ç¬¦CPUç¡¬ä»¶è§„å®šå¿…é¡»ä¸º0 kcode_dsc: dq 0x00cf9e000000ffff ;æ®µåŸºåœ°å€=0ï¼Œæ®µé•¿åº¦=0xfffff ;G=1,D/B=1,L=0,AVL=0 ;P=1,DPL=0,S=1 ;T=1,C=1,R=1,A=0 ;ï¼ˆæ®µåŸºå€31:24ï¼‰ 0000 0000 ;ï¼ˆGã€D/Bã€Lã€AVLï¼‰1100 ;ï¼ˆæ®µé•¿åº¦19:16ï¼‰1111 ;ï¼ˆPã€DPLã€DPLã€Sã€Tã€Cã€Rã€Aï¼‰1001 1110 ;ï¼ˆæ®µåŸºå€23:0ï¼‰0000 0000 0000 0000 0000 0000 ;ï¼ˆæ®µé•¿åº¦15:0ï¼‰1111 1111 1111 1111 kdata_dsc: dq 0x00cf92000000ffff ;æ®µåŸºåœ°å€=0ï¼Œæ®µé•¿åº¦=0xfffff ;G=1,D/B=1,L=0,AVL=0 ;P=1,DPL=0,S=1 ;T=0,C=0,R=1,A=0 GDT_END: GDT_PTR: GDTLEN dw GDT_END-GDT_START-1 GDTBASE dd GDT_START ","date":"2022-03-13","objectID":"/posts/os/common/3.html/:2:5","tags":["os","note"],"title":"cpuå·¥ä½œæ¨¡å¼","uri":"/posts/os/common/3.html/"},{"categories":["os"],"content":"ä¿æŠ¤æ¨¡å¼ä¸­æ–­ å®æ¨¡å¼ä¸‹ CPU ä¸éœ€è¦åšæƒé™æ£€æŸ¥ï¼Œæ‰€ä»¥å¯ç›´æ¥é€šè¿‡ä¸­æ–­å‘é‡è¡¨ä¸­çš„å€¼è£…è½½ CS:IP å¯„å­˜å™¨ ä¿æŠ¤æ¨¡å¼ä¸‹çš„ä¸­æ–­éœ€è¦æƒé™æ£€æŸ¥å’Œç‰¹æƒçº§çš„åˆ‡æ¢ï¼Œæ‰€ä»¥éœ€è¦æ‰©å±•ä¸­æ–­å‘é‡è¡¨çš„ä¿¡æ¯ï¼Œå³æ¯ä¸ªä¸­æ–­ç”¨ä¸€ä¸ªä¸­æ–­é—¨æè¿°ç¬¦æ¥è¡¨ç¤ºï¼ˆç®€ç§°ä¸ºä¸­æ–­é—¨ï¼‰ ä¿æŠ¤æ¨¡å¼ä¸‹ä¸­æ–­å®ç°ä¸å®æ¨¡å¼å¤§è‡´ç›¸åŒï¼ŒåŒºåˆ«åœ¨äºæ¡ç›®æ¢æˆäº†ä¸­æ–­é—¨æè¿°ç¬¦ã€‚å…¶äº§ç”Ÿä¸­æ–­çš„ä¸»è¦è¿‡ç¨‹å¦‚ä¸‹ï¼š æ£€æŸ¥ä¸­æ–­é—¨æè¿°ç¬¦ æ£€æŸ¥ä¸­æ–­é—¨æè¿°ç¬¦ä¸­çš„æ®µé€‰æ‹©å­æŒ‡å‘çš„æ®µæè¿°ç¬¦ æƒé™æ£€æŸ¥ï¼š è‹¥ CPL \u003c= ä¸­æ–­é—¨çš„ DPLï¼ˆæœ‰æƒé™èƒ½æ‰§è¡Œä¸­æ–­ï¼‰ ä¸” CPL \u003e= ä¸­æ–­é—¨ä¸­çš„æ®µé€‰æ‹©å­æ‰€æŒ‡å‘çš„æ®µæè¿°ç¬¦çš„ DPLï¼ˆèƒ½å¤Ÿè¿›å…¥ç›¸åº”çš„æœåŠ¡ç¨‹åºï¼‰ï¼Œå°±æŒ‡å‘æ®µæè¿°ç¬¦çš„ DPLï¼ˆæ­¤æ—¶ CPL ç­‰äº DPLï¼‰ è‹¥ CPL \u003e ä¸­æ–­é—¨ä¸­çš„æ®µé€‰æ‹©å­æŒ‡å‘çš„æ®µæè¿°ç¬¦çš„ DPLï¼Œåˆ™è¿›è¡Œæ ˆåˆ‡æ¢ï¼ˆéœ€è¦ä» TSS ä¸­åŠ è½½å…·ä½“æƒé™çš„ SSã€ESPï¼Œä¹Ÿè¦å¯¹ SS ä¸­æ®µé€‰æ‹©å­æŒ‡å‘çš„æ®µæè¿°ç¬¦è¿›è¡Œæ£€æŸ¥ï¼‰ æ£€æŸ¥ååŠ è½½ä¸­æ–­é—¨æè¿°ç¬¦ä¸­ï¼š ç›®æ ‡ä»£ç æ®µé€‰æ‹©å­åˆ° CS å¯„å­˜å™¨ä¸­ ç›®æ ‡ä»£ç æ®µåç§»åŠ è½½åˆ° EIP å¯„å­˜å™¨ä¸­ ","date":"2022-03-13","objectID":"/posts/os/common/3.html/:2:6","tags":["os","note"],"title":"cpuå·¥ä½œæ¨¡å¼","uri":"/posts/os/common/3.html/"},{"categories":["os"],"content":"åˆ‡æ¢åˆ°ä¿æŠ¤æ¨¡å¼ x86 CPU åœ¨ç¬¬ä¸€æ¬¡åŠ ç”µå’Œæ¯æ¬¡ reset åï¼Œéƒ½ä¼šè‡ªåŠ¨è¿›å…¥å®æ¨¡å¼ï¼Œè‹¥è¦è¿›å…¥ä¿æŠ¤æ¨¡å¼ï¼Œåˆ™éœ€è¦é€šè¿‡ä»£ç å®ç°åˆ‡æ¢,å…¶æ­¥éª¤å¦‚ä¸‹: å‡†å¤‡å…¨å±€æ®µæè¿°ç¬¦è¡¨ GDT_START: knull_dsc: dq 0 kcode_dsc: dq 0x00cf9e000000ffff kdata_dsc: dq 0x00cf92000000ffff GDT_END: GDT_PTR: GDTLEN dw GDT_END-GDT_START-1 GDTBASE dd GDT_START åŠ è½½è®¾ç½® GDTR å¯„å­˜å™¨ï¼Œä½¿ä¹‹æŒ‡å‘å…¨å±€æ®µæè¿°ç¬¦è¡¨ lgdt [GDT_PTR] è®¾ç½® CR0 å¯„å­˜å™¨ï¼Œå¼€å¯ä¿æŠ¤æ¨¡å¼ ;å¼€å¯ PE mov eax, cr0 bts eax, 0 ;CR0.PE =1 ;btsæŒ‡ä»¤çš„æ„æ€æ˜¯ bit test and set ä½æµ‹è¯•å¹¶è®¾ç½® ;åˆ¤æ–­ eax ä¸0ï¼Œè‹¥ eax == 0ï¼Œbts ä¼šå°† CF = 1ï¼Œå¹¶å°†eaxç½®ä½ï¼ˆå³è®¾ç½®ä¸º1ï¼‰ ;ç„¶åæŠŠ CR0 çš„æœ€ä½ä½è®¾ä¸º1ä¹‹åï¼Œå³å¼€å¯äº†ä¿æŠ¤æ¨¡å¼ mov cr0, eax è¿›è¡Œé•¿è·³è½¬ï¼ŒåŠ è½½ CS æ®µå¯„å­˜å™¨ï¼Œå³æ®µé€‰æ‹©å­ é•¿è·³è½¬çš„ç›®çš„åœ¨äºæ— æ³•ç›´æ¥æˆ–é—´æ¥ mov ä¸€ä¸ªæ•°æ®åˆ° CS å¯„å­˜å™¨ä¸­ï¼Œå› ä¸ºåˆšåˆšå¼€å¯ä¿æŠ¤æ¨¡å¼æ—¶ï¼ŒCS çš„å½±å­å¯„å­˜å™¨è¿˜æ˜¯å®æ¨¡å¼ä¸‹çš„å€¼ï¼Œæ‰€ä»¥éœ€è¦å‘Šè¯‰ CPU åŠ è½½æ–°çš„æ®µä¿¡æ¯ã€‚ jmp dword 0x8 :_32bits_mode ;_32bits_modeä¸º32ä½ä»£ç æ ‡å·å³æ®µåç§» è¿™é‡Œå¡«å…¥CSçš„å€¼æ˜¯0x8ï¼Œæ ¹æ®æ®µé€‰æ‹©å­çš„æ ¼å¼å®šä¹‰ï¼š 0x8ï¼š INDEX TI CPL 0000 0000 1 00 0 INDEXä»£è¡¨GDTä¸­çš„ç´¢å¼• TIä»£è¡¨ä½¿ç”¨GDTRä¸­çš„GDT CPLä»£è¡¨å¤„äºç‰¹æƒçº§ï¼Œå³GDTè¡¨ä¸­çš„ç¬¬1ä¸ªï¼ˆindexä»0å¼€å§‹ï¼‰æè¿°ç¬¦ _32bits_modeä½œä¸ºæ®µå†…åç§»ï¼Œç„¶åå¾— GDTç¬¬ä¸€ä¸ª1æ®µæè¿°ç¬¦ + _32bits_modeçš„å†…å­˜åœ°å€ = æ®µåŸºå€ + æ®µå†…åç§»åœ°å€ è¿›å…¥ä¿æŠ¤æ¨¡å¼ CPU å‘ç°äº† CRO å¯„å­˜å™¨ç¬¬ 0 ä½çš„å€¼æ˜¯ 1 æŒ‰ GDTR çš„æŒ‡ç¤ºæ‰¾åˆ°å…¨å±€æè¿°ç¬¦è¡¨ ç„¶åæ ¹æ®ç´¢å¼•å€¼ 8ï¼Œè¿›è¡Œä¸€ç³»åˆ—åˆæ³•æ£€æŸ¥ æŠŠæ–°çš„æ®µæè¿°ç¬¦ä¿¡æ¯åŠ è½½åˆ° CS å½±å­å¯„å­˜å™¨ ","date":"2022-03-13","objectID":"/posts/os/common/3.html/:2:7","tags":["os","note"],"title":"cpuå·¥ä½œæ¨¡å¼","uri":"/posts/os/common/3.html/"},{"categories":["os"],"content":"é•¿æ¨¡å¼ é•¿æ¨¡å¼åˆå AMD64ï¼ˆè¯¥æ ‡å‡†æ˜¯ AMD å…¬å¸æœ€æ—©å®šä¹‰çš„ï¼‰ï¼Œå®ƒä½¿ CPU åœ¨ç°æœ‰çš„åŸºç¡€ä¸Šæœ‰äº† 64 ä½çš„å¤„ç†èƒ½åŠ›ï¼ˆå®Œæˆ 64 ä½æ•°æ®è¿ç®—å’Œå¯»å€ 64 ä½çš„åœ°å€ç©ºé—´ï¼‰ã€‚ ","date":"2022-03-13","objectID":"/posts/os/common/3.html/:3:0","tags":["os","note"],"title":"cpuå·¥ä½œæ¨¡å¼","uri":"/posts/os/common/3.html/"},{"categories":["os"],"content":"é•¿æ¨¡å¼å¯„å­˜å™¨ é•¿æ¨¡å¼ç›¸æ¯”äºä¿æŠ¤æ¨¡å¼ï¼Œå¢åŠ äº†ä¸€äº›é€šç”¨å¯„å­˜å™¨ï¼Œå¹¶æ‰©å±•é€šç”¨å¯„å­˜å™¨çš„ä½å®½ï¼Œæ‰€æœ‰çš„é€šç”¨å¯„å­˜å™¨éƒ½æ˜¯ 64 ä½ï¼Œè¿˜å¯ä»¥å•ç‹¬ä½¿ç”¨ä½ 32 ä½ã€‚ ","date":"2022-03-13","objectID":"/posts/os/common/3.html/:3:1","tags":["os","note"],"title":"cpuå·¥ä½œæ¨¡å¼","uri":"/posts/os/common/3.html/"},{"categories":["os"],"content":"é•¿æ¨¡å¼æ®µæè¿°ç¬¦ ä¸ä¿æŠ¤æ¨¡å¼ç»å¤§å¤šæ•°ç‰¹æ€§ç›¸åŒï¼Œå¦‚ç‰¹æƒçº§å’Œæƒé™æ£€æŸ¥ã€‚ é•¿æ¨¡å¼ä¸‹çš„æ®µæè¿°ç¬¦æ ¼å¼å¦‚ä¸‹ï¼š åœ¨é•¿æ¨¡å¼ä¸‹ï¼Œå¼±åŒ–æ®µæ¨¡å¼ç®¡ç†ï¼ŒCPU ä¸å†å¯¹æ®µåŸºå€å’Œæ®µé•¿åº¦è¿›è¡Œæ£€æŸ¥ï¼ˆåœ°å€æ£€æŸ¥äº¤ç»™ MMUï¼‰ï¼Œåªå¯¹ DPL è¿›è¡Œç›¸å…³çš„æ£€æŸ¥ã€‚åŒæ ·ä¹Ÿæœ‰å…¨å±€æ®µæè¿°ç¬¦ï¼Œä¸”ç”± CPU çš„ GDTR å¯„å­˜å™¨æŒ‡å‘ã€‚ ex64_GDT: null_dsc: dq 0 ;ç¬¬ä¸€ä¸ªæ®µæè¿°ç¬¦CPUç¡¬ä»¶è§„å®šå¿…é¡»ä¸º0 c64_dsc:dq 0x0020980000000000 ;64ä½ä»£ç æ®µ ;æ— æ•ˆä½å¡«0 ;D/B=0,L=1,AVL=0 ;P=1,DPL=0,S=1 ;T=1,C=0,R=0,A=0 d64_dsc:dq 0x0000920000000000 ;64ä½æ•°æ®æ®µ ;æ— æ•ˆä½å¡«0 ;P=1,DPL=0,S=1 ;T=0,C/E=0,R/W=1,A=0 eGdtLen equ $ - null_dsc ;GDTé•¿åº¦ eGdtPtr:dw eGdtLen - 1 ;GDTç•Œé™ dq ex64_GDT æ®µæè¿°ç¬¦çš„ DPL=0ï¼Œè¿™è¯´æ˜éœ€è¦æœ€é«˜æƒé™å³ CPL=0 æ‰èƒ½è®¿é—®ã€‚ è‹¥æ˜¯æ•°æ®æ®µçš„è¯ï¼ŒGã€D/Bã€L ä½éƒ½æ˜¯æ— æ•ˆçš„ã€‚ ","date":"2022-03-13","objectID":"/posts/os/common/3.html/:3:2","tags":["os","note"],"title":"cpuå·¥ä½œæ¨¡å¼","uri":"/posts/os/common/3.html/"},{"categories":["os"],"content":"é•¿æ¨¡å¼ä¸­æ–­ é•¿æ¨¡å¼çš„ä¸­æ–­ä¸ä¿æŠ¤æ¨¡å¼çš„ä¸­æ–­è¿‡ç¨‹å¤§è‡´ç›¸åŒï¼Œä¸»è¦åŒºåˆ«åœ¨äºä¸­æ–­é—¨æè¿°ç¬¦æ ¼å¼ä¸ºé€‚åº”64ä½è¿›è¡Œäº†ä¿®æ”¹å’Œæ‰©å±•ï¼š åœ¨åŸæœ‰åŸºç¡€ä¸Šå¢åŠ  8 å­—èŠ‚ï¼Œç”¨äºå­˜æ”¾ç›®æ ‡æ®µåç§»çš„é«˜ 32 ä½å€¼ï¼ˆæ”¯æŒ 64 ä½å¯»å€ï¼‰ ç›®æ ‡ä»£ç æ®µé€‰æ‹©å­å¯¹åº”çš„ä»£ç æ®µæè¿°ç¬¦å¿…é¡»æ˜¯ 64 ä½çš„ä»£ç æ®µ IST æ˜¯ 64 ä½ TSS ä¸­çš„ IST æŒ‡é’ˆ ","date":"2022-03-13","objectID":"/posts/os/common/3.html/:3:3","tags":["os","note"],"title":"cpuå·¥ä½œæ¨¡å¼","uri":"/posts/os/common/3.html/"},{"categories":["os"],"content":"åˆ‡æ¢åˆ°é•¿æ¨¡å¼ åˆ‡æ¢åˆ°é•¿æ¨¡å¼çš„æ­¥éª¤å¦‚ä¸‹ï¼š å‡†å¤‡é•¿æ¨¡å¼å…¨å±€æ®µæè¿°ç¬¦è¡¨ ex64_GDT: null_dsc: dq 0 ;ç¬¬ä¸€ä¸ªæ®µæè¿°ç¬¦CPUç¡¬ä»¶è§„å®šå¿…é¡»ä¸º0 c64_dsc:dq 0x0020980000000000 ;64ä½ä»£ç æ®µ d64_dsc:dq 0x0000920000000000 ;64ä½æ•°æ®æ®µ eGdtLen equ $ - null_dsc ;GDTé•¿åº¦ eGdtPtr:dw eGdtLen - 1 ;GDTç•Œé™ dq ex64_GDT å‡†å¤‡ MMU é¡µè¡¨å¼€å¯åˆ†é¡µ mov eax, cr4 bts eax, 5 ;CR4.PAE = 1 mov cr4, eax ;å¼€å¯ PAE mov eax, PAGE_TLB_BADR ;é¡µè¡¨ç‰©ç†åœ°å€ mov cr3, eax é•¿æ¨¡å¼ä¸‹å†…å­˜åœ°å€ç©ºé—´çš„ä¿æŠ¤äº¤ç»™äº† MMUï¼ŒMMU ä¾èµ–é¡µè¡¨å¯¹åœ°å€è¿›è¡Œè½¬æ¢ï¼Œé¡µè¡¨æœ‰ç‰¹å®šçš„æ ¼å¼å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œå…¶åœ°å€ç”± CPU çš„ CR3 å¯„å­˜å™¨æŒ‡å‘ åŠ è½½ GDTR å¯„å­˜å™¨ï¼Œä½¿ä¹‹æŒ‡å‘å…¨å±€æ®µæè¿°è¡¨ lgdt [eGdtPtr] å¼€å¯é•¿æ¨¡å¼åŒæ—¶å¼€å¯ä¿æŠ¤æ¨¡å¼å’Œåˆ†é¡µæ¨¡å¼ ;å¼€å¯ 64ä½é•¿æ¨¡å¼ mov ecx, IA32_EFER rdmsr bts eax, 8 ;IA32_EFER.LME =1 wrmsr ;å¼€å¯ ä¿æŠ¤æ¨¡å¼å’Œåˆ†é¡µæ¨¡å¼ mov eax, cr0 bts eax, 0 ;CR0.PE =1 bts eax, 31 mov cr0, eax åœ¨å®ç°é•¿æ¨¡å¼æ—¶å®šä¹‰äº† MSR å¯„å­˜å™¨ï¼Œéœ€è¦ç”¨ä¸“ç”¨çš„æŒ‡ä»¤ rdmsrã€wrmsr è¿›è¡Œè¯»å†™ï¼ŒIA32_EFER å¯„å­˜å™¨çš„åœ°å€ä¸º 0xC0000080ï¼Œå®ƒçš„ç¬¬ 8 ä½å†³å®šäº†æ˜¯å¦å¼€å¯é•¿æ¨¡å¼ã€‚ è¿›è¡Œè·³è½¬ï¼ŒåŠ è½½ CS æ®µå¯„å­˜å™¨ï¼Œåˆ·æ–°å…¶å½±å­å¯„å­˜å™¨ jmp 08:entry64 ;entry64ä¸ºç¨‹åºæ ‡å·å³64ä½åç§»åœ°å€ ","date":"2022-03-13","objectID":"/posts/os/common/3.html/:3:4","tags":["os","note"],"title":"cpuå·¥ä½œæ¨¡å¼","uri":"/posts/os/common/3.html/"},{"categories":["os"],"content":"å‚è€ƒ https://time.geekbang.org/column/intro/100078401?tab=catalog ","date":"2022-03-13","objectID":"/posts/os/common/3.html/:4:0","tags":["os","note"],"title":"cpuå·¥ä½œæ¨¡å¼","uri":"/posts/os/common/3.html/"},{"categories":["search engine"],"content":"ç®€ä»‹ èšåˆæ˜¯ Elasticsearch é™¤æœç´¢ä»¥å¤–ï¼Œæä¾›çš„é’ˆå¯¹ ES æ•°æ®è¿›è¡Œç»Ÿè®¡åˆ†æåŠŸèƒ½ã€‚é€šè¿‡èšåˆï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°æ•°æ®çš„æ¦‚è§ˆï¼Œæ˜¯åˆ†æå’Œæ€»ç»“å…¨å¥—çš„æ•°æ®ï¼Œè€Œä¸æ˜¯å¯»æ‰¾å•ä¸ªæ–‡æ¡£ã€‚ Elasticsearch çš„ä¸»è¦ä¼˜ç‚¹å°±æ˜¯ï¼š å®æ—¶æ€§é«˜ï¼Œå’Œ Hadoop ç›¸æ¯”ä¼šæ›´å¿« æ€§èƒ½é«˜ï¼Œå¯ç›´æ¥é€šè¿‡æä¾›çš„APIå°±èƒ½å¾—åˆ°åˆ†æç»“æœ ","date":"2022-03-08","objectID":"/posts/search_engine/es/7.html/:1:0","tags":["search_engine","note","es"],"title":"ElasticSearchèšåˆç®€ä»‹","uri":"/posts/search_engine/es/7.html/"},{"categories":["search engine"],"content":"èšåˆçš„åˆ†ç±» é›†åˆçš„åˆ†ç±»ä¸»è¦æœ‰ä»¥ä¸‹ï¼š Bucket Aggregationï¼šä¸€äº›åˆ—æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„æ–‡æ¡£çš„é›†åˆ Metric Aggregationï¼šä¸€äº›æ•°å­¦è¿ç®—ï¼Œå¯ä»¥å¯¹æ–‡æ¡£å­—æ®µè¿›è¡Œç»Ÿè®¡åˆ†æ Pipeline Aggregationï¼šå¯¹å…¶ä»–çš„èšåˆç»“æœè¿›è¡ŒäºŒæ¬¡èšåˆ Matrix Aggregationï¼šæ”¯æŒå¯¹å¤šä¸ªå­—æ®µçš„æ“ä½œå¹¶æå–ä¸€ä¸ªç»“æœçŸ©é˜µ ","date":"2022-03-08","objectID":"/posts/search_engine/es/7.html/:2:0","tags":["search_engine","note","es"],"title":"ElasticSearchèšåˆç®€ä»‹","uri":"/posts/search_engine/es/7.html/"},{"categories":["search engine"],"content":"Bucket\u0026Metric ä¸SQLè¿›è¡Œæ¯”è¾ƒï¼š SELECT COUNT(brand) =\u003e Metricï¼šä¸€äº›ç³»åˆ—çš„ç»Ÿè®¡æ–¹æ³• FROM cars GROUP by band =\u003e Bucketï¼šä¸€ç»„æ»¡è¶³æ¡ä»¶çš„æ–‡æ¡£ #ä»·æ ¼ç»Ÿè®¡ä¿¡æ¯+å¤©æ°”ä¿¡æ¯ GET kibana_sample_data_flights/_search { \"size\": 0, \"aggs\":{ \"flight_dest\":{ \"terms\":{ \"field\":\"DestCountry\" }, \"aggs\":{ \"stats_price\":{ \"stats\":{ \"field\":\"AvgTicketPrice\" } }, \"wather\":{ \"terms\": { \"field\": \"DestWeather\", \"size\": 5 } } } } } } #è¿”å›å¦‚ä¸‹ï¼š { \"took\" : 5, \"timed_out\" : false, \"_shards\" : { \"total\" : 1, \"successful\" : 1, \"skipped\" : 0, \"failed\" : 0 }, \"hits\" : { \"total\" : { \"value\" : 10000, \"relation\" : \"gte\" }, \"max_score\" : null, \"hits\" : [ ] }, \"aggregations\" : { \"flight_dest\" : { \"doc_count_error_upper_bound\" : 0, \"sum_other_doc_count\" : 3187, \"buckets\" : [ { \"key\" : \"IT\", \"doc_count\" : 2371, \"max_price\" : { \"value\" : 1195.3363037109375 }, \"min_price\" : { \"value\" : 100.57646942138672 }, \"avg_price\" : { \"value\" : 586.9627099618385 } }, { \"key\" : \"US\", \"doc_count\" : 1987, \"max_price\" : { \"value\" : 1199.72900390625 }, \"min_price\" : { \"value\" : 100.14596557617188 }, \"avg_price\" : { \"value\" : 595.7743908825026 } }, { \"key\" : \"CN\", \"doc_count\" : 1096, \"max_price\" : { \"value\" : 1198.4901123046875 }, \"min_price\" : { \"value\" : 102.90382385253906 }, \"avg_price\" : { \"value\" : 640.7101617033464 } }, { \"key\" : \"CA\", \"doc_count\" : 944, \"max_price\" : { \"value\" : 1198.8525390625 }, \"min_price\" : { \"value\" : 100.5572509765625 }, \"avg_price\" : { \"value\" : 648.7471090413757 } }, { \"key\" : \"JP\", \"doc_count\" : 774, \"max_price\" : { \"value\" : 1199.4913330078125 }, \"min_price\" : { \"value\" : 103.97209930419922 }, \"avg_price\" : { \"value\" : 650.9203447346847 } }, { \"key\" : \"RU\", \"doc_count\" : 739, \"max_price\" : { \"value\" : 1196.7423095703125 }, \"min_price\" : { \"value\" : 101.0040054321289 }, \"avg_price\" : { \"value\" : 662.9949632162009 } }, { \"key\" : \"CH\", \"doc_count\" : 691, \"max_price\" : { \"value\" : 1196.496826171875 }, \"min_price\" : { \"value\" : 101.3473129272461 }, \"avg_price\" : { \"value\" : 575.1067587028537 } }, { \"key\" : \"GB\", \"doc_count\" : 449, \"max_price\" : { \"value\" : 1197.78564453125 }, \"min_price\" : { \"value\" : 111.34574890136719 }, \"avg_price\" : { \"value\" : 650.5326856005696 } }, { \"key\" : \"AU\", \"doc_count\" : 416, \"max_price\" : { \"value\" : 1197.6326904296875 }, \"min_price\" : { \"value\" : 102.2943115234375 }, \"avg_price\" : { \"value\" : 669.5588319668403 } }, { \"key\" : \"PL\", \"doc_count\" : 405, \"max_price\" : { \"value\" : 1185.43701171875 }, \"min_price\" : { \"value\" : 104.28328704833984 }, \"avg_price\" : { \"value\" : 662.4497233072917 } } ] } } } Bucket Elasticsearch æä¾›äº†å¾ˆå¤šç±»å‹çš„ Bucketï¼Œå¯ä»¥å¤šç§æ–¹å¼åˆ’åˆ†æ–‡æ¡£: Term\u0026Rangeï¼šæ—¶é—´/å¹´é¾„åŒºé—´/åœ°ç†ä½ç½®ç­‰ æ¯”å¦‚ä¸‹é¢è¿™äº›ä¾‹å­ï¼š æ­å·å±äºæµ™æ±Ÿ/ä¸€ä¸ªæ¼”å‘˜å±äºç”·æˆ–å¥³æ€§ åµŒå¥—å…³ç³» - æ­å·å±äºæµ™æ±Ÿå±äºä¸­å›½å±äºäºšæ´² #æŒ‰ç…§ç›®çš„åœ°è¿›è¡Œåˆ†æ¡¶ç»Ÿè®¡ GET kibana_sample_data_flights/_search { \"size\": 0, \"aggs\":{ \"flight_dest\":{ \"terms\":{ \"field\":\"DestCountry\" } } } } #è¿”å›å¦‚ä¸‹ï¼š { \"took\" : 33, \"timed_out\" : false, \"_shards\" : { \"total\" : 1, \"successful\" : 1, \"skipped\" : 0, \"failed\" : 0 }, \"hits\" : { \"total\" : { \"value\" : 10000, \"relation\" : \"gte\" }, \"max_score\" : null, \"hits\" : [ ] }, \"aggregations\" : { \"flight_dest\" : { \"doc_count_error_upper_bound\" : 0, \"sum_other_doc_count\" : 3187, \"buckets\" : [ { \"key\" : \"IT\", \"doc_count\" : 2371 }, { \"key\" : \"US\", \"doc_count\" : 1987 }, { \"key\" : \"CN\", \"doc_count\" : 1096 }, { \"key\" : \"CA\", \"doc_count\" : 944 }, { \"key\" : \"JP\", \"doc_count\" : 774 }, { \"key\" : \"RU\", \"doc_count\" : 739 }, { \"key\" : \"CH\", \"doc_count\" : 691 }, { \"key\" : \"GB\", \"doc_count\" : 449 }, { \"key\" : \"AU\", \"doc_count\" : 416 }, { \"key\" : \"PL\", \"doc_count\" : 405 } ] } } } Metric Metric ä¼šåŸºäºæ•°æ®é›†è®¡ç®—ç»“æœï¼Œé™¤äº†æ”¯æŒåœ¨å­—æ®µä¸Šè¿›è¡Œè®¡ç®—ï¼ŒåŒæ ·æ”¯æŒåœ¨è„šæœ¬ï¼ˆpainless scriptï¼‰äº§ç”Ÿçš„ç»“æœä¹‹ä¸Šè¿›è¡Œè®¡ç®—ï¼š å¤§éƒ¨åˆ† Metric æ˜¯æ•°å­¦è®¡ç®—ï¼Œä»…è¾“å‡ºä¸€ä¸ªå€¼ min/max/sum/avg/cardinality éƒ¨åˆ† metric æ”¯æŒè¾“å‡ºå¤šä¸ªæ•°å€¼ stats/percentiles/percentile_ranks #æŸ¥çœ‹èˆªç­ç›®çš„åœ°çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œå¢åŠ å¹³å‡ï¼Œæœ€é«˜æœ€ä½ä»·æ ¼ GET kibana_sample_data_flights/_search { \"size\": 0, \"aggs\":{ \"flight_dest\":{ \"terms\":{ \"field\":\"DestCountry\" }, \"aggs\":{ \"avg_price\":{ \"avg\":{ \"field\":\"AvgTicketPrice\" } }, \"max_price\":{ \"max\":{ \"field\":\"AvgTicketPrice\" } }, \"min_price\":{ \"min\":{ \"field\":\"AvgTicketPrice\" } } } } } } #è¿”å›å¦‚ä¸‹ï¼š { \"took\" : 5, \"timed_out\" : false, \"_shar","date":"2022-03-08","objectID":"/posts/search_engine/es/7.html/:2:1","tags":["search_engine","note","es"],"title":"ElasticSearchèšåˆç®€ä»‹","uri":"/posts/search_engine/es/7.html/"},{"categories":["search engine"],"content":"å‚è€ƒ https://time.geekbang.org/course/intro/100030501?tab=catalog ","date":"2022-03-08","objectID":"/posts/search_engine/es/7.html/:3:0","tags":["search_engine","note","es"],"title":"ElasticSearchèšåˆç®€ä»‹","uri":"/posts/search_engine/es/7.html/"},{"categories":["search engine"],"content":"Index Template Index Template å¯ä»¥è®¾å®š Mappings å’Œ Settingsï¼Œå¹¶æŒ‰ç…§ä¸€å®šçš„è§„åˆ™è‡ªåŠ¨åŒ¹é…åˆ°æ–°åˆ›å»ºçš„ç´¢å¼•ä¸Šã€‚ è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼š æ¨¡æ¿ä»…åœ¨ä¸€ä¸ªç´¢å¼•è¢«æ–°åˆ›å»ºæ—¶æ‰ä¼šç”Ÿæ•ˆ ä¿®æ”¹æ¨¡æ¿ä¸ä¼šå½±å“å·²åˆ›å»ºçš„ç´¢å¼• å¯ä»¥è®¾å®šå¤šä¸ªç´¢å¼•æ¨¡æ¿ï¼Œè¿™äº›è®¾ç½®ä¼šè¢«\"merge\"åœ¨ä¸€èµ· å¯æŒ‡å®šorderçš„å€¼ï¼Œæ§åˆ¶\"merging\"çš„è¿‡ç¨‹ Index Template çš„å·¥ä½œæ–¹å¼é€šè¿‡ä¸€ä¸ªæ–°ç´¢å¼•è¢«åˆ›å»ºæ—¶è§‚å¯Ÿï¼š åº”ç”¨é»˜è®¤çš„ settings å’Œ mappings åº”ç”¨ order æ•°å€¼ä½çš„ Index Template ä¸­çš„è®¾å®š åº”ç”¨ order æ•°å€¼é«˜çš„ Index Template ä¸­çš„è®¾å®šï¼Œä¹‹å‰çš„è®¾å®šä¼šè¢«è¦†ç›– åº”ç”¨åˆ›å»ºç´¢å¼•æ—¶ï¼Œç”¨æˆ·æ‰€æŒ‡å®šçš„ Settings å’Œ Mappingsï¼Œå¹¶è¦†ç›–ä¹‹å‰æ¨¡æ¿ä¸­çš„è®¾å®š #Create a default template PUT _template/template_default { \"index_patterns\": [\"*\"], \"order\" : 0, \"version\": 1, \"settings\": { \"number_of_shards\": 1, \"number_of_replicas\":1 } } PUT _template/template_test { \"index_patterns\" : [\"test*\"], \"order\" : 1, \"settings\" : { \"number_of_shards\": 1, \"number_of_replicas\" : 2 }, \"mappings\" : { \"date_detection\": false, \"numeric_detection\": true } } #æŸ¥çœ‹templateä¿¡æ¯ GET /_template/template_default # è¿”å›å¦‚ä¸‹ï¼š { \"template_default\" : { \"order\" : 0, \"version\" : 1, \"index_patterns\" : [ \"*\" ], \"settings\" : { \"index\" : { \"number_of_shards\" : \"1\", \"number_of_replicas\" : \"1\" } }, \"mappings\" : { }, \"aliases\" : { } } } #ä½¿ç”¨é€šé…ç¬¦æŸ¥çœ‹templateä¿¡æ¯ GET /_template/temp* { \"template_test\" : { \"order\" : 1, \"index_patterns\" : [ \"test*\" ], \"settings\" : { \"index\" : { \"number_of_shards\" : \"1\", \"number_of_replicas\" : \"2\" } }, \"mappings\" : { \"numeric_detection\" : true, \"date_detection\" : false }, \"aliases\" : { } }, \"template_default\" : { \"order\" : 0, \"version\" : 1, \"index_patterns\" : [ \"*\" ], \"settings\" : { \"index\" : { \"number_of_shards\" : \"1\", \"number_of_replicas\" : \"1\" } }, \"mappings\" : { }, \"aliases\" : { } } } #æ•°å­—å­—ç¬¦ä¸²è¢«æ˜ å°„æˆtextï¼Œæ—¥æœŸå­—ç¬¦ä¸²è¢«æ˜ å°„æˆæ—¥æœŸ PUT ttemplate/_doc/1 { \"someNumber\":\"1\", \"someDate\":\"2019/01/01\" } GET ttemplate/_mapping #è¿”å›å¦‚ä¸‹ï¼š { \"ttemplate\" : { \"mappings\" : { \"properties\" : { \"someDate\" : { \"type\" : \"date\", \"format\" : \"yyyy/MM/dd HH:mm:ss||yyyy/MM/dd||epoch_millis\" }, \"someNumber\" : { \"type\" : \"text\", \"fields\" : { \"keyword\" : { \"type\" : \"keyword\", \"ignore_above\" : 256 } } } } } } } #å†™å…¥æ–°çš„æ•°æ®ï¼Œindexä»¥testå¼€å¤´ PUT testtemplate/_doc/1 { \"someNumber\":\"1\", \"someDate\":\"2019/01/01\" } GET testtemplate/_mapping #è¿”å›å¦‚ä¸‹ï¼š { \"testtemplate\" : { \"mappings\" : { \"date_detection\" : false, \"numeric_detection\" : true, \"properties\" : { \"someDate\" : { #å¯ä»¥çœ‹åˆ°è¿™é‡Œå¹¶æ²¡æœ‰å‘½ä¸­å­—æ®µç±»å‹æ—¥æœŸåŒ¹é… \"type\" : \"text\", \"fields\" : { \"keyword\" : { \"type\" : \"keyword\", \"ignore_above\" : 256 } } }, \"someNumber\" : { \"type\" : \"long\" } } } } } get testtemplate/_settings #è¿”å›å¦‚ä¸‹ï¼š { \"testtemplate\" : { \"settings\" : { \"index\" : { \"creation_date\" : \"1646703465756\", \"number_of_shards\" : \"1\", \"number_of_replicas\" : \"2\", \"uuid\" : \"wLIqiv5VToSVKctGSbT1Kg\", \"version\" : { \"created\" : \"7010099\" }, \"provided_name\" : \"testtemplate\" } } } } PUT testmy { \"settings\":{ \"number_of_replicas\":5 } } put testmy/_doc/1 { \"key\":\"value\" } get testmy/_settings #è¿”å›å¦‚ä¸‹ { \"testmy\" : { \"settings\" : { \"index\" : { \"creation_date\" : \"1646703533380\", \"number_of_shards\" : \"1\", \"number_of_replicas\" : \"5\", #å¯ä»¥çœ‹åˆ°æ¨¡æ¿è¢«è¦†ç›– \"uuid\" : \"EAS7QZZtSTGcYSN-8MlEEA\", \"version\" : { \"created\" : \"7010099\" }, \"provided_name\" : \"testmy\" } } } } ","date":"2022-03-08","objectID":"/posts/search_engine/es/6.html/:1:0","tags":["search_engine","note","es"],"title":"ElasticSearchTemplateä½¿ç”¨","uri":"/posts/search_engine/es/6.html/"},{"categories":["search engine"],"content":"Dynamic Template æ ¹æ® Elasticsearch è¯†åˆ«çš„æ•°æ®ç±»å‹ï¼Œç»“åˆå­—æ®µåç§°ï¼Œæ¥åŠ¨æ€è®¾å®šå­—æ®µç±»å‹ã€‚ æ¯”å¦‚æ‰€æœ‰å­—ç¬¦ä¸²ç±»å‹éƒ½è¢«è®¾å®šä¸º Keywordï¼Œis å¼€å¤´çš„å­—æ®µéƒ½è®¾ç½®æˆ booleanã€‚ è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼š DynamicTemplate æ˜¯å®šä¹‰åœ¨æŸä¸ªç´¢å¼•çš„ mapping ä¸­ Template æœ‰ä¸€ä¸ªåç§° åŒ¹é…è§„åˆ™æ˜¯ä¸€ä¸ªæ•°ç»„ ä¸ºåŒ¹é…åˆ°å­—æ®µè®¾ç½® Mapping PUT my_index/_doc/1 { \"firstName\":\"Ruan\", \"isVIP\":\"true\" } GET my_index/_mapping #è¿”å›å¦‚ä¸‹ { \"my_index\" : { \"mappings\" : { \"properties\" : { \"firstName\" : { \"type\" : \"text\", \"fields\" : { \"keyword\" : { \"type\" : \"keyword\", \"ignore_above\" : 256 } } }, \"isVIP\" : { \"type\" : \"text\", \"fields\" : { \"keyword\" : { \"type\" : \"keyword\", \"ignore_above\" : 256 } } } } } } } DELETE my_index PUT my_index { \"mappings\": { \"dynamic_templates\": [ { \"strings_as_boolean\": { \"match_mapping_type\": \"string\", \"match\":\"is*\", \"mapping\": { \"type\": \"boolean\" } } }, { \"strings_as_keywords\": { \"match_mapping_type\": \"string\", \"mapping\": { \"type\": \"keyword\" } } } ] } } PUT my_index/_doc/1 { \"firstName\":\"Ruan\", \"isVIP\":\"true\" } # GET my_index/_mapping #è¿”å›å¦‚ä¸‹ï¼š { \"my_index\" : { \"mappings\" : { \"dynamic_templates\" : [ { \"strings_as_boolean\" : { \"match\" : \"is*\", \"match_mapping_type\" : \"string\", \"mapping\" : { \"type\" : \"boolean\" } } }, { \"strings_as_keywords\" : { \"match_mapping_type\" : \"string\", \"mapping\" : { \"type\" : \"keyword\" } } } ], \"properties\" : { \"firstName\" : { \"type\" : \"keyword\" }, \"isVIP\" : { \"type\" : \"boolean\" } } } } } DELETE my_index #ç»“åˆè·¯å¾„ PUT my_index { \"mappings\": { \"dynamic_templates\": [ { \"full_name\": { \"path_match\": \"name.*\", \"path_unmatch\": \"*.middle\", \"mapping\": { \"type\": \"text\", \"copy_to\": \"full_name\" } } } ] } } PUT my_index/_doc/1 { \"name\": { \"first\": \"John\", \"middle\": \"Winston\", \"last\": \"Lennon\" } } GET my_index/_search?q=full_name:John #è¿”å›å¦‚ä¸‹ï¼š { \"took\" : 92, \"timed_out\" : false, \"_shards\" : { \"total\" : 1, \"successful\" : 1, \"skipped\" : 0, \"failed\" : 0 }, \"hits\" : { \"total\" : { \"value\" : 1, \"relation\" : \"eq\" }, \"max_score\" : 0.2876821, \"hits\" : [ { \"_index\" : \"my_index\", \"_type\" : \"_doc\", \"_id\" : \"1\", \"_score\" : 0.2876821, \"_source\" : { \"name\" : { \"first\" : \"John\", \"middle\" : \"Winston\", \"last\" : \"Lennon\" } } } ] } } ","date":"2022-03-08","objectID":"/posts/search_engine/es/6.html/:2:0","tags":["search_engine","note","es"],"title":"ElasticSearchTemplateä½¿ç”¨","uri":"/posts/search_engine/es/6.html/"},{"categories":["search engine"],"content":"å‚è€ƒ https://time.geekbang.org/course/intro/100030501?tab=catalog ","date":"2022-03-08","objectID":"/posts/search_engine/es/6.html/:3:0","tags":["search_engine","note","es"],"title":"ElasticSearchTemplateä½¿ç”¨","uri":"/posts/search_engine/es/6.html/"},{"categories":["search engine"],"content":"å¤šå­—æ®µç‰¹æ€§ ä»¥ä¸åŒçš„ç‰¹æ€§ç´¢å¼•å­—æ®µæ¥å®ç°ä¸åŒçš„éœ€æ±‚ï¼Œå³å¤šå­—æ®µçš„ç‰¹æ€§ã€‚ PUT products { \"mappings\":{ \"properties\":{ \"company\":{ \"type\":\"text\", \"fields\":{ \"keyword\":{ \"type\":\"keyword\", \"ignore_above\":256, } } }, \"comment\":{ \"type\":\"text\", \"fields\":{ \"english_comment\":{ \"type\":\"text\", \"analyzer\":\"english\", \"search_anlyzer\":\"english\" } } } } } } ","date":"2022-03-08","objectID":"/posts/search_engine/es/5.html/:1:0","tags":["search_engine","note","es"],"title":"ElasticSearchå¤šå­—æ®µç‰¹æ€§\u0026è‡ªå®šä¹‰Analyzer","uri":"/posts/search_engine/es/5.html/"},{"categories":["search engine"],"content":"ExactValues\u0026FullText Exact Valueï¼šåŒ…æ‹¬æ•°å­—/æ—¥æœŸ/å…·ä½“ä¸€ä¸ªå­—ç¬¦ä¸² keyword Full textï¼šå…¨æ–‡æœ¬ï¼Œéç»“æ„åŒ–çš„æ–‡æœ¬æ•°æ® text å…¶ä¸­ Exact Value ä¸éœ€è¦è¢«åˆ†è¯ï¼Œä¼šä¸ºæ¯ä¸€ä¸ªå­—æ®µåˆ›å»ºä¸€ä¸ªå€’æ’ç´¢å¼•ã€‚ ","date":"2022-03-08","objectID":"/posts/search_engine/es/5.html/:1:1","tags":["search_engine","note","es"],"title":"ElasticSearchå¤šå­—æ®µç‰¹æ€§\u0026è‡ªå®šä¹‰Analyzer","uri":"/posts/search_engine/es/5.html/"},{"categories":["search engine"],"content":"è‡ªå®šä¹‰åˆ†è¯ å¯ä»¥é€šè¿‡ä¸åŒçš„ç»„åˆå®ç°è‡ªå®šä¹‰çš„åˆ†è¯å™¨ï¼š Character Filter åœ¨ Tokenizer ä¹‹å‰å¯¹æ–‡æœ¬è¿›è¡Œå¤„ç†ï¼Œå¯é…ç½®å¤šä¸ªï¼Œä¸”ä¼šå½±å“ Tokenizer çš„ position å’Œ offset ä¿¡æ¯ã€‚ è‡ªå¸¦çš„ Character Filterï¼šHTML stripï¼ˆå»é™¤ html æ ‡ç­¾ï¼‰ã€Mappingï¼ˆå­—ç¬¦ä¸²æ›¿æ¢ï¼‰ã€Pattern replaceï¼ˆæ­£åˆ™æ›¿æ¢ï¼‰ã€‚ POST _analyze { \"tokenizer\":\"keyword\", \"char_filter\":[\"html_strip\"], \"text\": \"\u003cb\u003ehello world\u003c/b\u003e\" } #è¿”å›å¦‚ä¸‹ { \"tokens\" : [ { \"token\" : \"hello world\", \"start_offset\" : 3, \"end_offset\" : 18, \"type\" : \"word\", \"position\" : 0 } ] } #ä½¿ç”¨char filterè¿›è¡Œæ›¿æ¢ POST _analyze { \"tokenizer\": \"standard\", \"char_filter\": [ { \"type\" : \"mapping\", \"mappings\" : [ \"- =\u003e _\"] } ], \"text\": \"123-456, I-test\" } #è¿”å›å¦‚ä¸‹ï¼š { \"tokens\" : [ { \"token\" : \"123_456\", \"start_offset\" : 0, \"end_offset\" : 7, \"type\" : \"\u003cNUM\u003e\", \"position\" : 0 }, { \"token\" : \"I_test\", \"start_offset\" : 9, \"end_offset\" : 15, \"type\" : \"\u003cALPHANUM\u003e\", \"position\" : 1 } ] } //æ­£åˆ™è¡¨è¾¾å¼ GET _analyze { \"tokenizer\": \"standard\", \"char_filter\": [ { \"type\" : \"pattern_replace\", \"pattern\" : \"http://(.*)\", \"replacement\" : \"$1\" } ], \"text\" : \"http://www.elastic.co\" } #è¿”å›å¦‚ä¸‹ï¼š { \"tokens\" : [ { \"token\" : \"www.elastic.co\", \"start_offset\" : 0, \"end_offset\" : 21, \"type\" : \"\u003cALPHANUM\u003e\", \"position\" : 0 } ] } Tokenizer å°†åŸå§‹çš„æ–‡æœ¬æŒ‰ç…§ä¸€å®šçš„è§„åˆ™ï¼Œåˆ‡åˆ†ä¸ºè¯ï¼ˆterm or tokenï¼‰ã€‚ Elasticsearch å†…ç½®çš„ Tokenizer whitespace/standard/uax_url email/pattern/keyword/path hierarchy å¯ä»¥ç”¨å®˜æ–¹æä¾›çš„åº“è‡ªå·±å¼€å‘ã€‚ POST _analyze { \"tokenizer\":\"path_hierarchy\", \"text\":\"/user/e/a\" } #è¿”å›å¦‚ä¸‹ { \"tokens\" : [ { \"token\" : \"/user\", \"start_offset\" : 0, \"end_offset\" : 5, \"type\" : \"word\", \"position\" : 0 }, { \"token\" : \"/user/e\", \"start_offset\" : 0, \"end_offset\" : 7, \"type\" : \"word\", \"position\" : 0 }, { \"token\" : \"/user/e/a\", \"start_offset\" : 0, \"end_offset\" : 9, \"type\" : \"word\", \"position\" : 0 } ] } TokenFilter å°† Tokenizer è¾“å‡ºçš„å•è¯ï¼ˆtermï¼‰ï¼Œè¿›è¡Œå¢åŠ ã€ä¿®æ”¹ã€åˆ é™¤ã€‚ Elasticsearch å†…ç½®çš„ï¼š Lowercase/stop/synonymï¼ˆæ·»åŠ è¿‘ä¹‰è¯ï¼‰ // white space and snowball GET _analyze { \"tokenizer\": \"whitespace\", \"filter\": [\"stop\",\"snowball\"], \"text\": [\"The gilrs in China are playing this game!\"] } #è¿”å›å¦‚ä¸‹ï¼š { \"tokens\" : [ { \"token\" : \"The\", \"start_offset\" : 0, \"end_offset\" : 3, \"type\" : \"word\", \"position\" : 0 }, { \"token\" : \"gilr\", \"start_offset\" : 4, \"end_offset\" : 9, \"type\" : \"word\", \"position\" : 1 }, { \"token\" : \"China\", \"start_offset\" : 13, \"end_offset\" : 18, \"type\" : \"word\", \"position\" : 3 }, { \"token\" : \"play\", \"start_offset\" : 23, \"end_offset\" : 30, \"type\" : \"word\", \"position\" : 5 }, { \"token\" : \"game!\", \"start_offset\" : 36, \"end_offset\" : 41, \"type\" : \"word\", \"position\" : 7 } ] } //remove åŠ å…¥lowercaseåï¼ŒTheè¢«å½“æˆ stopwordåˆ é™¤ GET _analyze { \"tokenizer\": \"whitespace\", \"filter\": [\"lowercase\",\"stop\",\"snowball\"], \"text\": [\"The gilrs in China are playing this game!\"] } #è¿”å›å¦‚ä¸‹ï¼š { \"tokens\" : [ { \"token\" : \"gilr\", \"start_offset\" : 4, \"end_offset\" : 9, \"type\" : \"word\", \"position\" : 1 }, { \"token\" : \"china\", \"start_offset\" : 13, \"end_offset\" : 18, \"type\" : \"word\", \"position\" : 3 }, { \"token\" : \"play\", \"start_offset\" : 23, \"end_offset\" : 30, \"type\" : \"word\", \"position\" : 5 }, { \"token\" : \"game!\", \"start_offset\" : 36, \"end_offset\" : 41, \"type\" : \"word\", \"position\" : 7 } ] } ","date":"2022-03-08","objectID":"/posts/search_engine/es/5.html/:2:0","tags":["search_engine","note","es"],"title":"ElasticSearchå¤šå­—æ®µç‰¹æ€§\u0026è‡ªå®šä¹‰Analyzer","uri":"/posts/search_engine/es/5.html/"},{"categories":["search engine"],"content":"å‚è€ƒ https://time.geekbang.org/course/intro/100030501?tab=catalog ","date":"2022-03-08","objectID":"/posts/search_engine/es/5.html/:3:0","tags":["search_engine","note","es"],"title":"ElasticSearchå¤šå­—æ®µç‰¹æ€§\u0026è‡ªå®šä¹‰Analyzer","uri":"/posts/search_engine/es/5.html/"},{"categories":["search engine"],"content":"å­—æ®µçš„æ•°æ®ç±»å‹ å­—æ®µçš„æ•°æ®ç±»å‹ä¸»è¦å¦‚ä¸‹ï¼š ç®€å•ç±»å‹ Text/Keyword Date Integer/Floating Boolean IPv4\u0026IPv6 å¤æ‚ç±»å‹-å¯¹è±¡å’ŒåµŒå¥—å¯¹è±¡ å¯¹è±¡ç±»å‹/åµŒå¥—ç±»å‹ ç‰¹æ®Šç±»å‹ geo_point\u0026geo_shape/percolator ","date":"2022-03-07","objectID":"/posts/search_engine/es/4.html/:1:0","tags":["search_engine","note","es"],"title":"ElasticSearchMapping","uri":"/posts/search_engine/es/4.html/"},{"categories":["search engine"],"content":"Mapping Mapping ç±»ä¼¼æ•°æ®åº“ä¸­çš„ Schema çš„å®šä¹‰ï¼Œä½œç”¨å¦‚ä¸‹ï¼š å®šä¹‰ç´¢å¼•ä¸­çš„å­—æ®µçš„åç§° å®šä¹‰å­—æ®µçš„æ•°æ®ç±»å‹ å­—æ®µï¼Œå€’æ’ç´¢å¼•çš„ç›¸å…³ï¼ŒAnalyzerç­‰ Mapping ä¼šæŠŠ JSON æ–‡æ¡£æ˜ å°„æˆ Lucene æ‰€éœ€è¦çš„æ‰å¹³æ ¼å¼ ä¸€ä¸ª Mapping å±äºä¸€ä¸ªç´¢å¼•çš„ Type æ¯ä¸ªæ–‡æ¡£éƒ½å±äºä¸€ä¸ª Type ä¸€ä¸ª Type æœ‰ä¸€ä¸ª Mapping å®šä¹‰ ","date":"2022-03-07","objectID":"/posts/search_engine/es/4.html/:2:0","tags":["search_engine","note","es"],"title":"ElasticSearchMapping","uri":"/posts/search_engine/es/4.html/"},{"categories":["search engine"],"content":"æ˜¾ç¤ºè‡ªå®šä¹‰ Mappings PUT movies { \"mappings\":{ //define your mappings here } } åœ¨è‡ªå®šä¹‰ Mappings æˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯ï¼š å¯ä»¥å‚è€ƒ API æ‰‹å†Œæ‰‹å†™ ä¸ºäº†å‡å°‘å·¥ä½œé‡å’Œå‡ºé”™æ¦‚ç‡ï¼Œæœ€å¥½å¯ä»¥åˆ›å»ºä¸´æ—¶ index æ¥æµ‹è¯• æ§åˆ¶å½“å‰å­—æ®µæ˜¯å¦è¢«ç´¢å¼• index æ§åˆ¶å½“å‰å­—æ®µæ˜¯å¦è¢«ç´¢å¼•ï¼š é»˜è®¤ä¸ºtrueï¼Œè‹¥è®¾ç½®ä¸ºfalseåˆ™è¯¥å­—æ®µä¸å¯è¢«æœç´¢ PUT users { \"mappings\" : { \"properties\" : { \"firstName\" : { \"type\" : \"text\" }, \"lastName\" : { \"type\" : \"text\" }, \"mobile\" : { \"type\" : \"text\", \"index\": false } } } } PUT users/_doc/1 { \"firstName\":\"Ruan\", \"lastName\": \"Yiming\", \"mobile\": \"12345678\" } POST /users/_search { \"query\": { \"match\": { \"mobile\":\"12345678\" } } } #è¿”å›å¦‚ä¸‹ï¼š { \"error\": { \"root_cause\": [ { \"type\": \"query_shard_exception\", \"reason\": \"failed to create query: {\\n \\\"match\\\" : {\\n \\\"mobile\\\" : {\\n \\\"query\\\" : \\\"12345678\\\",\\n \\\"operator\\\" : \\\"OR\\\",\\n \\\"prefix_length\\\" : 0,\\n \\\"max_expansions\\\" : 50,\\n \\\"fuzzy_transpositions\\\" : true,\\n \\\"lenient\\\" : false,\\n \\\"zero_terms_query\\\" : \\\"NONE\\\",\\n \\\"auto_generate_synonyms_phrase_query\\\" : true,\\n \\\"boost\\\" : 1.0\\n }\\n }\\n}\", \"index_uuid\": \"SxPqkWdSSmqvEN1Fs1_VSQ\", \"index\": \"users\" } ], \"type\": \"search_phase_execution_exception\", \"reason\": \"all shards failed\", \"phase\": \"query\", \"grouped\": true, \"failed_shards\": [ { \"shard\": 0, \"index\": \"users\", \"node\": \"Ko9MGMaiQsqw-So5TLyBIg\", \"reason\": { \"type\": \"query_shard_exception\", \"reason\": \"failed to create query: {\\n \\\"match\\\" : {\\n \\\"mobile\\\" : {\\n \\\"query\\\" : \\\"12345678\\\",\\n \\\"operator\\\" : \\\"OR\\\",\\n \\\"prefix_length\\\" : 0,\\n \\\"max_expansions\\\" : 50,\\n \\\"fuzzy_transpositions\\\" : true,\\n \\\"lenient\\\" : false,\\n \\\"zero_terms_query\\\" : \\\"NONE\\\",\\n \\\"auto_generate_synonyms_phrase_query\\\" : true,\\n \\\"boost\\\" : 1.0\\n }\\n }\\n}\", \"index_uuid\": \"SxPqkWdSSmqvEN1Fs1_VSQ\", \"index\": \"users\", \"caused_by\": { \"type\": \"illegal_argument_exception\", \"reason\": \"Cannot search on field [mobile] since it is not indexed.\" } } } ] }, \"status\": 400 } index Options å››ç§ä¸åŒçº§åˆ«çš„ Index Options é…ç½®ï¼Œå¯ä»¥æ§åˆ¶å€’æ’ç´¢å¼•è®°å½•çš„å†…å®¹ï¼š docsï¼šè®°å½• doc id freqsï¼šè®°å½• doc id å’Œ term frequencies positionsï¼šè®°å½• doc id/term frequencies/term position offsetsï¼šè®°å½• doc id/term frequencies/term positions/character offects Textç±»å‹é»˜è®¤è®°å½• positionsï¼Œå…¶ä»–é»˜è®¤ä¸º docs è®°å½•å†…å®¹è¶Šå¤šï¼Œå ç”¨å­˜å‚¨ç©ºé—´è¶Šå¤§ null_value éœ€è¦å¯¹ Null å€¼å®ç°æœç´¢ åªæœ‰ Keyword ç±»å‹æ”¯æŒè®¾å®š Null_Value #è®¾å®šNull_value DELETE users PUT users { \"mappings\" : { \"properties\" : { \"firstName\" : { \"type\" : \"text\" }, \"lastName\" : { \"type\" : \"text\" }, \"mobile\" : { \"type\" : \"keyword\", \"null_value\": \"NULL\" } } } } PUT users/_doc/1 { \"firstName\":\"Ruan\", \"lastName\": \"Yiming\", \"mobile\": null } GET users/_search { \"query\": { \"match\": { \"mobile\":\"NULL\" } } } # è¿”å›å†…å®¹ï¼š { \"took\" : 6, \"timed_out\" : false, \"_shards\" : { \"total\" : 1, \"successful\" : 1, \"skipped\" : 0, \"failed\" : 0 }, \"hits\" : { \"total\" : { \"value\" : 1, \"relation\" : \"eq\" }, \"max_score\" : 0.2876821, \"hits\" : [ { \"_index\" : \"users\", \"_type\" : \"_doc\", \"_id\" : \"1\", \"_score\" : 0.2876821, \"_source\" : { \"firstName\" : \"Ruan\", \"lastName\" : \"Yiming\", \"mobile\" : null } } ] } } copy_to è®¾ç½® æ»¡è¶³ä¸€äº›ç‰¹å®šçš„æœç´¢éœ€æ±‚ copy_toå°†å­—æ®µçš„æ•°å€¼æ‹·è´åˆ°ç›®æ ‡å­—æ®µ copy_toçš„ç›®æ ‡å­—æ®µä¸å‡ºç°åœ¨_sourceä¸­ #è®¾ç½® Copy to DELETE users PUT users { \"mappings\": { \"properties\": { \"firstName\":{ \"type\": \"text\", \"copy_to\": \"fullName\" }, \"lastName\":{ \"type\": \"text\", \"copy_to\": \"fullName\" } } } } PUT users/_doc/1 { \"firstName\":\"Ruan\", \"lastName\": \"Yiming\" } GET users/_search?q=fullName:(Ruan Yiming) #ä»¥ä¸Šç­‰åŒ POST users/_search { \"query\": { \"match\": { \"fullName\":{ \"query\": \"Ruan Yiming\", \"operator\": \"and\" } } } } #è¿”å›å¦‚ä¸‹ï¼š { \"took\" : 44, \"timed_out\" : false, \"_shards\" : { \"total\" : 1, \"successful\" : 1, \"skipped\" : 0, \"failed\" : 0 }, \"hits\" : { \"total\" : { \"value\" : 1, \"relation\" : \"eq\" }, \"max_score\" : 0.5753642, \"hits\" : [ { \"_index\" : \"users\", \"_type\" : \"_doc\", \"_id\" : \"1\", \"_score\" : 0.5753642, \"_source\" : { \"firstName\" : \"Ruan\", \"lastName\" : \"Yiming\" } } ] } } æ•°ç»„ç±»å‹ Elasticsearchä¸­ä¸æä¾›ä¸“é—¨çš„æ•°ç»„ç±»å‹ï¼Œä½†ä»»ä½•å­—æ®µéƒ½å¯ä»¥åŒ…å«å¤šä¸ªç›¸åŒç±»å‹çš„æ•°å€¼ã€‚ #æ•°ç»„ç±»å‹ PUT users/_doc/1 { \"name\":\"onebird\", \"interests\":\"reading\" } PUT users/_doc/1 { \"name\":\"twobirds\", \"interests\":[\"reading\",\"music\"] } POST users/_search { \"query\": { \"match_all\": {} } } #è¿”å›å¦‚ä¸‹ï¼š { \"took\" : 466, \"timed_out\" : false, \"_shards\" : { \"total\" : 1, \"successful\" : 1, \"skipp","date":"2022-03-07","objectID":"/posts/search_engine/es/4.html/:2:1","tags":["search_engine","note","es"],"title":"ElasticSearchMapping","uri":"/posts/search_engine/es/4.html/"},{"categories":["search engine"],"content":"Dynamic Mapping Dynamic Mapping æœºåˆ¶çš„ä½œç”¨åœ¨äºï¼š æ— éœ€æ‰‹åŠ¨å®šä¹‰ Mappingsï¼Œè‡ªåŠ¨æ ¹æ®æ–‡æ¡£ä¿¡æ¯æ¨æ–­å‡ºå­—æ®µç±»å‹ æ¨æ–­ç»“æœå¯èƒ½ä¼šå­˜åœ¨é”™è¯¯ï¼Œä¸¥é‡åˆ™å¯¼è‡´ä¸€äº›åŠŸèƒ½æ— æ³•è¿è¡Œï¼Œå¦‚åœ°ç†ä½ç½®ä¿¡æ¯ã€Range æŸ¥è¯¢ ç±»å‹çš„è‡ªåŠ¨è¯†åˆ« JSONç±»å‹ Elasticsearchç±»å‹ å­—ç¬¦ä¸² 1.åŒ¹é…æ—¥æœŸæ ¼å¼ï¼Œè®¾ç½®æˆDate 2.é…ç½®æ•°å­—è®¾ç½®ä¸ºfloatæˆ–longï¼Œè¯¥é€‰é¡¹é»˜è®¤å…³é—­ 3.è®¾ç½®ä¸ºTextï¼Œå¹¶ä¸”å¢åŠ keywordå­å­—æ®µ å¸ƒå°”å€¼ boolean æµ®ç‚¹æ•° float æ•´æ•° long å¯¹è±¡ Object æ•°ç»„ ç”±ç¬¬ä¸€ä¸ªéç©ºæ•°å€¼çš„ç±»å‹å†³å®š ç©ºå€¼ å¿½ç•¥ #å†™å…¥æ–‡æ¡£ï¼ŒæŸ¥çœ‹ Mapping PUT mapping_test/_doc/1 { \"firstName\":\"Chan\", \"lastName\": \"Jackie\", \"loginDate\":\"2018-07-24T10:29:48.103Z\" } #æŸ¥çœ‹ Mappingæ–‡ä»¶ GET mapping_test/_mapping #è¿”å›å¦‚ä¸‹ï¼š { \"mapping_test\" : { \"mappings\" : { \"properties\" : { \"firstName\" : { \"type\" : \"text\", \"fields\" : { \"keyword\" : { \"type\" : \"keyword\", \"ignore_above\" : 256 } } }, \"lastName\" : { \"type\" : \"text\", \"fields\" : { \"keyword\" : { \"type\" : \"keyword\", \"ignore_above\" : 256 } } }, \"loginDate\" : { \"type\" : \"date\" } } } } } #Delete index DELETE mapping_test #dynamic mappingï¼Œæ¨æ–­å­—æ®µçš„ç±»å‹ PUT mapping_test/_doc/1 { \"uid\" : \"123\", \"isVip\" : false, \"isAdmin\": \"true\", \"age\":19, \"heigh\":180 } #æŸ¥çœ‹ Dynamic GET mapping_test/_mapping #è¿”å›å¦‚ä¸‹ï¼š { \"mapping_test\" : { \"mappings\" : { \"properties\" : { \"age\" : { \"type\" : \"long\" }, \"heigh\" : { \"type\" : \"long\" }, \"isAdmin\" : { \"type\" : \"text\", \"fields\" : { \"keyword\" : { \"type\" : \"keyword\", \"ignore_above\" : 256 } } }, \"isVip\" : { \"type\" : \"boolean\" }, \"uid\" : { \"type\" : \"text\", \"fields\" : { \"keyword\" : { \"type\" : \"keyword\", \"ignore_above\" : 256 } } } } } } } ","date":"2022-03-07","objectID":"/posts/search_engine/es/4.html/:2:2","tags":["search_engine","note","es"],"title":"ElasticSearchMapping","uri":"/posts/search_engine/es/4.html/"},{"categories":["search engine"],"content":"æ›´æ”¹ Mapping å­—æ®µç±»å‹ æ–°å¢åŠ å­—æ®µ Dynamicè®¾ä¸ºTrueæ—¶ï¼Œæœ‰æ–°å¢å­—æ®µå†™å…¥ Mapping ä¼šè¢«æ›´æ–° Dynamicè®¾ä¸ºFalseæ—¶ï¼ŒMapping ä¸ä¼šè¢«æ›´æ–°ï¼Œæ–°å¢å­—æ®µæ•°æ®æ— æ³•è¢«ç´¢å¼•ï¼Œä½†ä¼šå‡ºç°åœ¨_sourceä¸­ Dynamicè®¾ä¸ºStrictæ—¶ï¼Œæ–‡æ¡£å†™å…¥å¤±è´¥ å¯¹å·²æœ‰å­—æ®µ ä¸€æ—¦å·²ç»æœ‰æ•°æ®å†™å…¥ï¼Œä¸å†æ”¯æŒä¿®æ”¹å­—æ®µå®šä¹‰ å›  Lucene å®ç°çš„å€’æ’ç´¢å¼•ï¼Œä¸€æ—¦ç”Ÿæˆåï¼Œå°±ä¸å…è®¸è¢«ä¿®æ”¹ã€‚ å¿…é¡» Reindex API é‡å»ºç´¢å¼•çš„æ–¹å¼æ¥æ”¹å˜å­—æ®µç±»å‹ è‹¥ä¿®æ”¹äº†å­—æ®µçš„æ•°æ®ç±»å‹ï¼Œä¼šå¯¼è‡´å·²è¢«ç¼©å½±çš„å±äºæ— æ³•è¢«æœç´¢ï¼Œä½†å¦‚æœæ–°å¢å­—æ®µå°±ä¸ä¼šè¢«å½±å“ã€‚ ","date":"2022-03-07","objectID":"/posts/search_engine/es/4.html/:2:3","tags":["search_engine","note","es"],"title":"ElasticSearchMapping","uri":"/posts/search_engine/es/4.html/"},{"categories":["search engine"],"content":"æ§åˆ¶ Dyanmic Mappings true flase stric æ–‡æ¡£å¯ç´¢å¼• YES YES NO å­—æ®µå¯ç´¢å¼• YES NO NO Mappingsè¢«æ›´æ–° YES NO NO è¢«è®¾ç½®ä¸ºFalseæ—¶è‹¥æ–°å¢å­—æ®µå†™å…¥ï¼Œè¯¥æ•°æ®å¯è¢«ç´¢å¼•ï¼Œä½†æ–°å¢å­—æ®µä¼šè¢«ä¸¢å¼ƒ è¢«è®¾ç½®ä¸ºStricæ—¶ï¼Œæ•°æ®å†™å…¥ç›´æ¥æŠ¥é”™ #é»˜è®¤Mappingæ”¯æŒdynamicï¼Œå†™å…¥çš„æ–‡æ¡£ä¸­åŠ å…¥æ–°çš„å­—æ®µ PUT dynamic_mapping_test/_doc/1 { \"newField\":\"someValue\" } #è¯¥å­—æ®µå¯ä»¥è¢«æœç´¢ï¼Œæ•°æ®ä¹Ÿåœ¨_sourceä¸­å‡ºç° POST dynamic_mapping_test/_search { \"query\":{ \"match\":{ \"newField\":\"someValue\" } } } #è¿”å›å¦‚ä¸‹ï¼š { \"took\" : 25, \"timed_out\" : false, \"_shards\" : { \"total\" : 1, \"successful\" : 1, \"skipped\" : 0, \"failed\" : 0 }, \"hits\" : { \"total\" : { \"value\" : 1, \"relation\" : \"eq\" }, \"max_score\" : 0.2876821, \"hits\" : [ { \"_index\" : \"dynamic_mapping_test\", \"_type\" : \"_doc\", \"_id\" : \"1\", \"_score\" : 0.2876821, \"_source\" : { \"newField\" : \"someValue\" } } ] } } #ä¿®æ”¹ä¸ºdynamic false PUT dynamic_mapping_test/_mapping { \"dynamic\": false } #æ–°å¢ anotherField PUT dynamic_mapping_test/_doc/10 { \"anotherField\":\"someValue\" } #è¿”å›å¦‚ä¸‹ï¼š { \"_index\" : \"dynamic_mapping_test\", \"_type\" : \"_doc\", \"_id\" : \"10\", \"_version\" : 1, \"result\" : \"created\", \"_shards\" : { \"total\" : 2, \"successful\" : 2, \"failed\" : 0 }, \"_seq_no\" : 1, \"_primary_term\" : 1 } #è¯¥å­—æ®µä¸å¯ä»¥è¢«æœç´¢ï¼Œå› ä¸ºdynamicå·²ç»è¢«è®¾ç½®ä¸ºfalse POST dynamic_mapping_test/_search { \"query\":{ \"match\":{ \"anotherField\":\"someValue\" } } } #è¿”å›å¦‚ä¸‹ï¼š { \"took\" : 766, \"timed_out\" : false, \"_shards\" : { \"total\" : 1, \"successful\" : 1, \"skipped\" : 0, \"failed\" : 0 }, \"hits\" : { \"total\" : { \"value\" : 0, \"relation\" : \"eq\" }, \"max_score\" : null, \"hits\" : [ ] } } # ä½†æ˜¯æ–‡æ¡£å¯ä»¥è¢«ç´¢å¼•åˆ° get dynamic_mapping_test/_doc/10 # è¿”å›å¦‚ä¸‹ï¼š { \"_index\" : \"dynamic_mapping_test\", \"_type\" : \"_doc\", \"_id\" : \"10\", \"_version\" : 1, \"_seq_no\" : 1, \"_primary_term\" : 1, \"found\" : true, \"_source\" : { \"anotherField\" : \"someValue\" } } #ä¿®æ”¹ä¸ºstrict PUT dynamic_mapping_test/_mapping { \"dynamic\": \"strict\" } #å†™å…¥æ•°æ®å‡ºé”™ï¼ŒHTTP Code 400 PUT dynamic_mapping_test/_doc/12 { \"lastField\":\"value\" } #è¿”å›å¦‚ä¸‹ï¼š { \"error\": { \"root_cause\": [ { \"type\": \"strict_dynamic_mapping_exception\", \"reason\": \"mapping set to strict, dynamic introduction of [lastField] within [_doc] is not allowed\" } ], \"type\": \"strict_dynamic_mapping_exception\", \"reason\": \"mapping set to strict, dynamic introduction of [lastField] within [_doc] is not allowed\" }, \"status\": 400 } ","date":"2022-03-07","objectID":"/posts/search_engine/es/4.html/:2:4","tags":["search_engine","note","es"],"title":"ElasticSearchMapping","uri":"/posts/search_engine/es/4.html/"},{"categories":["search engine"],"content":"å‚è€ƒ https://time.geekbang.org/course/intro/100030501?tab=catalog ","date":"2022-03-07","objectID":"/posts/search_engine/es/4.html/:3:0","tags":["search_engine","note","es"],"title":"ElasticSearchMapping","uri":"/posts/search_engine/es/4.html/"},{"categories":["search engine"],"content":"Search API æ¦‚è§ˆ ä¸»è¦åŒ…å«ä¸¤éƒ¨åˆ†ï¼š URL Search åœ¨ URL ä¸­ä½¿ç”¨æŸ¥è¯¢å‚æ•° Request Body Search ä½¿ç”¨ Elasticsearch æä¾›çš„ï¼ŒåŸºäº JSON æ ¼å¼çš„æ›´åŠ å®Œå¤‡çš„QueryDomainSpecificLanguage(DSL) ","date":"2022-03-07","objectID":"/posts/search_engine/es/3.html/:1:0","tags":["search_engine","note","es"],"title":"ElasticSearchSearchAPI","uri":"/posts/search_engine/es/3.html/"},{"categories":["search engine"],"content":"æŒ‡å®šæŸ¥è¯¢çš„ç´¢å¼• /_searchï¼šé›†ç¾¤ä¸Šæ‰€æœ‰çš„ç´¢å¼• /index1/_searchï¼šindex1 /index1,index2/_searchï¼šindex1å’Œindex2 /index*/_searchï¼šä»¥indexå¼€å¤´çš„ç´¢å¼• ","date":"2022-03-07","objectID":"/posts/search_engine/es/3.html/:1:1","tags":["search_engine","note","es"],"title":"ElasticSearchSearchAPI","uri":"/posts/search_engine/es/3.html/"},{"categories":["search engine"],"content":"URL æŸ¥è¯¢ ä½¿ç”¨qï¼ŒæŒ‡å®šæŸ¥è¯¢å­—ç¬¦ä¸² query strig syntaxï¼ŒKVé”®å€¼å¯¹ æ¯”å¦‚ï¼š curl -XGET \"http://localhost:9200/${index}/_search?q=${search}\" ","date":"2022-03-07","objectID":"/posts/search_engine/es/3.html/:1:2","tags":["search_engine","note","es"],"title":"ElasticSearchSearchAPI","uri":"/posts/search_engine/es/3.html/"},{"categories":["search engine"],"content":"Request Body æŸ¥è¯¢ #æ”¯æŒPOSTå’ŒGET #'match_all'æŒ‡è¿”å›æ‰€æœ‰çš„æ–‡æ¡£ curl -XGET \"http://localhost:9200/${index}/_search\" -H 'Content-Type:application/json` -d '{\"query:{\"match_all\":{}}}' ","date":"2022-03-07","objectID":"/posts/search_engine/es/3.html/:1:3","tags":["search_engine","note","es"],"title":"ElasticSearchSearchAPI","uri":"/posts/search_engine/es/3.html/"},{"categories":["search engine"],"content":"æœç´¢ç›¸å…³æ€§ Relevance ç”¨æˆ·æœç´¢å…³å¿ƒçš„æ˜¯æœç´¢ç»“æœçš„ç›¸å…³æ€§ï¼Œå¦‚æ˜¯å¦å¯ç”¨æ‰¾åˆ°æ‰€æœ‰æœ‰å…³çš„å†…å®¹ã€æ˜¯å¦æœ‰ä¸ç›¸å…³çš„å†…å®¹ã€æ–‡æ¡£çš„æ‰“åˆ†æ˜¯å¦åˆç†ã€ç»“æœæ’åæ˜¯å¦æ»¡è¶³éœ€æ±‚ç­‰ã€‚ å¦‚ä¸åŒçš„æœç´¢éœ€æ±‚ï¼š Web æœç´¢ ç”µå•†æœç´¢ è¡¡é‡ç›¸å…³æ€§ï¼ˆInformation Retrievalï¼‰ä¸»è¦æœ‰ä»¥ä¸‹æ ‡å‡†è¡¡é‡ï¼š Precisionï¼šå°½å¯èƒ½è¿”å›è¾ƒå°‘çš„æ— å…³æ–‡æ¡£ Recallï¼šå°½é‡è¿”å›è¾ƒå¤šçš„ç›¸å…³æ–‡æ¡£ Rankingï¼šæ˜¯å¦èƒ½å¤ŸæŒ‰ç…§ç›¸å…³åº¦è¿›è¡Œæ’åº Precision å’Œ Recall çš„è®¡ç®—ç±»ä¼¼æœºå™¨å­¦ä¹ ä¸­çš„æ¨¡å‹è¯„ä¼° Precision = TP/TP+FP Recall = TP/TP+FN ","date":"2022-03-07","objectID":"/posts/search_engine/es/3.html/:1:4","tags":["search_engine","note","es"],"title":"ElasticSearchSearchAPI","uri":"/posts/search_engine/es/3.html/"},{"categories":["search engine"],"content":"URL Search qæŒ‡å®šæŸ¥è¯¢è¯­å¥ï¼Œä½¿ç”¨ Qeury String Syntax dfé»˜è®¤å­—æ®µï¼Œä¸æŒ‡å®šæ—¶ä¼šå¯¹æ‰€æœ‰å­—æ®µè¿›è¡ŒæŸ¥è¯¢ Sortæ’åº fromå’Œsizeå¯ç”¨äºåˆ†é¡µ profileå¯ä»¥æŸ¥çœ‹æŸ¥è¯¢æ˜¯å¦‚ä½•æ‰§è¡Œçš„ #åŸºæœ¬æŸ¥è¯¢ GET /movies/_search?q=2012\u0026df=title\u0026sort=year:desc\u0026from=0\u0026size=10\u0026timeout=1s #å¸¦profile GET /movies/_search?q=2012\u0026df=title { \"profile\":\"true\" } #æ³›æŸ¥è¯¢ï¼Œæ­£å¯¹_all,æ‰€æœ‰å­—æ®µ GET /movies/_search?q=2012 { \"profile\":\"true\" } #æŒ‡å®šå­—æ®µ GET /movies/_search?q=title:2012\u0026sort=year:desc\u0026from=0\u0026size=10\u0026timeout=1s { \"profile\":\"true\" } æŒ‡å®šå­—æ®µå’Œæ³›æŸ¥è¯¢ q=tiltle:2012 q=2012 Termå’ŒPhrase A Bç­‰æ•ˆäº A OR B \"A B\"ç­‰æ•ˆäº A AND B åˆ†ç»„å’Œå¼•å· title:(A AND B) title=\"A B\" # æŸ¥æ‰¾ç¾ä¸½å¿ƒçµ, Mindä¸ºæ³›æŸ¥è¯¢ GET /movies/_search?q=title:Beautiful Mind { \"profile\":\"true\" } # æ³›æŸ¥è¯¢ GET /movies/_search?q=title:2012 { \"profile\":\"true\" } #ä½¿ç”¨å¼•å·ï¼ŒPhraseæŸ¥è¯¢ GET /movies/_search?q=title:\"Beautiful Mind\" { \"profile\":\"true\" } #åˆ†ç»„ï¼ŒBoolæŸ¥è¯¢ GET /movies/_search?q=title:(Beautiful Mind) { \"profile\":\"true\" } å¸ƒå°”æ“ä½œ AND/OR/NOTæˆ–è€…\u0026\u0026/||/! å¿…é¡»å¤§å†™ title:(matrix NOT reloaded) åˆ†ç»„ +è¡¨ç¤ºmust -è¡¨ç¤ºmust_not `title:(+matrix -reloaded) #å¸ƒå°”æ“ä½œç¬¦ # æŸ¥æ‰¾ç¾ä¸½å¿ƒçµ GET /movies/_search?q=title:(Beautiful AND Mind) { \"profile\":\"true\" } # æŸ¥æ‰¾ç¾ä¸½å¿ƒçµ GET /movies/_search?q=title:(Beautiful NOT Mind) { \"profile\":\"true\" } # æŸ¥æ‰¾ç¾ä¸½å¿ƒçµ GET /movies/_search?q=title:(Beautiful %2BMind) { \"profile\":\"true\" } èŒƒå›´æŸ¥è¯¢ åŒºé—´è¡¨ç¤ºï¼š[]é—­åŒºé—´ï¼Œ{}å¼€åŒºé—´ year:{2019 TO 2018} year:[* TO 2018] ç®—æ•°ç¬¦å· year:\u003e2010 year:(\u003e2010 \u0026\u0026 \u003c=2018\u003e) year:(+\u003e2010 +\u003c=2018) #èŒƒå›´æŸ¥è¯¢ ,åŒºé—´å†™æ³• GET /movies/_search?q=title:beautiful AND year:[2002 TO 2018] { \"profile\":\"true\" } GET /movies/_search?q=title:year:\u003e1980 { \"profile\":\"true\" } é€šé…ç¬¦æŸ¥è¯¢ï¼ˆæ•ˆç‡è¾ƒä½ï¼Œå ç”¨å†…å­˜å¤§ï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚ç‰¹åˆ«æ˜¯æ”¾åœ¨æœ€å‰é¢ï¼‰ ?ä»£è¡¨1ä¸ªå­—ç¬¦ï¼Œ*ä»£è¡¨0æˆ–å¤šä¸ªå­—ç¬¦ title:mi?d title:be* æ­£åˆ™è¡¨è¾¾å¼ title:[bt]oy æ¨¡ç³ŠåŒ¹é…ä¸è¿‘ä¼¼æŸ¥è¯¢ title:beutiful~1 title:\"long rings\"~2 #é€šé…ç¬¦æŸ¥è¯¢ GET /movies/_search?q=title:b* { \"profile\":\"true\" } //æ¨¡ç³ŠåŒ¹é…\u0026è¿‘ä¼¼åº¦åŒ¹é… GET /movies/_search?q=title:beautifl~1 { \"profile\":\"true\" } GET /movies/_search?q=title:\"Lord Rings\"~2 { \"profile\":\"true\" } ","date":"2022-03-07","objectID":"/posts/search_engine/es/3.html/:2:0","tags":["search_engine","note","es"],"title":"ElasticSearchSearchAPI","uri":"/posts/search_engine/es/3.html/"},{"categories":["search engine"],"content":"Request Body Search å°†æŸ¥è¯¢è¯­å¥é€šè¿‡ HTTP Request Body å‘é€ç»™ Elasticsesarch Query DSL #ignore_unavailable=trueï¼Œå¯ä»¥å¿½ç•¥å°è¯•è®¿é—®ä¸å­˜åœ¨çš„ç´¢å¼•â€œ404_idxâ€å¯¼è‡´çš„æŠ¥é”™ #æŸ¥è¯¢moviesåˆ†é¡µ POST /movies,404_idx/_search?ignore_unavailable=true { \"profile\": true, \"query\": { \"match_all\": {} } } åˆ†é¡µ Fromä»0å¼€å§‹ï¼Œé»˜è®¤è¿”å›10ä¸ªç»“æœ è·å–é åçš„ç¿»é¡µæˆæœ¬è¾ƒé«˜ POST /kibana_sample_data_ecommerce/_search { \"from\":10, \"size\":20, \"query\":{ \"match_all\": {} } } æ’åº æœ€å¥½åœ¨â€œæ•°å­—å‹â€ä¸â€œæ—¥æœŸå‹â€å­—æ®µä¸Šæ’åº å› ä¸ºå¯¹äºå¤šå€¼ç±»å‹æˆ–åˆ†æè¿‡çš„å­—æ®µæ’åºï¼Œç³»ç»Ÿä¼šé€‰ä¸€ä¸ªå€¼ï¼Œæ— æ³•å¾—çŸ¥è¯¥å€¼ #å¯¹æ—¥æœŸæ’åº POST kibana_sample_data_ecommerce/_search { \"sort\":[{\"order_date\":\"desc\"}], \"query\":{ \"match_all\": {} } } _source filtering å¦‚æœ_SOURCEæ²¡æœ‰å­˜å‚¨ï¼Œé‚£å°±åªè¿”å›åŒ¹é…çš„æ–‡æ¡£çš„å…ƒæ•°æ® _sourceæ”¯æŒä½¿ç”¨é€šé…ç¬¦ `_souce[â€œname*,â€œdesc*â€] #source filtering POST kibana_sample_data_ecommerce/_search { \"_source\":[\"order_date\"], \"query\":{ \"match_all\": {} } } è„šæœ¬å­—æ®µ èƒ½é€šè¿‡è¡¨è¾¾å¼è¿”å›æ‰€éœ€å­—æ®µ #è„šæœ¬å­—æ®µ GET kibana_sample_data_ecommerce/_search { \"script_fields\": { \"new_field\": { \"script\": { \"lang\": \"painless\", \"source\": \"doc['order_date'].value+'hello'\" } } }, \"query\": { \"match_all\": {} } } ä½¿ç”¨æŸ¥è¯¢è¡¨è¾¾å¼-Match POST movies/_search { \"query\": { \"match\": { \"title\": \"last christmas\" #é»˜è®¤OR } } } POST movies/_search { \"query\": { \"match\": { \"title\": { \"query\": \"last christmas\", \"operator\": \"and\" } } } } çŸ­è¯­æœç´¢-Match Phrase POST movies/_search { \"query\": { \"match_phrase\": { \"title\":{ \"query\": \"one love\" #é»˜è®¤AND } } } } POST movies/_search { \"query\": { \"match_phrase\": { \"title\":{ \"query\": \"one love\", \"slop\": 1 #æŒ‡å®šæ•°é‡çš„Term } } } } ","date":"2022-03-07","objectID":"/posts/search_engine/es/3.html/:3:0","tags":["search_engine","note","es"],"title":"ElasticSearchSearchAPI","uri":"/posts/search_engine/es/3.html/"},{"categories":["search engine"],"content":"Query String Query ç±»ä¼¼URL Query POST users/_search { \"query\": { \"query_string\": { \"default_field\": \"name\", \"query\": \"Ruan AND Yiming\" # ä¸æ“ä½œ } } } POST users/_search { \"query\": { \"query_string\": { \"fields\":[\"name\",\"about\"], \"query\": \"(Ruan AND Yiming) OR (Java AND Elasticsearch)\" } } } # å¤šfields GET /movies/_search { \"profile\": true, \"query\":{ \"query_string\":{ \"fields\":[ \"title\", \"year\" ], \"query\": \"2012\" } } } ","date":"2022-03-07","objectID":"/posts/search_engine/es/3.html/:4:0","tags":["search_engine","note","es"],"title":"ElasticSearchSearchAPI","uri":"/posts/search_engine/es/3.html/"},{"categories":["search engine"],"content":"Simple Query String Query ç±»ä¼¼ Query Stringï¼Œä½†æ˜¯ä¼šå¿½ç•¥é”™è¯¯çš„è¯­æ³•ï¼ŒåŒæ—¶åªæ”¯æŒéƒ¨åˆ†æŸ¥è¯¢è¯­æ³• ä¸æ”¯æŒ AND OR NOTï¼Œä¼šå½“ä½œå­—ç¬¦ä¸²å¤„ç† Term ä¹‹é—´é»˜è®¤çš„å…³ç³»æ˜¯ ORï¼Œå¯ä»¥æŒ‡å®š Operator æ”¯æŒéƒ¨åˆ†é€»è¾‘ +æ›¿ä»£AND -æ›¿ä»£OR -æ›¿ä»£NOT #Simple Query é»˜è®¤çš„operatoræ˜¯ Or POST users/_search { \"query\": { \"simple_query_string\": { \"query\": \"Ruan AND Yiming\", \"fields\": [\"name\"] } } } POST users/_search { \"query\": { \"simple_query_string\": { \"query\": \"Ruan Yiming\", \"fields\": [\"name\"], \"default_operator\": \"AND\" } } } GET /movies/_search { \"profile\":true, \"query\":{ \"simple_query_string\":{ \"query\":\"Beautiful +mind\", \"fields\":[\"title\"] } } } ","date":"2022-03-07","objectID":"/posts/search_engine/es/3.html/:5:0","tags":["search_engine","note","es"],"title":"ElasticSearchSearchAPI","uri":"/posts/search_engine/es/3.html/"},{"categories":["search engine"],"content":"å‚è€ƒ https://time.geekbang.org/course/intro/100030501?tab=catalog ","date":"2022-03-07","objectID":"/posts/search_engine/es/3.html/:6:0","tags":["search_engine","note","es"],"title":"ElasticSearchSearchAPI","uri":"/posts/search_engine/es/3.html/"},{"categories":["os"],"content":" ä»¥ä¸‹ä¸»è¦æ¥è‡ª LMOS å¤§ä½¬çš„æ“ä½œç³»ç»Ÿè¯¾ç¨‹ä¸­è®°å½•çš„ç¬”è®° ","date":"2022-03-07","objectID":"/posts/os/common/2.html/:0:0","tags":["os","note"],"title":"osä¸­çš„å†…æ ¸","uri":"/posts/os/common/2.html/"},{"categories":["os"],"content":"è®¡ç®—æœºä¸­çš„èµ„æºç®¡ç†â€”â€”å†…æ ¸ è®¡ç®—æœºä¸­èµ„æºä¸»è¦åˆ†ä¸ºï¼š ç¡¬ä»¶èµ„æºï¼ˆå¦‚æ€»çº¿ã€CPUã€å†…å­˜ã€ç¡¬ç›˜ã€ç½‘å¡ã€æ˜¾å¡ã€I/Oè®¾å¤‡ç­‰ï¼‰ è½¯ä»¶èµ„æºï¼ˆå¦‚å„ç§æ–‡ä»¶ã€è½¯ä»¶ç¨‹åºç­‰ï¼‰ å†…æ ¸ä½œä¸ºç¡¬ä»¶èµ„æºå’Œè½¯ä»¶èµ„æºçš„ç®¡ç†è€…ï¼Œå…¶å†…éƒ¨ç»„æˆåœ¨é€»è¾‘ä¸Šå¤§è‡´å¦‚ä¸‹ï¼š å†…æ ¸é™¤äº†ä¸‹é¢è¿™äº›å¿…è¦ç»„ä»¶ï¼Œæ ¹æ®åŠŸèƒ½ä¸åŒè¿˜æœ‰å®‰å…¨ç»„ä»¶ç­‰ï¼Œä¸”ä¸ºäº†ç®¡ç†å’Œæ§åˆ¶å„ç§ç¡¬ä»¶ç¼–å†™çš„ä»£ç ï¼Œå³ç§°ä¸ºâ€œé©±åŠ¨ç¨‹åºâ€ã€‚ ç®¡ç†CPU ç”±äºCPUæ˜¯æ‰§è¡Œç¨‹åºçš„ï¼Œè€Œå†…æ ¸æŠŠè¿è¡Œæ—¶çš„ç¨‹åºæŠ½è±¡æˆè¿›ç¨‹ï¼Œæ‰€ä»¥åˆç§°ä¸ºè¿›ç¨‹ç®¡ç†ã€‚ ç®¡ç†å†…å­˜ ç”±äºç¨‹åºå’Œæ•°æ®éƒ½è¦å ç”¨å†…å­˜ï¼Œå†…æ ¸è¦éå¸¸å°å¿ƒåœ°åˆ†é…ã€é‡Šæ”¾å†…å­˜ã€‚ ç®¡ç†ç¡¬ç›˜ ç¡¬ç›˜ä¸»è¦å­˜æ”¾ç”¨æˆ·æ•°æ®ï¼Œè€Œå†…æ ¸æŠŠç”¨æˆ·æ•°æ®æŠ½è±¡æˆæ–‡ä»¶ï¼Œå³ç®¡ç†æ–‡ä»¶ï¼Œæ–‡ä»¶éœ€è¦åˆç†åœ°ç»„ç»‡ï¼Œæ–¹ä¾¿ç”¨æˆ·æŸ¥æ‰¾å’Œè¯»å†™ï¼Œæ‰€ä»¥å½¢æˆäº†æ–‡ä»¶ç³»ç»Ÿã€‚ ç®¡ç†æ˜¾å¡ è´Ÿè´£æ˜¾ç¤ºä¿¡æ¯ï¼Œè€Œç°åœ¨æ“ä½œç³»ç»Ÿéƒ½æ˜¯æ”¯æŒ GUIï¼ˆå›¾å½¢ç”¨æˆ·æ¥å£ï¼‰çš„ï¼Œç®¡ç†æ˜¾å¡è‡ªç„¶è€Œç„¶åœ°å°±æˆäº†å†…æ ¸ä¸­çš„å›¾å½¢ç³»ç»Ÿã€‚ ç®¡ç†ç½‘å¡ ç½‘å¡ä¸»è¦å®Œæˆç½‘ç»œé€šä¿¡ï¼Œç½‘ç»œé€šä¿¡éœ€è¦å„ç§é€šä¿¡åè®®ï¼Œæœ€ååœ¨å†…æ ¸ä¸­å°±å½¢æˆäº†ç½‘ç»œåè®®æ ˆï¼Œåˆç§°ç½‘ç»œç»„ä»¶ã€‚ ç®¡ç†å„ç§ I/O è®¾å¤‡ é”®ç›˜ã€é¼ æ ‡ã€æ‰“å°æœºã€æ˜¾ç¤ºå™¨ç­‰ç»Ÿç§°ä¸º I/Oï¼ˆè¾“å…¥è¾“å‡ºï¼‰è®¾å¤‡ï¼Œåœ¨å†…æ ¸ä¸­æŠ½è±¡æˆ I/O ç®¡ç†å™¨ã€‚ ","date":"2022-03-07","objectID":"/posts/os/common/2.html/:1:0","tags":["os","note"],"title":"osä¸­çš„å†…æ ¸","uri":"/posts/os/common/2.html/"},{"categories":["os"],"content":"ç»å…¸å†…æ ¸ç»“æ„ å¦‚ä½•ç»„ç»‡å†…æ ¸çš„ç»„ä»¶ï¼Œè®©ç³»ç»Ÿç¨³å®šå’Œé«˜æ•ˆè¿è¡Œï¼Œè¿™å°±æ˜¯å†…æ ¸ç»“æ„éœ€è¦è€ƒè™‘çš„äº‹æƒ…ã€‚ç°æœ‰çš„ç»å…¸å†…æ ¸ç»“æ„æœ‰ä»¥ä¸‹ï¼š å®å†…æ ¸ç»“æ„ å¾®å†…æ ¸ç»“æ„ æ··åˆå†…æ ¸ç»“æ„ ","date":"2022-03-07","objectID":"/posts/os/common/2.html/:2:0","tags":["os","note"],"title":"osä¸­çš„å†…æ ¸","uri":"/posts/os/common/2.html/"},{"categories":["os"],"content":"å®å†…æ ¸ç»“æ„ å®å†…æ ¸å°±æ˜¯æŠŠä»¥ä¸Šè¯¸å¦‚ç®¡ç†è¿›ç¨‹çš„ä»£ç ã€ç®¡ç†å†…å­˜çš„ä»£ç ã€ç®¡ç†å„ç§ I/O è®¾å¤‡çš„ä»£ç ã€æ–‡ä»¶ç³»ç»Ÿçš„ä»£ç ã€å›¾å½¢ç³»ç»Ÿä»£ç ä»¥åŠå…¶å®ƒåŠŸèƒ½æ¨¡å—çš„ä»£ç ï¼ŒæŠŠè¿™äº›æ‰€æœ‰çš„ä»£ç ç»è¿‡ç¼–è¯‘ï¼Œæœ€åé“¾æ¥åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªå¤§çš„å¯æ‰§è¡Œç¨‹åºï¼š å¤§ç¨‹åºé‡Œæœ‰å®ç°æ”¯æŒè¿™äº›åŠŸèƒ½çš„æ‰€æœ‰ä»£ç ï¼Œå‘ç”¨æˆ·åº”ç”¨è½¯ä»¶æä¾›ä¸€äº›æ¥å£ï¼ˆç³»ç»Ÿ API å‡½æ•°ï¼‰ å¤§ç¨‹åºä¼šåœ¨å¤„ç†å™¨çš„ç‰¹æƒæ¨¡å¼ä¸‹è¿è¡Œï¼ˆå®å†…æ ¸æ¨¡å¼ï¼‰ å®å†…æ ¸ä¸»è¦çš„ç¼ºç‚¹ï¼š æ²¡æœ‰æ¨¡å—åŒ–ï¼Œæ‰©å±•æ€§ï¼Œç§»åŠ¨æ€§ï¼Œå¼€å‘æ–°çš„èƒ½éœ€è¦é‡æ–°ç¼–è¯‘ã€é“¾æ¥ã€å®‰è£…å†…æ ¸ é«˜åº¦è€¦åˆï¼Œé€ æˆâ€œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«â€ è€Œä¸»è¦çš„æœ‰ç‚¹å°±åœ¨äºï¼š æ€§èƒ½å¾ˆå¥½ï¼ˆç»„ä»¶ä¹‹é—´äº’ç›¸ç›´æ¥è°ƒç”¨ï¼Œæ²¡æœ‰è¿‡å¤šæ¶ˆè€—ï¼‰ æ¯”å¦‚å®å†…æ ¸æä¾›å†…å­˜åˆ†é…åŠŸèƒ½çš„æœåŠ¡è¿‡ç¨‹ï¼Œå…·ä½“å¦‚ä¸‹ï¼š è°ƒç”¨APIï¼šåº”ç”¨ç¨‹åºé¦–å…ˆè°ƒç”¨å†…å­˜åˆ†é…çš„ APIï¼ˆåº”ç”¨ç¨‹åºæ¥å£ï¼‰å‡½æ•°ï¼› å†…æ ¸è¿è¡Œï¼šå¤„ç†å™¨åˆ‡æ¢åˆ°ç‰¹æƒæ¨¡å¼ï¼Œå¼€å§‹è¿è¡Œå†…æ ¸ä»£ç ï¼› å†…æ ¸åˆ†é…å†…å­˜ï¼šå†…æ ¸é‡Œçš„å†…å­˜ç®¡ç†ä»£ç æŒ‰ç…§ç‰¹å®šçš„ç®—æ³•ï¼Œåˆ†é…ä¸€å—å†…å­˜ï¼› APIè¿”å›ï¼šæŠŠåˆ†é…çš„å†…å­˜å—çš„é¦–åœ°å€ï¼Œè¿”å›ç»™å†…å­˜åˆ†é…çš„ API å‡½æ•°ï¼› è·å–å†…å­˜åœ°å€ï¼šå†…å­˜åˆ†é…çš„ API å‡½æ•°è¿”å›ï¼Œå¤„ç†å™¨å¼€å§‹è¿è¡Œç”¨æˆ·æ¨¡å¼ä¸‹çš„åº”ç”¨ç¨‹åºï¼Œåº”ç”¨ç¨‹åºå°±å¾—åˆ°äº†ä¸€å—å†…å­˜çš„é¦–åœ°å€ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨è¿™å—å†…å­˜äº†ã€‚ ","date":"2022-03-07","objectID":"/posts/os/common/2.html/:2:1","tags":["os","note"],"title":"osä¸­çš„å†…æ ¸","uri":"/posts/os/common/2.html/"},{"categories":["os"],"content":"å¾®å†…æ ¸ç»“æ„ å¾®å†…æ ¸æ¶æ„æ­£å¥½ä¸å®å†…æ ¸æ¶æ„ç›¸åï¼Œå®ƒæå€¡å†…æ ¸åŠŸèƒ½å°½å¯èƒ½å°‘ï¼šä»…ä»…åªæœ‰è¿›ç¨‹è°ƒåº¦ã€å¤„ç†ä¸­æ–­ã€å†…å­˜ç©ºé—´æ˜ å°„ã€è¿›ç¨‹é—´é€šä¿¡ç­‰åŠŸèƒ½ã€‚è€Œå®é™…å®ŒæˆåŠŸèƒ½ï¼ˆå¦‚è¿›ç¨‹ç®¡ç†ã€å†…å­˜ç®¡ç†ã€è®¾å¤‡ç®¡ç†ã€æ–‡ä»¶ç®¡ç†ç­‰æœåŠ¡åŠŸèƒ½ï¼‰æ˜¯ç”±æœåŠ¡è¿›ç¨‹ï¼ˆç‰¹æ®Šçš„â€œåº”ç”¨ç¨‹åºâ€ï¼‰ä¸“é—¨è´Ÿè´£ã€‚ å¾®å†…æ ¸å®šä¹‰äº†ä¸€ç§è‰¯å¥½çš„è¿›ç¨‹é—´é€šä¿¡çš„æœºåˆ¶â€”â€”æ¶ˆæ¯ï¼ŒæœåŠ¡è¿›ç¨‹çš„ç¼–ç¨‹æ¨¡å‹å°±æ˜¯å¾ªç¯å¤„ç†æ¥è‡ªå…¶å®ƒè¿›ç¨‹çš„æ¶ˆæ¯ï¼Œå®Œæˆç›¸å…³çš„æœåŠ¡åŠŸèƒ½ï¼š åº”ç”¨ç¨‹åºè¯·æ±‚æœåŠ¡ï¼Œåˆ™å‘å¾®å†…æ ¸å‘é€æ¶ˆæ¯ï¼Œå¾®å†…æ ¸å°†æ¶ˆæ¯è½¬å‘ç»™æœåŠ¡è¿›ç¨‹ï¼Œç„¶åæœåŠ¡è¿›ç¨‹å®ŒæˆæœåŠ¡åè¿”å›æ¶ˆæ¯ å¾®å†…æ ¸ç»“æ„ä¸»è¦çš„ç¼ºç‚¹åœ¨äºï¼š ç³»ç»Ÿæ€§èƒ½è¾ƒä½ï¼Œè½¬å‘æ¶ˆæ¯å’ŒæœåŠ¡è¿›ç¨‹åˆ‡æ¢å¼€é”€è¾ƒå¤§ è€Œä¸»è¦çš„ä¼˜ç‚¹åœ¨äºï¼š ç³»ç»Ÿç»“æ„æ¸…æ™°ï¼Œåˆ©äºåä½œå¼€å‘ è‰¯å¥½çš„ç§»æ¤æ€§ï¼Œä¸”ä»£ç é‡è¾ƒå°‘ è‰¯å¥½çš„ä¼¸ç¼©æ€§å’Œæ‰©å±•æ€§ï¼ŒæœåŠ¡è¿›ç¨‹æˆæœ¬è¾ƒä½ å¾®å†…æ ¸çš„ä»£è¡¨ä½œæœ‰ MACHã€MINIXã€L4 ç³»ç»Ÿï¼Œè¿™äº›ç³»ç»Ÿéƒ½æ˜¯å¾®å†…æ ¸ï¼Œä½†æ˜¯å®ƒä»¬ä¸æ˜¯å•†ä¸šçº§çš„ç³»ç»Ÿï¼Œå•†ä¸šçº§çš„ç³»ç»Ÿä¸é‡‡ç”¨å¾®å†…æ ¸ä¸»è¦è¿˜æ˜¯å› ä¸ºæ€§èƒ½å·®ã€‚ è€Œæ¯”å¦‚å¾®å†…æ ¸æä¾›å†…å­˜åˆ†é…åŠŸèƒ½çš„æœåŠ¡è¿‡ç¨‹ï¼Œå…·ä½“å¦‚ä¸‹ï¼š è°ƒç”¨APIå‘é€æ¶ˆæ¯ï¼šåº”ç”¨ç¨‹åºå‘é€å†…å­˜åˆ†é…çš„æ¶ˆæ¯ï¼Œè¿™ä¸ªå‘é€æ¶ˆæ¯çš„å‡½æ•°æ˜¯å¾®å†…æ ¸æä¾›çš„ï¼Œç›¸å½“äºç³»ç»Ÿ APIï¼Œå¾®å†…æ ¸çš„ APIï¼ˆåº”ç”¨ç¨‹åºæ¥å£ï¼‰ç›¸å½“å°‘ï¼Œæç«¯æƒ…å†µä¸‹ä»…éœ€è¦ä¸¤ä¸ªï¼Œä¸€ä¸ªæ¥æ”¶æ¶ˆæ¯çš„ API å’Œä¸€ä¸ªå‘é€æ¶ˆæ¯çš„ APIï¼› å†…æ ¸è¿è¡Œï¼šå¤„ç†å™¨åˆ‡æ¢åˆ°ç‰¹æƒæ¨¡å¼ï¼Œå¼€å§‹è¿è¡Œå†…æ ¸ä»£ç ï¼› å†…æ ¸è½¬å‘æ¶ˆæ¯ç»™æœåŠ¡è¿›ç¨‹ï¼šå¾®å†…æ ¸ä»£ç è®©å½“å‰è¿›ç¨‹åœæ­¢è¿è¡Œï¼Œå¹¶æ ¹æ®æ¶ˆæ¯åŒ…ä¸­çš„æ•°æ®ï¼Œç¡®å®šæ¶ˆæ¯å‘é€ç»™è°ï¼Œåˆ†é…å†…å­˜çš„æ¶ˆæ¯å½“ç„¶æ˜¯å‘é€ç»™å†…å­˜ç®¡ç†æœåŠ¡è¿›ç¨‹ï¼› æœåŠ¡è¿›ç¨‹åˆ†é…å†…å­˜ï¼šå†…å­˜ç®¡ç†æœåŠ¡è¿›ç¨‹æ”¶åˆ°æ¶ˆæ¯ï¼Œåˆ†é…ä¸€å—å†…å­˜ï¼› æœåŠ¡è¿›ç¨‹è¿”å›æ¶ˆæ¯ç»™å†…æ ¸ï¼šå†…å­˜ç®¡ç†æœåŠ¡è¿›ç¨‹ï¼Œä¹Ÿä¼šé€šè¿‡æ¶ˆæ¯çš„å½¢å¼è¿”å›åˆ†é…å†…å­˜å—çš„åœ°å€ç»™å†…æ ¸ï¼Œç„¶åç»§ç»­ç­‰å¾…ä¸‹ä¸€æ¡æ¶ˆæ¯ï¼› å†…æ ¸è¿”å›æ¶ˆæ¯ç»™åº”ç”¨ç¨‹åºï¼šå¾®å†…æ ¸æŠŠåŒ…å«å†…å­˜å—åœ°å€çš„æ¶ˆæ¯è¿”å›ç»™å‘é€å†…å­˜åˆ†é…æ¶ˆæ¯çš„åº”ç”¨ç¨‹åºï¼› åº”ç”¨ç¨‹åºå¾—åˆ°å†…å­˜ï¼šå¤„ç†å™¨å¼€å§‹è¿è¡Œç”¨æˆ·æ¨¡å¼ä¸‹çš„åº”ç”¨ç¨‹åºï¼Œåº”ç”¨ç¨‹åºå°±å¾—åˆ°äº†ä¸€å—å†…å­˜çš„é¦–åœ°å€ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨è¿™å—å†…å­˜äº†ã€‚ ","date":"2022-03-07","objectID":"/posts/os/common/2.html/:2:2","tags":["os","note"],"title":"osä¸­çš„å†…æ ¸","uri":"/posts/os/common/2.html/"},{"categories":["os"],"content":"å†…æ ¸è®¾è®¡ ","date":"2022-03-07","objectID":"/posts/os/common/2.html/:3:0","tags":["os","note"],"title":"osä¸­çš„å†…æ ¸","uri":"/posts/os/common/2.html/"},{"categories":["os"],"content":"åˆ†ç¦»ç¡¬ä»¶çš„ç›¸å…³æ€§ åˆ†å±‚çš„ä¸»è¦ç›®çš„å’Œå¥½å¤„åœ¨äºå±è”½åº•å±‚ç»†èŠ‚ï¼Œä½¿ä¸Šå±‚å¼€å‘æ›´åŠ ç®€å•ã€‚ è®¡ç®—æœºé¢†åŸŸçš„ä¸€ä¸ªåŸºæœ¬æ–¹æ³•æ˜¯å¢åŠ ä¸€ä¸ªæŠ½è±¡å±‚ï¼Œä»è€Œä½¿å¾—æŠ½è±¡å±‚çš„ä¸Šä¸‹ä¸¤å±‚ç‹¬ç«‹åœ°å‘å±•ã€‚ åˆ†ç¦»ç¡¬ä»¶çš„ç›¸å…³æ€§ï¼Œå°±æ˜¯è¦æŠŠæ“ä½œç¡¬ä»¶å’Œå¤„ç†ç¡¬ä»¶åŠŸèƒ½å·®å¼‚çš„ä»£ç æŠ½ç¦»å‡ºæ¥ï¼Œå½¢æˆä¸€ä¸ªç‹¬ç«‹çš„è½¯ä»¶æŠ½è±¡å±‚ï¼Œå¯¹å¤–æä¾›ç›¸åº”çš„æ¥å£ï¼Œæ–¹ä¾¿ä¸Šå±‚å¼€å‘ã€‚ æ¯”å¦‚è¿›ç¨‹è°ƒåº¦æ¨¡å—ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªæœºåˆ¶ï¼šè¿›ç¨‹è°ƒåº¦å’Œè¿›ç¨‹åˆ‡æ¢ã€‚ ä¸ç®¡æ˜¯åœ¨ ARM è¿˜æ˜¯ X86 ç¡¬ä»¶å¹³å°ï¼Œé€‰æ‹©è¿›ç¨‹è°ƒåº¦çš„ä»£ç ä¸å®¹æ˜“å‘ç”Ÿæ”¹å˜ï¼Œè€Œéœ€è¦æ”¹å˜çš„ä»£ç æ˜¯è¿›ç¨‹åˆ‡æ¢çš„ç›¸å…³ä»£ç ï¼Œå› ä¸ºä¸åŒçš„ç¡¬ä»¶å¹³å°ä¸Šä¸‹æ–‡æ˜¯ä¸åŒçš„ã€‚ æ‰€ä»¥è¿™é‡Œæœ€å¥½æ˜¯å°†è¿›ç¨‹åˆ‡æ¢åˆ†ç¦»åˆ°ç‹¬ç«‹çš„å±‚å®ç°ï¼Œå½“æ“ä½œç³»ç»Ÿè¦è¿è¡Œåœ¨ä¸åŒçš„ç¡¬ä»¶å¹³å°ä¸Šæ—¶åªéœ€è¦ä¿®æ”¹è¯¥å±‚çš„ç›¸å…³ä»£ç ï¼Œæé«˜å…¶ç§»æ¤æ€§ã€‚ ","date":"2022-03-07","objectID":"/posts/os/common/2.html/:3:1","tags":["os","note"],"title":"osä¸­çš„å†…æ ¸","uri":"/posts/os/common/2.html/"},{"categories":["os"],"content":"è‡ªä¸»è®¾è®¡çš„é€‰æ‹© å°†å†…æ ¸åˆ†ä¸ºä¸‰ä¸ªå¤§å±‚åˆ†åˆ«æ˜¯ï¼š å†…æ ¸æ¥å£å±‚ï¼šå®šä¹‰äº†ä¸€ç³»åˆ—æ¥å£ å†…æ ¸åŠŸèƒ½å±‚ï¼šä¸»è¦å®Œæˆå„ç§å®é™…åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½æŒ‰ç…§å…¶ç±»åˆ«åˆ†æˆå„ç§æ¨¡å— å†…æ ¸ç¡¬ä»¶å±‚ï¼šä¸»è¦åŒ…æ‹¬ä¸€ä¸ªå…·ä½“ç¡¬ä»¶å¹³å°ç›¸å…³çš„ä»£ç  è¿™ä¹ˆè®¾è®¡çš„è€ƒè™‘ï¼š å¸å–å¾®å†…æ ¸ä¼˜åŠ¿ï¼ˆå†…æ ¸å°ç»´æŠ¤æˆæœ¬å°ï¼Œä¸”æ‰©å±•æ€§å¼ºï¼‰ï¼Œå†…æ ¸å®ç°çš„åŠŸèƒ½å¾ˆå°‘ï¼› å¸æ”¶å®å†…æ ¸ä¼˜åŠ¿ï¼ˆé«˜è€¦åˆä»£æ¥çš„æ€§èƒ½æå‡ï¼‰ï¼ŒæŠŠæ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œç»„ä»¶ã€å…¶å®ƒåŠŸèƒ½ç»„ä»¶ä½œä¸ºè™šæ‹Ÿè®¾å¤‡äº¤ç”±è®¾å¤‡ç®¡ç†ï¼› ","date":"2022-03-07","objectID":"/posts/os/common/2.html/:3:2","tags":["os","note"],"title":"osä¸­çš„å†…æ ¸","uri":"/posts/os/common/2.html/"},{"categories":["os"],"content":"ä¸šç•Œæˆç†Ÿå†…æ ¸æ¶æ„ ","date":"2022-03-07","objectID":"/posts/os/common/2.html/:4:0","tags":["os","note"],"title":"osä¸­çš„å†…æ ¸","uri":"/posts/os/common/2.html/"},{"categories":["os"],"content":"Linux å†…æ ¸ åŸºæœ¬æ€æƒ³ï¼šä¸€åˆ‡éƒ½æ˜¯æ–‡ä»¶ æ”¯æŒç±» UNIXã€POSIX æ ‡å‡†æ¥å£ï¼Œä¹Ÿæ”¯æŒå¤šç”¨æˆ·ã€å¤šè¿›ç¨‹ã€å¤šçº¿ç¨‹ã€å¤šæ ¸è¿è¡Œ å®å†…æ ¸ç»“æ„ åŸå›¾åœ°å€ ","date":"2022-03-07","objectID":"/posts/os/common/2.html/:4:1","tags":["os","note"],"title":"osä¸­çš„å†…æ ¸","uri":"/posts/os/common/2.html/"},{"categories":["os"],"content":"Darwin-XNU å†…æ ¸ ä¸»è¦ç‰¹ç‚¹å°±æ˜¯ä¸¤ä¸ªå†…æ ¸å±‚å³ Mach å±‚ä¸ BSD å±‚ã€‚ å¾®å†…æ ¸ç»“æ„ åœ¨è°ƒç”¨ Darwin ç³»ç»Ÿ API æ—¶ï¼Œä¼šä¼ å…¥ä¸€ä¸ª API å·ç ï¼Œç”¨è¿™ä¸ªå·ç å»ç´¢å¼• Mach é™·å…¥ä¸­æ–­æœåŠ¡è¡¨ä¸­çš„å‡½æ•°ã€‚æ­¤æ—¶ï¼ŒAPI å·ç å¦‚æœå°äº 0ï¼Œåˆ™è¡¨æ˜è¯·æ±‚çš„æ˜¯ Mach å†…æ ¸çš„æœåŠ¡ï¼ŒAPI å·ç å¦‚æœå¤§äº 0ï¼Œåˆ™è¡¨æ˜è¯·æ±‚çš„æ˜¯ BSD å†…æ ¸çš„æœåŠ¡ï¼Œå®ƒæä¾›ä¸€æ•´å¥—æ ‡å‡†çš„ POSIX æ¥å£ã€‚ ","date":"2022-03-07","objectID":"/posts/os/common/2.html/:4:2","tags":["os","note"],"title":"osä¸­çš„å†…æ ¸","uri":"/posts/os/common/2.html/"},{"categories":["os"],"content":"Windows NT å†…æ ¸ é«˜å†…èšï¼Œä½è€¦åˆ ç¡¬ä»¶æŠ½è±¡å±‚ HAL ï¼Œå¹¶åœ¨ä¹‹ä¸Šå®šä¹‰äº†å°å†…æ ¸ æ··åˆå†…æ ¸ç»“æ„ Windows NTä»è®¾è®¡æ¶æ„ä¸Šçœ‹å±äºå¾®å†…æ ¸ç»“æ„ï¼ŒHALå±‚ä¹‹ä¸Šçš„å†…æ ¸å±‚å±äºå¾®å†…æ ¸çš„æ ¸å¿ƒï¼Œä¹‹ä¸Šçš„æ‰§è¡Œä½“å±äºå†…æ ¸çº§åˆ«çš„åº”ç”¨å±‚ã€‚Windows NTä»æƒé™çš„è§’åº¦çœ‹å±äºå®å†…æ ¸ï¼Œå†…æ ¸æ¨¡å¼ä¹‹ä¸‹åŠŸèƒ½å®Œå¤‡ï¼Œå¹¶ä¸æ˜¯å¾®å†…æ ¸é‚£æ ·å•è–„ã€‚è¿™ç§è®¾è®¡å…¼é¡¾äº†ç»“æ„æ¸…æ™°å’Œæ€§èƒ½è‰¯å¥½ä¸¤ä¸ªä¼˜ç‚¹ã€‚ ","date":"2022-03-07","objectID":"/posts/os/common/2.html/:4:3","tags":["os","note"],"title":"osä¸­çš„å†…æ ¸","uri":"/posts/os/common/2.html/"},{"categories":["os"],"content":"å‚è€ƒ https://time.geekbang.org/column/article/372609 ","date":"2022-03-07","objectID":"/posts/os/common/2.html/:5:0","tags":["os","note"],"title":"osä¸­çš„å†…æ ¸","uri":"/posts/os/common/2.html/"},{"categories":["search engine"],"content":"æ­£æ’ç´¢å¼•å’Œå€’æ’ç´¢å¼• ä¹¦ç±çš„ç›®å½•ä¹Ÿæ˜¯ç”Ÿæ´»ä¸­å¸¸è§çš„æ­£æ’ç´¢å¼•ã€‚ ","date":"2022-03-05","objectID":"/posts/search_engine/es/2.html/:1:0","tags":["search_engine","note","es"],"title":"ElasticSearchå€’æ’ç´¢å¼•\u0026Analysisåˆ†è¯","uri":"/posts/search_engine/es/2.html/"},{"categories":["search engine"],"content":"å€’æ’ç´¢å¼•æ ¸å¿ƒç»„æˆ å…¶ä¸»è¦åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼š å•è¯è¯å…¸ï¼ˆTerm Dictionaryï¼‰ è®°å½•æ‰€æœ‰çš„å•è¯ï¼Œè®°å½•å•è¯åˆ°å€’æ’åˆ—è¡¨çš„å…³è”å…³ç³»ã€‚ å•è¯è¯å…¸ä¸€èˆ¬è¾ƒå¤§ï¼Œå¯é€šè¿‡æ’å…¥æŸ¥è¯¢æ€§èƒ½è¾ƒé«˜ B+æ ‘æˆ–å“ˆå¸Œæ‹‰é“¾æ³•å®ã€‚ å€’æ’åˆ—è¡¨ï¼ˆPosting Listï¼‰ è®°å½•å•è¯å¯¹åº”çš„æ–‡æ¡£ç»„åˆï¼Œç”±å€’æ’ç´¢å¼•é¡¹ç»„æˆã€‚ å…¶ä¸­å€’æ’ç´¢å¼•é¡¹ï¼ˆPostingï¼‰ï¼š æ–‡æ¡£ ID è¯é¢‘ TFï¼šè®°å½•å•è¯åœ¨æ–‡æ¡£å‡ºç°çš„æ¬¡æ•°ï¼Œç”¨äºç›¸å…³æ€§è¯„åˆ† ä½ç½®ï¼ˆPositionï¼‰ï¼šå•è¯åœ¨æ–‡æ¡£ä¸­åˆ†è¯çš„ä½ç½®ï¼Œåˆ©äºè¯­å¥æœç´¢ åç§»ï¼ˆOffsetï¼‰:å•è¯åœ¨æ–‡æ¡£ä¸­å¼€å§‹ç»“æŸä½ç½®ï¼Œå®ç°é«˜äº®æ˜¾ç¤º ","date":"2022-03-05","objectID":"/posts/search_engine/es/2.html/:1:1","tags":["search_engine","note","es"],"title":"ElasticSearchå€’æ’ç´¢å¼•\u0026Analysisåˆ†è¯","uri":"/posts/search_engine/es/2.html/"},{"categories":["search engine"],"content":"Analysis \u0026 Analyzer Analysis å³æ–‡æœ¬åˆ†æï¼Œæ˜¯æŠŠå…¨æ–‡è½¬æ¢ä¸€ç³»åˆ—å•è¯ï¼ˆterm/tokenï¼‰çš„è¿‡ç¨‹ï¼Œä¹Ÿå«åˆ†è¯ã€‚è€Œ Analysis å°±æ˜¯é€šè¿‡ Analyzer å®ç°çš„ã€‚ å¯ä½¿ç”¨ Elasticsearch å†…ç½®çš„åˆ†æå™¨æˆ–è€…æŒ‰éœ€å®šåˆ¶åˆ†æå™¨ã€‚ é™¤äº†åœ¨æ•°æ®å†™å…¥æ—¶è½¬æ¢è¯æ¡ï¼ŒåŒ¹é… Query è¯­å¥æ—¶ä¹Ÿéœ€è¦ç”¨ç›¸åŒçš„åˆ†æå™¨å¯¹æŸ¥è¯¢è¯­å¥è¿›è¡Œåˆ†æã€‚ ","date":"2022-03-05","objectID":"/posts/search_engine/es/2.html/:2:0","tags":["search_engine","note","es"],"title":"ElasticSearchå€’æ’ç´¢å¼•\u0026Analysisåˆ†è¯","uri":"/posts/search_engine/es/2.html/"},{"categories":["search engine"],"content":"Analyzer çš„ç»„æˆ åˆ†è¯å™¨æ˜¯ä¸“é—¨å¤„ç†åˆ†è¯çš„ç»„ä»¶ï¼ŒAnalyzer ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š Character Filtersï¼šé’ˆå¯¹åŸå§‹æ–‡æœ¬å¤„ç†ï¼Œå¦‚å»é™¤ html Tokenizerï¼šæŒ‰ç…§è§„åˆ™ï¼Œåˆ‡åˆ†ä¸ºå•è¯ Token Filterï¼šå°†åˆ‡åˆ†çš„å•è¯è¿›è¡ŒåŠ å·¥ï¼Œå°å†™ï¼Œåˆ é™¤ stopwordsï¼Œå¢åŠ åŒä¹‰è¯ ä¸€èˆ¬æŒ‰ç…§é¡ºåº Character Filters -\u003e Tokenizer -\u003e Token Filter å¯¹è¯­å¥è¿›è¡Œæ‹†åˆ†ã€‚ ","date":"2022-03-05","objectID":"/posts/search_engine/es/2.html/:2:1","tags":["search_engine","note","es"],"title":"ElasticSearchå€’æ’ç´¢å¼•\u0026Analysisåˆ†è¯","uri":"/posts/search_engine/es/2.html/"},{"categories":["search engine"],"content":"ä½¿ç”¨ _analyzer API å¯æŒ‡å®š Analyzer è¿›è¡Œæµ‹è¯• æŒ‡å®šç´¢å¼•çš„å­—æ®µè¿›è¡Œæµ‹è¯• è‡ªå®šä¹‰åˆ†è¯è¿›è¡Œæµ‹è¯• GET /_analyze { \"analyzer\":\"standard\", \"text\":\"xxx\" } POST index/_analyze { \"field\":\"xxx\", \"text\":\"xxx\" } POST /_analyze { \"tokenizer\":\"standard\", \"filter\":[\"lowercase\"], \"text\":\"xxx\" } ","date":"2022-03-05","objectID":"/posts/search_engine/es/2.html/:2:2","tags":["search_engine","note","es"],"title":"ElasticSearchå€’æ’ç´¢å¼•\u0026Analysisåˆ†è¯","uri":"/posts/search_engine/es/2.html/"},{"categories":["search engine"],"content":"Analyzer ç±»å‹ Standard Analyzer é»˜è®¤åˆ†è¯å™¨ æŒ‰è¯åˆ‡åˆ† å°å†™å¤„ç† ç»„æˆå¦‚ä¸‹ï¼š Tokenizer:Standard TokenFilters:Standard\u0026LowerCase\u0026Stop(é»˜è®¤å…³é—­) #standard GET _analyze { \"analyzer\": \"standard\", \"text\": \"2 running Quick brown-foxes leap over lazy dogs in the summer evening.\" } { \"tokens\" : [ { \"token\" : \"2\", \"start_offset\" : 0, \"end_offset\" : 1, \"type\" : \"\u003cNUM\u003e\", \"position\" : 0 }, { \"token\" : \"running\", \"start_offset\" : 2, \"end_offset\" : 9, \"type\" : \"\u003cALPHANUM\u003e\", \"position\" : 1 }, { \"token\" : \"quick\", \"start_offset\" : 10, \"end_offset\" : 15, \"type\" : \"\u003cALPHANUM\u003e\", \"position\" : 2 }, { \"token\" : \"brown\", \"start_offset\" : 16, \"end_offset\" : 21, \"type\" : \"\u003cALPHANUM\u003e\", \"position\" : 3 }, { \"token\" : \"foxes\", \"start_offset\" : 22, \"end_offset\" : 27, \"type\" : \"\u003cALPHANUM\u003e\", \"position\" : 4 }, { \"token\" : \"leap\", \"start_offset\" : 28, \"end_offset\" : 32, \"type\" : \"\u003cALPHANUM\u003e\", \"position\" : 5 }, { \"token\" : \"over\", \"start_offset\" : 33, \"end_offset\" : 37, \"type\" : \"\u003cALPHANUM\u003e\", \"position\" : 6 }, { \"token\" : \"lazy\", \"start_offset\" : 38, \"end_offset\" : 42, \"type\" : \"\u003cALPHANUM\u003e\", \"position\" : 7 }, { \"token\" : \"dogs\", \"start_offset\" : 43, \"end_offset\" : 47, \"type\" : \"\u003cALPHANUM\u003e\", \"position\" : 8 }, { \"token\" : \"in\", \"start_offset\" : 48, \"end_offset\" : 50, \"type\" : \"\u003cALPHANUM\u003e\", \"position\" : 9 }, { \"token\" : \"the\", \"start_offset\" : 51, \"end_offset\" : 54, \"type\" : \"\u003cALPHANUM\u003e\", \"position\" : 10 }, { \"token\" : \"summer\", \"start_offset\" : 55, \"end_offset\" : 61, \"type\" : \"\u003cALPHANUM\u003e\", \"position\" : 11 }, { \"token\" : \"evening\", \"start_offset\" : 62, \"end_offset\" : 69, \"type\" : \"\u003cALPHANUM\u003e\", \"position\" : 12 } ] } Simple Analyzer æŒ‰ç…§éå­—æ¯åˆ‡åˆ†ï¼Œéå­—æ¯çš„éƒ½è¢«å»é™¤ å°å†™å¤„ç† ç»„æˆå¦‚ä¸‹ï¼š Tokenizerï¼šLowerCase GET _analyze { \"analyzer\": \"simple\", \"text\": \"2 running Quick brown-foxes leap over lazy dogs in the summer evening.\" } { \"tokens\" : [ { \"token\" : \"running\", \"start_offset\" : 2, \"end_offset\" : 9, \"type\" : \"word\", \"position\" : 0 }, { \"token\" : \"quick\", \"start_offset\" : 10, \"end_offset\" : 15, \"type\" : \"word\", \"position\" : 1 }, { \"token\" : \"brown\", \"start_offset\" : 16, \"end_offset\" : 21, \"type\" : \"word\", \"position\" : 2 }, { \"token\" : \"foxes\", \"start_offset\" : 22, \"end_offset\" : 27, \"type\" : \"word\", \"position\" : 3 }, { \"token\" : \"leap\", \"start_offset\" : 28, \"end_offset\" : 32, \"type\" : \"word\", \"position\" : 4 }, { \"token\" : \"over\", \"start_offset\" : 33, \"end_offset\" : 37, \"type\" : \"word\", \"position\" : 5 }, { \"token\" : \"lazy\", \"start_offset\" : 38, \"end_offset\" : 42, \"type\" : \"word\", \"position\" : 6 }, { \"token\" : \"dogs\", \"start_offset\" : 43, \"end_offset\" : 47, \"type\" : \"word\", \"position\" : 7 }, { \"token\" : \"in\", \"start_offset\" : 48, \"end_offset\" : 50, \"type\" : \"word\", \"position\" : 8 }, { \"token\" : \"the\", \"start_offset\" : 51, \"end_offset\" : 54, \"type\" : \"word\", \"position\" : 9 }, { \"token\" : \"summer\", \"start_offset\" : 55, \"end_offset\" : 61, \"type\" : \"word\", \"position\" : 10 }, { \"token\" : \"evening\", \"start_offset\" : 62, \"end_offset\" : 69, \"type\" : \"word\", \"position\" : 11 } ] } Whitespace Analyzer æŒ‰ç…§ç©ºæ ¼åˆ‡åˆ† ç»„æˆå¦‚ä¸‹ï¼š Tokenizer:Whitespace Stop Analyzer ç›¸æ¯” Simple Analyzer å¤šäº† stop filter ä¼šæŠŠ the\\a\\is ç­‰ä¿®é¥°æ€§è¯è¯­å»é™¤ ç»„æˆå¦‚ä¸‹ï¼š Tokenizer:Lowe Case TokenFilter:Stop #stop GET _analyze { \"analyzer\": \"whitespace\", \"text\": \"2 running Quick brown-foxes leap over lazy dogs in the summer evening.\" } { \"tokens\" : [ { \"token\" : \"2\", \"start_offset\" : 0, \"end_offset\" : 1, \"type\" : \"word\", \"position\" : 0 }, { \"token\" : \"running\", \"start_offset\" : 2, \"end_offset\" : 9, \"type\" : \"word\", \"position\" : 1 }, { \"token\" : \"Quick\", \"start_offset\" : 10, \"end_offset\" : 15, \"type\" : \"word\", \"position\" : 2 }, { \"token\" : \"brown-foxes\", \"start_offset\" : 16, \"end_offset\" : 27, \"type\" : \"word\", \"position\" : 3 }, { \"token\" : \"leap\", \"start_offset\" : 28, \"end_offset\" : 32, \"type\" : \"word\", \"position\" : 4 }, { \"token\" : \"over\", \"start_offset\" : 33, \"end_offset\" : 37, \"type\" : \"word\", \"position\" : 5 }, { \"token\" : \"lazy\", \"start_offset\" : 38, \"end_offset\" : 42, \"type\" : \"word\", \"position\" : 6 }, { \"token\" : \"dogs\", \"start_offset\" : 43, \"end_offset\" : 47, \"type\" : \"word\", \"position\" : 7 },","date":"2022-03-05","objectID":"/posts/search_engine/es/2.html/:2:3","tags":["search_engine","note","es"],"title":"ElasticSearchå€’æ’ç´¢å¼•\u0026Analysisåˆ†è¯","uri":"/posts/search_engine/es/2.html/"},{"categories":["search engine"],"content":"å‚è€ƒ https://time.geekbang.org/course/intro/100030501?tab=catalog ","date":"2022-03-05","objectID":"/posts/search_engine/es/2.html/:3:0","tags":["search_engine","note","es"],"title":"ElasticSearchå€’æ’ç´¢å¼•\u0026Analysisåˆ†è¯","uri":"/posts/search_engine/es/2.html/"},{"categories":["os"],"content":" Hello OS æ˜¯åŸºäºç¡¬ä»¶ï¼Œä¸€ä¸ªæœ€å°çš„æ“ä½œç³»ç»Ÿå†…æ ¸ Hello OS çš„å¼•å¯¼æµç¨‹å¦‚ä¸‹ï¼š BIOS å›ºä»¶æ˜¯å›ºåŒ–åœ¨ PC æœºä¸»æ¿ä¸Šçš„ ROM èŠ¯ç‰‡ä¸­çš„ï¼Œå¯æ‰ç”µä¿å­˜ï¼Œå®ƒè´Ÿè´£æ£€æµ‹å’Œåˆå§‹åŒ– CPUã€å†…å­˜åŠä¸»æ¿å¹³å°ã€‚ PC æœºä¸Šç”µåçš„ç¬¬ä¸€æ¡æŒ‡ä»¤å°±æ˜¯ BIOS å›ºä»¶ä¸­çš„ï¼Œç„¶ååŠ è½½å¼•å¯¼è®¾å¤‡ï¼ˆå¤§æ¦‚ç‡æ˜¯ç¡¬ç›˜ï¼‰ä¸­çš„ç¬¬ä¸€ä¸ªæ‰‡åŒºæ•°æ®ï¼Œåˆ° 0x7c00 åœ°å€å¼€å§‹çš„å†…å­˜ç©ºé—´ï¼Œå†æ¥ç€è·³è½¬åˆ° 0x7c00 å¤„æ‰§è¡ŒæŒ‡ä»¤ã€‚ ","date":"2022-03-05","objectID":"/posts/os/common/1.html/:0:0","tags":["os","note","æ±‡ç¼–"],"title":"HelloOs","uri":"/posts/os/common/1.html/"},{"categories":["os"],"content":"å¼•å¯¼æ±‡ç¼–éƒ¨åˆ† MBT_HDR_FLAGS EQU 0x00010003 MBT_HDR_MAGIC EQU 0x1BADB002 ;å¤šå¼•å¯¼åè®®å¤´é­”æ•° MBT_HDR2_MAGIC EQU 0xe85250d6 ;ç¬¬äºŒç‰ˆå¤šå¼•å¯¼åè®®å¤´é­”æ•° global _start ;å¯¼å‡º_startç¬¦å· extern main ;å¯¼å…¥å¤–éƒ¨çš„mainå‡½æ•°ç¬¦å· [section .start.text] ;å®šä¹‰.start.textä»£ç èŠ‚ [bits 32] ;æ±‡ç¼–æˆ32ä½ä»£ç  _start: jmp _entry ALIGN 8 mbt_hdr: dd MBT_HDR_MAGIC dd MBT_HDR_FLAGS dd -(MBT_HDR_MAGIC+MBT_HDR_FLAGS) dd mbt_hdr dd _start dd 0 dd 0 dd _entry ;ä»¥ä¸Šæ˜¯GRUBæ‰€éœ€è¦çš„å¤´ ALIGN 8 mbt2_hdr: DD MBT_HDR2_MAGIC DD 0 DD mbt2_hdr_end - mbt2_hdr DD -(MBT_HDR2_MAGIC + 0 + (mbt2_hdr_end - mbt2_hdr)) DW 2, 0 DD 24 DD mbt2_hdr DD _start DD 0 DD 0 DW 3, 0 DD 12 DD _entry DD 0 DW 0, 0 DD 8 mbt2_hdr_end: ;ä»¥ä¸Šæ˜¯GRUB2æ‰€éœ€è¦çš„å¤´ ;åŒ…å«ä¸¤ä¸ªå¤´æ˜¯ä¸ºäº†åŒæ—¶å…¼å®¹GRUBã€GRUB2 ä¸Šè¿°æ±‡ç¼–ä»£ç æ˜¯ç”¨æ±‡ç¼–å®šä¹‰çš„ GRUB çš„å¤šå¼•å¯¼åè®®å¤´ï¼Œå³ä¸€å®šæ ¼å¼çš„æ•°æ®ï¼Œé€šè¿‡å®ç°è¯¥åè®®æ ‡å‡†è®© GRUB èƒ½è¯†åˆ« Hello OSã€‚ ALIGN 8 _entry: ;å…³ä¸­æ–­ cli ;å…³ä¸å¯å±è”½ä¸­æ–­ in al, 0x70 or al, 0x80 out 0x70,al ;é‡æ–°åŠ è½½GDT lgdt [GDT_PTR] jmp dword 0x8 :_32bits_mode _32bits_mode: ä¸Šè¿°æ±‡ç¼–ä»£ç ä½œç”¨äºå…³æ‰ä¸­æ–­ï¼Œè®¾å®š CPU çš„å·¥ä½œæ¨¡å¼ã€‚ ;ä¸‹é¢åˆå§‹åŒ–Cè¯­è¨€å¯èƒ½ä¼šç”¨åˆ°çš„å¯„å­˜å™¨ mov ax, 0x10 mov ds, ax mov ss, ax mov es, ax mov fs, ax mov gs, ax xor eax,eax xor ebx,ebx xor ecx,ecx xor edx,edx xor edi,edi xor esi,esi xor ebp,ebp xor esp,esp ;åˆå§‹åŒ–æ ˆï¼ŒCè¯­è¨€éœ€è¦æ ˆæ‰èƒ½å·¥ä½œ mov esp,0x9000 ;è°ƒç”¨Cè¯­è¨€å‡½æ•°main call main ;è®©CPUåœæ­¢æ‰§è¡ŒæŒ‡ä»¤ halt_step: halt jmp halt_step è¯¥éƒ¨åˆ†æ±‡ç¼–ä»£ç æ˜¯åˆå§‹åŒ– CPU çš„å¯„å­˜å™¨å’Œ C è¯­è¨€çš„è¿è¡Œç¯å¢ƒã€‚ GDT_START: knull_dsc: dq 0 kcode_dsc: dq 0x00cf9e000000ffff kdata_dsc: dq 0x00cf92000000ffff k16cd_dsc: dq 0x00009e000000ffff k16da_dsc: dq 0x000092000000ffff GDT_END: GDT_PTR: GDTLEN dw GDT_END-GDT_START-1 GDTBASE dd GDT_START è¯¥éƒ¨åˆ†æ±‡ç¼–ä»£ç æ˜¯æœåŠ¡ CPU å·¥ä½œæ¨¡å¼æ‰€éœ€è¦çš„æ•°æ®ã€‚ ","date":"2022-03-05","objectID":"/posts/os/common/1.html/:1:0","tags":["os","note","æ±‡ç¼–"],"title":"HelloOs","uri":"/posts/os/common/1.html/"},{"categories":["os"],"content":"Hello OS çš„ä¸»å‡½æ•° ä¸Šè¿°æ±‡ç¼–ä»£ç è°ƒç”¨çš„ main å‡½æ•°ï¼Œæ˜¯ç”±ä¸‹é¢ C è¯­è¨€ä»£ç åˆ†åˆ«ç”± nasm å’Œ GCC ç¼–è¯‘å¯é“¾æ¥æ¨¡å—ï¼Œç”± LD è¿æ¥å™¨é“¾æ¥åœ¨ä¸€èµ·ï¼Œå½¢æˆå¯æ‰§è¡Œç¨‹åºæ–‡ä»¶ï¼š #include \"vgastr.h\" void main() { printf(\"Hello OS!\"); return; } ","date":"2022-03-05","objectID":"/posts/os/common/1.html/:2:0","tags":["os","note","æ±‡ç¼–"],"title":"HelloOs","uri":"/posts/os/common/1.html/"},{"categories":["os"],"content":"æ§åˆ¶è®¡ç®—æœºå±å¹• å±å¹•ä¸Šæ˜¾ç¤ºå­—ç¬¦ï¼Œå°±è¦ç¼–ç¨‹æ“ä½œæ˜¾å¡ã€‚ æ˜¾å¡éƒ½ä¼šæ”¯æŒ VESA çš„æ ‡å‡†ï¼Œè¯¥æ ‡å‡†ä¸‹æœ‰ä¸¤ç§å·¥ä½œæ¨¡å¼ï¼ˆå­—ç¬¦å’Œå›¾å½¢ï¼‰ï¼Œä¸”ä¸ºæ”¯æŒè¯¥æ ‡å‡†è¿˜ä¼šæä¾› VGABIOS çš„å›ºä»¶ç¨‹åºã€‚ ä¸‹å›¾å³æ˜¾å¡çš„å­—ç¬¦æ¨¡å¼å·¥ä½œç»†èŠ‚ï¼Œå¯ä»¥çœ‹åˆ°ä¸»è¦çš„ç‰¹ç‚¹æ˜¯åœ¨äºä¼šæ¯ä¸¤ä¸ªå­—èŠ‚ï¼ˆASCIIç å’Œå­—ç¬¦é¢œè‰²å€¼ï¼‰å¯¹åº”ä¸€ä¸ªå­—ç¬¦ã€‚ ä¸Šè¿°ä¸»å‡½æ•°ä¸­printfæ§åˆ¶è¾“å‡ºä»£ç å¦‚ä¸‹ï¼š void _strwrite(char* string) { char* p_strdst = (char*)(0xb8000);//æŒ‡å‘æ˜¾å­˜çš„å¼€å§‹åœ°å€ while (*string) { *p_strdst = *string++; // è¿™é‡Œçœç•¥äº†å­—ç¬¦é¢œè‰²ä¿¡æ¯ p_strdst += 2; } return; } void printf(char* fmt, ...) { _strwrite(fmt); return; } ","date":"2022-03-05","objectID":"/posts/os/common/1.html/:3:0","tags":["os","note","æ±‡ç¼–"],"title":"HelloOs","uri":"/posts/os/common/1.html/"},{"categories":["os"],"content":"make make å³å·¥å…·ç¨‹åºï¼Œä¼šè¯»å–makefileæ–‡ä»¶ä¸­çš„è§„åˆ™è‡ªåŠ¨åŒ–æ„å»ºè½¯ä»¶ã€‚ makefileæ–‡ä»¶ä¸­çš„è§„åˆ™ï¼š é¦–å…ˆæœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ„å»ºç›®æ ‡ç§°ä¸ºtarget ç›®æ ‡åé¢ç´§è·Ÿç€ç”¨äºæ„å»ºè¯¥ç›®æ ‡æ‰€éœ€è¦çš„æ–‡ä»¶ ç›®æ ‡ä¸‹é¢æ˜¯æ„å»ºè¯¥ç›®æ ‡æ‰€éœ€è¦çš„å‘½ä»¤åŠå‚æ•° åŒæ—¶æ£€æŸ¥æ–‡ä»¶çš„ä¾èµ–å…³ç³» demoå¦‚ä¸‹ï¼š CC = gcc #å®šä¹‰ä¸€ä¸ªå®CC ç­‰äºgcc CFLAGS = -c #å®šä¹‰ä¸€ä¸ªå® CFLAGS ç­‰äº-c OBJS_FILE = file.o file1.o file2.o file3.o file4.o #å®šä¹‰ä¸€ä¸ªå® .PHONY : all everything #å®šä¹‰ä¸¤ä¸ªä¼ªç›®æ ‡allã€everything all:everything #ä¼ªç›®æ ‡allä¾èµ–äºä¼ªç›®æ ‡everything everything :$(OBJS_FILE) #ä¼ªç›®æ ‡everythingä¾èµ–äºOBJS_FILEï¼Œè€ŒOBJS_FILEæ˜¯å®ä¼šè¢« #æ›¿æ¢æˆfile.o file1.o file2.o file3.o file4.o %.o : %.c $(CC) $(CFLAGS) -o $@ $\u003c #åé¢ä¸ºæ³¨é‡Š :=æˆ–=å¯å®šä¹‰å®ï¼Œå¼•ç”¨å®æ—¶è¦ç”¨$(å®å)ï¼Œå®æœ€ç»ˆä¼šåœ¨å®å‡ºç°çš„åœ°æ–¹æ›¿æ¢æˆç›¸åº”çš„å­—ç¬¦ä¸² PHONY è¡¨ç¤ºå®šä¹‰ä¼ªç›®æ ‡ï¼ˆä¸ä»£è¡¨ä¸€ä¸ªçœŸæ­£çš„æ–‡ä»¶åï¼‰ï¼Œåœ¨æ‰§è¡Œ make æ—¶å¯ä»¥æŒ‡å®šè¿™ä¸ªç›®æ ‡æ¥æ‰§è¡Œå…¶æ‰€åœ¨è§„åˆ™å®šä¹‰çš„å‘½ä»¤ ä¼ªç›®æ ‡å¯ä»¥ä¾èµ–äºå¦ä¸€ä¸ªä¼ªç›®æ ‡æˆ–è€…æ–‡ä»¶ %.o : %.cï¼Œå…¶ä¸­%è¡¨ç¤ºé€šé…ç¬¦ï¼Œè¡¨ç¤ºæ‰€æœ‰ä»¥â€œ.oâ€ç»“å°¾çš„æ–‡ä»¶ä¾èµ–äºæ‰€æœ‰ä»¥â€œ.câ€ç»“å°¾çš„æ–‡ä»¶ è¿™é‡Œè¡¥å……ä¸‹ä¸Šé¢ GCC ç¼–è¯‘çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨æ§åˆ¶è¯¥æµç¨‹æ¥å¾—åˆ°ç›¸åº”çš„ä¸­é—´æ–‡ä»¶ï¼š gcc HelloWorld.c -E -o HelloWorld.ié¢„å¤„ç†ï¼šåŠ å…¥å¤´æ–‡ä»¶ï¼Œæ›¿æ¢å® gcc HelloWorld.c -S -c -o HelloWorld.sç¼–è¯‘ï¼šåŒ…å«é¢„å¤„ç†ï¼Œå°† C ç¨‹åºè½¬æ¢æˆæ±‡ç¼–ç¨‹åº gcc HelloWorld.c -c -o HelloWorld.oæ±‡ç¼–ï¼šåŒ…å«é¢„å¤„ç†å’Œç¼–è¯‘ï¼Œå°†æ±‡ç¼–ç¨‹åºè½¬æ¢æˆå¯é“¾æ¥çš„äºŒè¿›åˆ¶ç¨‹åº gcc HelloWorld.c -o HelloWorldé“¾æ¥ï¼šåŒ…å«ä»¥ä¸Šæ‰€æœ‰æ“ä½œï¼Œå°†å¯é“¾æ¥çš„äºŒè¿›åˆ¶ç¨‹åºå’Œå…¶å®ƒåˆ«çš„åº“é“¾æ¥åœ¨ä¸€èµ·ï¼Œå½¢æˆå¯æ‰§è¡Œçš„ç¨‹åºæ–‡ä»¶ ","date":"2022-03-05","objectID":"/posts/os/common/1.html/:4:0","tags":["os","note","æ±‡ç¼–"],"title":"HelloOs","uri":"/posts/os/common/1.html/"},{"categories":["os"],"content":"ç¼–è¯‘ ","date":"2022-03-05","objectID":"/posts/os/common/1.html/:5:0","tags":["os","note","æ±‡ç¼–"],"title":"HelloOs","uri":"/posts/os/common/1.html/"},{"categories":["os"],"content":"å®‰è£… å½“Hello OS.binç”Ÿæˆä¹‹åï¼Œéœ€è¦è®© GRUB èƒ½å¤Ÿå‘ç°æ‰èƒ½åœ¨å¯åŠ¨æ—¶è¢«åŠ è½½ï¼Œè¯¥è¿‡ç¨‹ç§°ä¹‹ä¸ºå®‰è£…ã€‚ æˆ‘ä»¬é€šè¿‡ GRUB å¯åŠ¨æ—¶çš„è§„æ•´ï¼Œå³åŠ è½½ä¸€ä¸ªgrub.cfgçš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ ¹æ®å…¶ä¸­çš„å†…å®¹æ‰§è¡Œç›¸åº”çš„æ“ä½œï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†å†…å®¹å°±æ˜¯å¯åŠ¨é¡¹ã€‚åœ¨å¯åŠ¨æ—¶å¯é€‰æ‹©ä¸åŒçš„å¯åŠ¨é¡¹åæ ¹æ®é€‰æ‹©çš„å¯åŠ¨é¡¹ä¿¡æ¯æ¥åŠ è½½ OS æ–‡ä»¶åˆ°å†…å­˜ã€‚ ä¸‹é¢å³ Hello OS çš„å¯åŠ¨é¡¹ï¼š menuentry 'HelloOS' { insmod part_msdos #GRUBåŠ è½½åˆ†åŒºæ¨¡å—è¯†åˆ«åˆ†åŒº insmod ext2 #GRUBåŠ è½½extæ–‡ä»¶ç³»ç»Ÿæ¨¡å—è¯†åˆ«extæ–‡ä»¶ç³»ç»Ÿ set root='hd0,msdos4' #æ³¨æ„bootç›®å½•æŒ‚è½½çš„åˆ†åŒºï¼Œ multiboot2 /boot/HelloOS.bin #GRUBä»¥multiboot2åè®®åŠ è½½HelloOS.bin boot #GRUBå¯åŠ¨HelloOS.bin } ä¸Šé¢Bootç›®å½•æŒ‚è½½åˆ†åŒºå¯é€šè¿‡df /boot/å‘½ä»¤æŸ¥è¯¢ï¼Œå¹¶ä¸”éœ€è¦ç”±ç‰¹æ®Š GRUB çš„å‘½åæ–¹å¼ã€‚ eg:â€œhd0,msdos4â€ï¼Œä»£è¡¨sda4å°±æ˜¯ç¡¬ç›˜çš„ç¬¬å››ä¸ªåˆ†åŒºï¼ˆç¡¬ä»¶åˆ†åŒºé€‰æ‹© MBRï¼‰ï¼Œhd0 è¡¨ç¤ºç¬¬ä¸€å—ç¡¬ç›˜ï¼Œç»“åˆèµ·æ¥å°±æ˜¯ç¬¬ä¸€å—ç¡¬ç›˜çš„ç¬¬å››ä¸ªåˆ†åŒºã€‚ æŠŠä¸Šé¢å¯åŠ¨é¡¹çš„ä»£ç è¿½åŠ åˆ° Linux æœºå™¨ä¸Šçš„/boot/grub/grub.cfgæ–‡ä»¶æœ«å°¾ï¼Œå¹¶ä¸”æŠŠä¸Šé¢ç”Ÿæˆçš„Hello OS.binæ–‡ä»¶å¤åˆ¶åˆ°/boot/ç›®å½•ä¸‹ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒUbuntuæˆ–è€…å…¶ä»–æ“ä½œç³»ç»Ÿè¿›å…¥ GRUB å¼•å¯¼ç•Œé¢å¯èƒ½ä¹Ÿéœ€è¦è¿›è¡Œè®¾ç½®ï¼Œæ¯”å¦‚ Ubuntu é»˜è®¤å°±æ˜¯å…³é—­å’Œéšè—çš„ï¼Œéœ€è¦ä¿®æ”¹/etc/default/grubé…ç½®æ‰èƒ½å¤Ÿçœ‹åˆ°ã€‚ æœ€åé‡å¯è®¡ç®—æœºï¼Œä½ å°±å¯ä»¥çœ‹åˆ° Hello OS çš„å¯åŠ¨é€‰é¡¹äº†ã€‚ ","date":"2022-03-05","objectID":"/posts/os/common/1.html/:6:0","tags":["os","note","æ±‡ç¼–"],"title":"HelloOs","uri":"/posts/os/common/1.html/"},{"categories":["os"],"content":"å‚è€ƒ https://time.geekbang.org/column/intro/100078401?tab=catalog ","date":"2022-03-05","objectID":"/posts/os/common/1.html/:7:0","tags":["os","note","æ±‡ç¼–"],"title":"HelloOs","uri":"/posts/os/common/1.html/"},{"categories":["search engine"],"content":"æ–‡æ¡£ï¼ˆDocumentï¼‰ Elasticsearch æ˜¯é¢å‘æ–‡æ¡£çš„ï¼Œæ–‡æ¡£æ˜¯æ‰€æœ‰å¯æœç´¢æ•°æ®çš„æœ€å°å•ä½ æ–‡æ¡£ä¼šè¢«åºåˆ—åŒ–æˆ JSON æ ¼å¼ï¼Œä¿å­˜åœ¨ Elasticsearch ä¸­ JSON å¯¹è±¡ç”±å­—æ®µæ„æˆ æ¯ä¸ªå­—æ®µéƒ½æœ‰å¯¹åº”çš„å­—æ®µç±»å‹ï¼ˆå­—ç¬¦ä¸²/æ•°å€¼/å¸ƒå°”å€¼/æ—¥æœŸ/äºŒè¿›åˆ¶/èŒƒå›´ç±»å‹ï¼‰ æ¯ä¸ªæ–‡æ¡£éƒ½æœ‰ä¸€ä¸ª UniqueIDï¼ˆå¯æŒ‡å®šä¹Ÿå¯è‡ªåŠ¨ç”Ÿæˆï¼‰ ","date":"2022-03-03","objectID":"/posts/search_engine/es/1.html/:1:0","tags":["search_engine","note","es"],"title":"ElasticSearchåŸºæœ¬æ¦‚å¿µ","uri":"/posts/search_engine/es/1.html/"},{"categories":["search engine"],"content":"JSON æ–‡æ¡£ ä¸€ç¯‡æ–‡æ¡£åŒ…å«äº†ä¸€ç³»åˆ—å­—æ®µã€‚ç±»ä¼¼æ•°æ®åº“è¡¨ä¸­ä¸€æ¡è®°å½• JSON æ–‡æ¡£ï¼Œæ ¼å¼çµæ´»ï¼Œä¸éœ€è¦é¢„å…ˆå®šä¹‰æ ¼å¼ å­—æ®µçš„ç±»å‹å¯ä»¥æŒ‡å®šæˆ–è€…ç”± Elasticsearchè‡ªåŠ¨æ¨ç®—å¾—åˆ° æ”¯æŒæ•°ç»„/æ”¯æŒåµŒå¥— ","date":"2022-03-03","objectID":"/posts/search_engine/es/1.html/:1:1","tags":["search_engine","note","es"],"title":"ElasticSearchåŸºæœ¬æ¦‚å¿µ","uri":"/posts/search_engine/es/1.html/"},{"categories":["search engine"],"content":"æ–‡æ¡£çš„å…ƒæ•°æ® å…ƒæ•°æ®ï¼Œç”¨äºæ ‡æ³¨æ–‡æ¡£çš„ç›¸å…³ä¿¡æ¯ï¼š _indexï¼šæ–‡æ¡£æ‰€å±çš„ç´¢å¼•å _typeï¼šæ–‡æ¡£æ‰€å±çš„ç±»å‹å _idï¼šæ–‡æ¡£å”¯ä¸€ID _sourceï¼šæ–‡æ¡£åŸå§‹çš„ JSON æ•°æ® _versionï¼šæ–‡æ¡£çš„ç‰ˆæœ¬ä¿¡æ¯ _scoreï¼šç›¸å…³æ€§æ‰“åˆ†ï¼ˆæœç´¢æŸ¥è¯¢æ—¶ï¼‰ åœ¨7.0ä¹‹å‰ï¼Œä¸€ä¸ª Index å¯ä»¥è®¾ç½®å¤šä¸ª Typeã€‚ ","date":"2022-03-03","objectID":"/posts/search_engine/es/1.html/:1:2","tags":["search_engine","note","es"],"title":"ElasticSearchåŸºæœ¬æ¦‚å¿µ","uri":"/posts/search_engine/es/1.html/"},{"categories":["search engine"],"content":"ç´¢å¼• indexï¼ˆç´¢å¼•ï¼‰æ˜¯æ–‡æ¡£çš„å®¹å™¨ï¼Œæ˜¯ä¸€ç±»æ–‡æ¡£çš„é›†åˆï¼š indexä½“ç°é€»è¾‘ç©ºé—´æ¦‚å¿µï¼šæ¯ä¸ªç´¢å¼•éƒ½æœ‰è‡ªå·±çš„ Mapping å®šä¹‰ï¼Œç”¨äºå®šä¹‰åŒ…å«æ–‡æ¡£çš„å­—æ®µåå’Œå­—æ®µç±»å‹ Shardä½“ç°ç‰©ç†ç©ºé—´æ¦‚å¿µï¼šç´¢å¼•ä¸­çš„æ•°æ®åˆ†æ•£åœ¨ Shard ä¸Š ç´¢å¼•ä¸­çš„ Mapping å’Œ Settingï¼š å‰è€…å®šä¹‰æ–‡æ¡£å­—æ®µçš„ç±»å‹ åè€…å®šä¹‰ä¸åŒçš„æ•°æ®åˆ†å¸ƒ ç´¢å¼•åœ¨ä¸åŒåœºæ™¯è¯­æ„å¯èƒ½ä¸åŒï¼Œæ¯”å¦‚é™¤ä¸Šé¢æåˆ°çš„ç´¢å¼•è¯­ä¹‰å¤–ï¼Œå½“ä¿å­˜ä¸€ä¸ªæ–‡æ¡£åˆ° Elasticsearch çš„è¿‡ç¨‹ä¹Ÿå¯ä»¥å«ç´¢å¼•ï¼ˆåŠ¨è¯ï¼‰ã€‚ ","date":"2022-03-03","objectID":"/posts/search_engine/es/1.html/:2:0","tags":["search_engine","note","es"],"title":"ElasticSearchåŸºæœ¬æ¦‚å¿µ","uri":"/posts/search_engine/es/1.html/"},{"categories":["search engine"],"content":"ä¸ RDBMS æ¯”è¾ƒ RDBMS Elasticsearch Table Index(Type) Row Document Column Filed Schema Mapping SQL DSL åŒºåˆ«ä¸»è¦åœ¨äºï¼š RDBMSï¼šäº‹åŠ¡æ€§/Join Elasticsearchï¼šSchemaless/ç›¸å…³æ€§/é«˜æ€§èƒ½å…¨æ–‡æ£€ç´¢ ","date":"2022-03-03","objectID":"/posts/search_engine/es/1.html/:2:1","tags":["search_engine","note","es"],"title":"ElasticSearchåŸºæœ¬æ¦‚å¿µ","uri":"/posts/search_engine/es/1.html/"},{"categories":["search engine"],"content":"REST API ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨æŒ‡ä»¤ï¼š #æŸ¥çœ‹ç´¢å¼•ç›¸å…³ä¿¡æ¯ GET movies #æŸ¥çœ‹ç´¢å¼•çš„æ–‡æ¡£æ€»æ•° GET movies/_count #æŸ¥çœ‹å‰10æ¡æ–‡æ¡£ï¼Œäº†è§£æ–‡æ¡£æ ¼å¼ POST movies/_search { } #_cat indices API #æŸ¥çœ‹indices GET /_cat/indices/kibana*?v\u0026s=index #æŸ¥çœ‹çŠ¶æ€ä¸ºç»¿çš„ç´¢å¼• GET /_cat/indices?v\u0026health=green #æŒ‰ç…§æ–‡æ¡£ä¸ªæ•°æ’åº GET /_cat/indices?v\u0026s=docs.count:desc #æŸ¥çœ‹å…·ä½“çš„å­—æ®µ GET /_cat/indices/kibana*?pri\u0026v\u0026h=health,index,pri,rep,docs.count,mt #How much memory is used per index? GET /_cat/indices?v\u0026h=i,tm\u0026s=tm:desc ","date":"2022-03-03","objectID":"/posts/search_engine/es/1.html/:3:0","tags":["search_engine","note","es"],"title":"ElasticSearchåŸºæœ¬æ¦‚å¿µ","uri":"/posts/search_engine/es/1.html/"},{"categories":["search engine"],"content":"åˆ†å¸ƒå¼æ¶æ„ å¸¸è§çš„åˆ†å¸ƒå¼æ¶æ„ä¸€èˆ¬ä¼šå¸¦æ¥ä»¥ä¸‹å¥½å¤„ï¼š é«˜å¯ç”¨æ€§ï¼š æœåŠ¡å¯ç”¨æ€§ï¼šå…è®¸æœ‰èŠ‚ç‚¹åœæ­¢æœåŠ¡ æ•°æ®å¯ç”¨æ€§ï¼šéƒ¨åˆ†èŠ‚ç‚¹ä¸¢å¤±ï¼Œä¸ä¼šä¸¢å¤±æ•°æ® å¯æ‰©å±•æ€§ï¼š è¯·æ±‚é‡æå‡æˆ–æ•°æ®çš„ä¸æ–­å¢é•¿ï¼ˆå°†æ•°æ®åˆ†å¸ƒåˆ°æ‰€æœ‰èŠ‚ç‚¹ä¸Šï¼‰ Elasticsearch çš„åˆ†å¸ƒå¼æ¶æ„å¯ä»¥åšåˆ°ï¼š å­˜å‚¨çš„æ°´å¹³æ‰©å®¹ æé«˜ç³»ç»Ÿå¯ç”¨æ€§ï¼Œéƒ¨åˆ†èŠ‚ç‚¹åœæ­¢æœåŠ¡ï¼Œæ•´ä¸ªé›†ç¾¤çš„æœåŠ¡ä¸å—å½±å“ æ¶‰åŠåˆ° Elasticsearch é…ç½®ä¸­ï¼š ä¸åŒçš„é›†ç¾¤é€šè¿‡ä¸åŒçš„åå­—åŒºåˆ†ï¼Œé»˜è®¤ä¸ºelasticsearch é€šè¿‡é…ç½®æ–‡ä»¶ä¿®æ”¹ï¼Œæˆ–è€…åœ¨å‘½ä»¤è¡Œä¸­-E cluster.name=catwithtudouè¿›è¡Œè®¾å®š ä¸€ä¸ªé›†ç¾¤å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªèŠ‚ç‚¹ ","date":"2022-03-03","objectID":"/posts/search_engine/es/1.html/:4:0","tags":["search_engine","note","es"],"title":"ElasticSearchåŸºæœ¬æ¦‚å¿µ","uri":"/posts/search_engine/es/1.html/"},{"categories":["search engine"],"content":"èŠ‚ç‚¹ èŠ‚ç‚¹å³ Elasticsearch çš„ä¸€ä¸ªå®ä¾‹ï¼š æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª JAVA è¿›ç¨‹ ä¸€å°æœºå™¨ä¸Šå¯ä»¥è¿è¡Œå¤šä¸ªå®ä¾‹ï¼Œä½†ç”Ÿäº§ç¯å¢ƒä¸€èˆ¬å»ºè®®ä¸€å°æœºå™¨åªè¿è¡Œä¸€ä¸ª Elasticsearch å®ä¾‹ æ¶‰åŠåˆ°ç›¸å…³é…ç½®ä¸­ï¼š æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰åå­—ï¼Œå¯é€šè¿‡é…ç½®æ–‡ä»¶é…ç½®ï¼Œæˆ–å¯åŠ¨æ—¶-E node.name=node1æŒ‡å®š èŠ‚ç‚¹å¯åŠ¨ä¹‹åï¼Œä¼šåˆ†é…ä¸€ä¸ª UIDï¼Œä¿å­˜åœ¨ data ç›®å½•ä¸‹ Master-eligible nodes\u0026Master Node æ¯ä¸ªèŠ‚ç‚¹åœ¨å¯åŠ¨åï¼Œé»˜è®¤ä¸ºä¸€ä¸ª Master eligible èŠ‚ç‚¹ å¯ä»¥è®¾ç½®node.master:falseç¦æ­¢ Master-eligible èŠ‚ç‚¹å¯ä»¥å‚åŠ é€‰ä¸»æµç¨‹ï¼Œæˆä¸º Master èŠ‚ç‚¹ å½“ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¯åŠ¨çš„æ—¶å€™ï¼Œé»˜è®¤å°†è‡ªå·±é€‰ä¸¾æˆ Master èŠ‚ç‚¹ æ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½ä¿å­˜äº†é›†ç¾¤çš„çŠ¶æ€ï¼Œåªæœ‰ Master èŠ‚ç‚¹æ‰èƒ½ä¿®æ”¹é›†ç¾¤çš„çŠ¶æ€ä¿¡æ¯ï¼Œå…¶ä¸­é›†ç¾¤çŠ¶æ€ï¼ˆCluster Stateï¼‰ï¼Œç»´æŠ¤é›†ç¾¤ä¸­çš„å¿…è¦ä¿¡æ¯ï¼š æ‰€æœ‰çš„èŠ‚ç‚¹ä¿¡æ¯ æ‰€æœ‰çš„ç´¢å¼•å’Œå…¶ç›¸å…³çš„ Mapping ä¸ Settings ä¿¡æ¯ åˆ†ç‰‡çš„è·¯ç”±ä¿¡æ¯ Data Node\u0026Coordinating Node Data Nodeï¼šå¯ä»¥ä¿å­˜æ•°æ®çš„èŠ‚ç‚¹ã€‚è´Ÿè´£ä¿å­˜åˆ†ç‰‡æ•°æ®ã€‚åœ¨æ•°æ®æ‰©å±•ä¸Šèµ·åˆ°é‡è¦ä½œç”¨ Coordinating Nodeï¼šè´Ÿè´£æ¥æ”¶ Client çš„è¯·æ±‚ï¼Œå°†è¯·æ±‚åˆ†å‘åˆ°åˆé€‚çš„èŠ‚ç‚¹ï¼Œæœ€ç»ˆæŠŠç»“æœæ±‡é›†åˆ°ä¸€èµ·ï¼Œæ¯ä¸ªèŠ‚ç‚¹é»˜è®¤éƒ½èµ·åˆ°äº†è¯¥Nodeç±»å‹èŒè´£ Other Node Type Hot\u0026Warm Nodeï¼šä¸åŒç¡¬ä»¶é…ç½®çš„ Data Nodeï¼Œç”¨æ¥å®ç° Hot\u0026Warm æ¶æ„ï¼Œé™çº§é›†ç¾¤éƒ¨ç½²çš„æˆæœ¬ Maching Learning Nodeï¼šè´Ÿè´£è·‘æœºå™¨å­¦ä¹ çš„ Jobï¼Œç”¨æ¥åšå¼‚å¸¸æ£€æµ‹ Tribe Nodeï¼šè¿æ¥åˆ°ä¸åŒçš„é›†ç¾¤ï¼Œå¹¶ä¸”æ”¯æŒå°†è¿™äº›é›†ç¾¤å½“æˆä¸€ä¸ªå•ç‹¬çš„é›†ç¾¤å¤„ç† é…ç½®èŠ‚ç‚¹ç±»å‹ å¼€å‘ç¯å¢ƒä¸­ä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥æ‰¿æ‹…å¤šç§è§’è‰² ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œåº”è¯¥è®¾ç½®å•ä¸€çš„è§’è‰²çš„èŠ‚ç‚¹ï¼ˆdedicated nodeï¼‰ èŠ‚ç‚¹ç±»å‹ é…ç½®å‚æ•° é»˜è®¤å€¼ master eligible node.master true data node.data true ingest node.ingest true coordinating only æ—  æ¯ä¸ªèŠ‚ç‚¹é»˜è®¤æ˜¯ machine learning node.ml trueï¼ˆéœ€è¦ enable x-packï¼‰ ","date":"2022-03-03","objectID":"/posts/search_engine/es/1.html/:4:1","tags":["search_engine","note","es"],"title":"ElasticSearchåŸºæœ¬æ¦‚å¿µ","uri":"/posts/search_engine/es/1.html/"},{"categories":["search engine"],"content":"åˆ†ç‰‡ åˆ†ç‰‡ä¸»è¦åˆ†ä¸ºä¸»åˆ†ç‰‡å’Œå‰¯æœ¬ï¼š Primary Shardï¼šç”¨ä»¥è§£å†³æ•°æ®æ°´å¹³æ‰©å±•çš„é—®é¢˜ã€‚é€šè¿‡ä¸»åˆ†ç‰‡ï¼Œå¯ä»¥å°†æ•°æ®åˆ†å¸ƒåˆ°é›†ç¾¤å†…çš„æ‰€æœ‰èŠ‚ç‚¹ä¸Š ä¸€ä¸ªåˆ†ç‰‡æ˜¯ä¸€ä¸ªè¿è¡Œçš„ Lucene çš„å®ä¾‹ ä¸»åˆ†ç‰‡æ•°åœ¨ç´¢å¼•åˆ›å»ºæ—¶æŒ‡å®šï¼Œåç»­ä¸å…è®¸ä¿®æ”¹ï¼Œé™¤éReindex Replica Shardï¼šç”¨ä»¥è§£å†³æ•°æ®é«˜å¯ç”¨çš„é—®é¢˜ã€‚åˆ†ç‰‡æ˜¯ä¸»åˆ†ç‰‡çš„æ‹·è´ï¼š å‰¯æœ¬åˆ†ç‰‡æ•°ï¼Œå¯ä»¥åŠ¨æ€è°ƒæ•´ å¢åŠ å‰¯æœ¬æ•°ï¼Œè¿˜å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šæé«˜æœåŠ¡çš„å¯ç”¨æ€§ åˆ†ç‰‡çš„è®¾å®š å¯¹äºç”Ÿäº§ç¯å¢ƒä¸­åˆ†ç‰‡çš„è®¾å®šï¼Œéœ€è¦æå‰è§„åˆ’å¥½å®¹é‡ï¼š åˆ†ç‰‡æ•°è®¾ç½®è¿‡å°ï¼š å¯¼è‡´åç»­æ— æ³•å¢åŠ èŠ‚ç‚¹å®ç°æ°´å¹³æ‰©å±• å•ä¸ªåˆ†ç‰‡çš„æ•°æ®é‡å¤ªå¤§ï¼Œå¯¼è‡´æ•°æ®åˆ†é…è€—æ—¶é«˜ åˆ†ç‰‡æ•°è®¾ç½®è¿‡å¤§ï¼š å½±å“æœç´¢ç»“æœçš„ç›¸å…³æ€§æ‰“åˆ†ï¼Œå½±å“ç»Ÿè®¡ç»“æœçš„å‡†ç¡®æ€§ å•ä¸ªèŠ‚ç‚¹ä¸Šè¿‡å¤šçš„åˆ†ç‰‡ï¼Œä¼šå¯¼è‡´èµ„æºæµªè´¹ï¼ŒåŒæ—¶ä¹Ÿä¼šæ¶ˆè€—æ€§èƒ½ 7.0ç‰ˆæœ¬å¼€å§‹ï¼Œé»˜è®¤ä¸»åˆ†ç‰‡è®¾ç½®ä¸º 1ï¼Œè§£å†³äº† over-sharding çš„é—®é¢˜ã€‚ ","date":"2022-03-03","objectID":"/posts/search_engine/es/1.html/:4:2","tags":["search_engine","note","es"],"title":"ElasticSearchåŸºæœ¬æ¦‚å¿µ","uri":"/posts/search_engine/es/1.html/"},{"categories":["search engine"],"content":"æŸ¥çœ‹é›†ç¾¤çš„å¥åº·çŠ¶å†µ ä½¿ç”¨GET _cluster/healthå¯æŸ¥è¯¢é›†ç¾¤çš„å¥åº·çŠ¶å†µï¼š Greenï¼šä¸»åˆ†ç‰‡ä¸å‰¯æœ¬éƒ½åˆ†é…æ­£å¸¸ Yellowï¼šä¸»åˆ†ç‰‡åˆ†é…æ­£å¸¸ï¼Œå‰¯æœ¬åˆ†é…ä¸æ­£å¸¸ Redï¼šæœ‰ä¸»åˆ†ç‰‡æœªåˆ†é…ï¼ˆå¦‚å½“æœåŠ¡å™¨çš„ç£ç›˜å®¹é‡è¶…è¿‡85%æ—¶ï¼Œåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ç´¢å¼•ï¼‰ ä¸€èˆ¬æœ‰ä»¥ä¸‹å¸¸ç”¨æŒ‡ä»¤ï¼š GET _cat/nodes?v GET /_nodes/es7_01,es7_02 GET /_cat/nodes?v GET /_cat/nodes?v\u0026h=id,ip,port,v,m GET _cluster/health GET _cluster/health?level=shards GET /_cluster/health/kibana_sample_data_ecommerce GET /_cluster/health/kibana_sample_data_ecommerce?level=shards #### cluster state GET /_cluster/state #cluster get settings GET /_cluster/settings GET /_cluster/settings?include_defaults=true GET _cat/shards GET _cat/shards?h=index,shard,prirep,state,unassigned.reason ","date":"2022-03-03","objectID":"/posts/search_engine/es/1.html/:4:3","tags":["search_engine","note","es"],"title":"ElasticSearchåŸºæœ¬æ¦‚å¿µ","uri":"/posts/search_engine/es/1.html/"},{"categories":["search engine"],"content":"å‚è€ƒ https://time.geekbang.org/course/intro/100030501?tab=catalog ","date":"2022-03-03","objectID":"/posts/search_engine/es/1.html/:5:0","tags":["search_engine","note","es"],"title":"ElasticSearchåŸºæœ¬æ¦‚å¿µ","uri":"/posts/search_engine/es/1.html/"},{"categories":["search engine"],"content":"ElasticSearch ç®€ä»‹ å¼€æºåˆ†å¸ƒå¼æœç´¢åˆ†æå¼•æ“ è¿‘å®æ—¶ï¼ˆNear Real Timeï¼‰ åˆ†å¸ƒå¼å­˜å‚¨/æœç´¢/åˆ†æå¼•æ“ Elastic Search èµ·æºæ˜¯åŸºäº Lucene ã€‚Lucene æ˜¯åŸºäº Java å¼€å‘çš„æœç´¢å¼•æ“ç±»åº“ï¼Œå…·æœ‰é«˜æ€§èƒ½ã€æ˜“æ‰©å±•çš„ä¼˜ç‚¹ï¼Œå®ƒçš„å±€é™æ€§ä¸»è¦åœ¨äºä»¥ä¸‹æ–¹é¢ï¼š åªèƒ½åŸºäº Java è¯­è¨€å¼€å‘ ç±»åº“çš„å­¦ä¹ æ›²çº¿é™¡å³­ åŸç”Ÿå¹¶ä¸æ”¯æŒæ°´å¹³æ‰©å±• ","date":"2022-02-28","objectID":"/posts/search_engine/es/0.html/:1:0","tags":["search_engine","note","es"],"title":"ElasticSearchåˆè¯†","uri":"/posts/search_engine/es/0.html/"},{"categories":["search engine"],"content":"ElasticSearch çš„åˆ†å¸ƒå¼æ¶æ„ é›†ç¾¤è§„æ¨¡å¯ä»¥ä»å•ä¸ªèŠ‚ç‚¹æ‰©å±•è‡³æ•°ç™¾èŠ‚ç‚¹ é«˜å¯ç”¨ä¸”æ”¯æŒæ°´å‘½æ‰©å±•ï¼ˆæœåŠ¡å’Œæ•°æ®ä¸¤ä¸ªç»´åº¦ï¼‰ æ”¯æŒä¸åŒçš„èŠ‚ç‚¹ç±»å‹ï¼ˆæ”¯æŒ Hot å’Œ Waram æ¶æ„ï¼‰ ","date":"2022-02-28","objectID":"/posts/search_engine/es/0.html/:1:1","tags":["search_engine","note","es"],"title":"ElasticSearchåˆè¯†","uri":"/posts/search_engine/es/0.html/"},{"categories":["search engine"],"content":"æ”¯æŒå¤šç§æ–¹å¼æ¥å…¥ å¤šç§ç¼–ç¨‹è¯­è¨€ç±»åº“ RESTful API JDBC\u0026ODBC ","date":"2022-02-28","objectID":"/posts/search_engine/es/0.html/:1:2","tags":["search_engine","note","es"],"title":"ElasticSearchåˆè¯†","uri":"/posts/search_engine/es/0.html/"},{"categories":["search engine"],"content":"ä¸»è¦åŠŸèƒ½ æµ·é‡æ•°æ®çš„åˆ†å¸ƒå¼å­˜å‚¨ä»¥åŠé›†ç¾¤ç®¡ç† æœåŠ¡å’Œæ•°æ®çš„é«˜å¯ç”¨ï¼Œæ°´å¹³æ‰©å±• è¿‘å®æ—¶æœç´¢ï¼Œæ€§èƒ½å“è¶Š ç»“æ„åŒ–/å…¨æ–‡/åœ°ç†ä½ç½®/è‡ªåŠ¨å®Œæˆ æµ·é‡æ•°æ®çš„è¿‘å®æ—¶åˆ†æ èšåˆåŠŸèƒ½ ","date":"2022-02-28","objectID":"/posts/search_engine/es/0.html/:1:3","tags":["search_engine","note","es"],"title":"ElasticSearchåˆè¯†","uri":"/posts/search_engine/es/0.html/"},{"categories":["search engine"],"content":"ElasticStack ç”Ÿæ€åœˆ Logstash å¼€æºçš„æœåŠ¡å™¨ç«¯æ•°æ®å¤„ç†ç®¡é“ï¼Œæ”¯æŒä»ä¸åŒæ¥æºé‡‡é›†æ•°æ®ï¼Œè½¬æ¢æ•°æ®ï¼Œå¹¶å°†æ•°æ®å‘é€åˆ°ä¸åŒçš„å­˜å‚¨åº“ä¸­ã€‚ä¸”æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š å®æ—¶è§£æå’Œè½¬æ¢æ•°æ®ï¼ˆå¦‚ä»IPåœ°å€ç ´è¯‘å‡ºåœ°ç†åæ ‡å’ŒPIIæ•°æ®åŒ¿ååŒ–ç­‰ï¼‰ å¯æ‰©å±•ï¼ˆ200å¤šä¸ªæ’ä»¶åŒ…å«æ—¥å¿—ã€æ•°æ®åº“ç­‰ï¼‰ å¯é æ€§å®‰å…¨æ€§ï¼ˆæŒä¹…åŒ–é˜Ÿåˆ—å’Œæ•°æ®ä¼ è¾“åŠ å¯†ç­‰ï¼‰ ç›‘æ§ Kibana æ•°æ®å¯è§†åŒ–å·¥å…·ã€‚ BEATS ä½¿ç”¨GOè¯­è¨€å¼€å‘çš„è½»é‡æ•°æ®é‡‡é›†å™¨ã€‚ X-Pack å•†ä¸šåŒ–å¥—ä»¶ã€‚å¯ä¸»è¦åº”ç”¨äºï¼š Machine Learning Alerting å›¾è¡¨åŠŸèƒ½ SQL çš„ JDBC å’Œ ODBC è¿æ¥æ€§ ","date":"2022-02-28","objectID":"/posts/search_engine/es/0.html/:2:0","tags":["search_engine","note","es"],"title":"ElasticSearchåˆè¯†","uri":"/posts/search_engine/es/0.html/"},{"categories":["search engine"],"content":"ELK åº”ç”¨åœºæ™¯ ä¸»è¦åŒ…æ‹¬ï¼š ç½‘ç«™æœç´¢/å‚ç›´æœç´¢/ä»£ç æœç´¢ æ—¥å¿—ç®¡ç†ä¸åˆ†æ/å®‰å…¨æŒ‡æ ‡ç›‘æ§/åº”ç”¨æ€§èƒ½æŒ‡æ ‡ç›‘æ§/WEBæŠ“å–èˆ†æƒ…åˆ† æ€»ç»“ä¸‹æ¥å°±æ˜¯æœç´¢å’Œåˆ†æã€‚ ","date":"2022-02-28","objectID":"/posts/search_engine/es/0.html/:3:0","tags":["search_engine","note","es"],"title":"ElasticSearchåˆè¯†","uri":"/posts/search_engine/es/0.html/"},{"categories":["search engine"],"content":"å¸¸è§æ¶æ„æ¥å…¥åœºæ™¯ ","date":"2022-02-28","objectID":"/posts/search_engine/es/0.html/:4:0","tags":["search_engine","note","es"],"title":"ElasticSearchåˆè¯†","uri":"/posts/search_engine/es/0.html/"},{"categories":["search engine"],"content":"ElasticSearch ä¸æ•°æ®åº“çš„é›†æˆ å•ç‹¬ä½¿ç”¨ ElasticSearch å­˜å‚¨ ä»¥ä¸‹æƒ…å†µå¯ä»¥è€ƒè™‘ä¸æ•°æ®åº“é›†æˆï¼š ä¸ç°æœ‰ç³»ç»Ÿçš„é›†æˆ éœ€è¦è€ƒè™‘äº‹åŠ¡æ€§ æ•°æ®æ›´æ–°é¢‘ç¹ ","date":"2022-02-28","objectID":"/posts/search_engine/es/0.html/:4:1","tags":["search_engine","note","es"],"title":"ElasticSearchåˆè¯†","uri":"/posts/search_engine/es/0.html/"},{"categories":["search engine"],"content":"æŒ‡æ ‡åˆ†æ/æ—¥å¿—åˆ†æ ","date":"2022-02-28","objectID":"/posts/search_engine/es/0.html/:4:2","tags":["search_engine","note","es"],"title":"ElasticSearchåˆè¯†","uri":"/posts/search_engine/es/0.html/"},{"categories":["search engine"],"content":"å®‰è£…éƒ¨ç½² ","date":"2022-02-28","objectID":"/posts/search_engine/es/0.html/:5:0","tags":["search_engine","note","es"],"title":"ElasticSearchåˆè¯†","uri":"/posts/search_engine/es/0.html/"},{"categories":["search engine"],"content":"ElasticSearch å®‰è£…\u0026ç®€å•é…ç½® ElasticSearch7.0ç‰ˆæœ¬åŠä¹‹åå®‰è£…æ—¶å·²ç»å†…ç½® Java ç¯å¢ƒï¼Œæ‰€ä»¥ä¸éœ€è¦é¢å¤–å‡†å¤‡ Java ç¼–è¯‘ç¯å¢ƒã€‚ è¿™é‡Œä»¥ windows ç³»ç»Ÿè¿›è¡Œå®‰è£…éƒ¨ç½²ã€‚ ç›´æ¥åœ¨å®˜ç½‘ä¸Šä¸‹è½½å®‰è£…åŒ… å®˜ç½‘ä¸‹è½½é“¾æ¥ å®‰è£…åŠè¿è¡Œè¿‡ç¨‹è¯¥é¡µé¢éƒ½æœ‰ç›¸åº”æç¤ºï¼š ElasticSearch å®‰è£…ç›®å½•ï¼š Binï¼šè„šæœ¬æ–‡ä»¶ configï¼šé›†ç¾¤é…ç½®æ–‡ä»¶ï¼Œuserï¼Œrole based ç›¸å…³é…ç½® JDKï¼šJavaè¿è¡Œç¯å¢ƒ dataï¼ˆpath.dataï¼‰ï¼šæ•°æ®æ–‡ä»¶ lbï¼šJava ç±»åº“ logsï¼ˆpath.logï¼‰ï¼šæ—¥å¿—æ–‡ä»¶ modulesï¼šåŒ…å«æ‰€æœ‰ ES æ¨¡å— pluginsï¼šåŒ…å«æ‰€æœ‰å·²å®‰è£…æ’ä»¶ é…ç½®å»ºè®® ä¿®æ”¹ JVM - config/jvm.options 7.1 ä¸‹è½½çš„é»˜è®¤é…ç½®æ˜¯1GB Xmx å’Œ Xms è®¾ç½®æˆä¸€æ · Xmx ä¸è¦è¶…è¿‡æœºå™¨å†…å­˜çš„50% ä¸è¦è¶…è¿‡30GB å¯åŠ¨ElasticSearch è¿è¡Œç¨‹åºå¦‚ä¸‹ï¼š è¿™é‡Œå¯ä»¥å°† ElasticSearch ä¸‹çš„ bin ç›®å½•æ”¾å…¥ç¯å¢ƒå˜é‡ï¼Œæ–¹ä¾¿åç»­ä½¿ç”¨ã€‚ è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œä¸‹è½½çš„æ˜¯ 8.0 çš„ç‰ˆæœ¬ï¼Œç¬¬ä¸€æ¬¡å¯åŠ¨çš„æ—¶å€™é»˜è®¤æ˜¯å¼€å¯äº†x-packå®‰å…¨é‰´æƒå’Œhttpsç­‰é…ç½®ï¼Œæ‰€ä»¥åœ¨æˆ‘ä»¬è®¿é—®çš„æ˜¯æ—¶å€™éƒ½æ˜¯HTTPSè¿›è¡Œè®¿é—®ï¼Œä¸”éœ€è¦è¾“å…¥è´¦å·å¯†ç è¿›è¡Œç™»å½•ï¼Œé»˜è®¤ç”¨æˆ·åä¸ºelasticï¼Œå¯†ç æ˜¯ç¬¬ä¸€æ¬¡å¯åŠ¨çš„æ—¶å€™è‡ªåŠ¨ç”Ÿæˆçš„ã€‚ éªŒè¯ElasticSearchæ˜¯å¦å¯åŠ¨æˆåŠŸ è¿™é‡Œæˆ‘ä»¬éœ€è¦è®¿é—®çš„æ˜¯ï¼š https://localhost:9200 å‡ºç°ä¸Šè¿°é¡µé¢å°±è¯´æ˜å¯åŠ¨æˆåŠŸäº†ã€‚ å®‰è£…å¹¶æŸ¥çœ‹ElasticSearchæ’ä»¶ æˆ‘ä»¬å¯ä»¥é€šè¿‡elasticsearch-pluginæ¥è¿›è¡Œæ’ä»¶çš„å®‰è£…ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å®‰è£…æˆåŠŸåï¼Œå¯ä»¥é€šè¿‡https://localhost:9200/_cat/pluginsæŸ¥çœ‹ï¼š ","date":"2022-02-28","objectID":"/posts/search_engine/es/0.html/:5:1","tags":["search_engine","note","es"],"title":"ElasticSearchåˆè¯†","uri":"/posts/search_engine/es/0.html/"},{"categories":["search engine"],"content":"ç¬¬ä¸€ç«  æœç´¢å¼•æ“åŠå…¶æŠ€æœ¯æ¶æ„ ","date":"2022-02-26","objectID":"/posts/search_engine/common/0.html/:1:0","tags":["search_engine","note"],"title":"ï¼ˆWIPï¼‰ã€Šè¿™å°±æ˜¯æœç´¢å¼•æ“ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/search_engine/common/0.html/"},{"categories":["search engine"],"content":"æœç´¢å¼•æ“ä¸ºä½•é‡è¦ æœç´¢æ˜¯ç›®å‰è§£å†³ä¿¡æ¯è¿‡è½½çš„ç›¸å¯¹æœ‰æ•ˆæ–¹å¼ï¼Œåœ¨æ²¡æœ‰æ›´æœ‰æ•ˆçš„æ›¿ä»£è§£å†³æ–¹å¼å‡ºæ¥ä¹‹å‰ï¼Œæœç´¢å¼•æ“ä½œä¸ºäº’è”ç½‘ç½‘ç«™å’Œåº”ç”¨çš„å…¥å£åŠå¤„äºè¡Œä¸šåˆ¶é«˜ç‚¹çš„é‡è¦åœ°ä½åªä¼šé€æ­¥åŠ å¼ºã€‚ ","date":"2022-02-26","objectID":"/posts/search_engine/common/0.html/:1:1","tags":["search_engine","note"],"title":"ï¼ˆWIPï¼‰ã€Šè¿™å°±æ˜¯æœç´¢å¼•æ“ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/search_engine/common/0.html/"},{"categories":["search engine"],"content":"æœç´¢å¼•æ“å‘å±•å² åˆ†ç±»ç›®å½•æœç´¢å¼•æ“ï¼šäººå·¥åˆ†ç±» ç¬¬ä¸€ä»£æ–‡æœ¬æ£€ç´¢æœç´¢å¼•æ“ï¼šç®€å•æ£€ç´¢ ç¬¬äºŒä»£å¼•å…¥é“¾æ¥åˆ†ææŠ€æœ¯ï¼šæ”¹å–„æœç´¢ç»“æœè´¨é‡ ç¬¬ä¸‰ä»£ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒï¼šå°è¯•ç”¨æˆ·ä¸ªæ€§åŒ–éœ€æ±‚ ","date":"2022-02-26","objectID":"/posts/search_engine/common/0.html/:1:2","tags":["search_engine","note"],"title":"ï¼ˆWIPï¼‰ã€Šè¿™å°±æ˜¯æœç´¢å¼•æ“ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/search_engine/common/0.html/"},{"categories":["search engine"],"content":"æœç´¢å¼•æ“çš„3ä¸ªç›®æ ‡ æ›´å…¨ï¼ˆå¦‚æé«˜ç½‘ç»œçˆ¬è™«æŠ€æœ¯ï¼‰ æ›´å¿«ï¼ˆå¦‚ç´¢å¼•ã€ç¼“å­˜ç­‰ç›¸å…³æŠ€æœ¯ï¼‰ æ›´å‡†ï¼ˆå¦‚æ’åºæŠ€æœ¯ã€é“¾æ¥åˆ†ææŠ€æœ¯ç­‰ï¼‰ ","date":"2022-02-26","objectID":"/posts/search_engine/common/0.html/:1:3","tags":["search_engine","note"],"title":"ï¼ˆWIPï¼‰ã€Šè¿™å°±æ˜¯æœç´¢å¼•æ“ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/search_engine/common/0.html/"},{"categories":["search engine"],"content":"æœç´¢å¼•æ“çš„3ä¸ªæ ¸å¿ƒé—®é¢˜ ç”¨æˆ·çœŸæ­£çš„éœ€æ±‚æ˜¯ä»€ä¹ˆ å“ªäº›ä¿¡æ¯æ˜¯å’Œç”¨æˆ·éœ€æ±‚çœŸæ­£ç›¸å…³çš„ å“ªäº›ä¿¡æ¯æ˜¯ç”¨æˆ·å¯ä»¥ä¿¡èµ–çš„ ","date":"2022-02-26","objectID":"/posts/search_engine/common/0.html/:1:4","tags":["search_engine","note"],"title":"ï¼ˆWIPï¼‰ã€Šè¿™å°±æ˜¯æœç´¢å¼•æ“ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/search_engine/common/0.html/"},{"categories":["search engine"],"content":"æœç´¢å¼•æ“çš„æŠ€æœ¯æ¶æ„ ","date":"2022-02-26","objectID":"/posts/search_engine/common/0.html/:1:5","tags":["search_engine","note"],"title":"ï¼ˆWIPï¼‰ã€Šè¿™å°±æ˜¯æœç´¢å¼•æ“ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/search_engine/common/0.html/"},{"categories":["search engine"],"content":"ç¬¬äºŒç«  ç½‘ç»œçˆ¬è™« ","date":"2022-02-26","objectID":"/posts/search_engine/common/0.html/:2:0","tags":["search_engine","note"],"title":"ï¼ˆWIPï¼‰ã€Šè¿™å°±æ˜¯æœç´¢å¼•æ“ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/search_engine/common/0.html/"},{"categories":["search engine"],"content":"é€šç”¨çˆ¬è™«æ¡†æ¶ ","date":"2022-02-26","objectID":"/posts/search_engine/common/0.html/:2:1","tags":["search_engine","note"],"title":"ï¼ˆWIPï¼‰ã€Šè¿™å°±æ˜¯æœç´¢å¼•æ“ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/search_engine/common/0.html/"},{"categories":["search engine"],"content":"ä¼˜ç§€çˆ¬è™«çš„ç‰¹æ€§ é«˜æ€§èƒ½ å¯æ‰©å±•æ€§ å¥å£®æ€§ å‹å¥½æ€§ ","date":"2022-02-26","objectID":"/posts/search_engine/common/0.html/:2:2","tags":["search_engine","note"],"title":"ï¼ˆWIPï¼‰ã€Šè¿™å°±æ˜¯æœç´¢å¼•æ“ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/search_engine/common/0.html/"},{"categories":["search engine"],"content":"çˆ¬è™«è´¨é‡çš„è¯„ä»·æ ‡å‡† æŠ“å–ç½‘é¡µè¦†ç›–ç‡ æŠ“å–ç½‘é¡µæ—¶æ–°æ€§ æŠ“å–ç½‘é¡µé‡è¦æ€§ é€šç›˜è€ƒè™‘ä»¥ä¸Š3ä¸ªå› ç´ ï¼Œå¯ä»¥å°†ç›®å‰çˆ¬è™«ç ”å‘çš„ç›®æ ‡ç®€å•æè¿°å¦‚ä¸‹ï¼šåœ¨èµ„æºæœ‰é™çš„æƒ…å†µä¸‹ï¼Œæ—¢ç„¶æœç´¢å¼•æ“åªèƒ½æŠ“å–äº’è”ç½‘ç°å­˜ç½‘é¡µçš„ä¸€éƒ¨åˆ†ï¼Œé‚£ä¹ˆå°±å°½å¯èƒ½é€‰æ‹©æ¯”è¾ƒé‡è¦çš„é‚£éƒ¨åˆ†é¡µé¢æ¥ç´¢å¼•ï¼›å¯¹äºå·²ç»æŠ“å–åˆ°çš„ç½‘é¡µï¼Œå°½å¯èƒ½å¿«åœ°æ›´æ–°å…¶å†…å®¹ï¼Œä½¿å¾—ç´¢å¼•ç½‘é¡µå’Œäº’è”ç½‘å¯¹åº”é¡µé¢å†…å®¹åŒæ­¥æ›´æ–°ï¼›åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå°½å¯èƒ½æ‰©å¤§æŠ“å–èŒƒå›´ï¼ŒæŠ“å–åˆ°æ›´å¤šä»¥å‰æ— æ³•å‘ç°çš„ç½‘é¡µã€‚ ","date":"2022-02-26","objectID":"/posts/search_engine/common/0.html/:2:3","tags":["search_engine","note"],"title":"ï¼ˆWIPï¼‰ã€Šè¿™å°±æ˜¯æœç´¢å¼•æ“ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/search_engine/common/0.html/"},{"categories":["search engine"],"content":"æŠ“å–ç­–ç•¥ çˆ¬è™«çš„æŠ“å–ç­–ç•¥æœ‰å¾ˆå¤šç§ï¼Œä½†ä¸è®ºæ–¹æ³•å¦‚ä½•ï¼Œå…¶åŸºæœ¬ç›®æ ‡ä¸€è‡´ï¼šä¼˜å…ˆé€‰æ‹©é‡è¦ç½‘é¡µè¿›è¡ŒæŠ“å–ã€‚è€Œå…¶ç½‘é¡µçš„é‡è¦æ€§å¯ä»¥é€‰æ‹©ä¸åŒçš„æ–¹æ³•è¿›è¡Œè¯„åˆ¤ï¼ˆå¤§éƒ¨åˆ†æŒ‰ç½‘é¡µçš„æµè¡Œæ€§æ¥å®šä¹‰ï¼‰ï¼š å®½åº¦ä¼˜å…ˆéå†ç­–ç•¥ï¼ˆBreath Firstï¼‰ éå®Œå…¨PageRankç­–ç•¥ OCIPç­–ç•¥ å¤§æˆ˜ä¼˜å…ˆç­–ç•¥ å®½åº¦ä¼˜å…ˆéå†ç­–ç•¥ è¯¥ç­–ç•¥çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†æ–°ä¸‹è½½ç½‘é¡µåŒ…å«çš„é“¾æ¥ç›´æ¥è¿½åŠ åˆ°å¾…æŠ“å–URLé˜Ÿåˆ—æœ«å°¾ã€‚ å®éªŒè¡¨æ˜è¿™ç§ç­–ç•¥æ•ˆæœå¾ˆå¥½ï¼Œè™½ç„¶çœ‹ä¼¼æœºæ¢°ï¼Œä½†å®é™…ä¸Šçš„ç½‘é¡µæŠ“å–é¡ºåºåŸºæœ¬æ˜¯æŒ‰ç…§ç½‘é¡µçš„é‡è¦æ€§æ’åºçš„ã€‚åŸå› åœ¨äºå®é™…ä¸Šå®½åº¦ä¼˜å…ˆéå†ç­–ç•¥éšå«äº†ä¸€äº›ç½‘é¡µä¼˜å…ˆçº§å‡è®¾. éå®Œå…¨PageRankç­–ç•¥ï¼ˆPartial PageRankï¼‰ PageRankæ˜¯ä¸€ç§è‘—åçš„é“¾æ¥åˆ†æç®—æ³•ï¼Œå¯ä»¥ç”¨æ¥è¡¡é‡ç½‘é¡µçš„é‡è¦æ€§ã€‚ è¯¥ç­–ç•¥åŸºæœ¬æ€è·¯ä¸ºå¯¹äºå·²ç»ä¸‹è½½çš„ç½‘é¡µï¼ŒåŠ ä¸Šå¾…æŠ“å–URLé˜Ÿåˆ—ä¸­çš„URLä¸€èµ·ï¼Œå½¢æˆç½‘é¡µé›†åˆï¼Œåœ¨æ­¤é›†åˆå†…è¿›è¡ŒPageRankè®¡ç®—ï¼Œè®¡ç®—å®Œæˆåï¼Œå°†å¾…æŠ“å–URLé˜Ÿåˆ—é‡Œçš„ç½‘é¡µæŒ‰ç…§PageRankå¾—åˆ†ç”±é«˜åˆ°ä½æ’åºï¼Œå½¢æˆçš„åºåˆ—å°±æ˜¯çˆ¬è™«æ¥ä¸‹æ¥åº”è¯¥ä¾æ¬¡æŠ“å–çš„URLåˆ—è¡¨ã€‚ è€ƒè™‘åˆ°éå®Œå…¨PageRankèµ‹äºˆè¿™äº›æ–°æŠ½å–å‡ºæ¥ä½†æ˜¯åˆæ²¡æœ‰PageRankå€¼çš„ç½‘é¡µï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªä¸´æ—¶PageRankå€¼ï¼Œå°†è¿™ä¸ªç½‘é¡µçš„æ‰€æœ‰å…¥é“¾ä¼ å¯¼çš„PageRankå€¼æ±‡æ€»ï¼Œä½œä¸ºä¸´æ—¶PageRankå€¼ï¼Œè‹¥è¯¥å€¼æ¯”ç›®å‰é˜Ÿåˆ—ä¸­å·²è®¡ç®—çš„PageRanké«˜çš„è¯é‚£ä¹ˆä¼˜å…ˆä¸‹è½½è¿™ä¸ªURLã€‚ OCIPç­–ç•¥ï¼ˆOnline Page Importance Computationï¼‰ OCIPçš„å­—é¢å«ä¹‰æ˜¯â€œåœ¨çº¿é¡µé¢é‡è¦æ€§è®¡ç®—â€ï¼Œå¯ä»¥å°†å…¶çœ‹åšæ˜¯ä¸€ç§æ”¹è¿›çš„PageRankç®—æ³•ã€‚ è¯¥ç­–ç•¥åŸºæœ¬æ€è·¯ä¸ºå‡è®¾ä¸ºæ¯ä¸ªç½‘é¡µéƒ½ç»™äºˆç›¸åŒçš„â€œç°é‡‘â€ï¼Œæ¯å½“ä¸‹è½½äº†æŸä¸ªé¡µé¢Påï¼ŒPå°†è‡ªå·±æ‹¥æœ‰çš„â€œç°é‡‘â€å¹³å‡åˆ†é…ç»™é¡µé¢ä¸­åŒ…å«çš„é“¾æ¥é¡µé¢ã€‚è€Œå¯¹äºå¾…æŠ“å–URLé˜Ÿåˆ—çš„ç½‘é¡µä¸­æ ¹æ®å…¶æ‰‹å¤´æ‹¥æœ‰çš„ç°é‡‘é‡‘é¢å¤šå°‘æ’åºï¼Œä¼˜å…ˆä¸‹è½½ç°é‡‘æœ€å……è£•çš„ç½‘é¡µã€‚ ä¸éå®Œå…¨PageRankç­–ç•¥æ€è·¯åŸºæœ¬ä¸€è‡´ï¼ŒåŒºåˆ«åœ¨äºï¼š è¯¥ç­–ç•¥ä¸éœ€è¦è¿­ä»£è¿‡ç¨‹ï¼Œå¢åŠ äº†è®¡ç®—é€Ÿåº¦ï¼Œæ›´åˆ©äºå®æ—¶è®¡ç®—ä½¿ç”¨ PageRankåœ¨è®¡ç®—æ—¶ï¼Œå­˜åœ¨å‘æ— é“¾æ¥å…³ç³»ç½‘é¡µçš„è¿œç¨‹è·³è½¬è¿‡ç¨‹ï¼Œè€ŒOCIPæ²¡æœ‰è¿™ä¸€è®¡ç®—å› å­ï¼› å®éªŒç»“æœè¡¨æ˜ï¼ŒOCIPæ˜¯ç§è¾ƒå¥½çš„é‡è¦æ€§è¡¡é‡ç­–ç•¥ï¼Œæ•ˆæœç•¥ä¼˜äºå®½åº¦ä¼˜å…ˆéå†ç­–ç•¥ã€‚ å¤§ç«™ä¼˜å…ˆç­–ç•¥ï¼ˆLarger Sites Firstï¼‰ è¯¥ç­–ç•¥åŸºæœ¬æ€è·¯ä¸ºä»¥ç½‘ç«™ä¸ºå•ä½æ¥è¡¡é‡ç½‘é¡µé‡è¦æ€§ï¼Œå¯¹äºå¾…æŠ“å–URLé˜Ÿåˆ—ä¸­çš„ç½‘é¡µï¼Œæ ¹æ®æ‰€å±ç½‘ç«™å½’ç±»ï¼Œå¦‚æœå“ªä¸ªç½‘ç«™ç­‰å¾…ä¸‹è½½çš„é¡µé¢æœ€å¤šï¼Œåˆ™ä¼˜å…ˆä¸‹è½½è¿™äº›é“¾æ¥ã€‚ å³å€¾å‘äºä¼˜å…ˆä¸‹è½½å¤§å‹ç½‘ç«™ã€‚ è¿™ä¸ªæ€è·¯è™½ç„¶ç®€å•ï¼Œä½†æ˜¯æœ‰ä¸€å®šä¾æ®ã€‚å®éªŒè¡¨æ˜è¿™ä¸ªç®—æ³•æ•ˆæœä¹Ÿè¦ç•¥ä¼˜äºå®½åº¦ä¼˜å…ˆéå†ç­–ç•¥ã€‚ ","date":"2022-02-26","objectID":"/posts/search_engine/common/0.html/:2:4","tags":["search_engine","note"],"title":"ï¼ˆWIPï¼‰ã€Šè¿™å°±æ˜¯æœç´¢å¼•æ“ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/search_engine/common/0.html/"},{"categories":["search engine"],"content":"ç½‘é¡µæ›´æ–°ç­–ç•¥ ä¸ºäº†æ›´ä¼˜çš„ç”¨æˆ·ä½“éªŒï¼Œå¯¹äºçˆ¬è™«å·²ç»æŠ“å–è¿‡çš„é¡µé¢ï¼Œè¿˜éœ€è¦è´Ÿè´£ä¿æŒå…¶å†…å®¹å’Œäº’è”ç½‘é¡µé¢å†…å®¹çš„åŒæ­¥ï¼Œè¿™å°±å–å†³äºçˆ¬è™«æ‰€é‡‡ç”¨çš„ç½‘é¡µæ›´æ–°ç­–ç•¥ã€‚ è¯¥ç­–ç•¥æ ¸å¿ƒç‚¹å°±åœ¨äºé‡æ–°æŠ“å–ä¹‹å‰å·²ç»ä¸‹è½½è¿‡çš„ç½‘é¡µçš„æ—¶æœºï¼Œä¸”å°½å¯èƒ½ä½¿å¾—æœ¬åœ°ä¸‹è½½ç½‘é¡µå’Œäº’è”ç½‘åŸå§‹é¡µé¢å†…å®¹ä¿æŒä¸€è‡´ã€‚ä¸€èˆ¬ç­–ç•¥å¦‚ä¸‹ï¼š å†å²å‚è€ƒç­–ç•¥ ç”¨æˆ·ä½“éªŒç­–ç•¥ èšç±»æŠ½æ ·ç­–ç•¥ å†å²å‚è€ƒç­–ç•¥ è¯¥ç­–ç•¥ä¸»è¦å»ºç«‹åœ¨ä»¥ä¸‹å‰æï¼š è¿‡å»é¢‘ç¹æ›´æ–°çš„ç½‘é¡µï¼Œé‚£ä¹ˆå°†æ¥ä¹Ÿä¼šé¢‘ç¹æ›´æ–°ã€‚ æ‰€ä»¥é¢„ä¼°æŸä¸ªç½‘é¡µä½•æ—¶è¿›è¡Œæ›´æ–°å¯å‚è€ƒå…¶å†å²æ›´æ–°æƒ…å†µã€‚ è¿™é‡Œé¢„ä¼°å°±éœ€è¦å»ºæ¨¡ï¼Œç”¨æ¨¡å‹æ¥é¢„æµ‹å‘ç”Ÿå˜åŒ–çš„æ—¶æœºï¼Œå¦‚æ³Šæ¾è¿‡ç¨‹ã€‚ ç”¨æˆ·ä½“éªŒç­–ç•¥ è¯¥ç­–ç•¥åˆ¤æ–­ä¸€ä¸ªç½‘é¡µæ›´æ–°æ—¶æœºå–å†³äºè¿™ä¸ªç½‘é¡µçš„å†…å®¹å˜åŒ–æ‰€å¸¦æ¥æœç´¢è´¨é‡çš„å˜åŒ–ï¼ˆå¾€å¾€é‡‡ç”¨æœç´¢ç»“æœæ’åçš„å˜åŒ–æ¥è¡¡é‡ï¼‰ï¼Œå½±å“è¶Šå¤§çš„ç½‘é¡µï¼Œåˆ™åº”è¯¥è¶Šå¿«æ›´æ–°ã€‚ ç”¨æˆ·ä½“éªŒç­–ç•¥ä¿å­˜ç½‘é¡µçš„å¤šä¸ªå†å²ç‰ˆæœ¬ï¼Œå¹¶æ ¹æ®è¿‡å»æ¯æ¬¡å†…å®¹å˜åŒ–å¯¹æœç´¢è´¨é‡çš„å½±å“ï¼Œå¾—å‡ºä¸€ä¸ªå¹³å‡å€¼ï¼Œä»¥æ­¤ä½œä¸ºåˆ¤æ–­çˆ¬è™«é‡æŠ“è¯¥ç½‘é¡µæ—¶æœºçš„å‚è€ƒä¾æ®ï¼Œå¯¹äºå½±å“è¶Šå‰å®³çš„ç½‘é¡µï¼Œåˆ™è¶Šä¼˜å…ˆè°ƒåº¦é‡æ–°æŠ“å–ã€‚ èšç±»æŠ½æ ·ç­–ç•¥ è¯¥ç­–ç•¥å°±æ˜¯ä¸ºäº†è§£å†³ä¸¥é‡ä¾èµ–å†å²æ›´æ–°ä¿¡æ¯çš„å±€é™æ€§ã€‚è®¤ä¸ºç½‘é¡µå…·æœ‰ä¸€äº›å±æ€§ï¼Œæ ¹æ®è¿™äº›å±æ€§å¯ä»¥é¢„æµ‹å…¶æ›´æ–°å‘¨æœŸï¼Œå…·æœ‰ç›¸ä¼¼å±æ€§çš„ç½‘é¡µå…¶æ›´æ–°å‘¨æœŸä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚ æ ¹æ®è¿™äº›å±æ€§å°†ç½‘é¡µå½’ç±»ï¼ŒåŒä¸€ç±»åˆ«å†…çš„ç½‘é¡µå…·æœ‰ç›¸åŒçš„æ›´æ–°é¢‘ç‡ã€‚ä¸ºäº†è®¡ç®—æŸä¸ªç±»åˆ«çš„æ›´æ–°å‘¨æœŸï¼Œåªéœ€å¯¹ç±»åˆ«å†…ç½‘é¡µè¿›è¡Œé‡‡æ ·ï¼Œä»¥è¿™äº›è¢«é‡‡æ ·ç½‘é¡µçš„æ›´æ–°å‘¨æœŸä½œä¸ºç±»åˆ«å†…æ‰€æœ‰å…¶ä»–ç½‘é¡µçš„æ›´æ–°å‘¨æœŸã€‚ ç›¸å…³å®éªŒè¡¨æ˜ï¼Œèšç±»æŠ½æ ·ç­–ç•¥æ•ˆæœå¥½äºå‰è¿°ä¸¤ç§æ›´æ–°ç­–ç•¥ï¼Œä½†æ˜¯å¯¹ä»¥äº¿è®¡çš„ç½‘é¡µè¿›è¡Œèšç±»ï¼Œå…¶éš¾åº¦ä¹Ÿæ˜¯éå¸¸å·¨å¤§çš„ã€‚ ","date":"2022-02-26","objectID":"/posts/search_engine/common/0.html/:2:5","tags":["search_engine","note"],"title":"ï¼ˆWIPï¼‰ã€Šè¿™å°±æ˜¯æœç´¢å¼•æ“ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/search_engine/common/0.html/"},{"categories":["search engine"],"content":"æš—ç½‘æŠ“å– æ‰€è°“æš—ç½‘ï¼Œæ˜¯æŒ‡ç›®å‰æœç´¢å¼•æ“çˆ¬è™«æŒ‰ç…§å¸¸è§„æ–¹å¼å¾ˆéš¾æŠ“å–åˆ°çš„äº’è”ç½‘é¡µé¢ã€‚ä¸ºäº†èƒ½å¤Ÿå¯¹æš—ç½‘æ•°æ®è¿›è¡Œç´¢å¼•ï¼Œéœ€è¦ç ”å‘ä¸å¸¸è§„çˆ¬è™«æœºåˆ¶ä¸åŒçš„ç³»ç»Ÿï¼Œè¿™ç±»çˆ¬è™«è¢«ç§°åšæš—ç½‘çˆ¬è™«ã€‚ æš—ç½‘çˆ¬è™«çš„ç›®çš„æ˜¯å°†æš—ç½‘æ•°æ®ä»æ•°æ®åº“ä¸­æŒ–æ˜å‡ºæ¥ï¼Œå¹¶å°†å…¶åŠ å…¥æœç´¢å¼•æ“çš„ç´¢å¼•ï¼Œå¢åŠ å…¶æœç´¢æ—¶çš„ä¿¡æ¯è¦†ç›–ç¨‹åº¦ã€‚ å…¶æŠ€æœ¯æŒ‘æˆ˜ç‚¹ä¸€èˆ¬æœ‰ä¸¤ç‚¹ï¼š æŸ¥è¯¢ç»„åˆé—®é¢˜ã€‚è‹¥ç»„åˆå¤ªå¤šæ—¢ä¼šå¯¹è®¿é—®ç½‘ç«™é€ æˆè¿‡å¤§å‹åŠ›ï¼Œä¹Ÿå¯èƒ½ä¼šæœ‰é‡å¤æ•°æ®çš„é—®é¢˜ã€‚ æŸ¥è¯¢æ–‡æœ¬æ¡†é—®é¢˜ã€‚å³æœ‰äº›éœ€è¦æˆ‘ä»¬å¡«å†™å†…å®¹åœ¨æ­¤ç½‘é¡µæœç´¢æ‰èƒ½å¾—åˆ°å†…å®¹ã€‚ æŸ¥è¯¢ç»„åˆé—®é¢˜ åœ¨æŸ¥è¯¢ç»„åˆé—®é¢˜ä¸­ï¼ŒGoogleå¯¹æ­¤æå‡ºäº†è¾ƒä¸ºç»å…¸çš„å¯Œå«ä¿¡æ¯æŸ¥è¯¢æ¨¡æ¿ï¼ˆInformative Query Templatesï¼‰æŠ€æœ¯ã€‚ è¯¥æŠ€æœ¯å®šä¹‰å¦‚ä¸‹ï¼šå¯¹äºæŸä¸ªå›ºå®šçš„æŸ¥è¯¢æ¨¡æ¿æ¥è¯´ï¼Œå¦‚æœç»™æ¨¡æ¿å†…æ¯ä¸ªå±æ€§éƒ½èµ‹å€¼ï¼Œå½¢æˆä¸åŒçš„æŸ¥è¯¢ç»„åˆï¼Œæäº¤ç»™å‚ç›´æœç´¢å¼•æ“ï¼Œè§‚å¯Ÿæ‰€æœ‰è¿”å›é¡µé¢çš„å†…å®¹ï¼Œå¦‚æœç›¸äº’ä¹‹é—´å†…å®¹å·®å¼‚è¾ƒå¤§ï¼Œåˆ™è¿™ä¸ªæŸ¥è¯¢æ¨¡æ¿å°±æ˜¯å¯Œå«ä¿¡æ¯æŸ¥è¯¢æ¨¡æ¿ã€‚ ä¸ºäº†è¿›ä¸€æ­¥å‡å°‘æäº¤çš„æŸ¥è¯¢æ•°ç›®ï¼ŒGoogleçš„æŠ€æœ¯æ–¹æ¡ˆä½¿ç”¨äº†ISITç®—æ³•ã€‚è¯¥ç®—æ³•åŸºæœ¬æ€è·¯ä¸ºä»ä¸€ç»´å¼€å§‹ï¼Œè‹¥ä¸€ç»´æ¨¡æ¿å«æœ‰å¯Œå«ä¿¡æ¯æŸ¥è¯¢æ¨¡æ¿ï¼Œè‹¥æ˜¯çš„è¯åˆ™æ‰©å±•åˆ°äºŒç»´ï¼Œå¦‚æ­¤ç±»æ¨é€æ­¥å¢åŠ ç»´æ•°ï¼Œç›´åˆ°å†ä¹Ÿæ— æ³•æ‰¾åˆ°å¯Œå«ä¿¡æ¯æŸ¥è¯¢æ¨¡æ¿ä¸ºæ­¢ã€‚ Googleçš„è¯„æµ‹ç»“æœè¯æ˜ï¼Œè¿™ç§æ–¹æ³•å’Œå®Œå…¨ç»„åˆæ–¹å¼æ¯”ï¼Œèƒ½å¤Ÿå¤§å¹…åº¦æå‡ç³»ç»Ÿæ•ˆç‡ã€‚åœ¨æ•°æ®æŒ–æ˜é¢†åŸŸä¸­æ­¤ç®—æ³•å’Œæ•°æ®æŒ–æ˜é‡Œç»å…¸çš„Aprioriè§„åˆ™æŒ–æ˜ç®—æ³•å…¶æ ¸å¿ƒæ€æƒ³ç›¸åŒã€‚ æŸ¥è¯¢æ–‡æœ¬æ¡†é—®é¢˜ åœ¨æ­¤ä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡äººå·¥è§‚å¯Ÿç½‘ç«™è¿›è¡Œå®šä½ï¼Œæä¾›ä¸€ä¸ªä¸ç½‘ç«™å†…å®¹ç›¸å…³çš„åˆå§‹ç§å­æŸ¥è¯¢å…³é”®è¯è¡¨ï¼Œä»¥æ­¤ä½œä¸ºçˆ¬è™«èƒ½å¤Ÿç»§ç»­å·¥ä½œçš„åŸºç¡€æ¡ä»¶ã€‚ çˆ¬è™«æ ¹æ®åˆå§‹ç§å­è¯è¡¨ï¼Œå‘å‚ç›´æœç´¢å¼•æ“æäº¤æŸ¥è¯¢ï¼Œå¹¶ä¸‹è½½è¿”å›çš„ç»“æœé¡µé¢ã€‚ä¹‹åä»è¿”å›ç»“æœé¡µé¢é‡Œè‡ªåŠ¨æŒ–æ˜å‡ºç›¸å…³çš„å…³é”®è¯ï¼Œå¹¶å½¢æˆä¸€ä¸ªæ–°çš„æŸ¥è¯¢åˆ—è¡¨ï¼Œä¾æ¬¡å°†æ–°æŒ–æ˜å‡ºçš„æŸ¥è¯¢æäº¤ç»™æœç´¢å¼•æ“ã€‚å¦‚æ­¤å¾€å¤ï¼Œç›´åˆ°æ— æ³•ä¸‹è½½åˆ°æ–°çš„å†…å®¹ä¸ºæ­¢ã€‚ é€šè¿‡è¿™ç§äººå·¥å¯å‘ç»“åˆé€’å½’è¿­ä»£å¾—åˆ°ç§å­è¯è¡¨çš„æ–¹å¼ï¼Œå°½å¯èƒ½è¦†ç›–æ•°æ®åº“é‡Œçš„è®°å½•ã€‚ ","date":"2022-02-26","objectID":"/posts/search_engine/common/0.html/:2:6","tags":["search_engine","note"],"title":"ï¼ˆWIPï¼‰ã€Šè¿™å°±æ˜¯æœç´¢å¼•æ“ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/search_engine/common/0.html/"},{"categories":["search engine"],"content":"åˆ†å¸ƒå¼çˆ¬è™« é‡‡å–åˆ†å¸ƒå¼æ¶æ„çš„ç›®çš„åœ¨äºæå‡æµ·é‡æ•°æ®æŠ“å–çš„æ•ˆç‡ã€‚ å¤§å‹åˆ†å¸ƒå¼çˆ¬è™«çš„3ä¸ªå±‚çº§ï¼šåˆ†å¸ƒå¼æ•°æ®ä¸­å¿ƒã€åˆ†å¸ƒå¼æŠ“å–æœåŠ¡å™¨åŠåˆ†å¸ƒå¼çˆ¬è™«ç¨‹åºã€‚ å¯¹äºåŒä¸€æ•°æ®ä¸­å¿ƒçš„å¤šå°æŠ“å–æœåŠ¡å™¨ï¼Œä¸åŒæœºå™¨ä¹‹é—´çš„åˆ†å·¥ååŒæ–¹å¼ä¼šæœ‰å·®å¼‚ï¼Œå¸¸è§çš„åˆ†å¸ƒå¼æ¶æ„æœ‰ä¸¤ç§ï¼š ä¸»ä»å¼åˆ†å¸ƒçˆ¬è™« å¯¹ç­‰å¼åˆ†å¸ƒçˆ¬è™« Googleåœ¨æ—©æœŸå³é‡‡ç”¨æ­¤ç§ä¸»ä»åˆ†å¸ƒå¼çˆ¬è™«ï¼Œåœ¨è¿™ç§æ¶æ„ä¸­ï¼Œå› ä¸ºURLæœåŠ¡å™¨æ‰¿æ‹…å¾ˆå¤šç®¡ç†ä»»åŠ¡ï¼ŒåŒæ—¶å¾…æŠ“å–URLé˜Ÿåˆ—æ•°é‡å·¨å¤§ï¼Œæ‰€ä»¥URLæœåŠ¡å™¨å®¹æ˜“æˆä¸ºæ•´ä¸ªç³»ç»Ÿçš„ç“¶é¢ˆã€‚ ä¸ºäº†è§£å†³å“ˆå¸Œå–æ¨¡çš„å¯¹ç­‰å¼åˆ†å¸ƒçˆ¬è™«å­˜åœ¨çš„é—®é¢˜ï¼ŒUbiCrawlerçˆ¬è™«æå‡ºäº†æ”¹è¿›æ–¹æ¡ˆï¼Œå³æ”¾å¼ƒå“ˆå¸Œå–æ¨¡æ–¹å¼ï¼Œè½¬è€Œé‡‡ç”¨ä¸€è‡´æ€§å“ˆå¸Œæ–¹æ³•ï¼ˆConsisting Hashï¼‰æ¥ç¡®å®šæœåŠ¡å™¨çš„ä»»åŠ¡åˆ†å·¥ã€‚ ","date":"2022-02-26","objectID":"/posts/search_engine/common/0.html/:2:7","tags":["search_engine","note"],"title":"ï¼ˆWIPï¼‰ã€Šè¿™å°±æ˜¯æœç´¢å¼•æ“ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/search_engine/common/0.html/"},{"categories":["search engine"],"content":"ç¬¬ä¸‰ç«  æœç´¢å¼•æ“ç´¢å¼• ","date":"2022-02-26","objectID":"/posts/search_engine/common/0.html/:3:0","tags":["search_engine","note"],"title":"ï¼ˆWIPï¼‰ã€Šè¿™å°±æ˜¯æœç´¢å¼•æ“ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/search_engine/common/0.html/"},{"categories":["search engine"],"content":"3.1 ç´¢å¼•åŸºç¡€ å•è¯-æ–‡æ¡£çŸ©é˜µ æœç´¢å¼•æ“çš„ç´¢å¼•å…¶å®å°±æ˜¯å®ç°å•è¯â€”æ–‡æ¡£çŸ©é˜µçš„å…·ä½“æ•°æ®ç»“æ„ã€‚å¯ä»¥æœ‰ä¸åŒçš„æ–¹å¼æ¥å®ç°ä¸Šè¿°æ¦‚å¿µæ¨¡å‹ï¼Œæ¯”å¦‚å€’æ’ç´¢å¼•ã€ç­¾åæ–‡ä»¶ã€åç¼€æ ‘ç­‰æ–¹å¼ã€‚å…¶ä¸­å€’æ’ç´¢å¼•æ˜¯æ–‡æ¡£æ˜ å°„å…³ç³»çš„æœ€ä½³å®ç°æ–¹å¼ã€‚ å€’æ’ç´¢å¼• æ„å»ºå€’æ’ç´¢å¼•æ—¶çš„ä¸»è¦å…³æ³¨ç‚¹ï¼š åˆ†è¯ç³»ç»Ÿ ç´¢å¼•è®°è½½ä¿¡æ¯ ","date":"2022-02-26","objectID":"/posts/search_engine/common/0.html/:3:1","tags":["search_engine","note"],"title":"ï¼ˆWIPï¼‰ã€Šè¿™å°±æ˜¯æœç´¢å¼•æ“ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/search_engine/common/0.html/"},{"categories":["search engine"],"content":"3.2 å•è¯è¯å…¸ æ„é€ å’ŒæŸ¥è¯¢å•è¯è¯å…¸æ‰€ä½¿ç”¨çš„æ•°æ®ç»“æ„ä¸€èˆ¬æœ‰ï¼š å“ˆå¸ŒåŠ é“¾è¡¨ç»“æ„ æ ‘å½¢è¯å…¸ç»“æ„ ","date":"2022-02-26","objectID":"/posts/search_engine/common/0.html/:3:2","tags":["search_engine","note"],"title":"ï¼ˆWIPï¼‰ã€Šè¿™å°±æ˜¯æœç´¢å¼•æ“ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/search_engine/common/0.html/"},{"categories":["search engine"],"content":"3.3 å€’æ’åˆ—è¡¨ ä¸ºäº†æ›´å¥½å¯¹æ•°æ®è¿›è¡Œå‹ç¼©ï¼Œåœ¨å®é™…çš„æœç´¢å¼•æ“ç³»ç»Ÿä¸­ï¼Œå¹¶ä¸å­˜å‚¨å€’æ’ç´¢å¼•é¡¹ä¸­çš„å®é™…æ–‡æ¡£ç¼–å·ï¼Œè€Œæ˜¯ä»¥æ–‡æ¡£ç¼–å·å·®å€¼ï¼ˆD-Gapï¼‰ã€‚ ","date":"2022-02-26","objectID":"/posts/search_engine/common/0.html/:3:3","tags":["search_engine","note"],"title":"ï¼ˆWIPï¼‰ã€Šè¿™å°±æ˜¯æœç´¢å¼•æ“ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/search_engine/common/0.html/"},{"categories":["search engine"],"content":"3.4 å»ºç«‹ç´¢å¼• ä¸¤éæ–‡æ¡£éå†æ³•ï¼ˆ2-Pass In-Memory Inversionï¼‰ æ­¤æ–¹æ³•å®Œå…¨æ˜¯åœ¨å†…å­˜é‡Œå®Œæˆç´¢å¼•çš„åˆ›å»ºè¿‡ç¨‹çš„ã€‚ ç¬¬ä¸€éæ‰«æçš„ä¸»è¦ç›®çš„æ˜¯èµ„æºå‡†å¤‡å·¥ä½œï¼ˆå¦‚è·å¾—ç»Ÿè®¡ä¿¡æ¯ã€ä»¥æ­¤åˆ†é…å†…å­˜ç­‰èµ„æºã€å»ºç«‹å†…å­˜ä¸­å•è¯æ–‡æ¡£ä½ç½®ä¿¡æ¯ç­‰ï¼‰ï¼› ç¬¬äºŒéæ‰«æçœŸæ­£å»ºç«‹æ¯ä¸ªå•è¯çš„å€’æ’åˆ—è¡¨ä¿¡æ¯ï¼Œå¡«å……åˆ†é…å¥½çš„å†…å­˜ç©ºé—´ï¼› ä¸¤éæ‰«æåå°†å†…å­˜çš„å€’æ’åˆ—è¡¨å’Œè¯å…¸ä¿¡æ¯å†™å…¥ç£ç›˜ï¼› ç¼ºç‚¹åœ¨äºï¼š å¯¹å†…å­˜æœ‰è¦æ±‚ï¼› é€Ÿåº¦æ€§èƒ½è¾ƒå·®ï¼ˆä¸»è¦å› ä¸ºä¸¤æ¬¡éå†ä¸­ç£ç›˜è¯»å–æ¶ˆè€—è¾ƒå¤§ï¼‰ï¼› æ’åºæ³•ï¼ˆSort-based Inversionï¼‰ è¯¥æ–¹æ³•åœ¨å»ºç«‹ç´¢å¼•çš„è¿‡ç¨‹ä¸­ï¼Œå§‹ç»ˆåœ¨å†…å­˜ä¸­åˆ†é…å›ºå®šå¤§å°çš„ç©ºé—´ï¼Œç”¨æ¥å­˜æ”¾è¯å…¸ä¿¡æ¯å’Œç´¢å¼•çš„ä¸­é—´ç»“æœï¼Œè‹¥å†…å­˜ç©ºé—´ä¸è¶³åˆ™å°†ä¸­é—´ç»“æœæ’åºå¤„ç†åå†™å…¥ç£ç›˜ï¼ŒåŒæ—¶æ¸…ç†å†…å­˜ç©ºé—´ã€‚æœ€ç»ˆå°†ç£ç›˜å†™å…¥çš„ä¸­é—´ç»“æœè¿›è¡Œæ’åºåˆå¹¶å¾—åˆ°æœ€ç»ˆçš„ç´¢å¼•ã€‚ å½’å¹¶æ³•ï¼ˆMerge-based Inversionï¼‰ å½’å¹¶æ³•æ˜¯åœ¨æ’åºæ³•çš„åŸºç¡€ä¸Šè¿›è¡Œä¼˜åŒ–ï¼Œæ”¹è¿›ç‚¹ä¸»è¦åœ¨å°†å†…å­˜ä¸­ç»´æŠ¤çš„è¯å…¸ä¿¡æ¯ç­‰æ‰€æœ‰ä¸­é—´ç»“æœä¹Ÿå†™å…¥ç£ç›˜ï¼Œåˆ©ç”¨åç»­å†…å­˜ç©ºé—´ä½¿ç”¨ã€‚ è™½ç„¶æµç¨‹ä¸æ’åºæ³•å¤§è‡´ç›¸åŒï¼Œä½†æ˜¯å®ç°æ–¹å¼å·®å¼‚è¾ƒå¤§ï¼š å­˜æ”¾åœ¨å†…å­˜çš„ä¸­é—´ç»“æœï¼Œå½’å¹¶æ³•æ˜¯å»ºè®®äº†å®Œæ•´çš„ç´¢å¼•ç»“æ„ï¼ˆå®Œæ•´å€’æ’ç´¢å¼•ï¼‰ï¼Œè€Œæ’åºæ³•åˆ™åªæ˜¯æ„å»ºçš„å¹¶ä¸å®Œæ•´ï¼› ä¸­é—´ç»“æœå†™å…¥ç£ç›˜ä¸´æ—¶æ–‡ä»¶ï¼Œå½’å¹¶æ³•æ˜¯å°†å®Œæ•´å†…å­˜å€’æ’ç´¢å¼•ä»¥è¯å…¸é¡¹åœ¨å‰å€’æ’åˆ—è¡¨åœ¨åçš„è§„å¾‹å†™å…¥ä¸´æ—¶æ–‡ä»¶ï¼Œç›´è‡³å†…å­˜æ¸…ç©ºï¼Œè€Œæ’åºæ³•å¹¶æ²¡æœ‰å°†è¯å…¸æ˜ å°„è¡¨å†™å…¥ï¼› ","date":"2022-02-26","objectID":"/posts/search_engine/common/0.html/:3:4","tags":["search_engine","note"],"title":"ï¼ˆWIPï¼‰ã€Šè¿™å°±æ˜¯æœç´¢å¼•æ“ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/search_engine/common/0.html/"},{"categories":["search engine"],"content":"3.5 åŠ¨æ€ç´¢å¼• è¿™ç§åŠ¨æ€ç´¢å¼•ä¸­ï¼Œæœ‰3ä¸ªå…³é”®çš„ç´¢å¼•ç»“æ„ï¼š å€’æ’ç´¢å¼• ä¸´æ—¶ç´¢å¼• å·²åˆ é™¤æ–‡æ¡£åˆ—è¡¨ å¯¹äºæ›´æ–°çš„å¤„ç†å¯ä»¥è®¤ä¸ºæ˜¯å…ˆåˆ åå¢ã€‚ ","date":"2022-02-26","objectID":"/posts/search_engine/common/0.html/:3:5","tags":["search_engine","note"],"title":"ï¼ˆWIPï¼‰ã€Šè¿™å°±æ˜¯æœç´¢å¼•æ“ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/search_engine/common/0.html/"},{"categories":["search engine"],"content":"3.6 ç´¢å¼•æ›´æ–°ç­–ç•¥ åŠ¨æ€ç´¢å¼•é€šè¿‡åœ¨å†…å­˜ä¸­ç»´æŠ¤ä¸´æ—¶ç´¢å¼•ï¼Œå¯ä»¥å®ç°å¯¹åŠ¨æ€æ–‡æ¡£å’Œå®æ—¶æœç´¢çš„æ”¯æŒã€‚ä½†æ˜¯æœå†…å­˜æ€»æ˜¯æœ‰é™çš„ï¼Œå½“å†…å­˜è¢«æ¶ˆè€—å®Œéœ€è¦è€ƒè™‘å°†ä¸´æ—¶ç´¢å¼•æ›´æ–°åˆ°ç£ç›˜ç´¢å¼•ä¸­ï¼Œé‡Šæ”¾å†…å­˜ç©ºé—´ï¼Œæ­¤æ—¶å°±æ¶‰åŠåˆ°äº†ç´¢å¼•çš„æ›´æ–°ç­–ç•¥ã€‚ å¸¸è§çš„ç´¢å¼•æ›´æ–°ç­–ç•¥å¦‚ä¸‹ï¼š å®Œå…¨é‡å»ºç­–ç•¥ å†åˆå¹¶ç­–ç•¥ åŸåœ°æ›´æ–°ç­–ç•¥ æ··åˆç­–ç•¥ å®Œå…¨é‡å»ºç­–ç•¥ï¼ˆComplete Re-Buildï¼‰ è¯¥ç­–ç•¥çš„åŸºæœ¬æ€è·¯ä¸ºç›´æ¥å°†æ–°è€æ–‡æ¡£åˆå¹¶åé‡æ–°å»ºç«‹æ–°ç´¢å¼•ï¼Œå®Œæˆåä¸¢å¼ƒè€ç´¢å¼•ã€‚ æ¯”è¾ƒé€‚åˆå°æ–‡æ¡£é›†åˆï¼Œå› ä¸ºå®Œå…¨é‡å»ºç´¢å¼•çš„ä»£ä»·è¾ƒé«˜ã€‚ å†åˆå¹¶ç­–ç•¥ï¼ˆRe-Mergeï¼‰ æ­¤ç­–ç•¥å°±æ˜¯æŠŠå°†å†™å…¥ç£ç›˜çš„ä¸´æ—¶ç´¢å¼•å’Œè€æ–‡æ¡£çš„å€’æ’ç´¢å¼•è¿›è¡Œåˆå¹¶ç”Ÿæˆæ–°çš„ç´¢å¼•ã€‚ éœ€è¦è¯´æ˜çš„æ˜¯åˆå¹¶æ—¶è€å€’æ’æ–‡ä»¶å’Œå¢é‡ç´¢å¼•ä¸­çš„è¯å…¸éƒ½å·²æ’åºè¿‡ï¼Œè¿™æ ·å¯ä»¥é¡ºåºè¯»å–æ–‡ä»¶å†…å®¹ï¼Œå‡å°‘ç£ç›˜å¯»é“æ—¶é—´ï¼Œè¿™æ˜¯å…¶é«˜æ•ˆçš„æ ¹æœ¬åŸå› ã€‚è€Œè¯¥ç­–ç•¥ç¼ºç‚¹åœ¨äºè€ç´¢å¼•ä¸­å¾ˆå¤šå•è¯æ²¡æœ‰å˜åŒ–ä¹Ÿéœ€è¦é‡æ–°è¿›è¡Œå†™å…¥æ„å»ºæ–°ç´¢å¼•ï¼Œé€ æˆä¸å¿…è¦çš„ç£ç›˜æ¶ˆè€—ã€‚ åŸåœ°æ›´æ–°ç­–ç•¥ï¼ˆIn-Placeï¼‰ è¯¥ç­–ç•¥å‡ºå‘ç‚¹å°±æ˜¯è§£å†³å†åˆå¹¶ç­–ç•¥ä¸­çš„å±€é™ï¼š åªå¯¹å€’æ’åˆ—è¡¨å˜åŒ–çš„å•è¯è¿›è¡Œå¤„ç†ï¼Œè€Œä¸éœ€è¦å¯¹æœªå‘ç”Ÿå˜åŒ–çš„è€ç´¢å¼•è¿›è¡Œå¤„ç†ï¼› å³ä½¿è€ç´¢å¼•çš„å€’æ’åˆ—è¡¨æ›´æ–°ç›´æ¥åœ¨æœ«å°¾è¿›è¡Œè¿½åŠ æ“ä½œï¼Œè€Œä¸éœ€è¦è¯»å–åŸå…ˆçš„å€’æ’åˆ—è¡¨å¹¶é‡å†™åˆ°ç£ç›˜ï¼› æ‰€ä»¥è¯¥ç­–ç•¥çš„ä¸»è¦ä¼˜åŒ–åœ¨äºï¼š åœ¨ç´¢å¼•åˆå¹¶æ—¶ç›´æ¥åœ¨åŸå…ˆè€çš„ç´¢å¼•æ–‡ä»¶é‡Œè¿›è¡Œè¿½åŠ æ“ä½œï¼Œå°†å¢é‡ç´¢å¼•é‡Œå•è¯çš„å€’æ’åˆ—è¡¨é¡¹è¿½åŠ åˆ°è€ç´¢å¼•ç›¸åº”ä½ç½®çš„æœ«å°¾ï¼› ä¸ºäº†æ”¯æŒä¸Šé¢çš„è¿½åŠ æ“ä½œï¼Œåœ¨åˆå§‹å»ºç«‹çš„ç´¢å¼•æ—¶ä¸ºæ¯ä¸ªå•è¯çš„å€’æ’åˆ—è¡¨æœ«å°¾é¢„ç•™ç£ç›˜ç©ºé—´ï¼› è‹¥é¢„ç•™ç©ºé—´ä¸è¶³ï¼Œå°±éœ€è¦è¿›è¡Œæ‰©å®¹â€œè¿ç§»â€å³å¯»æ‰¾åˆ°æ›´å¤§çš„ç£ç›˜ç©ºé—´åå°†è€ç´¢å¼•æ–‡ä»¶é‡æ–°å†™å…¥ï¼Œç„¶åè¿›è¡Œè¿½åŠ æ“ä½œã€‚ ä½†æ˜¯å®éªŒæ•°æ®è¯æ˜å…¶ç´¢å¼•æ›´æ–°æ•ˆç‡æ¯”å†åˆå¹¶ç­–ç•¥ä½ï¼ŒåŸå› å¦‚ä¸‹ï¼š æ‰©å®¹â€œè¿ç§»â€æ“ä½œè¾ƒä¸ºé¢‘ç¹ï¼Œä¸”éœ€è¦å¯¹ç£ç›˜å¯ç”¨ç©ºé—´è¿›è¡Œç»´æŠ¤å’Œç®¡ç†çš„æˆæœ¬è¾ƒé«˜ï¼› â€œè¿ç§»â€æ“ä½œç ´åäº†ç´¢å¼•æ–‡ä»¶ä¸­çš„å•è¯è¿ç»­æ€§ ï¼ˆé™ä½è¯»å–é€Ÿåº¦ï¼‰ ï¼Œè‹¥åœ¨ç´¢å¼•æ–‡ä»¶åˆå¹¶æ—¶é¡ºåºè¯»å–åˆ™éœ€è¦ç»´æŠ¤å•è¯åŠå…¶å€’æ’æ–‡ä»¶çš„æ˜ å°„è¡¨ ï¼ˆæ˜ å°„è¡¨ç»´æŠ¤ç®¡ç†æˆæœ¬è¾ƒé«˜ï¼‰ï¼› æ··åˆç­–ç•¥ï¼ˆHybridï¼‰ é¡¾åæ€ä¹‰å³å¸Œæœ›èƒ½å¤Ÿç»“åˆä¸åŒç´¢å¼•æ›´æ–°ç­–ç•¥ã€‚ å¸¸è§çš„åšæ³•å¦‚ä¸‹ï¼š å‡ºç°è¾ƒä¸ºé¢‘ç¹çš„å•è¯å€’æ’åˆ—è¡¨è¾ƒé•¿å³é•¿å€’æ’åˆ—è¡¨å•è¯ï¼Œè¿™é‡Œå°±é‡‡å–åŸåœ°æ›´æ–°ç­–ç•¥ï¼Œè§£å†³ç£ç›˜è¯»å†™å¼€é”€çš„ç“¶é¢ˆï¼› å‡ºç°è¾ƒå°‘çš„å•è¯å€’æ’åˆ—è¡¨å°±è¾ƒçŸ­å³çŸ­å€’æ’åˆ—è¡¨å•è¯ï¼Œè¿™é‡Œé‡‡å–å†åˆå¹¶ç­–ç•¥ï¼Œè§£å†³é¡ºåºè¯»å†™çš„ç“¶é¢ˆï¼› ","date":"2022-02-26","objectID":"/posts/search_engine/common/0.html/:3:6","tags":["search_engine","note"],"title":"ï¼ˆWIPï¼‰ã€Šè¿™å°±æ˜¯æœç´¢å¼•æ“ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/search_engine/common/0.html/"},{"categories":["search engine"],"content":"3.7 æŸ¥è¯¢å¤„ç† ç›®å‰æœ‰ä¸¤ç§å¸¸è§çš„æŸ¥è¯¢å¤„ç†æœºåˆ¶: ä¸€æ¬¡ä¸€æ–‡æ¡£æ–¹å¼; ä¸€æ¬¡ä¸€å•è¯æ–¹å¼ï¼› è·³è·ƒæŒ‡é’ˆæ–¹å¼ï¼ˆä¼˜åŒ–ï¼‰ï¼› ä¸€æ¬¡ä¸€æ–‡æ¡£ï¼ˆDoc at a Timeï¼‰ ä»¥å€’æ’åˆ—è¡¨ä¸­åŒ…å«çš„æ–‡æ¡£ä¸ºå•ä½ï¼Œæ¯æ¬¡å°†å…¶ä¸­æŸä¸ªæ–‡æ¡£ä¸æŸ¥è¯¢çš„æœ€ç»ˆç›¸ä¼¼æ€§å¾—åˆ†è®¡ç®—å®Œæ¯•ï¼Œç„¶åå¼€å§‹è®¡ç®—å¦å¤–ä¸€ä¸ªæ–‡æ¡£çš„æœ€ç»ˆå¾—åˆ†ï¼Œç›´åˆ°æ‰€æœ‰æ–‡æ¡£çš„å¾—åˆ†éƒ½è®¡ç®—å®Œæ¯•ä¸ºæ­¢ã€‚ æœç´¢ç³»ç»Ÿçš„è¾“å‡ºç»“æœå¾€å¾€æ˜¯é™å®šä¸ªæ•°çš„ï¼Œåœ¨å®é™…å®ç°ä¸€æ¬¡ä¸€æ–‡æ¡£æ–¹å¼æ—¶ï¼Œä¸å¿…ä¿å­˜æ‰€æœ‰æ–‡æ¡£çš„ç›¸å…³æ€§å¾—åˆ†ï¼Œè€Œåªéœ€è¦åœ¨å†…å­˜ä¸­ç»´æŠ¤ä¸€ä¸ªå¤§å°ä¸ºKçš„ä¼˜å…ˆçº§åˆ«é˜Ÿåˆ—ï¼ˆæ ¹å †æ•°æ®ç»“æ„ï¼‰ã€‚ ä¸€æ¬¡ä¸€å•è¯ï¼ˆTerm at a Timeï¼‰ ä¸€æ¬¡ä¸€æ–‡æ¡£å¯ä»¥ç›´è§‚ç†è§£ä¸ºåœ¨å•è¯â€”æ–‡æ¡£çŸ©é˜µä¸­ï¼Œä»¥æ–‡æ¡£ä¸ºå•ä½ï¼Œçºµå‘è¿›è¡Œåˆ†æ•°ç´¯è®¡ï¼Œä¹‹åç§»åŠ¨åˆ°åç»­æ–‡æ¡£æ¥ç€è®¡ç®—ï¼Œå³è®¡ç®—è¿‡ç¨‹æ˜¯â€œå…ˆçºµå‘å†æ¨ªå‘â€ï¼›è€Œä¸€æ¬¡ä¸€å•è¯åˆ™æ˜¯é‡‡å–â€œå…ˆæ¨ªå‘å†çºµå‘â€çš„æ–¹å¼ã€‚ è·³è·ƒæŒ‡é’ˆï¼ˆSkip Pointersï¼‰ å¦‚æœç”¨æˆ·è¾“å…¥çš„æŸ¥è¯¢åŒ…å«å¤šä¸ªæŸ¥è¯¢è¯ï¼Œæœç´¢å¼•æ“ä¸€èˆ¬é»˜è®¤æ˜¯é‡‡å–ä¸é€»è¾‘æ¥åˆ¤åˆ«æ–‡æ¡£æ˜¯å¦æ»¡è¶³è¦æ±‚ã€‚ å¯¹äºå¤šè¯æŸ¥è¯¢ï¼Œæ‰¾åˆ°åŒ…å«æ‰€æœ‰æŸ¥è¯¢è¯çš„æ–‡æ¡£ï¼Œç­‰ä»·äºæ±‚æŸ¥è¯¢è¯å¯¹åº”çš„å€’æ’åˆ—è¡¨çš„äº¤é›†ã€‚ï¼ˆä¸€æ¬¡ä¸€æ–‡æ¡£ï¼‰ä½†åœ¨æ±‚å…¶äº¤é›†æ—¶ï¼Œè‹¥å€’æ’åˆ—è¡¨çš„æ–‡æ¡£IDä»¥æ–‡æ¡£ç¼–å·å·®å€¼ï¼ˆD-Gapï¼‰å½¢å¼å­˜å‚¨ï¼Œä¸”å·®å€¼æ˜¯ä»¥å‹ç¼©åçš„æ–¹å¼è¿›è¡Œç¼–ç çš„ï¼Œåˆ™ä¼šå˜å¾—å¤æ‚ï¼ˆå…ˆè¯»å…¥å†…å­˜åè¿›è¡Œå‹ç¼©æ¢å¤åˆ°å·®å€¼å½¢å¼ï¼Œç„¶åæ¢å¤åˆ°æœ‰åºåˆ—è¡¨ï¼Œæœ€åè¿›è¡Œäº¤é›†è¿ç®—ï¼‰ã€‚è€Œè·³è·ƒæŒ‡é’ˆå°±æ˜¯ä¸ºäº†ä¼˜åŒ–è¯¥è®¡ç®—è¿‡ç¨‹ã€‚ å…¶åŸºæœ¬æ€æƒ³æ˜¯å°†ä¸€ä¸ªå€’æ’åˆ—è¡¨æ•°æ®åŒ–æ•´ä¸ºé›¶ï¼Œåˆ‡åˆ†ä¸ºè‹¥å¹²ä¸ªå›ºå®šå¤§å°çš„æ•°æ®å—ï¼Œä¸€ä¸ªæ•°æ®å—ä½œä¸ºä¸€ç»„ï¼Œå¯¹äºæ¯ä¸ªæ•°æ®å—ï¼Œå¢åŠ å…ƒä¿¡æ¯æ¥è®°å½•å…³äºè¿™ä¸ªå—çš„ä¸€äº›ä¿¡æ¯ï¼Œè¿™æ ·å³ä½¿æ˜¯é¢å¯¹å‹ç¼©åçš„å€’æ’åˆ—è¡¨çš„ä¼˜åŠ¿ä¹Ÿæœ‰ï¼š åªè§£å‹ç¼©éƒ¨åˆ†æ•°æ®å³å¯ï¼› æ— é¡»æ¯”è¾ƒä»»æ„ä¸¤ä¸ªæ–‡æ¡£IDï¼› åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¦‚ä½•è®¾å®šæ•°æ®å—æˆ–è€…æ•°æ®ç»„çš„å¤§å°å¯¹äºæ•ˆç‡æœ‰å½±å“ï¼Œå®è·µè¡¨æ˜ä¸€ä¸ªç®€å•æœ‰æ•ˆçš„å¯å‘è§„åˆ™æ˜¯ï¼šå‡è®¾å€’æ’åˆ—è¡¨é•¿åº¦ä¸ºLï¼ˆå³åŒ…å«Lä¸ªæ–‡æ¡£IDï¼‰ï¼Œä½¿ç”¨Lä½œä¸ºå—å¤§å°ï¼Œåˆ™æ•ˆæœè¾ƒå¥½ã€‚ ","date":"2022-02-26","objectID":"/posts/search_engine/common/0.html/:3:7","tags":["search_engine","note"],"title":"ï¼ˆWIPï¼‰ã€Šè¿™å°±æ˜¯æœç´¢å¼•æ“ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/search_engine/common/0.html/"},{"categories":["search engine"],"content":"3.8 å¤šå­—æ®µç´¢å¼• åŒºåˆ†ä¸åŒå­—æ®µå¯¹äºæœç´¢å¼•æ“çš„ç›¸å…³æ€§è¯„åˆ†ä¹Ÿæœ‰å¾ˆå¤§å¸®åŠ©ã€‚ æœç´¢å¼•æ“éœ€è¦èƒ½å¤Ÿå¯¹å¤šå­—æ®µè¿›è¡Œç´¢å¼•ï¼Œå»å…¶å®ç°å¤šå­—æ®µç´¢å¼•å¸¸è§æ–¹å¼æœ‰ä»¥ä¸‹ï¼š å¤šç´¢å¼•æ–¹å¼ï¼› å€’æ’åˆ—è¡¨æ–¹å¼ï¼› æ‰©å±•åˆ—è¡¨æ–¹å¼ï¼› å¤šç´¢å¼•æ–¹å¼ å½“ç”¨æˆ·æ²¡æœ‰æŒ‡å®šç‰¹å®šå­—æ®µæ—¶ï¼Œæœç´¢å¼•æ“ä¼šå¯¹æ‰€æœ‰å­—æ®µéƒ½è¿›è¡ŒæŸ¥æ‰¾å¹¶åˆå¹¶å¤šä¸ªå­—æ®µçš„ç›¸å…³æ€§å¾—åˆ†ï¼Œå¯¹äºå¤šç´¢å¼•æ–¹å¼æ¥è¯´ï¼Œå°±éœ€è¦å¯¹å¤šä¸ªç´¢å¼•è¿›è¡Œè¯»å–ï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼çš„æ•ˆç‡ä¼šæ¯”è¾ƒä½ã€‚ å€’æ’åˆ—è¡¨æ–¹å¼ å°†å­—æ®µä¿¡æ¯å­˜å‚¨åœ¨æŸä¸ªå…³é”®è¯å¯¹åº”çš„å€’æ’åˆ—è¡¨å†…ï¼Œå®ç°åœ¨è¯»åˆ°å…³é”®è¯æ—¶å¯ä»¥æ ¹æ®å€’æ’åˆ—è¡¨ä¸­çš„å­—æ®µä¿¡æ¯ç›´æ¥è¿›è¡Œè¿‡æ»¤å’Œå¹¶ä¿ç•™æŒ‡å®šå­—æ®µå†…å‡ºç°è¿‡æœç´¢è¯çš„æ–‡æ¡£ä½œä¸ºæœç´¢ç»“æœè¿”å›ã€‚ æ‰©å±•åˆ—è¡¨æ–¹å¼ ä¸ºæ¯ä¸ªå­—æ®µå»ºç«‹ä¸€ä¸ªåˆ—è¡¨ï¼Œè®°è½½æ¯ä¸ªæ–‡æ¡£è¿™ä¸ªå­—æ®µå¯¹åº”çš„å‡ºç°ä½ç½®ä¿¡æ¯ã€‚ ","date":"2022-02-26","objectID":"/posts/search_engine/common/0.html/:3:8","tags":["search_engine","note"],"title":"ï¼ˆWIPï¼‰ã€Šè¿™å°±æ˜¯æœç´¢å¼•æ“ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/search_engine/common/0.html/"},{"categories":["search engine"],"content":"3.9 çŸ­è¯­æŸ¥è¯¢ è‹¥å•è¯çš„å€’æ’åˆ—è¡¨åªå­˜å‚¨æ–‡æ¡£ç¼–å·å’Œå•è¯é¢‘ç‡ä¿¡æ¯ï¼Œå…¶ä¿ç•™çš„ä¿¡æ¯æ˜¯ä¸è¶³ä»¥æ”¯æŒçŸ­è¯­æœç´¢çš„ï¼Œå› ä¸ºå•è¯ä¹‹é—´çš„é¡ºåºå…³ç³»æ²¡æœ‰ä¿ç•™ã€‚ æœç´¢å¼•æ“æ”¯æŒçŸ­è¯­æŸ¥è¯¢ï¼Œæœ¬è´¨é—®é¢˜æ˜¯å¦‚ä½•åœ¨ç´¢å¼•ä¸­ç»´æŠ¤å•è¯ä¹‹é—´çš„é¡ºåºå…³ç³»æˆ–è€…ä½ç½®ä¿¡æ¯ã€‚è¾ƒå¸¸è§çš„æ”¯æŒçŸ­è¯­æŸ¥è¯¢çš„æŠ€æœ¯æ–¹æ³•åŒ…æ‹¬ï¼š ä½ç½®ä¿¡æ¯ç´¢å¼• åŒè¯ç´¢å¼• çŸ­è¯­ç´¢å¼• ä½ç½®ä¿¡æ¯ç´¢å¼•ï¼ˆPosition Indexï¼‰ ä½¿ç”¨ç´¢å¼•è®°è½½å•è¯ä½ç½®ä¿¡æ¯æ¥æ”¯æŒçŸ­è¯­æŸ¥è¯¢ï¼Œä½†æ•ˆç‡è¾ƒä½å’Œæˆæœ¬è¾ƒé«˜ã€‚ åŒè¯ç´¢å¼•ï¼ˆNextword Indexï¼‰ ç”±äºç»´åº¦å¢åŠ ï¼ŒåŒè¯ç´¢å¼•ä½¿å¾—ç´¢å¼•å’Œå€’æ’åˆ—è¡¨æŒ‡æ•°çº§å¢é•¿ï¼Œæ‰€ä»¥ä¸€èˆ¬å¯¹äºè®¡ç®—å’Œå­˜å‚¨ä»£ä»·é«˜ä½¿ç”¨ çŸ­è¯­ç´¢å¼•ï¼ˆPhrase Indexï¼‰ çŸ­è¯­ç´¢å¼•å°±æ˜¯åœ¨è¯å…¸ä¸­ç›´æ¥åŠ å…¥å¤šè¯çŸ­è¯­å¹¶ç»´æŠ¤çŸ­è¯­çš„å€’æ’åˆ—è¡¨ä»¥æ­¤å¯¹çŸ­è¯­è¿›è¡Œæ”¯æŒã€‚ å±€é™æ€§åœ¨äºéœ€è¦æ‰‹åŠ¨æŒ–æ˜çƒ­é—¨çŸ­è¯­ï¼Œå¯¹äºå…¶ä»–çŸ­è¯­æŸ¥è¯¢é‡‡ç”¨æ™®é€šæ–¹å¼å¤„ç†ã€‚ æ··åˆç´¢å¼• æ··åˆç´¢å¼•å³ç»“åˆä¸Šè¿°ç´¢å¼•çš„ä¼˜ç¼ºç‚¹æ ¹æ®å…·ä½“åº”ç”¨åœºæ™¯è¿›è¡Œè®¾è®¡ã€‚ ","date":"2022-02-26","objectID":"/posts/search_engine/common/0.html/:3:9","tags":["search_engine","note"],"title":"ï¼ˆWIPï¼‰ã€Šè¿™å°±æ˜¯æœç´¢å¼•æ“ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/search_engine/common/0.html/"},{"categories":["search engine"],"content":"3.10 åˆ†å¸ƒå¼ç´¢å¼• å¤šå°æœºå™¨å¦‚ä½•åˆ†å·¥åä½œï¼Œç›®å‰å¸¸ç”¨çš„åˆ†å¸ƒå¼ç´¢å¼•æ–¹æ¡ˆåŒ…æ‹¬ä¸¤ç§ï¼š æŒ‰æ–‡æ¡£å¯¹ç´¢å¼•åˆ’åˆ† æŒ‰å•è¯å¯¹ç´¢å¼•åˆ’åˆ† æŒ‰æ–‡æ¡£åˆ’åˆ†ï¼ˆDocument Partitioningï¼‰ å°†æ•´ä¸ªæ–‡æ¡£é›†åˆåˆ‡å‰²æˆè‹¥å¹²å­é›†åˆï¼Œè€Œæ¯å°æœºå™¨è´Ÿè´£å¯¹æŸä¸ªæ–‡æ¡£å­é›†åˆå»ºç«‹ç´¢å¼•ï¼Œå¹¶å“åº”æŸ¥è¯¢è¯·æ±‚ã€‚ ä¸»è¦è¿‡ç¨‹å°±æ˜¯æŸ¥è¯¢åˆ†å‘æœåŠ¡å™¨ç»¼åˆå„ä¸ªç´¢å¼•æœåŠ¡å™¨çš„æœç´¢ç»“æœåï¼Œåˆå¹¶æœç´¢ç»“æœï¼Œå°†å¾—åˆ†æœ€é«˜çš„æ–‡æ¡£ä½œä¸ºæœ€ç»ˆæœç´¢ç»“æœè¿”å›ç»™ç”¨æˆ·ã€‚ æŒ‰å•è¯åˆ’åˆ†ï¼ˆTerm Partitioningï¼‰ æ¯ä¸ªç´¢å¼•æœåŠ¡å™¨è´Ÿè´£è¯å…¸ä¸­éƒ¨åˆ†å•è¯çš„å€’æ’åˆ—è¡¨çš„å»ºç«‹å’Œç»´æŠ¤ã€‚ æ¯”è¾ƒ ä»¥ä¸Šä¸¤ç§åˆ†å¸ƒå¼ç´¢å¼•æŠ€æœ¯æ–¹æ¡ˆï¼ŒæŒ‰æ–‡æ¡£æ¥å¯¹ç´¢å¼•è¿›è¡Œåˆ’åˆ†æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ï¼Œè€ŒæŒ‰å•è¯è¿›è¡Œç´¢å¼•åˆ’åˆ†åªåœ¨æ¯”è¾ƒç‰¹æ®Šçš„åº”ç”¨åœºåˆæ‰ä½¿ç”¨ã€‚ç›¸è¾ƒäºæ–‡æ¡£å¯¹ç´¢å¼•è¿›è¡Œåˆ’åˆ†ï¼Œåè€…æœ‰ä»¥ä¸‹å±€é™æ€§ï¼š å¯æ‰©å±•æ€§ï¼ˆä¼šå½±å“åˆ°æ‰€æœ‰ç´¢å¼•æœåŠ¡å™¨ï¼‰ è´Ÿè½½å‡è¡¡ï¼ˆå¦‚çƒ­ç‚¹ç´¢å¼•åœºæ™¯ï¼‰ å®¹é”™æ€§ï¼ˆè‹¥ç´¢å¼•æœåŠ¡å™¨å®•æœºåˆ™å¯¼è‡´ç›´æ¥æŸ¥è¯¢å¤±è´¥ï¼‰ å¯¹æŸ¥è¯¢æ–¹å¼å¤„ç†ï¼ˆåªæ”¯æŒä¸€æ¬¡ä¸€å•è¯å¤„ç†æ–¹å¼ï¼‰ ","date":"2022-02-26","objectID":"/posts/search_engine/common/0.html/:3:10","tags":["search_engine","note"],"title":"ï¼ˆWIPï¼‰ã€Šè¿™å°±æ˜¯æœç´¢å¼•æ“ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/search_engine/common/0.html/"},{"categories":["machine learning"],"content":"æ¦‚è¿° é€šè¿‡è¯»å–å¤§é‡çš„æ•°æ®ã€å­¦ä¹ æ•°æ®çš„ç‰¹å¾å¹¶ä»ä¸­æ‰¾å‡ºæ•°æ®çš„æ¨¡å¼ã€‚ è¿™æ ·çš„ä»»åŠ¡ä¹Ÿè¢«ç§°ä¸ºæœºå™¨å­¦ä¹ æˆ–è€…æ¨¡å¼è¯†åˆ«ã€‚ æœºå™¨å­¦ä¹ ä¸­æ¯”è¾ƒæ“…é•¿çš„ä»»åŠ¡ï¼š å›å½’ï¼ˆregressionï¼‰ï¼šä»è¿ç»­æ•°æ®ä¸­å­¦ä¹ è¶‹åŠ¿ï¼Œå¦‚æ—¶é—´åºåˆ—æ•°æ®ï¼› åˆ†ç±»ï¼ˆclassificationï¼‰ï¼šæ•°æ®æºå¸¦æ ‡ç­¾è¿›è¡Œåˆ†ç±»ï¼› èšç±»ï¼ˆclusteringï¼‰ï¼šæ•°æ®æœ¬èº«ä¸å¸¦æ ‡ç­¾ï¼› æœºå™¨å­¦ä¹ ä¸­ç›‘ç£å­¦ä¹ åŒºåˆ†ï¼š ä½¿ç”¨æœ‰æ ‡ç­¾çš„æ•°æ®è¿›è¡Œçš„å­¦ä¹ ç§°ä¸ºæœ‰ç›‘ç£å­¦ä¹ ï¼ˆå›å½’å’Œåˆ†ç±»ï¼‰ï¼› ä½¿ç”¨æ²¡æœ‰æ ‡ç­¾çš„æ•°æ®è¿›è¡Œçš„å­¦ä¹ ç§°ä¸ºæ— ç›‘ç£å­¦ä¹ ï¼ˆèšç±»ï¼‰ï¼› ","date":"2022-02-26","objectID":"/posts/ai/machine_learning/0.html/:1:0","tags":["ai","machine_learning","note"],"title":"ã€Šç™½è¯æœºå™¨å­¦ä¹ çš„æ•°å­¦ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/ai/machine_learning/0.html/"},{"categories":["machine learning"],"content":"å›å½’é—®é¢˜ $y=\\theta_0+\\theta_1x$ $f_\\theta(x)=\\theta_0+\\theta_1x$ ","date":"2022-02-26","objectID":"/posts/ai/machine_learning/0.html/:2:0","tags":["ai","machine_learning","note"],"title":"ã€Šç™½è¯æœºå™¨å­¦ä¹ çš„æ•°å­¦ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/ai/machine_learning/0.html/"},{"categories":["machine learning"],"content":"æœ€å°äºŒä¹˜æ³•å…¬å¼ $$ E(\\theta)=\\frac{1}{2}\\sum_{i=1}^{n}(y^i-f_\\theta(x^i))^2 $$ ä½¿$y$ä¸$f_\\theta(x)$è¯¯å·®å°½å¯èƒ½å‡å°å³æœ€ä¼˜åŒ–é—®é¢˜ï¼Œä½¿ç”¨å·®å€¼çš„å¹³æ–¹æ˜¯å› ä¸ºé¿å…å·®å€¼ä¸ºè´Ÿæ•°åŒæ—¶åˆ©äºå¾®åˆ†ï¼Œè‡³äº$\\frac{1}{2}$æ˜¯ä¸ºäº†è®©ä½œä¸ºç»“æœçš„è¡¨è¾¾å¼å˜å¾—ç®€å•è€Œéšä¾¿åŠ çš„å¸¸æ•°ï¼ˆåœ¨æœ€ä¼˜åŒ–é—®é¢˜ä¸­ä¸å½±å“ç»“æœï¼‰ã€‚ ","date":"2022-02-26","objectID":"/posts/ai/machine_learning/0.html/:2:1","tags":["ai","machine_learning","note"],"title":"ã€Šç™½è¯æœºå™¨å­¦ä¹ çš„æ•°å­¦ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/ai/machine_learning/0.html/"},{"categories":["machine learning"],"content":"æœ€é€Ÿä¸‹é™æ³•ï¼ˆæˆ–æ¢¯åº¦ä¸‹é™æ³•ï¼‰ $$ x:=x-\\eta\\frac{\\mathrm{d}}{\\mathrm{d}x}g(x) $$ å…¶ä¸­$\\eta$å³ä¸ºå­¦ä¹ ç‡ï¼Œå¯ä»¥ç†è§£$\\eta$è¶Šå¤§ï¼Œåˆ™ä¸‹é™è¶Šå¿«ï¼Œæ›´æ–°æ¬¡æ•°è¶Šå°‘ï¼Œç”šè‡³å¯èƒ½è¿œç¦»æœ€ä¼˜å€¼ï¼Œè¿™å°±æ˜¯å‘æ•£çŠ¶æ€ï¼Œè€Œ$\\eta$è¾ƒå°æ—¶ç§»åŠ¨é‡è¾ƒå°ï¼Œæ›´æ–°æ¬¡æ•°å¢å¤šï¼Œä½†æ˜¯å€¼ä¼šå¾€æ”¶æ•›æ–¹å‘ç§»åŠ¨ã€‚ å› ä¸º$f_\\theta(x)$æ‹¥æœ‰$\\theta_0$å’Œ$\\theta_1$ä¸¤ä¸ªå‚æ•°ï¼Œå³ç›®æ ‡å‡½æ•°æ˜¯åŒå˜é‡å‡½æ•°ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨æ™®é€šçš„å¾®åˆ†ï¼Œè€Œè¦ç”¨åå¾®åˆ†ã€‚ $$\\theta_0=\\theta_0-\\eta\\frac{\\partial{E}}{\\partial{\\theta_0}}$$ $$\\theta_1=\\theta_1-\\eta\\frac{\\partial{E}}{\\partial{\\theta_1}}$$ å‡è®¾$u=E(\\theta)$ï¼Œ$v=f_\\theta(x)$ï¼Œåˆ©ç”¨é˜¶æ¢¯æ€§åœ°è¿›è¡Œå¾®åˆ†ï¼š $$\\frac{\\partial{u}}{\\partial{\\theta_0}}=\\frac{\\partial{u}}{\\partial{v}}\\cdot\\frac{\\partial{v}}{\\partial{\\theta_0}}$$ æœ€åå¾—åˆ°ï¼š $$\\theta_0=\\theta_0-\\eta\\sum_{i=1}^{n}(f_\\theta(x^i)-y^i)$$ $$\\theta_1=\\theta_1-\\eta\\sum_{i=1}^{n}(f_\\theta(x^i)-y^i)x^i$$ å‰é¢æˆ‘ä»¬å‡è®¾$f_\\theta(x)=\\theta_0+\\theta_1x$ï¼Œè‹¥è¿™é‡Œä¸ºäº†æ›´å¥½æ‹Ÿåˆæ›´æ–°æˆ$f_\\theta(x)=\\theta_0+\\theta_1x+\\theta_2x^2$ï¼Œè¿›è¡Œä¸Šé¢ç±»ä¼¼çš„æ¢¯åº¦è®¡ç®—ä¹Ÿå¯ä»¥å¾—åˆ°ï¼š $$\\theta_0=\\theta_0-\\eta\\sum_{i=1}^{n}(f_\\theta(x^i)-y^i)$$ $$\\theta_1=\\theta_1-\\eta\\sum_{i=1}^{n}(f_\\theta(x^i)-y^i)x^i$$ $$\\theta_2=\\theta_2-\\eta\\sum_{i=1}^{n}(f_\\theta(x^i)-y^i)x^{i^2}$$ åƒè¿™æ ·å¢åŠ å‡½æ•°ä¸­å¤šé¡¹å¼çš„æ¬¡æ•°ï¼Œç„¶åå†ä½¿ç”¨å‡½æ•°çš„åˆ†ææ–¹æ³•è¢«ç§°ä¸ºå¤šé¡¹å¼å›å½’ã€‚ ","date":"2022-02-26","objectID":"/posts/ai/machine_learning/0.html/:2:2","tags":["ai","machine_learning","note"],"title":"ã€Šç™½è¯æœºå™¨å­¦ä¹ çš„æ•°å­¦ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/ai/machine_learning/0.html/"},{"categories":["machine learning"],"content":"å¤šé‡å›å½’ $$f_\\theta(x_1,â€¦,x_n)=\\theta_0+\\theta_1x_1+â€¦+\\theta_nx_n$$ å°†$\\theta$å’Œ$x$è½¬æ¢ä¸ºåˆ—å‘é‡ç®€åŒ–è¡¨è¾¾å¼ï¼š $$ \\mathbf{\\theta}=\\left[\\begin{matrix}\\theta_0\\\\\\theta_1\\\\\\vdots\\\\\\theta_n\\end{matrix} \\right] $$ $$ \\mathbf{x}=\\left[\\begin{matrix}x_0\\\\x_2\\\\\\vdots\\\\x_n\\end{matrix}\\right] $$ å¾—åˆ°ï¼š$\\mathbf{\\theta^T}\\mathbf{x}=\\theta_0x_0+\\theta_1x_1+â€¦+\\theta_nx_n$ å³ $f_\\mathbf{\\theta}(\\mathbf{x})=\\mathbf{\\theta^T}\\mathbf{x}$ ç„¶åæˆ‘ä»¬ä»£å…¥æ¢¯åº¦ä¸‹é™ç®—æ³•è®¡ç®—$\\theta$çš„å…¬å¼ï¼š $$ \\theta_j=\\theta_j-\\eta\\sum_{i=1}^{n}(f_\\mathbf{\\theta}\\mathbf{x}^{(i)}-y^{(i)})x{_j}{^{(i)}} $$ ","date":"2022-02-26","objectID":"/posts/ai/machine_learning/0.html/:2:3","tags":["ai","machine_learning","note"],"title":"ã€Šç™½è¯æœºå™¨å­¦ä¹ çš„æ•°å­¦ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/ai/machine_learning/0.html/"},{"categories":["machine learning"],"content":"éšæœºæ¢¯åº¦ä¸‹é™æ³• å‰é¢çš„æœ€é€Ÿä¸‹é™æ³•å®¹æ˜“é™·å…¥å±€éƒ¨æœ€ä¼˜è§£çš„æƒ…å†µï¼š è€Œéšæœºæ¢¯åº¦ä¸‹é™æ³•å°±æ˜¯è®­ç»ƒæ—¶éšæœºé€‰æ‹©è®­ç»ƒæ•°æ®ï¼Œè®¾éšæœºé€‰æ‹©$m$ä¸ªè®­ç»ƒæ•°æ®é¢ç´¢å¼•çš„é›†åˆä¸º$K$ï¼Œé‚£ä¹ˆæ›´æ–°å‚æ•°çš„å…¬å¼ä¸ºï¼š $$ \\theta_j=\\theta_j-\\eta\\sum_{k\\in{K}}(f_\\mathbf{\\theta}\\mathbf{x}^{(k)}-y^{(k)})x{_j}{^{(k)}} $$ ","date":"2022-02-26","objectID":"/posts/ai/machine_learning/0.html/:2:4","tags":["ai","machine_learning","note"],"title":"ã€Šç™½è¯æœºå™¨å­¦ä¹ çš„æ•°å­¦ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/ai/machine_learning/0.html/"},{"categories":["machine learning"],"content":"åˆ†ç±»é—®é¢˜ ä½¿æƒé‡å‘é‡æˆä¸ºæ³•çº¿å‘é‡çš„ç›´çº¿ï¼Œè®¾æƒé‡å‘é‡ä¸º$\\mathbf{w}$ï¼Œç›´çº¿çš„è¡¨è¾¾å¼ä¸ºï¼ˆå‘é‡å†…ç§¯ï¼‰ï¼š $$ \\mathbf{w}\\cdot\\mathbf{x} = 0 $$ æˆ–è€…å¦å¤–ä¸€ä¸ªå†…ç§¯è¡¨è¾¾å¼ï¼š$\\mathbf{w}\\cdot\\mathbf{x} = |\\mathbf{w}|\\cdot|\\mathbf{x}|\\cdot\\cos{\\theta}$ é€šè¿‡è®­ç»ƒæ‰¾åˆ°æƒé‡å‘é‡ï¼Œç„¶åæ‰èƒ½å¾—åˆ°ä¸è¿™ä¸ªå‘é‡å‚ç›´çš„ç›´çº¿ï¼Œæœ€åæ ¹æ®è¿™æ¡ç›´çº¿å°±å¯ä»¥å¯¹æ•°æ®è¿›è¡Œåˆ†ç±»äº†ã€‚ ","date":"2022-02-26","objectID":"/posts/ai/machine_learning/0.html/:3:0","tags":["ai","machine_learning","note"],"title":"ã€Šç™½è¯æœºå™¨å­¦ä¹ çš„æ•°å­¦ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/ai/machine_learning/0.html/"},{"categories":["machine learning"],"content":"æ„ŸçŸ¥æœº æ¥å—å¤šä¸ªè¾“å…¥åå°†æ¯ä¸ªå€¼ä¸å„è‡ªçš„æƒé‡ç›¸ä¹˜ï¼Œæœ€åè¾“å‡ºæ€»å’Œçš„æ¨¡å‹ã€‚ $$ f_\\mathbf{w}(\\mathbf{x})=\\left\\{\\begin{array}{ll}1\u0026(\\mathbf{w}\\cdot\\mathbf{x}\\geq0)\\\\-1\u0026(\\mathbf{w}\\cdot\\mathbf{x}\u003c0)\\end{array}\\right. $$ æƒé‡å‘é‡çš„æ›´æ–°è¡¨è¾¾å¼ï¼š $$ \\mathbf{w}=\\left\\{\\begin{array}{ll}\\mathbf{w}+y^{i}\\mathbf{x}^{(i)}\u0026\u0026(f_\\mathbf{w}(\\mathbf{x}^{(i)})\\neq y^{(i)})\\\\\\mathbf{w}\u0026\u0026(f_\\mathbf{w}(\\mathbf{x}^{(i)})= ^{(i)})\\end{array}\\right. $$ æ„ŸçŸ¥æœºçš„å±€é™åœ¨äºåªèƒ½è§£å†³çº¿æ€§å¯åˆ†çš„é—®é¢˜ã€‚ ","date":"2022-02-26","objectID":"/posts/ai/machine_learning/0.html/:3:1","tags":["ai","machine_learning","note"],"title":"ã€Šç™½è¯æœºå™¨å­¦ä¹ çš„æ•°å­¦ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/ai/machine_learning/0.html/"},{"categories":["machine learning"],"content":"sigmoidå‡½æ•° $$ f_\\theta(\\mathbf{x})=\\frac{1}{1+e^{-\\mathbf{\\theta}^{T}\\mathbf{x}}} $$ å…¶sigmoidå‡½æ•°å–å€¼èŒƒå›´ä¸º$0\u003cf_\\theta(\\mathbf{x})\u003c1$ã€‚ å…¶å¾®åˆ†ç»“æœå¦‚ä¸‹ï¼š $\\frac{\\mathrm{d}\\sigma{x}}{\\mathrm{d}x}=\\sigma{(x)}(1-\\sigma{(x)})$ ","date":"2022-02-26","objectID":"/posts/ai/machine_learning/0.html/:3:2","tags":["ai","machine_learning","note"],"title":"ã€Šç™½è¯æœºå™¨å­¦ä¹ çš„æ•°å­¦ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/ai/machine_learning/0.html/"},{"categories":["machine learning"],"content":"ä¼¼ç„¶å‡½æ•° ç›®æ ‡å‡½æ•°å³ä¸ºé€šè¿‡$P(y=1|\\mathbf{x})$å’Œ$P(y=0|\\mathbf{x})$çš„è”åˆæ¦‚ç‡å¾—åˆ°ï¼š $$ L(\\mathbf{\\theta})=\\prod_{i=1}^nP(y^{(i)}=1|\\mathbf{x}^{(i)})^{y^{(i)}}P(y^{(i)}=0|\\mathbf{x}^{(i)})^{1-y^{(i)}} $$ ","date":"2022-02-26","objectID":"/posts/ai/machine_learning/0.html/:3:3","tags":["ai","machine_learning","note"],"title":"ã€Šç™½è¯æœºå™¨å­¦ä¹ çš„æ•°å­¦ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/ai/machine_learning/0.html/"},{"categories":["machine learning"],"content":"å¯¹æ•°ä¼¼ç„¶å‡½æ•° å°†ä¼¼ç„¶å‡½æ•°è¿›è¡Œå¯¹æ•°åŒ–ä¾¿äºè¿ç®—ï¼Œå…¬å¼å¦‚ä¸‹ï¼š $$ \\log{L(\\mathbf{\\theta})}=\\sum_{i=1}^n(y^{(i)}\\log{f_\\mathbf{\\theta}(\\mathbf{x}^{(i)})}+(1-y^{(i)})\\log{(1-f_\\mathbf{\\theta}(\\mathbf{x}^{(i)}}))) $$ é€»è¾‘å›å½’å°†è¿™ä¸ªå¯¹æ•°ä¼¼ç„¶å‡½æ•°ç”¨ä½œç›®æ ‡å‡½æ•°ï¼Œç„¶åå¯¹ç›®æ ‡å‡½æ•°æ±‚å¾®åˆ†å¾—åˆ°ï¼š $$ \\frac{\\partial{u}}{\\partial{\\theta_j}}=\\frac{\\partial{u}}{\\partial{v}}\\cdot\\frac{\\partial{v}}{\\partial{\\theta_j}}=\\sum_{i=1}^{n}(y^{(i)}-f_\\mathbf{\\theta}(\\mathbf{x}^{(i)}))x_j^{(i)} $$ æœ€åå¯¼å‡ºå‚æ•°æ›´æ–°è¡¨è¾¾å¼ï¼ˆæ¢¯åº¦ä¸‹é™ï¼‰ï¼Œè¿™é‡Œæ±‚çš„æ˜¯æœ€å¤§åŒ–ä¸ä¹‹å‰æœ€å°åŒ–ä¸åŒï¼Œæ‰€ä»¥å…¶æ–¹å‘ç›¸åï¼š $$ \\theta_j:=\\theta_j+\\eta\\sum_{i=1}^{n}(y^{(i)}-f_\\mathbf{\\theta}(\\mathbf{x}^{(i)}))x_j^{(i)} $$ è‹¥ä¸å‰é¢å›å½’ä¿æŒä¸€è‡´å³ï¼š $$ \\theta_j:=\\theta_j-\\eta\\sum_{i=1}^{n}(f_\\mathbf{\\theta}(\\mathbf{x}^{(i)})-y^{(i)})x_j^{(i)} $$ ","date":"2022-02-26","objectID":"/posts/ai/machine_learning/0.html/:3:4","tags":["ai","machine_learning","note"],"title":"ã€Šç™½è¯æœºå™¨å­¦ä¹ çš„æ•°å­¦ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/ai/machine_learning/0.html/"},{"categories":["machine learning"],"content":"çº¿æ€§ä¸å¯åˆ† ç±»ä¼¼å¤šé¡¹å›å½’ä¸€æ ·ï¼Œå¢åŠ æ¬¡æ•°å¾—åˆ°éçº¿æ€§æ›²çº¿ã€‚ ","date":"2022-02-26","objectID":"/posts/ai/machine_learning/0.html/:3:5","tags":["ai","machine_learning","note"],"title":"ã€Šç™½è¯æœºå™¨å­¦ä¹ çš„æ•°å­¦ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/ai/machine_learning/0.html/"},{"categories":["machine learning"],"content":"æ¨¡å‹è¯„ä¼° ","date":"2022-02-26","objectID":"/posts/ai/machine_learning/0.html/:4:0","tags":["ai","machine_learning","note"],"title":"ã€Šç™½è¯æœºå™¨å­¦ä¹ çš„æ•°å­¦ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/ai/machine_learning/0.html/"},{"categories":["machine learning"],"content":"äº¤å‰éªŒè¯ å°†è·å–çš„å…¨éƒ¨è®­ç»ƒæ•°æ®åˆ†æˆä¸¤ä»½ï¼Œä¸€ä»½ç”¨äºæµ‹è¯•ï¼Œä¸€ä»½ç”¨äºè®­ç»ƒã€‚ç„¶åç”¨å‰è€…æ¥è¯„ä¼°æ¨¡å‹ã€‚ï¼ˆäº¤å‰éªŒè¯ï¼‰ å›å½’ å¯¹äºå›å½’çš„æƒ…å†µï¼Œåªè¦åœ¨è®­ç»ƒå¥½çš„æ¨¡å‹ä¸Šè®¡ç®—æµ‹è¯•æ•°æ®çš„è¯¯å·®çš„å¹³æ–¹ï¼Œå†å–å…¶å¹³å‡å€¼å°±å¯ä»¥äº†ï¼š $$ \\frac{1}{n}\\sum_{i=1}^n(y^{(i)}-f_\\mathbf{\\theta}(\\mathbf{x}^{(i)}))^2 $$ ä¸Šé¢å¾—åˆ°çš„å€¼è¢«ç§°ä¸ºå‡æ–¹è¯¯å·®æˆ–è€…MSEï¼ˆMean Square Errorï¼‰ã€‚è¿™ä¸ªè¯¯å·®è¶Šå°ï¼Œç²¾åº¦å°±è¶Šé«˜ï¼Œæ¨¡å‹ä¹Ÿå°±è¶Šå¥½ã€‚ åˆ†ç±» å¯¹äºåˆ†ç±»çš„æƒ…å†µï¼Œç”±äºå›å½’æ˜¯è¿ç»­å€¼ï¼Œæ‰€ä»¥å¯ä»¥ä»è¯¯å·®å…¥æ‰‹ï¼Œä½†æ˜¯åˆ†ç±»ä¸­å¿…é¡»è€ƒè™‘åˆ†ç±»çš„ç±»åˆ«æ˜¯å¦æ­£ç¡®ã€‚ å¯¹äºäºŒåˆ†ç±»çš„ç»“æœå¯ä»¥ç”¨è¿™å¼ å›¾è¡¨ç¤ºï¼š é€šè¿‡è¡¨ä¸­çš„4ä¸ªè®°å·æ¥è¡¨ç¤ºç²¾åº¦ï¼ˆAccuracyï¼‰,è¡¨è¾¾å¼å¦‚ä¸‹ï¼Œå³å€¼è¶Šé«˜ç²¾åº¦è¶Šé«˜ï¼Œä¹Ÿå°±æ„å‘³ç€æ¨¡å‹è¶Šå¥½ï¼š $$ Accuracy = \\frac{TP+TN}{TP+FP+FN+TN} $$ åœ¨å¤§å¤šæƒ…å†µä¸‹ï¼Œé™¤äº†ç²¾åº¦è¿˜éœ€è¦å¼•å…¥å…¶ä»–æŒ‡æ ‡è¿›è¡Œè¯„ä¼°ï¼š ç²¾ç¡®ç‡ï¼ˆ$Precision=\\frac{TP}{TP+FP}=\\frac{TN}{TN+FN}$ï¼Œå€¼è¶Šé«˜åˆ†ç±»é”™è¯¯è¶Šå°‘) å¬å›ç‡ï¼ˆ$Recall=\\frac{TP}{TP+FN}=\\frac{TN}{TN+FP}$ï¼Œå€¼è¶Šé«˜å³è¢«æ­£ç¡®åˆ†ç±»çš„æ•°æ®è¶Šå¤šï¼‰ å½“æ•°æ®ä¸å¹³è¡¡æ—¶ï¼Œä½¿ç”¨æ•°é‡å°‘çš„é‚£ä¸ªä¼šæ›´å¥½ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œç²¾ç¡®ç‡å’Œå¬å›ç‡ä¼šä¸€ä¸ªé«˜ä¸€ä¸ªä½ï¼Œéœ€è¦å–èˆã€‚åŸºäºæ­¤å°±å‡ºç°äº†è¯„å®šç»¼åˆæ€§èƒ½çš„æŒ‡æ ‡$F1$å€¼ï¼Œè¡¨è¾¾å¼å¦‚ä¸‹ï¼š $F1$å€¼æŒ‡æ ‡åœ¨æ•°å­¦ä¸Šæ˜¯ç²¾ç¡®ç‡å’Œå¬å›ç‡çš„è°ƒå’Œå¹³å‡å€¼ã€‚ $$ Fmeasure=\\frac{2}{\\frac{1}{Precision}+\\frac{1}{Recall}} $$ é™¤$F1$å€¼æŒ‡æ ‡å¤–ï¼Œè¿˜æœ‰è¾ƒä¸ºé€šç”¨çš„å¸¦æƒé‡çš„$F$å€¼æŒ‡æ ‡ï¼Œè¡¨è¾¾å¼å¦‚ä¸‹ï¼š $$ WeightedFmeasure = \\frac{(1+\\beta^2)\\cdot Precision\\cdot Recall}{\\beta^2\\cdot Precision+Recall} $$ äº¤å‰éªŒè¯æ–¹æ³• åœ¨äº¤å‰éªŒè¯çš„æ–¹æ³•ä¸­ï¼Œè¾ƒä¸ºç»å…¸çš„æ˜¯KæŠ˜äº¤å‰éªŒè¯: æŠŠå…¨éƒ¨è®­ç»ƒæ•°æ®åˆ†ä¸ºKä»½ï¼› å°†K-1ä»½æ•°æ®ç”¨ä½œè®­ç»ƒæ•°æ®ï¼Œå‰©ä¸‹çš„1ä»½ç”¨ä½œæµ‹è¯•æ•°æ®ï¼› æ¯æ¬¡æ›´æ¢è®­ç»ƒæ•°æ®å’Œæµ‹è¯•æ•°æ®ï¼Œé‡å¤è¿›è¡ŒKæ¬¡äº¤å‰éªŒè¯ï¼› æœ€åè®¡ç®—Kä¸ªç²¾åº¦çš„å¹³å‡å€¼ï¼ŒæŠŠå®ƒä½œä¸ºæœ€ç»ˆçš„ç²¾åº¦ï¼› ä¸åˆ‡å®é™…åœ°å¢åŠ Kå€¼ä¼šéå¸¸è€—è´¹æ—¶é—´ï¼Œæ‰€ä»¥å¿…é¡»è¦ç¡®å®šä¸€ä¸ªåˆé€‚çš„Kå€¼ã€‚ ","date":"2022-02-26","objectID":"/posts/ai/machine_learning/0.html/:4:1","tags":["ai","machine_learning","note"],"title":"ã€Šç™½è¯æœºå™¨å­¦ä¹ çš„æ•°å­¦ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/ai/machine_learning/0.html/"},{"categories":["machine learning"],"content":"æ­£åˆ™åŒ– è¿‡æ‹Ÿåˆ è‹¥æ¨¡å‹åªèƒ½æ‹Ÿåˆè®­ç»ƒæ•°æ®çš„çŠ¶æ€è¢«ç§°ä¸ºè¿‡æ‹Ÿåˆï¼ˆoverfittingï¼‰ã€‚ é¿å…è¿‡æ‹Ÿåˆçš„æ–¹æ³•ä¸€èˆ¬æœ‰ï¼š å¢åŠ å…¨éƒ¨è®­ç»ƒæ•°æ®çš„æ•°é‡ ä½¿ç”¨ç®€å•çš„æ¨¡å‹ æ­£åˆ™åŒ– æ­£åˆ™åŒ–æ–¹æ³• å¯ä»¥åœ¨å‰é¢å›å½’å¾—åˆ°çš„ç›®æ ‡å‡½æ•°ï¼ˆæœ€å°äºŒä¹˜æ³•ï¼‰åŠ ä¸Šæ­£åˆ™åŒ–é¡¹å¾—åˆ°ä¸€ä¸ªæ–°çš„ç›®æ ‡å‡½æ•°ï¼Œå¦‚ä¸‹ï¼š $$ E(\\mathbf{\\theta})=\\frac{1}{2}\\sum_{i=1}^{n}{(y^i-f_\\mathbf{\\theta}(\\mathbf{x}^i))^2}+R(\\mathbf{\\theta})=\\frac{1}{2}\\sum_{i=1}^{n}{(y^i-f_\\mathbf{\\theta}(\\mathbf{x}^i))^2}+\\frac{\\lambda}{2}\\sum_{j=1}^{m}\\theta_j^2 $$ è¦å¯¹è¿™ä¸ªæ–°çš„ç›®æ ‡å‡½æ•°è¿›è¡Œæœ€å°åŒ–ï¼Œè¿™ç§æ–¹æ³•å³ç§°ä¸ºæ­£åˆ™åŒ–ã€‚ å…¶ä¸­æ­£åˆ™åŒ–é¡¹ä¸­ï¼š $m$ï¼šå‚æ•°çš„ä¸ªæ•°; $\\theta_0$ç§°ä¸ºåç½®é¡¹ï¼Œä¸€èˆ¬ä¸å¯¹å®ƒè¿›è¡Œæ­£åˆ™åŒ–ï¼› $\\lambda$ï¼šå†³å®šæ­£åˆ™åŒ–é¡¹å½±å“ç¨‹åº¦çš„æ­£çš„å¸¸æ•°ï¼› æ­£åˆ™åŒ–çš„æ•ˆæœå¯ä»¥é˜²æ­¢å‚æ•°å˜å¾—è¿‡å¤§ï¼Œæœ‰åŠ©äºå‚æ•°æ¥è¿‘è¾ƒå°çš„å€¼ã€‚å‚æ•°çš„å€¼å˜å°ï¼Œæ„å‘³ç€è¯¥å‚æ•°çš„å½±å“ä¹Ÿä¼šç›¸åº”åœ°å˜å°ã€‚ åˆ†ç±»çš„æ­£åˆ™åŒ– åœ¨å‰é¢åˆ†ç±»æåˆ°çš„ç›®æ ‡å‡½æ•°ï¼ˆå¯¹æ•°ä¼¼ç„¶å‡½æ•°ï¼‰å¢åŠ æ­£åˆ™åŒ–é¡¹ï¼Œè¡¨è¾¾å¼å¦‚ä¸‹ï¼š $$ \\log{L(\\mathbf{\\theta})}=-\\sum_{i=1}^n(y^{(i)}\\log{f_\\mathbf{\\theta}(\\mathbf{x}^{(i)})}+(1-y^{(i)})\\log{(1-f_\\mathbf{\\theta}(\\mathbf{x}^{(i)}})))+\\frac{\\lambda}{2}\\sum_{j=1}^{m}\\theta_j^2 $$ ä¸ºæ–¹ä¾¿ä¸å›å½’å¤„ç†ç›¸ä¼¼ï¼Œå°†ç›®æ ‡å‡½æ•°æœ€å¤§åŒ–çš„ç›®æ ‡è½¬åŒ–ä¸ºæœ€å°åŒ–é—®é¢˜ï¼Œåœ¨åŸç›®æ ‡å‡½æ•°å¢åŠ è´Ÿå·ï¼ŒåŠ ä¸Šæ­£åˆ™åŒ–é¡¹ã€‚ä¸”è¿™é‡Œåè½¬äº†ç¬¦å·ä¹‹åï¼Œåœ¨æ›´æ–°å‚æ•°æ—¶ä¹Ÿéœ€è¦å°†ç¬¦å·åæ–¹å‘ç§»åŠ¨ã€‚ åŒ…å«æ­£åˆ™åŒ–é¡¹çš„è¡¨è¾¾å¼çš„å¾®åˆ† å…¶ä¸­å›å½’å’Œåˆ†ç±»çš„ç›®æ ‡å‡½æ•°çš„å¾®åˆ†æˆ‘ä»¬åœ¨å‰é¢å·²ç»æ±‚è¿‡äº†ï¼Œè¿™é‡Œä¸»è¦æ˜¯æ±‚æ­£åˆ™åŒ–é¡¹çš„å¾®åˆ†è¡¨è¾¾å¼: $$ \\frac{\\partial{R(\\mathbf{\\theta})}}{\\partial{\\theta_j}}=\\lambda\\theta_j $$ æœ€åè¿™é‡Œä»£å…¥åˆ°å›å½’åœºæ™¯ä¸‹çš„å‚æ•°æ›´æ–°è¡¨è¾¾å¼ä¸­ï¼š $$ \\theta_j:=\\theta_j-\\eta\\big (\\sum_{i=1}^{n}(f_\\mathbf{\\theta}(\\mathbf{x}^{(i)})-y^{(i)})x_j^{(i)}+\\lambda\\theta_j\\big ) $$ è¿™é‡Œä¸€èˆ¬ä¸å¯¹$\\theta_0$åº”ç”¨æ­£åˆ™åŒ–ï¼Œæ‰€ä»¥è¿™é‡ŒåŒºåˆ†ä¸¤ç§æƒ…å†µï¼š $j=0$ $$ \\theta_0:=\\theta_0-\\eta\\big (\\sum_{i=1}^{n}(f_\\mathbf{\\theta}(\\mathbf{x}^{(i)})-y^{(i)})x_j^{(i)}\\big ) $$ $j\u003e0$ $$ \\theta_j:=\\theta_j-\\eta\\big (\\sum_{i=1}^{n}(f_\\mathbf{\\theta}(\\mathbf{x}^{(i)})-y^{(i)})x_j^{(i)}+\\lambda\\theta_j\\big ) $$ è‡³æ­¤æåˆ°çš„æ­£åˆ™è¢«ç§°ä¸ºL2æ­£åˆ™åŒ–ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰L1æ­£åˆ™åŒ–ï¼Œå®ƒçš„æ­£åˆ™åŒ–é¡¹å¦‚ä¸‹ï¼š $$ R(\\mathbf{\\theta})= \\lambda\\sum_{i=1}^{m}|\\theta_i| $$ L1æ­£åˆ™åŒ–çš„ç‰¹å¾æ˜¯è¢«åˆ¤å®šä¸ºä¸éœ€è¦çš„å‚æ•°ä¼šå˜ä¸º0ï¼Œä»è€Œå‡å°‘å˜é‡ä¸ªæ•°å³ç›´æ¥å»é™¤ä¸è¦çš„å˜é‡ã€‚è€ŒL2æ­£åˆ™åŒ–ä¸ä¼šæŠŠå‚æ•°å˜ä¸º0ï¼Œé€šè¿‡ä¼šæŠ‘åˆ¶å‚æ•°ï¼Œä½¿å˜é‡çš„å½±å“ä¸ä¼šè¿‡å¤§ã€‚ ","date":"2022-02-26","objectID":"/posts/ai/machine_learning/0.html/:4:2","tags":["ai","machine_learning","note"],"title":"ã€Šç™½è¯æœºå™¨å­¦ä¹ çš„æ•°å­¦ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/ai/machine_learning/0.html/"},{"categories":["machine learning"],"content":"å­¦ä¹ æ›²çº¿ æ¬ æ‹Ÿåˆ æ¬ æ‹Ÿåˆï¼ˆunderfittingï¼‰ä¸è¿‡æ‹Ÿåˆç›¸åçš„çŠ¶æ€å³æ²¡æœ‰æ‹Ÿåˆè®­ç»ƒæ•°æ®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹æ¨¡å‹çš„æ€§èƒ½ä¹Ÿä¼šå˜å·®ã€‚ åŒºåˆ†è¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆ å°†ä¸¤ä»½æ•°æ®çš„ç²¾åº¦ç”¨å›¾æ¥å±•ç¤ºåï¼Œå¦‚æœæ˜¯è¿™ç§å½¢çŠ¶ï¼Œå°±è¯´æ˜å‡ºç°äº†æ¬ æ‹Ÿåˆçš„çŠ¶æ€ï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºé«˜åå·®ã€‚ è€Œè¿‡æ‹Ÿåˆæˆ–ç§°ä¸ºé«˜æ–¹å·®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åƒè¿™æ ·å±•ç¤ºäº†æ•°æ®æ•°é‡å’Œç²¾åº¦çš„å›¾ç§°ä¸ºå­¦ä¹ æ›²çº¿ã€‚ ","date":"2022-02-26","objectID":"/posts/ai/machine_learning/0.html/:4:3","tags":["ai","machine_learning","note"],"title":"ã€Šç™½è¯æœºå™¨å­¦ä¹ çš„æ•°å­¦ã€‹é˜…è¯»ç¬”è®°","uri":"/posts/ai/machine_learning/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"APMç»„ä»¶é€‰å‹ æ¢é’ˆçš„æ€§èƒ½ é‡ç‚¹åœ¨agentå¯¹æœåŠ¡çš„ååé‡ã€CPUå’Œå†…å­˜çš„å½±å“ã€‚ å¾®æœåŠ¡çš„è§„æ¨¡å’ŒåŠ¨æ€æ€§ä½¿æ•°æ®æ”¶é›†çš„æˆæœ¬æé«˜ã€‚ collectorçš„å¯æ‰©å±•æ€§ æ°´å¹³æ‰©å±•ä»¥ä¾¿æ”¯æŒæ›´å¤§è§„æ¨¡æœåŠ¡å™¨é›†ç¾¤ã€‚ å…¨é¢çš„è°ƒç”¨é“¾è·¯æ•°æ®åˆ†æ æä¾›ä»£ç çº§åˆ«çš„å¯è§æ€§ï¼Œå®šä½å¤±è´¥ç‚¹å’Œç“¶é¢ˆã€‚ å¯¹äºå¼€å‘é€æ˜ï¼Œå®¹æ˜“å¼€å…³ æ— éœ€ä¿®æ”¹ä»£ç æ·»åŠ æ–°åŠŸèƒ½ï¼Œå®¹æ˜“å¯ç”¨æˆ–è€…ç¦ç”¨ã€‚ å®Œæ•´çš„è°ƒç”¨é“¾åº”ç”¨æ‹“æ‰‘ è‡ªåŠ¨æ£€æµ‹åº”ç”¨æ‹“æ‰‘ï¼Œåº”ç”¨æ¶æ„ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/8.html/:0:0","tags":["åˆ†å¸ƒå¼æ¶æ„","apm"],"title":"apmç»„ä»¶é€‰å‹","uri":"/posts/distributed_structure/structure/8.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"å‚è€ƒ https://juejin.im/post/5a7a9e0af265da4e914b46f1 ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/8.html/:1:0","tags":["åˆ†å¸ƒå¼æ¶æ„","apm"],"title":"apmç»„ä»¶é€‰å‹","uri":"/posts/distributed_structure/structure/8.html/"},{"categories":["é€šç”¨æŠ€æœ¯"],"content":"Gitä¸­çš„å·¥ä½œæµ ","date":"2022-01-29","objectID":"/posts/common_tech/git/0.html/:0:0","tags":["é€šç”¨æŠ€æœ¯","Git"],"title":"Gitä¸­çš„å·¥ä½œæµ","uri":"/posts/common_tech/git/0.html/"},{"categories":["é€šç”¨æŠ€æœ¯"],"content":"ä¸­å¿ƒå¼ååŒå·¥ä½œæµ ä¸€èˆ¬è¿‡ç¨‹å¦‚ä¸‹ï¼š ä»æœåŠ¡å™¨ä¸Šgit pull origin masteråŒæ­¥ä»£ç ï¼› ä¿®æ”¹å®Œågit commitåˆ°æœ¬åœ°ä»“åº“ä¸­ï¼› ç„¶ågit push origin masteråˆ°è¿œç¨‹ä»“åº“ä¸­ï¼› è‹¥ä¸‰æ­¥pushå¤±è´¥åˆ™å‡ºç°äº†å·²ç»æäº¤çš„ç‰ˆæœ¬ä¸ä½ æœ¬åœ°ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œåˆ™éœ€è¦å…ˆæŠŠè¿œç¨‹ä»“åº“çš„ä»£ç pullä¸‹æ¥ï¼Œä¸ºäº†é¿å…æœ‰mergeæ“ä½œå³å¯ä»¥ä½¿ç”¨git pull -rebaseå°†è¿œç¨‹ä»“åº“ä¸Šçš„æäº¤ç›´æ¥åˆå¹¶åˆ°æœ¬åœ°ä»“åº“ä¸­ã€‚æ€»ç»“å°±æ˜¯ä»¥ä¸‹æ­¥éª¤ï¼š å…ˆæŠŠæœ¬åœ°æäº¤çš„ä»£ç æ”¾åœ¨ä¸€è¾¹ï¼› ç„¶åæŠŠè¿œç¨‹ä»“åº“ä¸Šçš„æ”¹åŠ¨ä¸‹è½½ä¸‹æ¥ï¼› ç„¶ååœ¨æœ¬åœ°æŠŠä¹‹å‰çš„æ”¹åŠ¨å…¨éƒ¨åˆ†åˆ«commitç›´è‡³å…¨éƒ¨æˆåŠŸã€‚ è‹¥æœ‰å†²çªåˆ™è§£å†³å†²çªï¼Œä½¿ç”¨git rebase â€“continueï¼Œç›´è‡³è§£å†³æ‰€æœ‰å†²çªã€‚ ","date":"2022-01-29","objectID":"/posts/common_tech/git/0.html/:1:0","tags":["é€šç”¨æŠ€æœ¯","Git"],"title":"Gitä¸­çš„å·¥ä½œæµ","uri":"/posts/common_tech/git/0.html/"},{"categories":["é€šç”¨æŠ€æœ¯"],"content":"åŠŸèƒ½åˆ†æ”¯ååŒå·¥ä½œæµ ä¸€èˆ¬è¿‡ç¨‹å¦‚ä¸‹ï¼š é¦–å…ˆä½¿ç”¨git checkout -b new-featheråˆ›å»ºæ–°åˆ†æ”¯ï¼› ç„¶åå…±åŒå¼€å‘è¿™ä¸ªåŠŸèƒ½åœ¨æ­¤åˆ†æ”¯ä¸Šè¿›è¡Œå¼€å‘å·¥ä½œï¼› ç„¶åé€šè¿‡git push -u origin new-featheræŠŠåˆ†æ”¯pushåˆ°è¿œç¨‹ä»“åº“ä¸Šï¼› å…¶ä»–å°±å¯ä»¥é€šè¿‡git pull -rebaseæ‹¿åˆ°è¿™ä¸ªåˆ†æ”¯çš„æœ€æ–°ä»£ç ï¼› æœ€åé€šè¿‡Pull Requeståšå®ŒCodeReveiwååˆå¹¶åˆ°Masteråˆ†æ”¯ä¸Šã€‚ ","date":"2022-01-29","objectID":"/posts/common_tech/git/0.html/:2:0","tags":["é€šç”¨æŠ€æœ¯","Git"],"title":"Gitä¸­çš„å·¥ä½œæµ","uri":"/posts/common_tech/git/0.html/"},{"categories":["é€šç”¨æŠ€æœ¯"],"content":"GitFlowååŒå·¥ä½œæµ é‡ç‚¹åœ¨äºç»´æŠ¤ä¸”ä¸å½±å“å½“å‰å¯ä»¥å‘å¸ƒçš„ä»£ç ã€‚ Master åˆ†æ”¯ã€‚ä¹Ÿå°±æ˜¯ä¸»å¹²åˆ†æ”¯ï¼Œç”¨ä½œå‘å¸ƒç¯å¢ƒï¼Œä¸Šé¢çš„æ¯ä¸€æ¬¡æäº¤éƒ½æ˜¯å¯ä»¥å‘å¸ƒçš„ã€‚ Feature åˆ†æ”¯ã€‚ä¹Ÿå°±æ˜¯åŠŸèƒ½åˆ†æ”¯ï¼Œç”¨äºå¼€å‘åŠŸèƒ½ï¼Œå…¶å¯¹åº”çš„æ˜¯å¼€å‘ç¯å¢ƒã€‚ Developer åˆ†æ”¯ã€‚æ˜¯å¼€å‘åˆ†æ”¯ï¼Œä¸€æ—¦åŠŸèƒ½å¼€å‘å®Œæˆï¼Œå°±å‘ Developer åˆ†æ”¯åˆå¹¶ï¼Œåˆå¹¶å®Œæˆåï¼Œåˆ é™¤åŠŸèƒ½åˆ†æ”¯ã€‚è¿™ä¸ªåˆ†æ”¯å¯¹åº”çš„æ˜¯é›†æˆæµ‹è¯•ç¯å¢ƒã€‚ Release åˆ†æ”¯ã€‚å½“ Developer åˆ†æ”¯æµ‹è¯•è¾¾åˆ°å¯ä»¥å‘å¸ƒçŠ¶æ€æ—¶ï¼Œå¼€å‡ºä¸€ä¸ª Release åˆ†æ”¯æ¥ï¼Œç„¶ååšå‘å¸ƒå‰çš„å‡†å¤‡å·¥ä½œã€‚è¿™ä¸ªåˆ†æ”¯å¯¹åº”çš„æ˜¯é¢„å‘ç¯å¢ƒã€‚ä¹‹æ‰€ä»¥éœ€è¦è¿™ä¸ª Release åˆ†æ”¯ï¼Œæ˜¯æˆ‘ä»¬çš„å¼€å‘å¯ä»¥ç»§ç»­å‘å‰ï¼Œä¸ä¼šå› ä¸ºè¦å‘å¸ƒè€Œè¢« block ä½è€Œä¸èƒ½æäº¤ã€‚ ä¸€æ—¦ Release åˆ†æ”¯ä¸Šçš„ä»£ç è¾¾åˆ°å¯ä»¥ä¸Šçº¿çš„çŠ¶æ€ï¼Œé‚£ä¹ˆéœ€è¦æŠŠ Release åˆ†æ”¯å‘ Master åˆ†æ”¯å’Œ Developer åˆ†æ”¯åŒæ—¶åˆå¹¶ï¼Œä»¥ä¿è¯ä»£ç çš„ä¸€è‡´æ€§ã€‚ç„¶åå†æŠŠ Release åˆ†æ”¯åˆ é™¤æ‰ã€‚ Hotfix åˆ†æ”¯ã€‚æ˜¯ç”¨äºå¤„ç†ç”Ÿäº§çº¿ä¸Šä»£ç çš„ Bug-fixï¼Œæ¯ä¸ªçº¿ä¸Šä»£ç çš„ Bug-fix éƒ½éœ€è¦å¼€ä¸€ä¸ª Hotfix åˆ†æ”¯ï¼Œå®Œæˆåï¼Œå‘ Developer åˆ†æ”¯å’Œ Master åˆ†æ”¯ä¸Šåˆå¹¶ã€‚åˆå¹¶å®Œæˆåï¼Œåˆ é™¤ Hotfix åˆ†æ”¯ã€‚ ","date":"2022-01-29","objectID":"/posts/common_tech/git/0.html/:3:0","tags":["é€šç”¨æŠ€æœ¯","Git"],"title":"Gitä¸­çš„å·¥ä½œæµ","uri":"/posts/common_tech/git/0.html/"},{"categories":["é€šç”¨æŠ€æœ¯"],"content":"GitHub/GitlabååŒå·¥ä½œæµ GitFlowä¼šå› åˆ†æ”¯å¤ªå¤šé€ æˆgit logæ··ä¹±çš„å±€é¢ï¼Œä¸”éœ€è¦åŒæ—¶ç»´æŠ¤Masterå’ŒDeveloperåˆ†æ”¯ã€‚ ","date":"2022-01-29","objectID":"/posts/common_tech/git/0.html/:4:0","tags":["é€šç”¨æŠ€æœ¯","Git"],"title":"Gitä¸­çš„å·¥ä½œæµ","uri":"/posts/common_tech/git/0.html/"},{"categories":["é€šç”¨æŠ€æœ¯"],"content":"GitFlow ä¸€èˆ¬è¿‡ç¨‹å¦‚ä¸‹ï¼š å°†å®˜æ–¹åº“forkåˆ°è‡ªå·±çš„ä»£ç ä»“åº“ï¼› å¼€å‘äººå‘˜åœ¨è‡ªå·±çš„ä»£ç ä»“åº“è¿›è¡Œå¼€å‘ï¼› è‡ªå·±çš„ä»£ç ä»“åº“ä¸­éœ€è¦é…ç½®ä¸¤ä¸ªè¿œç¨‹ä»“åº“ï¼› æœ¬åœ°å»ºç«‹åŠŸèƒ½åˆ†æ”¯ï¼Œåœ¨æ­¤åˆ†æ”¯ä¸Šåšä»£ç å¼€å‘ï¼› è¿™ä¸ªåŠŸèƒ½åˆ†æ”¯pushåˆ°è‡ªå·±çš„ä»£ç ä»“åº“ä¸­ï¼› ç„¶åå‘å®˜æ–¹åº“å‘èµ·pull requestï¼Œå¹¶åšcode reviewï¼› ä¸€æ—¦é€šè¿‡åˆ™å‘å®˜æ–¹åº“è¿›è¡Œåˆå¹¶ã€‚ ","date":"2022-01-29","objectID":"/posts/common_tech/git/0.html/:4:1","tags":["é€šç”¨æŠ€æœ¯","Git"],"title":"Gitä¸­çš„å·¥ä½œæµ","uri":"/posts/common_tech/git/0.html/"},{"categories":["é€šç”¨æŠ€æœ¯"],"content":"GillabFlow é‡ç‚¹åœ¨äºå¼•å…¥ä¸åŒçš„ç¯å¢ƒåˆ†æ”¯ï¼Œä¸”åŒ…å«äº†é¢„å‘å¸ƒå’Œç”Ÿäº§åˆ†æ”¯ã€‚ è¿™æ ·ä¹Ÿå°±è§£å†³äº†ä¸¤ä¸ªé—®é¢˜ï¼š ç¯å¢ƒå’Œä»£ç åˆ†æ”¯å¯¹åº”çš„é—®é¢˜ï¼› ç‰ˆæœ¬å’Œä»£ç åˆ†æ”¯å¯¹åº”çš„é—®é¢˜ã€‚ ","date":"2022-01-29","objectID":"/posts/common_tech/git/0.html/:4:2","tags":["é€šç”¨æŠ€æœ¯","Git"],"title":"Gitä¸­çš„å·¥ä½œæµ","uri":"/posts/common_tech/git/0.html/"},{"categories":["é€šç”¨æŠ€æœ¯"],"content":"æœ¬è´¨ è½¯ä»¶å¼€å‘çš„è¶‹åŠ¿ä¸€èˆ¬å¦‚ä¸‹ï¼š ä»¥å¾®æœåŠ¡æˆ–è€…SOAæ¶æ„çš„æ–¹å¼ã€‚ ä½¿ååŒå·¥ä½œæµå˜å¾—ç®€å•ï¼Œå°†å„ä¸ªæœåŠ¡æ‹†è§£æˆè‹¥å¹²ä¸ªä»£ç ä»“åº“ï¼Œå¯¹äºGitFlowè¿‡äºé‡ï¼Œæ›´é€‚åˆä½¿ç”¨GitHubFlowæ–¹å¼ã€‚ ä»¥DevOpsä¸ºä¸»çš„å¼€å‘æµç¨‹ã€‚ é€šè¿‡CI/CDï¼Œä¸éœ€è¦ç»´æŠ¤å¤šä¸ªç‰ˆæœ¬ï¼Œä¹Ÿä¸éœ€è¦å…³æ³¨ä¸åŒçš„è¿è¡Œç¯å¢ƒï¼ŒGitHubFlowæˆ–è€…åŠŸèƒ½åˆ†æ”¯è¿™ç§æ–¹å¼æ›´é€‚åº”è¿™ç§å¼€å‘æµç¨‹ã€‚ ååŒå·¥ä½œæµçš„æœ¬è´¨ï¼Œå¹¶ä¸æ˜¯æ€ä¹ˆç©å¥½ä»£ç ä»“åº“çš„åˆ†æ”¯ç­–ç•¥ï¼Œè€Œæ˜¯ç©å¥½æˆ‘ä»¬çš„è½¯ä»¶æ¶æ„å’Œè½¯ä»¶å¼€å‘æµç¨‹ã€‚ ä¸å…¶èŠ±æ—¶é—´åœ¨ Git ååŒå·¥ä½œæµä¸Šï¼Œè¿˜ä¸å¦‚æŠŠæ—¶é—´èŠ±åœ¨è°ƒæ•´è½¯ä»¶æ¶æ„å’Œè‡ªåŠ¨åŒ–è½¯ä»¶ç”Ÿäº§å’Œè¿ç»´æµç¨‹ä¸Šæ¥ï¼Œè¿™æ‰æ˜¯çœŸæ­£ç®€åŒ–ååŒå·¥ä½œæµç¨‹çš„æ ¹æœ¬ã€‚ ","date":"2022-01-29","objectID":"/posts/common_tech/git/0.html/:5:0","tags":["é€šç”¨æŠ€æœ¯","Git"],"title":"Gitä¸­çš„å·¥ä½œæµ","uri":"/posts/common_tech/git/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"MIT6824LEC1ç¬”è®°:Map Reduce è¯¾ç¨‹åœ°å€ ä»£ç å®ç°repoåœ°å€ å³è¯¾ç¨‹Lab1ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/3.html/:1:0","tags":["åˆ†å¸ƒå¼æ¶æ„","MIT6824","note"],"title":"MIT6824LEC1ç¬”è®°:Map Reduce","uri":"/posts/distributed_structure/structure/3.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"GFS è¯¾ç¨‹åœ°å€ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/5.html/:0:0","tags":["åˆ†å¸ƒå¼æ¶æ„","MIT6824","note"],"title":"MIT6824LEC3ç¬”è®°:GFS","uri":"/posts/distributed_structure/structure/5.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"Before gfs ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/5.html/:1:0","tags":["åˆ†å¸ƒå¼æ¶æ„","MIT6824","note"],"title":"MIT6824LEC3ç¬”è®°:GFS","uri":"/posts/distributed_structure/structure/5.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"why is distributed storage hard High performance -\u003e shard data over many servers Many servers -\u003e constant faults Fault tolerance -\u003e replication replication -\u003e potential inconsistencies Better consistency -\u003e low performance it can sum up the all thinking points like: performance fault tolerance replication consistency these points have connection and influence each other. ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/5.html/:1:1","tags":["åˆ†å¸ƒå¼æ¶æ„","MIT6824","note"],"title":"MIT6824LEC3ç¬”è®°:GFS","uri":"/posts/distributed_structure/structure/5.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"what would we like for consistency? There are two conditions we can think: single server C1: wx1 C2: wx2 C3: rx? C4: rx? C3 or C4 can see either 1 or 2, but both have to see the same value. Itâ€™s a strong consistency model in the single server, but itâ€™s has poor fault-tolerance. So we can think the replication for the fault-tolerance, but it will make strong consistency tricky. Replication servers:S1 S2 C1: write S1 or S2 C2: write S1 or S2 C3: read S1 C4: read S2 C3 or C4 will see the different results. It canâ€™t promise the same result or special result, because there is no standard protocol. So thatâ€™s not strong consistency. For consistency, we need to use the special protocol to fix these problems. The gfs is one case about the distributed systemâ€™s protocol. ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/5.html/:1:2","tags":["åˆ†å¸ƒå¼æ¶æ„","MIT6824","note"],"title":"MIT6824LEC3ç¬”è®°:GFS","uri":"/posts/distributed_structure/structure/5.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"Gfs ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/5.html/:2:0","tags":["åˆ†å¸ƒå¼æ¶æ„","MIT6824","note"],"title":"MIT6824LEC3ç¬”è®°:GFS","uri":"/posts/distributed_structure/structure/5.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"Context Many Google services needed a big fast unified storage system, like Mapreduce, crawler/indexer, log storage/analysis, Youtubeâ€¦ Big: large data set Fast: automatic sharding For parallel performance To increase space available Global(over a single data center) any client can read any file Allows sharing of data among applications Fault-tolerance Automatic recovery from failures Just one data center per deployment Just Google applications/users Aimed at sequential access to huge files; read or append not a low-latency DB for small items What was new about this in 2003? How did they get an SOSP paper accepted? Not the basic ideas of distribution, sharding, fault-tolerance. Huge scale. Used in industry, real-world experience. Successful use of weak consistency. Successful use of single master. ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/5.html/:2:1","tags":["åˆ†å¸ƒå¼æ¶æ„","MIT6824","note"],"title":"MIT6824LEC3ç¬”è®°:GFS","uri":"/posts/distributed_structure/structure/5.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"Design clients (library, RPC â€“ but not visible as a UNIX FS) each file split into independent 64 MB chunks chunk servers, each chunk replicated on 3 every fileâ€™s chunks are spread over the chunk servers for parallel read/write (e.g. MapReduce), and to allow huge files single master, and master replicas division of work: master deals w/ naming, chunkservers w/ data ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/5.html/:2:2","tags":["åˆ†å¸ƒå¼æ¶æ„","MIT6824","note"],"title":"MIT6824LEC3ç¬”è®°:GFS","uri":"/posts/distributed_structure/structure/5.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"Master state in RAM (for speed, must be smallish) file name / index -\u003e array of chunk handles Chunk handle(stable) -\u003e version(stable) -\u003e list of chunk servers(volatile) -\u003e primary, secondaries(volatile) -\u003e lease time(volatile) on disk: stable storage log -\u003e master will first write the log. when master fails or crashes, the log can reconsturct or fix the master for the backup. Checkpoint -\u003e when master fails or crashes, it can replay the last part or state basically then can quickly reconsturct master from the log. what state does need to end up in stable storage for the mass detection function coreectly? ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/5.html/:2:3","tags":["åˆ†å¸ƒå¼æ¶æ„","MIT6824","note"],"title":"MIT6824LEC3ç¬”è®°:GFS","uri":"/posts/distributed_structure/structure/5.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"steps when read a file C sends filename and offset to master M (if not cached) M finds chunk handle for that offset M replies with list of chunkservers only those with latest version C caches handle + chunkserver list -\u003e caches is to reduce the load on this single machine C sends request to nearest chunkserver chunk handle, offset -\u003e nearest chunkserver is to minimize network traffific or maximize the throughput about the joint setup form the clients to the servers chunk server check the reversion then reads from chunk file on disk, returns -\u003e check the version is to avoid reading the stale data ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/5.html/:2:4","tags":["åˆ†å¸ƒå¼æ¶æ„","MIT6824","note"],"title":"MIT6824LEC3ç¬”è®°:GFS","uri":"/posts/distributed_structure/structure/5.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"steps when write a file: append C asks M about fileâ€™s last chunk if M sees chunk has no primary (or lease expired): 2a. if no chunkservers w/ latest version # error 2b. pick primary P and secondaries from those w/ latest version # 2c. increment version #, write to log on disk 2d. tell P and secondaries who they are, and new version # 2e. replicas write new version # to disk 3. M tells C the primary and secondaries + version 4. C sends data to all (just temporaryâ€¦), waits 5. C tells P to append 6. P checks that lease hasnâ€™t expired, and chunk has space 7. P picks an offset (at end of chunk) 8. P writes chunk file (a Linux file) 9. P tells each secondary the offset, tells to append to chunk file 10. P waits for all secondaries to reply, or timeout secondary can reply â€œerrorâ€ e.g. out of disk space 11. P tells C â€œokâ€ or â€œerrorâ€ 12. C retries from start if error What consistency guarantees does GFS provide to clients? Needs to be in a form that tells applications how to use GFS. Hereâ€™s a possibility: If the primary tells a client that a record append succeeded, then any reader that subsequently opens the file and scans it will see the appended record somewhere. ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/5.html/:2:5","tags":["åˆ†å¸ƒå¼æ¶æ„","MIT6824","note"],"title":"MIT6824LEC3ç¬”è®°:GFS","uri":"/posts/distributed_structure/structure/5.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"question What if an appending client fails at an awkward moment? Is there an awkward moment? What if the appending client has cached a stale (wrong) primary? What if the reading client has cached a stale secondary list? Could a master crash+reboot cause it to forget about the file? Or forget what chunkservers hold the relevant chunk? Two clients do record append at exactly the same time. Will they overwrite each othersâ€™ records? Suppose one secondary never hears the append command from the primary. What if reading client reads from that secondary? What if the primary crashes before sending append to all secondaries? Could a secondary that didnâ€™t see the append be chosen as the new primary? Chunkserver S4 with an old stale copy of chunk is offline. Primary and all live secondaries crash. S4 comes back to life (before primary and secondaries). Will master choose S4 (with stale chunk) as primary? Better to have primary with stale data, or no replicas at all? What should a primary do if a secondary always fails writes? e.g. dead, or out of disk space, or disk has broken. Should the primary drop secondary from set of secondaries? And then return success to client appends? Or should the primary keep sending ops, and having them fail, and thus fail every client write request? What if primary S1 is alive and serving client requests, but network between master and S1 fails? â€œnetwork partitionâ€ Will the master pick a new primary? Will there now be two primaries? So that the append goes to one primary, and the read to the other? Thus breaking the consistency guarantee? â€œsplit brainâ€ If thereâ€™s a partitioned primary serving client appends, and its lease expires, and the master picks a new primary, will the new primary have the latest data as updated by partitioned primary? What if the master fails altogether. Will the replacement know everything the dead master knew? E.g. each chunkâ€™s version number? primary? lease expiry time? Who/what decides the master is dead, and must be replaced? Could the master replicas ping the master, take over if no response? What happens if the entire building suffers a power failure? And then power is restored, and all servers reboot. Suppose the master wants to create a new chunk replica. Maybe because too few replicas. Suppose itâ€™s the last chunk in the file, and being appended to. How does the new replica ensure it doesnâ€™t miss any appends? After all it is not yet one of the secondaries. Is there any circumstance in which GFS will break the guarantee? i.e. append succeeds, but subsequent readers donâ€™t see the record. All master replicas permanently lose state (permanent disk failure). Could be worse: result will be â€œno answerâ€, not â€œincorrect dataâ€. â€œfail-stopâ€ All chunkservers holding the chunk permanently lose disk content. again, fail-stop; not the worse possible outcome CPU, RAM, network, or disk yields an incorrect value. checksum catches some cases, but not all Time is not properly synchronized, so leases donâ€™t work out. So multiple primaries, maybe write goes to one, read to the other. What application-visible anomalous behavior does GFS allow? Will all clients see the same file content? Could one client see a record that another client doesnâ€™t see at all? Will a client see the same content if it reads a file twice? Will all clients see successfully appended records in the same order? Will these anomalies cause trouble for applications? How about MapReduce? ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/5.html/:2:6","tags":["åˆ†å¸ƒå¼æ¶æ„","MIT6824","note"],"title":"MIT6824LEC3ç¬”è®°:GFS","uri":"/posts/distributed_structure/structure/5.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"strict consistency I.e. all clients see the same file content. Too hard to give a real answer, but here are some issues. Primary should detect duplicate client write requests. Or client should not issue them. All secondaries should complete each write, or none. Perhaps tentative writes until all promise to complete it? Donâ€™t expose writes until all have agreed to perform them! If primary crashes, some replicas may be missing the last few ops. New primary must talk to all replicas to find all recent ops, and sync with secondaries. To avoid client reading from stale ex-secondary, either all client reads must go to primary, or secondaries must also have leases. Performance (Figure 3) large aggregate throughput for read (3 copies, striping) 94 MB/sec total for 16 chunkservers or 6 MB/second per chunkserver is that good? one disk sequential throughput was about 30 MB/s one NIC was about 10 MB/s Close to saturating network (inter-switch link) So: individual server performance is low but scalability is good which is more important? Table 3 reports 500 MB/sec for production GFS, which is a lot writes to different files lower than possible maximum authors blame their network stack (but no detail) concurrent appends to single file limited by the server that stores last chunk hard to interpret after 15 years, e.g. how fast were the disks? Random issues worth considering What would it take to support small files well? What would it take to support billions of files? Could GFS be used as wide-area file system? With replicas in different cities? All replicas in one datacenter is not very fault tolerant! How long does GFS take to recover from a failure? Of a primary/secondary? Of the master? How well does GFS cope with slow chunkservers? Retrospective interview with GFS engineer: http://queue.acm.org/detail.cfm?id=1594206 file count was the biggest problem eventual numbers grew to 1000x those in Table 2 ! hard to fit in master RAM master scanning of all files/chunks for GC is slow 1000s of clients too much CPU load on master applications had to be designed to cope with GFS semantics and limitations master fail-over initially entirely manual, 10s of minutes BigTable is one answer to many-small-files problem and Colossus apparently shards master data over many masters ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/5.html/:2:7","tags":["åˆ†å¸ƒå¼æ¶æ„","MIT6824","note"],"title":"MIT6824LEC3ç¬”è®°:GFS","uri":"/posts/distributed_structure/structure/5.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"Summary case study of performance, fault-tolerance, consistency specialized for MapReduce applications good ideas: global cluster file system as universal infrastructure separation of naming (master) from storage (chunkserver) sharding for parallel throughput huge files/chunks to reduce overheads primary to sequence writes leases to prevent split-brain chunkserver primaries not so great: single master performance:ran out of RAM and CPU chunkservers not very efficient for small files lack of automatic fail-over to master replica maybe consistency was too relaxed ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/5.html/:3:0","tags":["åˆ†å¸ƒå¼æ¶æ„","MIT6824","note"],"title":"MIT6824LEC3ç¬”è®°:GFS","uri":"/posts/distributed_structure/structure/5.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"Primary/Backup Replication è¯¾ç¨‹åœ°å€ the note from the lecture Primary/Backup Replication for Fault Tolerance Case study of VMware FT, an extreme version of the idea fault tolerance to provide availability despite server and network failures using replication What kinds of failures can replication deal with? â€œfail-stopâ€ failure of a single replica fan stops working, CPU overheats and shuts itself down someone trips over replicaâ€™s power cord or network cable software notices it is out of disk space and stops Maybe not defects in h/w or bugs in s/w or human configuration errors Often not fail-stop May be correlated (i.e. cause all replicas to crash at the same time) But, sometimes can be detected (e.g. checksums) How about earthquake or city-wide power failure? Only if replicas are physically separated Is replication worth the Nx expense? Two main replication approaches: State transfer Primary replica executes the service Primary sends [new] state to backups State transfer is simpler ,But state may be large, slow to transfer over network Replicated state machine Clients send operations to primary, primary sequences and sends to backups All replicas execute all operations If same start state, same operations, same order, deterministic, then same end state. Replicated state machine often generates less network traffic Operations are often small compared to state But complex to get right VM-FT uses replicated state machine Big Questions: What state to replicate? Does primary have to wait for backup? When to cut over to backup? Are anomalies visible at cut-over? How to bring a replacement backup up to speed? At what level do we want replicas to be identical? Application state, e.g. a databaseâ€™s tables? GFS works this way Can be efficient; primary only sends high-level operations to backup Application code (server) must understand fault tolerance, to e.g. forward op stream Machine level, e.g. registers and RAM content? might allow us to replicate any existing server w/o modification! requires forwarding of machine events (interrupts, DMA, \u0026c) requires â€œmachineâ€ modifications to send/recv event streamâ€¦ paper (VMware FT) replicates machine-level state Transparent: can run any existing O/S and server software! Appears like a single server to clients Overview [diagram: app, O/S, VM-FT underneath, disk server, network, clients] words: hypervisor == monitor == VMM (virtual machine monitor) O/S+app is the â€œguestâ€ running inside a virtual machine two machines, primary and backup primary sends all external events (client packets \u0026c) to backup over network â€œlogging channelâ€, carrying log entries ordinarily, backupâ€™s output is suppressed by FT if either stops being able to talk to the other over the network â€œgoes liveâ€ and provides sole service if primary goes live, it stops sending log entries to the backup VMM emulates a local disk interface ,but actual storage is on a network server treated much like a client: usually only primary communicates with disk server (backupâ€™s FT discards) if backup goes live, it talks to disk server external disk makes creating a new backup faster (donâ€™t have to copy primaryâ€™s disk) When does the primary have to send information to the backup? Any time something happens that might cause their executions to diverge. Anything thatâ€™s not a deterministic consequence of executing instructions. What sources of divergence must FT handle? Most instructions execute identically on primary and backup. As long as memory+registers are identical, which weâ€™re assuming by induction. Inputs from external world â€“ just network packets. These appear as DMAâ€™d data plus an interrupt. Timing of interrupts. Instructions that arenâ€™t functions of state, such as reading current time. Not multi-core races, since uniprocessor only. Why would divergence be a disaster? b/c state on backup would differ from state on primary, and if primary then failed, clients would see inconsistency. Example: GFS lease expiration Imagine weâ€™re replicating the GFS ma","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/1.html/:0:0","tags":["åˆ†å¸ƒå¼æ¶æ„","MIT6824","note"],"title":"MIT6824LEC4ç¬”è®°:Primary-Backup Replication","uri":"/posts/distributed_structure/structure/1.html/"},{"categories":["é€šç”¨æŠ€æœ¯"],"content":"ç¨‹åºä¸­çš„é”™è¯¯å¤„ç†note ","date":"2022-01-29","objectID":"/posts/common_tech/error/0.html/:0:0","tags":["é”™è¯¯å¤„ç†","é€šç”¨æŠ€æœ¯"],"title":"ç¨‹åºä¸­çš„é”™è¯¯å¤„ç†note","uri":"/posts/common_tech/error/0.html/"},{"categories":["é€šç”¨æŠ€æœ¯"],"content":"é”™è¯¯è¿”å›å’Œå¼‚å¸¸æ•æ‰ é”™è¯¯å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªå¤§ç±»ï¼š èµ„æºçš„é”™è¯¯ã€‚å½“æˆ‘ä»¬çš„ä»£ç å»è¯·æ±‚ä¸€äº›èµ„æºæ—¶å¯¼è‡´çš„é”™è¯¯ï¼Œæ¯”å¦‚æ‰“å¼€ä¸€ä¸ªæ²¡æœ‰æƒé™çš„æ–‡ä»¶ï¼Œå†™æ–‡ä»¶æ—¶å‡ºç°çš„å†™é”™è¯¯ï¼Œå‘é€æ–‡ä»¶åˆ°ç½‘ç»œç«¯å‘ç°ç½‘ç»œæ•…éšœçš„é”™è¯¯ï¼Œç­‰ç­‰ã€‚è¿™ä¸€ç±»é”™è¯¯å±äºç¨‹åºè¿è¡Œç¯å¢ƒçš„é—®é¢˜ã€‚å¯¹äºè¿™ç±»é”™è¯¯ï¼Œæœ‰çš„æˆ‘ä»¬å¯ä»¥å¤„ç†ï¼Œæœ‰çš„æˆ‘ä»¬åˆ™æ— æ³•å¤„ç†ã€‚æ¯”å¦‚ï¼Œå†…å­˜è€—å°½ã€æ ˆæº¢å‡ºæˆ–æ˜¯ä¸€äº›ç¨‹åºè¿è¡Œæ—¶å…³é”®æ€§èµ„æºä¸èƒ½æ»¡è¶³ç­‰ç­‰è¿™äº›æƒ…å†µï¼Œæˆ‘ä»¬åªèƒ½åœæ­¢è¿è¡Œï¼Œç”šè‡³é€€å‡ºæ•´ä¸ªç¨‹åºã€‚ ç¨‹åºçš„é”™è¯¯ã€‚æ¯”å¦‚ï¼šç©ºæŒ‡é’ˆã€éæ³•å‚æ•°ç­‰ã€‚è¿™ç±»æ˜¯æˆ‘ä»¬è‡ªå·±ç¨‹åºçš„é”™è¯¯ï¼Œæˆ‘ä»¬è¦è®°å½•ä¸‹æ¥ï¼Œå†™å…¥æ—¥å¿—ï¼Œæœ€å¥½è§¦å‘ç›‘æ§ç³»ç»ŸæŠ¥è­¦ã€‚ ç”¨æˆ·çš„é”™è¯¯ã€‚æ¯”å¦‚ï¼šBad Requestã€Bad Format ç­‰è¿™ç±»ç”±ç”¨æˆ·ä¸åˆæ³•è¾“å…¥å¸¦æ¥çš„é”™è¯¯ã€‚è¿™ç±»é”™è¯¯åŸºæœ¬ä¸Šæ˜¯åœ¨ç”¨æˆ·çš„ API å±‚ä¸Šå‡ºç°çš„é—®é¢˜ã€‚æ¯”å¦‚ï¼Œè§£æä¸€ä¸ª XML æˆ– JSON æ–‡ä»¶ï¼Œæˆ–æ˜¯ç”¨æˆ·è¾“å…¥çš„å­—æ®µä¸åˆæ³•ä¹‹ç±»çš„ã€‚å¯¹äºè¿™ç±»é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å‘ç”¨æˆ·ç«¯æŠ¥é”™ï¼Œè®©ç”¨æˆ·è‡ªå·±å¤„ç†ä¿®æ­£ä»–ä»¬çš„è¾“å…¥æˆ–æ“ä½œã€‚ç„¶åï¼Œæˆ‘ä»¬æ­£å¸¸æ‰§è¡Œï¼Œä½†æ˜¯éœ€è¦åšç»Ÿè®¡ï¼Œç»Ÿè®¡ç›¸åº”çš„é”™è¯¯ç‡ï¼Œè¿™æ ·æœ‰åˆ©äºæˆ‘ä»¬æ”¹å–„è½¯ä»¶æˆ–æ˜¯ä¾¦æµ‹æ˜¯å¦æœ‰æ¶æ„çš„ç”¨æˆ·è¯·æ±‚ã€‚ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸‰ç±»é”™è¯¯ä¸­ï¼Œæœ‰äº›æ˜¯æˆ‘ä»¬å¸Œæœ›æœç»å‘ç”Ÿçš„ï¼Œæ¯”å¦‚ç¨‹åºçš„ Bugï¼Œæœ‰äº›åˆ™æ˜¯æˆ‘ä»¬æœç»ä¸äº†çš„ï¼Œæ¯”å¦‚ç”¨æˆ·çš„è¾“å…¥ã€‚è€Œå¯¹äºç¨‹åºè¿è¡Œç¯å¢ƒä¸­çš„ä¸€äº›é”™è¯¯ï¼Œåˆ™æ˜¯æˆ‘ä»¬å¸Œæœ›å¯ä»¥æ¢å¤çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›å¯ä»¥é€šè¿‡é‡è¯•æˆ–æ˜¯å¦¥åçš„æ–¹å¼æ¥è§£å†³è¿™äº›ç¯å¢ƒçš„é—®é¢˜ï¼Œæ¯”å¦‚é‡å»ºç½‘ç»œè¿æ¥ï¼Œé‡æ–°æ‰“å¼€ä¸€ä¸ªæ–°çš„æ–‡ä»¶ã€‚ æ‰€ä»¥ï¼Œæ˜¯ä¸æ˜¯æˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥åœ¨é€»è¾‘ä¸Šåˆ†ç±»ï¼š å¯¹äºæˆ‘ä»¬å¹¶ä¸æœŸæœ›ä¼šå‘ç”Ÿçš„äº‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¼‚å¸¸æ•æ‰ï¼› å¯¹äºæˆ‘ä»¬è§‰å¾—å¯èƒ½ä¼šå‘ç”Ÿçš„äº‹ï¼Œä½¿ç”¨è¿”å›ç ã€‚ æ€»ä¹‹ï¼Œâ€œæŠ¥é”™çš„ç±»å‹â€ å’Œ â€œé”™è¯¯å¤„ç†â€ æ˜¯ç´§å¯†ç›¸å…³çš„ï¼Œé”™è¯¯å¤„ç†æ–¹æ³•å¤šç§å¤šæ ·ï¼Œè€Œä¸”ä¼šåœ¨ä¸åŒçš„å±‚é¢ä¸Šå¤„ç†é”™è¯¯ã€‚æœ‰äº›åº•å±‚é”™è¯¯å°±éœ€è¦è‡ªå·±å¤„ç†æ‰ï¼ˆæ¯”å¦‚ï¼šåº•å±‚æ¨¡å—ä¼šè‡ªåŠ¨é‡å»ºç½‘ç»œè¿æ¥ï¼‰ï¼Œè€Œæœ‰ä¸€äº›é”™è¯¯éœ€è¦æ›´ä¸Šå±‚çš„ä¸šåŠ¡é€»è¾‘æ¥å¤„ç†ï¼ˆæ¯”å¦‚ï¼šé‡å»ºç½‘ç»œè¿æ¥ä¸æˆåŠŸååªèƒ½è®©ä¸Šå±‚ä¸šåŠ¡æ¥å¤„ç†æ€ä¹ˆåŠï¼Ÿé™çº§ä½¿ç”¨æœ¬åœ°ç¼“å­˜è¿˜æ˜¯ç›´æ¥æŠ¥é”™ç»™ç”¨æˆ·ï¼Ÿï¼‰ã€‚ æ‰€ä»¥ï¼Œä¸åŒçš„é”™è¯¯ç±»å‹å†åŠ ä¸Šä¸åŒçš„é”™è¯¯å¤„ç†ä¼šå¯¼è‡´æˆ‘ä»¬ä»£ç ç»„ç»‡å±‚é¢ä¸Šçš„ä¸åŒï¼Œä»è€Œä¼šè®©æˆ‘ä»¬ä½¿ç”¨ä¸åŒçš„æ–¹å¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨é”™è¯¯ç è¿˜æ˜¯å¼‚å¸¸æ•æ‰ä¸»è¦è¿˜æ˜¯çœ‹æˆ‘ä»¬çš„é”™è¯¯å¤„ç†æµç¨‹ä»¥åŠä»£ç ç»„ç»‡æ€ä¹ˆå†™ä¼šæ›´æ¸…æ¥šã€‚ ","date":"2022-01-29","objectID":"/posts/common_tech/error/0.html/:1:0","tags":["é”™è¯¯å¤„ç†","é€šç”¨æŠ€æœ¯"],"title":"ç¨‹åºä¸­çš„é”™è¯¯å¤„ç†note","uri":"/posts/common_tech/error/0.html/"},{"categories":["é€šç”¨æŠ€æœ¯"],"content":"å¼‚æ­¥ç¼–ç¨‹åŠå®è·µ ç»Ÿä¸€åˆ†ç±»çš„é”™è¯¯å­—å…¸ã€‚æ— è®ºä½ æ˜¯ä½¿ç”¨é”™è¯¯ç è¿˜æ˜¯å¼‚å¸¸æ•æ‰ï¼Œéƒ½éœ€è¦è®¤çœŸå¹¶ç»Ÿä¸€åœ°åšå¥½é”™è¯¯çš„åˆ†ç±»ã€‚æœ€å¥½æ˜¯åœ¨ä¸€ä¸ªåœ°æ–¹å®šä¹‰ç›¸å…³çš„é”™è¯¯ã€‚æ¯”å¦‚ï¼ŒHTTP çš„ 4XX è¡¨ç¤ºå®¢æˆ·ç«¯æœ‰é—®é¢˜ï¼Œ5XX åˆ™è¡¨ç¤ºæœåŠ¡ç«¯æœ‰é—®é¢˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ è¦å»ºç«‹ä¸€ä¸ªé”™è¯¯å­—å…¸ã€‚ åŒç±»é”™è¯¯çš„å®šä¹‰æœ€å¥½æ˜¯å¯ä»¥æ‰©å±•çš„ã€‚è¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼Œè€Œå¯¹äºè¿™ä¸€ç‚¹ï¼Œé€šè¿‡é¢å‘å¯¹è±¡çš„ç»§æ‰¿æˆ–æ˜¯åƒ Go è¯­è¨€é‚£æ ·çš„æ¥å£å¤šæ€å¯ä»¥å¾ˆå¥½åœ°åšåˆ°ã€‚è¿™æ ·å¯ä»¥æ–¹ä¾¿åœ°é‡ç”¨å·²æœ‰çš„ä»£ç ã€‚ å®šä¹‰é”™è¯¯çš„ä¸¥é‡ç¨‹åº¦ã€‚æ¯”å¦‚ï¼ŒFatal è¡¨ç¤ºé‡å¤§é”™è¯¯ï¼ŒError è¡¨ç¤ºèµ„æºæˆ–éœ€æ±‚å¾—ä¸åˆ°æ»¡è¶³ï¼ŒWarning è¡¨ç¤ºå¹¶ä¸ä¸€å®šæ˜¯ä¸ªé”™è¯¯ä½†è¿˜æ˜¯éœ€è¦å¼•èµ·æ³¨æ„ï¼ŒInfo è¡¨ç¤ºä¸æ˜¯é”™è¯¯åªæ˜¯ä¸€ä¸ªä¿¡æ¯ï¼ŒDebug è¡¨ç¤ºè¿™æ˜¯ç»™å†…éƒ¨å¼€å‘äººå‘˜ç”¨äºè°ƒè¯•ç¨‹åºçš„ã€‚ é”™è¯¯æ—¥å¿—çš„è¾“å‡ºæœ€å¥½ä½¿ç”¨é”™è¯¯ç ï¼Œè€Œä¸æ˜¯é”™è¯¯ä¿¡æ¯ã€‚æ‰“å°é”™è¯¯æ—¥å¿—çš„æ—¶å€™ï¼Œåº”è¯¥ä½¿ç”¨ç»Ÿä¸€çš„æ ¼å¼ã€‚ä½†æœ€å¥½ä¸è¦ç”¨é”™è¯¯ä¿¡æ¯ï¼Œè€Œåº”ä½¿ç”¨ç›¸åº”çš„é”™è¯¯ç ï¼Œé”™è¯¯ç ä¸ä¸€å®šæ˜¯æ•°å­—ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªèƒ½ä»é”™è¯¯å­—å…¸é‡Œæ‰¾åˆ°çš„ä¸€ä¸ªå”¯ä¸€çš„å¯ä»¥è®©äººè¯»æ‡‚çš„å…³é”®å­—ã€‚è¿™æ ·ï¼Œä¼šéå¸¸æœ‰åˆ©äºæ—¥å¿—åˆ†æè½¯ä»¶è¿›è¡Œè‡ªåŠ¨åŒ–ç›‘æ§ï¼Œè€Œä¸æ˜¯è¦ä»é”™è¯¯ä¿¡æ¯ä¸­åšè¯­ä¹‰åˆ†æã€‚æ¯”å¦‚ï¼šHTTP çš„æ—¥å¿—ä¸­å°±ä¼šæœ‰ HTTP çš„è¿”å›ç ï¼Œå¦‚ï¼š404ã€‚ä½†æˆ‘æ›´æ¨èä½¿ç”¨åƒPageNotFoundè¿™æ ·çš„æ ‡è¯†ï¼Œè¿™æ ·äººå’Œæœºå™¨éƒ½å¾ˆå®¹æ˜“å¤„ç†ã€‚ å¿½ç•¥é”™è¯¯æœ€å¥½æœ‰æ—¥å¿—ã€‚ä¸ç„¶ä¼šç»™ç»´æŠ¤å¸¦æ¥å¾ˆå¤§çš„éº»çƒ¦ã€‚ å¯¹äºåŒä¸€ä¸ªåœ°æ–¹ä¸åœçš„æŠ¥é”™ï¼Œæœ€å¥½ä¸è¦éƒ½æ‰“åˆ°æ—¥å¿—é‡Œã€‚ä¸ç„¶è¿™æ ·ä¼šå¯¼è‡´å…¶å®ƒæ—¥å¿—è¢«æ·¹æ²¡äº†ï¼Œä¹Ÿä¼šå¯¼è‡´æ—¥å¿—æ–‡ä»¶å¤ªå¤§ã€‚æœ€å¥½çš„å®è·µæ˜¯ï¼Œæ‰“å‡ºä¸€ä¸ªé”™è¯¯ä»¥åŠå‡ºç°çš„æ¬¡æ•°ã€‚ ä¸è¦ç”¨é”™è¯¯å¤„ç†é€»è¾‘æ¥å¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸è¦ä½¿ç”¨å¼‚å¸¸æ•æ‰è¿™æ ·çš„æ–¹å¼æ¥å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œè€Œæ˜¯åº”è¯¥ç”¨æ¡ä»¶åˆ¤æ–­ã€‚å¦‚æœä¸€ä¸ªé€»è¾‘æ§åˆ¶å¯ä»¥ç”¨ if - else æ¸…æ¥šåœ°è¡¨è¾¾ï¼Œé‚£å°±ä¸å»ºè®®ä½¿ç”¨å¼‚å¸¸æ–¹å¼å¤„ç†ã€‚å¼‚å¸¸æ•æ‰æ˜¯ç”¨æ¥å¤„ç†ä¸æœŸæœ›å‘ç”Ÿçš„äº‹æƒ…ï¼Œè€Œé”™è¯¯ç åˆ™ç”¨æ¥å¤„ç†å¯èƒ½ä¼šå‘ç”Ÿçš„äº‹ã€‚ å¯¹äºåŒç±»çš„é”™è¯¯å¤„ç†ï¼Œç”¨ä¸€æ ·çš„æ¨¡å¼ã€‚æ¯”å¦‚ï¼Œå¯¹äºnullå¯¹è±¡çš„é”™è¯¯ï¼Œè¦ä¹ˆéƒ½ç”¨è¿”å› nullï¼ŒåŠ ä¸Šæ¡ä»¶æ£€æŸ¥çš„æ¨¡å¼ï¼Œè¦ä¹ˆéƒ½ç”¨æŠ› NullPointerException çš„æ–¹å¼å¤„ç†ã€‚ä¸è¦æ··ç”¨ï¼Œè¿™æ ·æœ‰åŠ©äºä»£ç è§„èŒƒã€‚ å°½å¯èƒ½åœ¨é”™è¯¯å‘ç”Ÿçš„åœ°æ–¹å¤„ç†é”™è¯¯ã€‚å› ä¸ºè¿™æ ·ä¼šè®©è°ƒç”¨è€…å˜å¾—æ›´ç®€å•ã€‚ å‘ä¸Šå°½å¯èƒ½åœ°è¿”å›åŸå§‹çš„é”™è¯¯ã€‚å¦‚æœä¸€å®šè¦æŠŠé”™è¯¯è¿”å›åˆ°æ›´é«˜å±‚å»å¤„ç†ï¼Œé‚£ä¹ˆï¼Œåº”è¯¥è¿”å›åŸå§‹çš„é”™è¯¯ï¼Œè€Œä¸æ˜¯é‡æ–°å‘æ˜ä¸€ä¸ªé”™è¯¯ã€‚ å¤„ç†é”™è¯¯æ—¶ï¼Œæ€»æ˜¯è¦æ¸…ç†å·²åˆ†é…çš„èµ„æºã€‚è¿™ç‚¹éå¸¸å…³é”®ï¼Œä½¿ç”¨ RAII æŠ€æœ¯ï¼Œæˆ–æ˜¯ try-catch-finallyï¼Œæˆ–æ˜¯ Go çš„ defer éƒ½å¯ä»¥å®¹æ˜“åœ°åšåˆ°ã€‚ ä¸æ¨èåœ¨å¾ªç¯ä½“é‡Œå¤„ç†é”™è¯¯ã€‚è¿™é‡Œè¯´çš„æ˜¯ try-catchï¼Œç»å¤§å¤šæ•°çš„æƒ…å†µä½ ä¸éœ€è¦è¿™æ ·åšã€‚æœ€å¥½æŠŠæ•´ä¸ªå¾ªç¯ä½“å¤–æ”¾åœ¨ try è¯­å¥å—å†…ï¼Œè€Œåœ¨å¤–é¢åš catchã€‚ ä¸è¦æŠŠå¤§é‡çš„ä»£ç éƒ½æ”¾åœ¨ä¸€ä¸ª try è¯­å¥å—å†…ã€‚ä¸€ä¸ª try è¯­å¥å—å†…çš„è¯­å¥åº”è¯¥æ˜¯å®Œæˆä¸€ä¸ªç®€å•å•ä¸€çš„äº‹æƒ…ã€‚ ä¸ºä½ çš„é”™è¯¯å®šä¹‰æä¾›æ¸…æ¥šçš„æ–‡æ¡£ä»¥åŠæ¯ç§é”™è¯¯çš„ä»£ç ç¤ºä¾‹ã€‚å¦‚æœä½ æ˜¯åš RESTful API æ–¹é¢çš„ï¼Œä½¿ç”¨ Swagger ä¼šå¸®ä½ å¾ˆå®¹æ˜“æå®šè¿™ä¸ªäº‹ã€‚ å¯¹äºå¼‚æ­¥çš„æ–¹å¼ï¼Œæ¨èä½¿ç”¨ Promise æ¨¡å¼å¤„ç†é”™è¯¯ã€‚å¯¹äºè¿™ä¸€ç‚¹ï¼ŒJavaScript ä¸­æœ‰å¾ˆå¥½çš„å®è·µã€‚ å¯¹äºåˆ†å¸ƒå¼çš„ç³»ç»Ÿï¼Œæ¨èä½¿ç”¨ APM ç›¸å…³çš„è½¯ä»¶ã€‚å°¤å…¶æ˜¯ä½¿ç”¨ Zipkin è¿™æ ·çš„æœåŠ¡è°ƒç”¨è·Ÿè¸ªçš„åˆ†ææ¥å…³è”é”™è¯¯ã€‚ ","date":"2022-01-29","objectID":"/posts/common_tech/error/0.html/:2:0","tags":["é”™è¯¯å¤„ç†","é€šç”¨æŠ€æœ¯"],"title":"ç¨‹åºä¸­çš„é”™è¯¯å¤„ç†note","uri":"/posts/common_tech/error/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"å¼¹åŠ›è®¾è®¡note ä»¥ä¸‹ä¸ºå·¦è€³å¬é£ è®°å½•çš„ç¬”è®°ã€‚ è®¤è¯†æ•…éšœå’Œå¼¹åŠ›è®¾è®¡ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/6.html/:0:0","tags":["åˆ†å¸ƒå¼æ¶æ„","å¼¹åŠ›è®¾è®¡","note"],"title":"å¼¹åŠ›è®¾è®¡note","uri":"/posts/distributed_structure/structure/6.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"ç³»ç»Ÿå¯ç”¨æ€§æµ‹é‡ åˆ†å¸ƒå¼ç³»ç»Ÿçš„å®¹é”™è®¾è®¡ï¼Œåœ¨è‹±æ–‡ä¸­åˆå«Resiliencyï¼ˆå¼¹åŠ›ï¼‰ï¼Œå³ç³»ç»Ÿåœ¨ä¸å¥åº·ç”šè‡³å‡ºé”™çš„æƒ…å†µä¸‹èƒ½å¤Ÿæ‰¿å—ä½æˆ–è€…èƒ½å¤Ÿæ¢å¤çš„èƒ½åŠ›ã€‚ ç³»ç»Ÿå¯ç”¨æ€§å…¬å¼ï¼š $$ Avaliability = \\frac{MTTF}{MTTF+MTTR} $$ MTTF(Mean TIme To Failure)ï¼šå¹³å‡æ•…éšœå‰çš„æ—¶é—´ï¼Œå³ç³»ç»Ÿå¹³å‡èƒ½å¤Ÿæ­£å¸¸è¿è¡Œå¤šé•¿æ—¶é—´æ‰å‘ç”Ÿä¸€æ¬¡æ•…éšœã€‚ç³»ç»Ÿçš„å¯é æ€§è¶Šé«˜ï¼ŒMTTFè¶Šé•¿ã€‚ MTTR(Mean Time To Recovery)ï¼šå¹³å‡ä¿®å¤æ—¶é—´ï¼Œå³ä»æ•…éšœå‡ºç°åˆ°æ•…éšœä¿®å¤çš„è¿™æ®µæ—¶é—´ã€‚ æ ¹æ®å…¬å¼æ¥è¯´ï¼Œå¦‚æœè¦æé«˜å¯é æ€§ï¼Œè¦ä¹ˆæé«˜ç³»ç»Ÿçš„æ— æ•…éšœæ—¶é—´ï¼Œè¦ä¹ˆå‡å°‘ç³»ç»Ÿçš„æ•…éšœæ¢å¤æ—¶é—´ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/6.html/:1:0","tags":["åˆ†å¸ƒå¼æ¶æ„","å¼¹åŠ›è®¾è®¡","note"],"title":"å¼¹åŠ›è®¾è®¡note","uri":"/posts/distributed_structure/structure/6.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"æ•…éšœåŸå›  å·¥ä¸šç•Œä¸­ä¼šæŠŠæœåŠ¡ä¸å¯ç”¨çš„å› ç´ åˆ†æˆä¸¤ç§ï¼šä¸€ç§æ˜¯æœ‰è®¡åˆ’çš„ï¼Œä¸€ç§æ˜¯æ— è®¡åˆ’çš„ã€‚ æ— è®¡åˆ’çš„å®•æœºåŸå›  ç³»ç»Ÿçº§æ•…éšœï¼ŒåŒ…æ‹¬ä¸»æœºã€æ“ä½œç³»ç»Ÿã€ä¸­é—´ä»¶ã€æ•°æ®åº“ã€ç½‘ç»œã€ç”µæºä»¥åŠå¤–å›´è®¾å¤‡ï¼› æ•°æ®å’Œä¸­ä»‹çš„æ•…éšœï¼ŒåŒ…æ‹¬äººå‘˜æ“ä½œã€ç¡¬ç›˜æ•…éšœã€æ•°æ®æ··ä¹±ï¼› è‡ªç„¶ç¾å®³ã€è®¤ä¸ºç ´åã€ä»¥åŠä¾›ç”µé—®é¢˜ç­‰ï¼› æœ‰è®¡åˆ’çš„å®•æœºåŸå›  æ—¥å¸¸ä»»åŠ¡ï¼šå¤‡ä»½å’Œå®¹é‡è§„åˆ’ï¼Œç”¨æˆ·å’Œå®‰å…¨ç®¡ç†ï¼Œåå°æ‰¹å¤„ç†åº”ç”¨ï¼› è¿ç»´ç›¸å…³ï¼šæ•°æ®åº“ç»´æŠ¤ã€åº”ç”¨ç»´æŠ¤ã€ä¸­é—´ä»¶ç»´æŠ¤ã€æ“ä½œç³»ç»Ÿç»´æŠ¤ã€ç½‘ç»œç»´æŠ¤ï¼› å‡çº§ç›¸å…³ï¼šæ•°æ®åº“ã€åº”ç”¨ã€ä¸­é—´ä»¶ã€æ“ä½œç³»ç»Ÿã€ç½‘ç»œï¼ŒåŒ…æ‹¬ç¡¬ä»¶å‡çº§ï¼› æ€»ç»“æ¥è¯´ï¼Œä¸€å…±æœ‰ä»¥ä¸‹å‡ ç±»é—®é¢˜ï¼š ç½‘ç»œé—®é¢˜ï¼› æ€§èƒ½é—®é¢˜ï¼› å®‰å…¨é—®é¢˜ï¼› è¿ç»´é—®é¢˜ï¼› ç®¡ç†é—®é¢˜ï¼› ç¡¬ä»¶é—®é¢˜ï¼› ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/6.html/:2:0","tags":["åˆ†å¸ƒå¼æ¶æ„","å¼¹åŠ›è®¾è®¡","note"],"title":"å¼¹åŠ›è®¾è®¡note","uri":"/posts/distributed_structure/structure/6.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"æ•…éšœä¸å¯é¿å… æˆ‘ä»¬éœ€è¦æ„è¯†åˆ°ï¼š æ•…éšœæ˜¯æ­£å¸¸çš„ï¼Œè€Œä¸”æ˜¯å¸¸è§çš„ï¼› æ•…éšœæ˜¯ä¸å¯é¢„æµ‹çªå‘çš„ï¼Œè€Œä¸”ç›¸å½“éš¾ç¼ ï¼› ä¸è¦å°è¯•å»é¿å…æ•…éšœï¼Œè€Œæ˜¯è¦æŠŠå¤„ç†æ•…éšœçš„ä»£ç å½“æˆæ­£å¸¸çš„åŠŸèƒ½åšåœ¨æ¶æ„é‡Œå†™åœ¨ä»£ç é‡Œã€‚ å¼¹åŠ›è®¾è®¡å°±æ˜¯è¦é™ä½MTTRå³æ•…éšœä¿®å¤æ—¶é—´ï¼š ä¸€æ–¹é¢ï¼Œåœ¨å¥½çš„æƒ…å†µä¸‹ï¼Œè¯¥è®¾è®¡å¯¹äºæˆ‘ä»¬çš„ç”¨æˆ·å’Œå†…éƒ¨è¿ç»´æ¥è¯´æ˜¯å®Œå…¨é€æ˜çš„ï¼Œç³»ç»Ÿè‡ªåŠ¨ä¿®å¤ä¸éœ€è¦äººçš„å¹²é¢„ï¼› å¦ä¸€æ–¹é¢ï¼Œè‹¥ä¿®å¤ä¸äº†ï¼Œç³»ç»Ÿèƒ½å¤Ÿè‡ªæˆ‘ä¿æŠ¤ï¼Œè€Œä¸è®©äº‹æ€å˜å¾—æ›´ç³Ÿç³•ï¼› éš”ç¦»è®¾è®¡ åœ¨åˆ†å¸ƒå¼è½¯ä»¶æ¶æ„ä¸­æˆ‘ä»¬éœ€é€šè¿‡éš”ç¦»è®¾è®¡æ¥è®©å‡ºç°çš„æ•…éšœå¾—åˆ°éš”ç¦»ï¼Œä»è€Œä¸è®©æ•…éšœâ€œè”“å»¶â€œã€‚ ä¸€èˆ¬æ¥è¯´å¯¹äºç³»ç»Ÿçš„åˆ†ç¦»æœ‰ä¸¤ç§æ–¹å¼ï¼š ä»¥æœåŠ¡çš„ç§ç±»æ¥åšåˆ†ç¦»ï¼› ä»¥ç”¨æˆ·æ¥åšåˆ†ç¦»ï¼› ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/6.html/:3:0","tags":["åˆ†å¸ƒå¼æ¶æ„","å¼¹åŠ›è®¾è®¡","note"],"title":"å¼¹åŠ›è®¾è®¡note","uri":"/posts/distributed_structure/structure/6.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"æŒ‰æœåŠ¡çš„ç§ç±»æ¥åšåˆ†ç¦» ä¸€èˆ¬æœ€å¸¸è§çš„æ¶æ„å°±æ˜¯å°†æ¯ä¸ªæœåŠ¡å®ä¾‹åŒ…æ‹¬æ¥å…¥å±‚ã€åº”ç”¨å±‚ã€æ•°æ®å±‚éƒ½å®Œå…¨éš”ç¦»å¼€æ¥ï¼Œè¿™ç§éš”ç¦»ä¸‹åœ¨ç‰©ç†æ¥è¯´ä¸€ä¸ªæ¿å—çš„æ•…éšœå°±ä¸ä¼šå½±å“å¦ä¸€ä¸ªæ¿å—ã€‚ä½†æ˜¯ä¹Ÿä¼šå­˜åœ¨ä»¥ä¸‹çš„é—®é¢˜ï¼š è‹¥éœ€è¦è°ƒç”¨å…¶ä»–å®ä¾‹çš„æœåŠ¡å’Œæ•°æ®ï¼Œä¸€æ—¦åŒæ—¶è°ƒç”¨æˆ–è€…è°ƒç”¨è¿‡å¤šå°±ä¸å¯é¿å…å°±ä¼šé™ä½æ€§èƒ½ï¼ˆå“åº”æ—¶é—´ï¼Œè€Œä¸æ˜¯ååé‡ï¼‰ï¼› è‹¥è¦é™æ•°æ®éƒ½æŠ½å–åˆ°ä¸€ä¸ªæ•°æ®ä»“åº“ä¸­è¿›è¡Œè®¡ç®—ï¼Œä¹Ÿä¼šå¢åŠ æ•°æ®åˆå¹¶çš„å¤æ‚åº¦ï¼› ä¸šåŠ¡é€»è¾‘è‹¥éœ€è¦è·¨æ¿å—åˆ™æ•…éšœä¼šå¯¼è‡´æµç¨‹æ— æ³•è¿›è¡Œï¼Œä¸¥é‡ä¼šå¯¼è‡´æ•´ä½“ä¸šåŠ¡æ•…éšœï¼› è·¨æ¿å—äº¤äº’å¤æ‚æƒ…å†µä¸‹å°±éœ€è¦ç±»ä¼¼äºæ¶ˆæ¯é˜Ÿåˆ—ä¸­é—´ä»¶æ¥äº¤äº’å„ä¸ªæ¿å—çš„æ•°æ®å’Œä¿¡æ¯äº¤æ¢ï¼› å¤šä¸ªæ¿å—å¯èƒ½ä¹Ÿä¼šå‡ºç°åˆ†å¸ƒå¼äº‹åŠ¡çš„é—®é¢˜ï¼› ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/6.html/:4:0","tags":["åˆ†å¸ƒå¼æ¶æ„","å¼¹åŠ›è®¾è®¡","note"],"title":"å¼¹åŠ›è®¾è®¡note","uri":"/posts/distributed_structure/structure/6.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"æŒ‰ç”¨æˆ·çš„è¯·æ±‚æ¥åšåˆ†ç¦» å°†ç”¨æˆ·åˆ†æˆä¸åŒçš„ç»„ï¼Œå¹¶æŠŠåç«¯çš„åŒä¸€ä¸ªæœåŠ¡æ ¹æ®è¿™äº›ä¸åŒçš„ç»„åˆ†æˆä¸åŒçš„å®ä¾‹ï¼Œè¿™æ ·è®©åŒä¸€ä¸ªæœåŠ¡å¯¹äºä¸åŒçš„ç”¨æˆ·è¿›è¡Œå†—ä½™å’Œéš”ç¦»ï¼Œå³æ‰€è°“çš„â€œå¤šç§Ÿæˆ·â€æ¨¡å¼ã€‚ å¯¹äºâ€œå¤šç§Ÿæˆ·â€æ¶æ„æ¥è¯´ï¼Œä¼šå¼•å…¥ç³»ç»Ÿè®¾è®¡çš„å¤æ‚åº¦ï¼Œä¸€æ–¹é¢è‹¥å®Œå…¨éš”ç¦»åˆ™èµ„æºä½¿ç”¨å°±ä¼šè¾ƒä¸ºæµªè´¹ï¼Œè‹¥å…±äº«çš„è¯åˆ™ä¼šå¯¼è‡´ç¨‹åºè®¾è®¡çš„å¤æ‚åº¦å¢åŠ ã€‚ é€šå¸¸æ¥è¯´å¤šç§Ÿæˆ·çš„æ–¹æ¡ˆæœ‰ä»¥ä¸‹ä¸‰ç§ï¼š å®Œå…¨ç‹¬ç«‹çš„è®¾è®¡ã€‚æ¯ä¸ªç§Ÿæˆ·æœ‰è‡ªå·±å®Œå…¨ç‹¬ç«‹çš„æœåŠ¡å’Œæ•°æ®ï¼› ç‹¬ç«‹çš„æ•°æ®åˆ†åŒºï¼Œå…±äº«çš„æœåŠ¡ã€‚å¤šç§Ÿæˆ·çš„æœåŠ¡æ˜¯å…±äº«çš„ï¼Œä½†æ•°æ®æ˜¯åˆ†å¼€éš”ç¦»çš„ï¼› å…±äº«çš„æœåŠ¡ï¼Œå…±äº«çš„æ•°æ®åˆ†åŒºã€‚æ¯ä¸ªç§Ÿæˆ·çš„æ•°æ®å’ŒæœåŠ¡éƒ½æ˜¯å…±äº«çš„ï¼› ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/6.html/:5:0","tags":["åˆ†å¸ƒå¼æ¶æ„","å¼¹åŠ›è®¾è®¡","note"],"title":"å¼¹åŠ›è®¾è®¡note","uri":"/posts/distributed_structure/structure/6.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"éš”ç¦»è®¾è®¡çš„é‡ç‚¹ åšå¥½éš”ç¦»è®¾è®¡ï¼Œæˆ‘ä»¬éœ€è¦æœ‰å¦‚ä¸‹ä¸€äº›è®¾è®¡è€ƒé‡ï¼š è®¤çœŸåˆ†æä¸šåŠ¡éœ€æ±‚å’Œç³»ç»Ÿåˆ†æï¼Œå®šä¹‰å¥½éš”ç¦»ä¸šåŠ¡çš„å¤§å°å’Œç²’åº¦ï¼› éœ€è¦è€ƒè™‘ç³»ç»Ÿçš„å¤æ‚åº¦ã€æˆæœ¬ã€æ€§èƒ½ã€èµ„æºä½¿ç”¨çš„é—®é¢˜ï¼Œæ‰¾åˆ°åˆé€‚çš„å‡è¡¡æ–¹æ¡ˆæˆ–æ˜¯åˆ†å¸ƒå®æ–½çš„æ–¹æ¡ˆï¼› éš”ç¦»æ¨¡å¼éœ€è¦é…ç½®ä¸€äº›é«˜å¯ç”¨ã€é‡è¯•ã€å¼‚æ­¥ã€æ¶ˆæ¯ä¸­é—´ä»¶ã€æµæ§ã€ç†”æ–­ç­‰è®¾è®¡æ¨¡å¼çš„æ–¹å¼é…å¥—ä½¿ç”¨ï¼› åˆ†å¸ƒå¼ç³»ç»Ÿä¸­è¿ç»´å¤æ‚åº¦çš„æå‡éœ€è¦è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·å’Œç³»ç»Ÿï¼› æœåŠ¡çš„ç›‘æ§ç³»ç»Ÿï¼› å¼‚æ­¥é€šè®¯è®¾è®¡ é€šè®¯ä¸€èˆ¬æ¥è¯´åˆ†åŒæ­¥å’Œå¼‚æ­¥ä¸¤ç§ã€‚ åŒæ­¥è°ƒç”¨è™½ç„¶è®©ç³»ç»Ÿé—´åªè€¦åˆäºæ¥å£ï¼Œä¸”å®æ–½æ€§ä¹Ÿä¼šæ¯”å¼‚æ­¥è°ƒç”¨é«˜ï¼Œä½†ä¹Ÿæœ‰ä»¥ä¸‹é—®é¢˜ï¼š æ•´ä¸ªåŒæ­¥è°ƒç”¨é“¾çš„æ€§èƒ½ä¼šç”±æœ€æ…¢çš„é‚£ä¸ªæœåŠ¡æ‰€å†³å®šï¼› åŒæ­¥è°ƒç”¨ä¼šå¯¼è‡´æ‰€æœ‰å‚ä¸æ–¹æ‹¥æœ‰ç›¸åŒçš„ç­‰å¾…æ—¶é—´ï¼› åŒæ­¥è°ƒç”¨åªèƒ½æ˜¯ä¸€å¯¹ä¸€çš„æƒ…å†µï¼Œè¾ƒéš¾åšåˆ°ä¸€å¯¹å¤šçš„é€šè®¯æ–¹å¼ï¼› åŒæ­¥è°ƒç”¨é“¾åªè¦æœ‰ä¸€ä¸ªåœ°æ–¹å‡ºç°æ•…éšœå°±ä¼šå¯¼è‡´æ•´æ¡é“¾å‡ºç°æ•…éšœï¼› ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/6.html/:6:0","tags":["åˆ†å¸ƒå¼æ¶æ„","å¼¹åŠ›è®¾è®¡","note"],"title":"å¼¹åŠ›è®¾è®¡note","uri":"/posts/distributed_structure/structure/6.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"å¼‚æ­¥é€šè®¯çš„ä¸‰ç§æ–¹å¼ è¯·æ±‚å“åº”å¼ é€šè¿‡è®¢é˜…çš„æ–¹å¼ é€šè¿‡brokerçš„æ–¹å¼ åˆ†å¸ƒå¼ç³»ç»Ÿçš„æœåŠ¡è®¾è®¡æ˜¯éœ€è¦å‘æ— çŠ¶æ€æœåŠ¡åŠªåŠ›çš„ï¼Œå…¶ä¸­ç¬¬ä¸€ç§æ–¹å¼æœåŠ¡æ˜¯æœ‰çŠ¶æ€çš„ï¼Œè€Œå…¶ä»–æ–¹å¼å¯è®©æœåŠ¡é—´çš„ä¾èµ–åªæœ‰äº‹ä»¶ï¼Œå³äº‹ä»¶é©±åŠ¨æ¶æ„ã€‚ äº‹ä»¶é©±åŠ¨æ–¹å¼çš„ä¼˜åŠ¿æœ‰å¦‚ä¸‹ï¼š æœåŠ¡é—´æ˜¯å¹³ç­‰çš„å³æ— ä¾èµ–ä¸”æ¯ä¸ªæœåŠ¡é«˜åº¦å¯å´‡å‹‡å¹¶å¯è¢«æ›¿æ¢çš„ï¼› æœåŠ¡çš„å¼€å‘æµ‹è¯•è¿ç»´ä»¥åŠæ•…éšœå¤„ç†éƒ½æ˜¯é«˜åº¦éš”ç¦»çš„ï¼› æœåŠ¡ä»¶é€šè¿‡äº‹ä»¶å…³è”å³ä¸ä¼šå‡ºç°ç›¸äº’é˜»å¡çš„æƒ…å†µï¼› æœåŠ¡ä¹‹é—´å¢åŠ ä¸€äº›Adapterè¾ƒä¸ºå®¹æ˜“ï¼› å„ä¸ªæœåŠ¡å¯æŒ‰è‡ªå·±çš„å¤„ç†é€Ÿåº¦è¿›è¡Œï¼› ä½†äº‹ä»¶é©±åŠ¨çš„æ¶æ„ä¹Ÿæœ‰ä¸€äº›ä¸å¥½çš„åœ°æ–¹ï¼š ä¸šåŠ¡æµç¨‹ä¸å†é‚£ä¹ˆæ˜æ˜¾ä¸”è¾ƒéš¾ç®¡ç†ï¼Œæ•´ä¸ªæ¶æ„å˜å¾—å¤æ‚ï¼› äº‹ä»¶å¯èƒ½ä¼šä¹±åºï¼Œéœ€è¦å¾ˆå¥½åœ°ç®¡ç†ä¸€ä¸ªçŠ¶æ€æœºçš„æ§åˆ¶æ¥è§£å†³ï¼› äº‹ä»¶å¤„ç†å˜å¾—å¤æ‚ï¼Œéœ€è¦ä¿è¯ä¸€è‡´æ€§ç­‰é—®é¢˜ï¼› ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/6.html/:7:0","tags":["åˆ†å¸ƒå¼æ¶æ„","å¼¹åŠ›è®¾è®¡","note"],"title":"å¼¹åŠ›è®¾è®¡note","uri":"/posts/distributed_structure/structure/6.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"å¼‚æ­¥é€šè®¯çš„è®¾è®¡é‡ç‚¹ é¦–å…ˆæˆ‘ä»¬è¦æ˜ç™½ä¸ºä»€ä¹ˆè¦å¼‚æ­¥é€šè®¯çš„åŸå› ï¼š è§£è€¦æœåŠ¡é—´çš„ä¾èµ–ï¼Œæ¯”å¦‚é€šè¿‡Brokeræœºåˆ¶ï¼› è§£è€¦çš„ç›®çš„æ˜¯è®©å„ä¸ªæœåŠ¡çš„éš”ç¦»æ€§æ›´å¥½ï¼Œå¦‚æ•…éšœéš”ç¦»ç­‰ï¼› ååé‡å˜å¾—å‡åŒ€å³å¯è¾¾åˆ°å‰Šå³°çš„ç›®çš„ï¼› æœåŠ¡ç›¸å¯¹ç‹¬ç«‹ä¼šåœ¨è¿ç»´ç®¡ç†ä¸Šé¢è¾ƒä¸ºå®¹æ˜“ï¼› è®¾è®¡å¼‚æ­¥é€šä¿¡çš„æ—¶å€™éœ€è¦æ³¨æ„ä»¥ä¸‹äº‹å®œï¼š ç”¨äºå¼‚æ­¥é€šè®¯çš„ä¸­é—´ä»¶éœ€è¦è®¾è®¡æˆé«˜å¯ç”¨ä¸”ä¸ä¸¢æ¶ˆæ¯çš„ï¼Œä¹Ÿéœ€è¦æ³¨æ„æ¶ˆæ¯çš„é¡ºåºé—®é¢˜ï¼› å¼‚æ­¥é€šè®¯å¯¼è‡´ä¸šåŠ¡å¤„ç†æµç¨‹ä¸é‚£ä¹ˆç›´è§‚ï¼Œéœ€è¦æœ‰ç›¸å…³çš„æœåŠ¡æ¶ˆæ¯è·Ÿè¸ªæœºåˆ¶ï¼Œå¦åˆ™å‡ºç°é—®é¢˜åä¸å®¹æ˜“è°ƒè¯•ï¼› æœåŠ¡ä»¶åªé€šè¿‡æ¶ˆæ¯äº¤äº’ï¼Œä¸šåŠ¡çŠ¶æ€æœ€å¥½ç”±ä¸€ä¸ªæ€»æ§æ–¹æ¥ç®¡ç†ç»´æŠ¤æ•´ä¸ªä¸šåŠ¡æµç¨‹çš„çŠ¶æ€å˜è¿é€»è¾‘ï¼› æ¶ˆæ¯ä¼ é€’ä¸­éœ€è¦å¤„ç†æ–¹æœ‰å¹‚ç­‰çš„å¤„ç†ï¼› ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/6.html/:8:0","tags":["åˆ†å¸ƒå¼æ¶æ„","å¼¹åŠ›è®¾è®¡","note"],"title":"å¼¹åŠ›è®¾è®¡note","uri":"/posts/distributed_structure/structure/6.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"åˆ†å¸ƒå¼ç†”æ–­æ–¹æ¡ˆnote ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/7.html/:0:0","tags":["åˆ†å¸ƒå¼æ¶æ„","ç†”æ–­"],"title":"åˆ†å¸ƒå¼ç†”æ–­æ–¹æ¡ˆ","uri":"/posts/distributed_structure/structure/7.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"å¾®æœåŠ¡å®¹é”™æœºåˆ¶ å¾®æœåŠ¡æ¶æ„ä¸­å› å„ä¸ªæœåŠ¡ä¹‹é—´çš„ä¾èµ–å’Œè°ƒç”¨å…³ç³»è¾ƒä¸ºå¤æ‚ï¼Œå½“ä¸‹æ¸¸çš„æœåŠ¡å‡ºç°é—®é¢˜æ—¶å°±å¯èƒ½ä¼šé€ æˆä¸Šæ¸¸çš„é›ªå´©æ•ˆåº”ã€‚ è§£å†³é›ªå´©æ•ˆåº”å°±éœ€è¦å»ºç«‹æœ‰æ•ˆçš„æœåŠ¡å®¹é”™æœºåˆ¶ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªæ–¹å‘è€ƒè™‘ï¼š æœåŠ¡å†—ä½™ ç†”æ–­é™æµ å…¶ä¸­æœåŠ¡å†—ä½™å°±éœ€è¦å»ºç«‹é›†ç¾¤ï¼Œä¾æ‰˜è´Ÿè½½å‡è¡¡å’Œé‡è¯•æœºåˆ¶ï¼Œä¿è¯æœåŠ¡å¯ç”¨æ€§ï¼Œå½“æœåŠ¡å‡ºé”™æ—¶å¯ä»¥è®¾ç½®ä»¥ä¸‹ä¸åŒçš„ç­–ç•¥ï¼š FailOver å¤±è´¥è½¬ç§» FailBack å¤±è´¥é€šçŸ¥ FailSafe å¤±è´¥å®‰å…¨ FailFast å¿«é€Ÿå¤±è´¥ è€Œé™¤äº†æœåŠ¡å†—ä½™ä¹‹å¤–å°±æ˜¯æœåŠ¡ç†”æ–­å’Œé™æµçš„ä¿æŠ¤æœºåˆ¶ï¼Œç†”æ–­æ˜¯é¢„é˜²ä¸‹æ¸¸æœåŠ¡å‡ºç°æ•…éšœæ—¶é˜»æ–­ä¸‹æ¸¸è°ƒç”¨ï¼Œé™æµæ˜¯é˜²æ­¢ä¸Šæ¸¸æœåŠ¡è°ƒç”¨é‡è¿‡å¤§å¯¼è‡´å½“å‰æœåŠ¡æˆ–ä¸‹æ¸¸æœåŠ¡è¢«å‹å®ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/7.html/:1:0","tags":["åˆ†å¸ƒå¼æ¶æ„","ç†”æ–­"],"title":"åˆ†å¸ƒå¼ç†”æ–­æ–¹æ¡ˆ","uri":"/posts/distributed_structure/structure/7.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"ç†”æ–­å™¨è®¾è®¡æ–¹æ¡ˆ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/7.html/:2:0","tags":["åˆ†å¸ƒå¼æ¶æ„","ç†”æ–­"],"title":"åˆ†å¸ƒå¼ç†”æ–­æ–¹æ¡ˆ","uri":"/posts/distributed_structure/structure/7.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"æ ¸å¿ƒæ€æƒ³ æ ¸å¿ƒåœ¨äºAOPè¿›è¡Œè¯·æ±‚æ‹¦æˆªåˆ¤æ–­æ˜¯å¦ç†”æ–­ï¼Œæ ¹æ®ç­–ç•¥è¿›è¡Œç†”æ–­çŠ¶æ€è½¬ç§»ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/7.html/:2:1","tags":["åˆ†å¸ƒå¼æ¶æ„","ç†”æ–­"],"title":"åˆ†å¸ƒå¼ç†”æ–­æ–¹æ¡ˆ","uri":"/posts/distributed_structure/structure/7.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"è®¾è®¡æ€æƒ³ æ ¹æ®æœåŠ¡å‘ç°å’ŒæœåŠ¡è°ƒç”¨çš„ä¸åŒæ–¹å¼ï¼Œç›®å‰ä¸»è¦æœ‰ä¸‰ç§æ–¹æ¡ˆï¼š ç›´è¿æ¨¡å¼ æœåŠ¡Aç›´æ¥è®¿é—®æœåŠ¡Bï¼Œåœ¨è®¿é—®è¿‡ç¨‹ä¸­åŠ å…¥ç†”æ–­æœºåˆ¶ï¼› ä»£ç†æ¨¡å¼ é€šè¿‡é›†ä¸­ä»£ç†æ–¹å¼ï¼Œå¦‚åˆ©ç”¨ç½‘å…³å±‚çš„ä»£ç†è¿›è¡Œç†”æ–­ç­–ç•¥ï¼Œä¸ä¼šä¾µå…¥æœåŠ¡æœ¬èº«ï¼› æœåŠ¡ç½‘æ ¼æ¨¡å¼ï¼ˆService Meshï¼‰ ä¹Ÿè¢«ç§°ä¸ºè¾¹è½¦æ¨¡å¼ï¼ˆSide Carï¼‰ï¼Œç±»ä¼¼äºåœ¨æœåŠ¡æœ¬èº«æ‰€åœ¨æœºå™¨èŠ‚ç‚¹å±‚é¢åŠ å…¥ä»£ç†ï¼Œå¯ä»¥ç†è§£ä¸ºå°†æœåŠ¡æ²»ç†æ§åˆ¶ç²’åº¦ç»†åŒ–ï¼› ç›´è¿æ¨¡å¼ è¯¥æ¨¡å¼ä¸‹å…·ä½“åˆ°æœåŠ¡è®¿é—®æµç¨‹ä¸­æœ€ä¸ºç›´æ¥ï¼Œå³åœ¨ä»£ç å±‚é¢åŠ å…¥ç†”æ–­åˆ¤æ–­ï¼ŒåŸºäºAOPæ¨¡å¼éœ€è¦ç»è¿‡BeforeCallã€Callã€AfterCallçš„æ“ä½œæµç¨‹ã€‚ å…·ä½“æµç¨‹å¯ä»¥å‚è€ƒä¸‹å›¾ï¼š ä»£ç†æ¨¡å¼ è¯¥æ¨¡å¼ä¸‹ä¸€èˆ¬å¼•å…¥ç½‘å…³è¿›è¡Œç»Ÿä¸€ç†”æ–­é™æµå¤„ç†åå†è¿›è¡Œè½¬å‘åˆ°è¾¾å…·ä½“æœåŠ¡ï¼Œå¯ä»¥ä¸ºå¼‚æ­¥ä¹Ÿå¯ä»¥ä¸ºåŒæ­¥ï¼Œå…·ä½“æ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯ã€‚ åœ¨å¼‚æ­¥æ¨¡å¼ä¸‹éœ€è¦æ³¨æ„ç†”æ–­çŠ¶æ€åˆ¤æ–­åˆ‡æ¢æ—¶çš„å»¶æ—¶ï¼Œä¼˜åŠ¿åœ¨äºå¯¹è¯·æ±‚æ€§èƒ½æ— å½±å“ã€‚ åœ¨è¿™é‡Œå¯ä»¥å‚è€ƒä¸‹å›¾æ¶æ„çš„æ–¹æ¡ˆï¼Œé‡ç‚¹æ˜¯åˆ©ç”¨Kafkaè¿›è¡Œå¼‚æ­¥æ—¥å¿—æ”¶é›†ï¼š æœåŠ¡ç½‘æ ¼æ¨¡å¼ è¯¥æ¨¡å¼é€‚åº”äºå¾®æœåŠ¡æ¶æ„ä¸‹çš„æœåŠ¡æ²»ç†ï¼Œåœ¨æœåŠ¡èŠ‚ç‚¹ä¸­åŠ å…¥ç²’åº¦æ›´å°çš„æ²»ç†æ¨¡å—ï¼Œæœ¬è´¨å°±æ˜¯å°†SDKä»£ç éƒ¨ç½²ä¸ºå•ç‹¬è¿›ç¨‹ä¸”ä¸æœåŠ¡æœºå™¨å…±å­˜ï¼Œå¹¶ä½œä¸ºè¯¥æœºå™¨çš„ä»£ç†ä¸å…¶ä»–èŠ‚ç‚¹è¿›è¡Œäº¤äº’ã€‚ å…·ä½“å®ç°æ–¹æ¡ˆå’Œç­–ç•¥ä¸ä¸Šè¿°æ¨¡å¼æ²¡æœ‰å¤ªå¤§åŒºåˆ«ï¼Œåªæ˜¯è½åœ°æ–¹æ¡ˆä¸åŒï¼Œå› ä¸ºæœåŠ¡ç½‘æ ¼æ¨¡å¼ä¸‹éƒ½å¤„äºç±»ä¼¼äºk8sç­‰é›†ç¾¤ç®¡ç†çš„ç³»ç»Ÿä¸‹ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/7.html/:2:2","tags":["åˆ†å¸ƒå¼æ¶æ„","ç†”æ–­"],"title":"åˆ†å¸ƒå¼ç†”æ–­æ–¹æ¡ˆ","uri":"/posts/distributed_structure/structure/7.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"å‚è€ƒ å¾®æœåŠ¡é«˜å¯ç”¨ä¹‹ç†”æ–­å™¨å®ç°åŸç†ä¸ Golang å®è·µ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/7.html/:3:0","tags":["åˆ†å¸ƒå¼æ¶æ„","ç†”æ–­"],"title":"åˆ†å¸ƒå¼ç†”æ–­æ–¹æ¡ˆ","uri":"/posts/distributed_structure/structure/7.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note ä»¥ä¸‹ä¸ºå·¦è€³å¬é£ è®°å½•çš„ç¬”è®°ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:0:0","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"ä¸ºä»€ä¹ˆéœ€è¦åˆ†å¸ƒå¼ç³»ç»Ÿ æ”¾å¼ƒä¼ ç»Ÿçš„å•ä½“æ¶æ„ï¼Œé€‰æ‹©åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œä¸»è¦æœ‰ä¸¤æ–¹é¢åŸå› ï¼š å¢å¤§ç³»ç»Ÿå®¹é‡ã€‚ å½“ä¸šåŠ¡é‡è¶Šæ¥è¶Šå¤§ï¼Œä¸€å°æœºå™¨çš„æ€§èƒ½æ— æ³•æ»¡è¶³ï¼Œéœ€è¦å¤šå°æœºå™¨æ‰èƒ½åº”å¯¹å¤§è§„æ¨¡åº”ç”¨åœºæ™¯ï¼Œæ‰€ä»¥éœ€è¦å‚ç›´æˆ–è€…æ°´å¹³æ‹†åˆ†ä¸šåŠ¡ç³»ç»Ÿï¼Œä½¿å…¶å˜æˆåˆ†å¸ƒå¼æ¶æ„ã€‚ åŠ å¼ºç³»ç»Ÿå¯ç”¨ã€‚ ä¸šåŠ¡è¶Šæ¥è¶Šå…³é”®ï¼Œéœ€è¦æé«˜æ•´ä¸ªç³»ç»Ÿæ¶æ„çš„å¯ç”¨æ€§ï¼Œæ„å‘³ç€æ¶æ„ä¸­ä¸èƒ½å­˜åœ¨å•ç‚¹æ•…éšœï¼Œä¸ºé¿å…ä¸€å°æœºå™¨æ•…éšœå¯¼è‡´æ•´ä½“ä¸å¯ç”¨ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡åˆ†å¸ƒå¼æ¶æ„æ¥å†—ä½™ç³»ç»Ÿä»¥æ¶ˆé™¤å•ç‚¹æ•…éšœã€‚ è¿˜æœ‰å…¶ä»–ä¼˜åŠ¿ï¼š æ¨¡å—åŒ–ï¼Œç³»ç»Ÿæ¨¡å—é‡ç”¨åº¦é«˜ï¼› è½¯ä»¶æœåŠ¡æ¨¡å—è¢«æ‹†åˆ†ï¼Œå¼€å‘å’Œå‘å¸ƒé€Ÿåº¦å¯ä»¥å¹¶è¡Œè€Œå˜å¾—æ›´å¿«ï¼› ç³»ç»Ÿæ‰©å±•æ€§æ›´é«˜ï¼› å›¢é˜Ÿåä½œæµç¨‹å¾—åˆ°æ”¹å–„ç­‰ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:1:0","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"åˆ†å¸ƒå¼ç³»ç»Ÿçš„å‘å±• å¼€å‘ã€ç»´æŠ¤å’Œä½¿ç”¨ SOA è¦éµå¾ªä»¥ä¸‹å‡ æ¡åŸºæœ¬åŸåˆ™ï¼š å¯é‡ç”¨ï¼Œç²’åº¦åˆé€‚ï¼Œæ¨¡å—åŒ–ï¼Œå¯ç»„åˆï¼Œæ„ä»¶åŒ–ä»¥åŠæœ‰äº’æ“ä½œæ€§ï¼› ç¬¦åˆå¼€æ”¾æ ‡å‡†ï¼ˆé€šç”¨çš„æˆ–è¡Œä¸šçš„ï¼‰ï¼› æœåŠ¡çš„è¯†åˆ«å’Œåˆ†ç±»ï¼Œæä¾›å’Œå‘å¸ƒï¼Œç›‘æ§å’Œè·Ÿè¸ªã€‚ SOAæ¶æ„çš„æ¼”åŒ–å›¾ï¼š å•ä½“æ¶æ„ï¼Œè½¯ä»¶æ¨¡å—é«˜åº¦è€¦åˆï¼› é€šè¿‡æ ‡å‡†çš„åè®®æˆ–æ˜¯ä¸­é—´ä»¶æ¥è”åŠ¨å…¶å®ƒç›¸å…³è”çš„æœåŠ¡æ¥å®ç°æ¾è€¦åˆï¼Œåˆ©ç”¨IOCï¼ˆæ§åˆ¶åè½¬ï¼‰å’ŒDIPï¼ˆä¾èµ–å€’ç½®åŸåˆ™ï¼‰è®¾è®¡æ€æƒ³è¿›è¡Œå®è·µï¼› ä¸šåŠ¡æ‹†åˆ†æˆå¤šä¸ªå¾®æœåŠ¡ï¼Œå¾®æœåŠ¡ç‹¬ç«‹å®Œæ•´è¿è¡Œï¼ŒæœåŠ¡é—´çš„æ•´åˆéœ€è¦æœåŠ¡ç¼–æ’æˆ–æ˜¯æœåŠ¡æ•´åˆçš„å¼•æ“ï¼Œå¯ä»¥ä½¿å·¥ä½œæµå¼•æ“ï¼Œä¹Ÿå¯ä»¥æ˜¯ç½‘å…³ï¼Œä¹Ÿéœ€è¦è¾…åŠ©äºåƒå®¹å™¨åŒ–è°ƒåº¦çš„æŠ€æœ¯æ–¹å¼æ¥è¿›è¡Œç®¡ç†ã€‚ å¾®æœåŠ¡çš„å‡ºç°ä½¿å¾—å¼€å‘é€Ÿåº¦å˜å¾—æ›´å¿«ï¼Œéƒ¨ç½²å¿«ï¼Œéš”ç¦»æ€§é«˜ï¼Œç³»ç»Ÿçš„æ‰©å±•åº¦ä¹Ÿå¾ˆå¥½ï¼Œä½†æ˜¯åœ¨é›†æˆæµ‹è¯•ã€è¿ç»´å’ŒæœåŠ¡ç®¡ç†ç­‰æ–¹é¢éš¾åº¦æå‡ï¼Œæ‰€ä»¥éœ€è¦ä¸€å¥—è¾ƒå¥½çš„å¾®æœåŠ¡PaaSå¹³å°ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:2:0","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"åˆ†å¸ƒå¼ç³»ç»Ÿä¸­éœ€è¦æ³¨æ„çš„é—®é¢˜ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:3:0","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"å¼‚æ„ç³»ç»Ÿçš„ä¸æ ‡å‡†é—®é¢˜ ä¸»è¦è¡¨ç°åœ¨ï¼š è½¯ä»¶å’Œåº”ç”¨ä¸æ ‡å‡†ï¼› é€šè®¯åè®®ä¸æ ‡å‡†ï¼› æ•°æ®æ ¼å¼ä¸æ ‡å‡†ï¼› å¼€å‘å’Œè¿ç»´çš„è¿‡ç¨‹å’Œæ–¹æ³•ä¸æ ‡å‡†ï¼› ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:3:1","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"ç³»ç»Ÿæ¶æ„ä¸­çš„æœåŠ¡ä¾èµ–æ€§é—®é¢˜ æœåŠ¡ä¾èµ–ä¼šå¯¼è‡´çš„é—®é¢˜ä¸»è¦æœ‰ä»¥ä¸‹åœºæ™¯ï¼š å¦‚æœéå…³é”®ä¸šåŠ¡è¢«å…³é”®ä¸šåŠ¡æ‰€ä¾èµ–ï¼Œä¼šå¯¼è‡´éå…³é”®ä¸šåŠ¡å˜æˆä¸€ä¸ªå…³é”®ä¸šåŠ¡ã€‚ æœåŠ¡ä¾èµ–é“¾ä¸­ï¼Œå‡ºç°â€œæœ¨æ¡¶çŸ­æ¿æ•ˆåº”â€â€”â€”æ•´ä¸ª SLA ç”±æœ€å·®çš„é‚£ä¸ªæœåŠ¡æ‰€å†³å®šã€‚ è¿™å°±æ¶‰åŠåˆ°æœåŠ¡æ²»ç†çš„å†…å®¹ã€‚ ä¸ä½†è¦æ‹†åˆ†æœåŠ¡ï¼Œè¿˜è¦ä¸ºæ¯ä¸ªæœåŠ¡æ‹†åˆ†ç›¸åº”çš„æ•°æ®åº“ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:3:2","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"æ•…éšœå‘ç”Ÿçš„æ¦‚ç‡æ›´å¤§ å‡ºç°æ•…éšœä¸å¯æ€•ï¼Œæ•…éšœæ¢å¤æ—¶é—´è¿‡é•¿æ‰å¯æ€•ã€‚ å‡ºç°æ•…éšœä¸å¯æ€•ï¼Œæ•…éšœå½±å“é¢è¿‡å¤§æ‰å¯æ€•ã€‚ æ‰€è°“ Design for Failureã€‚åœ¨è®¾è®¡æ—¶å°±è¦è€ƒè™‘å¦‚ä½•å‡è½»æ•…éšœã€‚å¦‚æœæ— æ³•é¿å…ï¼Œä¹Ÿè¦ä½¿ç”¨è‡ªåŠ¨åŒ–çš„æ–¹å¼æ¢å¤æ•…éšœï¼Œå‡å°‘æ•…éšœå½±å“é¢ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:3:3","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"å¤šå±‚æ¶æ„çš„è¿ç»´å¤æ‚åº¦æ›´å¤§ é€šå¸¸æ¥è¯´å¯ä»¥æŠŠç³»ç»Ÿåˆ†æˆå››å±‚ï¼šåŸºç¡€å±‚ã€å¹³å°å±‚ã€åº”ç”¨å±‚å’Œæ¥å…¥å±‚ã€‚ åŸºç¡€å±‚ï¼šæœºå™¨ã€ç½‘ç»œå’Œå­˜å‚¨è®¾å¤‡ç­‰ã€‚ å¹³å°å±‚ï¼šä¸­é—´ä»¶å±‚ï¼ŒTomcatã€MySQLã€Redisã€Kafka ä¹‹ç±»çš„è½¯ä»¶ã€‚ åº”ç”¨å±‚ï¼šä¸šåŠ¡è½¯ä»¶ï¼Œæ¯”å¦‚ï¼Œå„ç§åŠŸèƒ½çš„æœåŠ¡ã€‚ æ¥å…¥å±‚ï¼šæ¥å…¥ç”¨æˆ·è¯·æ±‚çš„ç½‘å…³ã€è´Ÿè½½å‡è¡¡æˆ–æ˜¯ CDNã€DNS ç±»ä¼¼ã€‚ éœ€è¦æ³¨æ„ï¼š ä»»ä½•ä¸€å±‚çš„é—®é¢˜éƒ½ä¼šå¯¼è‡´æ•´ä½“çš„é—®é¢˜ï¼› æ²¡æœ‰ç»Ÿä¸€çš„è§†å›¾å’Œç®¡ç†ï¼Œå¯¼è‡´è¿ç»´è¢«å‰²è£‚å¼€æ¥ï¼Œé€ æˆæ›´å¤§çš„å¤æ‚åº¦ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:3:4","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"åˆ†å¸ƒå¼ç³»ç»Ÿçš„æŠ€æœ¯æ ˆ æ„å»ºåˆ†å¸ƒå¼ç³»ç»Ÿçš„ç›®çš„æ˜¯ä¸ºäº†å¢åŠ ç³»ç»Ÿå®¹é‡ï¼Œæé«˜ç³»ç»Ÿçš„å¯ç”¨æ€§ï¼Œè½¬æ¢ä¸ºæŠ€æœ¯æ–¹é¢ï¼Œå°±æ˜¯ä»¥ä¸‹ä¸¤ä»¶äº‹æƒ…ï¼Œå³ä¸€æ˜¯æé«˜æ•´ä½“æ¶æ„çš„ååé‡ï¼ŒæœåŠ¡æ›´å¤šçš„å¹¶å‘å’Œæµé‡ï¼ŒäºŒæ˜¯ä¸ºäº†æé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œè®©ç³»ç»Ÿçš„å¯ç”¨æ€§æ›´é«˜ã€‚ å¤§æµé‡å¤„ç†ã€‚ å…³é”®ä¸šåŠ¡ä¿æŠ¤ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:4:0","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"æé«˜æ¶æ„çš„æ€§èƒ½ ç¼“å­˜ç³»ç»Ÿ åŠ å…¥ç¼“å­˜ç³»ç»Ÿï¼Œå¯ä»¥æœ‰æ•ˆåœ°æé«˜ç³»ç»Ÿçš„è®¿é—®èƒ½åŠ›ã€‚å¯¹äºåˆ†å¸ƒå¼ç³»ç»Ÿä¸‹çš„ç¼“å­˜ç³»ç»Ÿï¼Œéœ€è¦çš„æ˜¯ä¸€ä¸ªç¼“å­˜é›†ç¾¤ã€‚è¿™å…¶ä¸­éœ€è¦ä¸€ä¸ª Proxy æ¥åšç¼“å­˜çš„åˆ†ç‰‡å’Œè·¯ç”±ã€‚ è´Ÿè½½å‡è¡¡ç³»ç»Ÿ æ°´å¹³æ‰©å±•çš„å…³é”®æŠ€æœ¯ï¼Œä½¿ç”¨å¤šå°æœºå™¨æ¥å…±åŒåˆ†æ‹…ä¸€éƒ¨åˆ†æµé‡è¯·æ±‚ã€‚ å¼‚æ­¥è°ƒç”¨ ä¸»è¦é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—æ¥å¯¹è¯·æ±‚åšæ’é˜Ÿå¤„ç†ï¼Œæ¥è¾¾åˆ°å‰Šå³°å¡«è°·çš„ç›®çš„ï¼Œä½†æ˜¯ä¼šå¸¦æ¥å®æ—¶æ€§çš„é—®é¢˜ï¼ŒåŒæ—¶éœ€è¦é€šè¿‡æ¶ˆæ¯æŒä¹…åŒ–æ¥è§£å†³æ¶ˆæ¯ä¸¢å¤±çš„é—®é¢˜ï¼Œä½†è¿™ä¼šé€ æˆâ€œæœ‰çŠ¶æ€â€çš„ç»“ç‚¹ï¼Œå¢åŠ äº†æœåŠ¡è°ƒåº¦çš„éš¾åº¦ã€‚ æ•°æ®åˆ†åŒº æŠŠæ•°æ®æŒ‰ä¸€å®šçš„æ–¹å¼åˆ†æˆå¤šä¸ªåŒºï¼Œä¸åŒçš„æ•°æ®åŒºæ¥åˆ†æ‹…ä¸åŒåŒºçš„æµé‡ã€‚è¿™éœ€è¦ä¸€ä¸ªæ•°æ®è·¯ç”±çš„ä¸­é—´ä»¶ï¼Œä¼šå¯¼è‡´è·¨åº“çš„ Join å’Œè·¨åº“çš„äº‹åŠ¡éå¸¸å¤æ‚ã€‚ æ•°æ®é•œåƒ æŠŠä¸€ä¸ªæ•°æ®åº“é•œåƒæˆå¤šä»½ä¸€æ ·çš„æ•°æ®ï¼Œè¿™æ ·å°±ä¸éœ€è¦æ•°æ®è·¯ç”±çš„ä¸­é—´ä»¶äº†ã€‚ä¸ºäº†è¾¾åˆ°å†…éƒ¨åŒæ­¥çš„è¯»å†™ä¸€è‡´ï¼Œæ•°æ®é•œåƒä¸­æœ€å¤§çš„é—®é¢˜å°±æ˜¯æ•°æ®çš„ä¸€è‡´æ€§é—®é¢˜ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:4:1","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"æé«˜æ¶æ„çš„ç¨³å®šæ€§ æœåŠ¡æ‹†åˆ† ä¸»è¦æœ‰ä¸¤ä¸ªç›®çš„ï¼šä¸€æ˜¯ä¸ºäº†éš”ç¦»æ•…éšœï¼ŒäºŒæ˜¯ä¸ºäº†é‡ç”¨æœåŠ¡æ¨¡å—ã€‚ä½†æœåŠ¡æ‹†åˆ†å®Œä¹‹åï¼Œä¼šå¼•å…¥æœåŠ¡è°ƒç”¨é—´çš„ä¾èµ–é—®é¢˜ã€‚ æœåŠ¡å†—ä½™ æœåŠ¡å†—ä½™æ˜¯ä¸ºäº†å»é™¤å•ç‚¹æ•…éšœï¼Œå¹¶å¯ä»¥æ”¯æŒæœåŠ¡çš„å¼¹æ€§ä¼¸ç¼©ï¼Œä»¥åŠæ•…éšœè¿ç§»ã€‚ä½†æ˜¯å¯¹äºæŸäº›æœ‰çŠ¶æ€çš„æœåŠ¡æ¥è¯´ï¼Œå†—ä½™è¿™äº›æœ‰çŠ¶æ€çš„æœåŠ¡å¸¦æ¥äº†æ›´é«˜çš„å¤æ‚æ€§ã€‚å…¶ä¸­ä¸€ä¸ªæ˜¯å¼¹æ€§ä¼¸ç¼©æ—¶ï¼Œéœ€è¦è€ƒè™‘æ•°æ®çš„å¤åˆ¶æˆ–æ˜¯é‡æ–°åˆ†ç‰‡ï¼Œè¿ç§»çš„æ—¶å€™è¿˜è¦è¿ç§»æ•°æ®åˆ°å…¶å®ƒæœºå™¨ä¸Šã€‚ é™æµé™çº§ é€šè¿‡é™æµæˆ–è€…åŠŸèƒ½é™çº§çš„æ–¹å¼æ¥åœæ‰ä¸€éƒ¨åˆ†æœåŠ¡ï¼Œæˆ–æ˜¯æ‹’ç»ä¸€éƒ¨åˆ†ç”¨æˆ·ï¼Œä»¥ç¡®ä¿æ•´ä¸ªæ¶æ„ä¸ä¼šæŒ‚æ‰ã€‚è¿™äº›æŠ€æœ¯å±äºä¿æŠ¤æªæ–½ã€‚ é«˜å¯ç”¨æ¶æ„ ä»å†—ä½™æ¶æ„çš„è§’åº¦æ¥ä¿éšœå¯ç”¨æ€§ï¼Œå¦‚å¤šç§Ÿæˆ·éš”ç¦»ï¼Œç¾å¤‡å¤šæ´»ï¼Œæˆ–æ˜¯æ•°æ®å¯ä»¥åœ¨å…¶ä¸­å¤åˆ¶ä¿æŒä¸€è‡´æ€§çš„é›†ç¾¤ã€‚ä¸»è¦ç›®çš„å°±æ˜¯è§£å†³å•ç‚¹æ•…éšœã€‚ é«˜å¯ç”¨è¿ç»´ æŒ‡çš„æ˜¯ DevOps ä¸­çš„ CI/CDï¼ˆæŒç»­é›†æˆ / æŒç»­éƒ¨ç½²ï¼‰ã€‚è‰¯å¥½çš„è¿ç»´åº”è¯¥æ˜¯ä¸€æ¡å¾ˆæµç•…çš„è½¯ä»¶å‘å¸ƒç®¡çº¿ï¼Œå…¶ä¸­æ¶‰åŠåˆ°è‡ªåŠ¨åŒ–æµ‹è¯•å’Œç›¸åº”çš„ç°åº¦å‘å¸ƒï¼Œä»¥åŠå¯¹çº¿ä¸Šç³»ç»Ÿçš„è‡ªåŠ¨åŒ–æ§åˆ¶ã€‚è¿™æ ·ï¼Œå¯ä»¥åšåˆ°â€œè®¡åˆ’å†…â€æˆ–æ˜¯â€œéè®¡åˆ’å†…â€çš„å®•æœºäº‹ä»¶çš„æ—¶é•¿æœ€çŸ­ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:4:2","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"åˆ†å¸ƒå¼ç³»ç»Ÿçš„å…³é”®æŠ€æœ¯ æœåŠ¡æ²»ç† æœåŠ¡æ‹†åˆ†ã€æœåŠ¡è°ƒç”¨ã€æœåŠ¡å‘ç°ã€æœåŠ¡ä¾èµ–ã€æœåŠ¡çš„å…³é”®åº¦å®šä¹‰ç­‰ï¼ŒæœåŠ¡æ²»ç†çš„æœ€å¤§æ„ä¹‰æ˜¯æ¢³ç†æœåŠ¡é—´çš„ä¾èµ–å…³ç³»ã€æœåŠ¡è°ƒç”¨é“¾ï¼Œä»¥åŠå…³é”®çš„æœåŠ¡ï¼Œä¸”å¯¹è¿™äº›æœåŠ¡è¿›è¡Œæ€§èƒ½å’Œå¯ç”¨æ€§æ–¹é¢çš„ç®¡ç†ã€‚ æ¶æ„è½¯ä»¶ç®¡ç† å› ä¸ºæœåŠ¡ä¹‹é—´æœ‰ä¾èµ–ä¸”å‡ºç°å…¼å®¹æ€§é—®é¢˜ï¼Œæ‰€ä»¥æ•´ä½“æœåŠ¡æ‰€å½¢æˆçš„æ¶æ„éœ€è¦æœ‰æ¶æ„ç‰ˆæœ¬ç®¡ç†ã€æ•´ä½“æ¶æ„çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œä»¥åŠå¯¹æœåŠ¡çš„ç¼–æ’ã€èšåˆã€äº‹åŠ¡å¤„ç†ç­‰æœåŠ¡è°ƒåº¦åŠŸèƒ½ã€‚ DevOps ä¸ºäº†åˆ†å¸ƒå¼ç³»ç»Ÿå¯ä»¥æ›´ä¸ºå¿«é€Ÿåœ°æ›´æ–°æœåŠ¡ï¼Œä¸”å¯¹äºæœåŠ¡çš„æµ‹è¯•å’Œéƒ¨ç½²ï¼Œæ‰€ä»¥éœ€è¦ DevOps çš„å…¨æµç¨‹ï¼Œå…¶ä¸­åŒ…æ‹¬ç¯å¢ƒæ„å»ºã€æŒç»­é›†æˆã€æŒç»­éƒ¨ç½²ç­‰ã€‚ è‡ªåŠ¨åŒ–è¿ç»´ é€šè¿‡DevOpså¯¹æœåŠ¡è¿›è¡Œè‡ªåŠ¨ä¼¸ç¼©ã€æ•…éšœè¿ç§»ã€é…ç½®ç®¡ç†ã€çŠ¶æ€ç®¡ç†ç­‰ä¸€ç³»åˆ—çš„è‡ªåŠ¨åŒ–è¿ç»´æŠ€æœ¯ã€‚ èµ„æºè°ƒåº¦ç®¡ç† åº”ç”¨å±‚çš„è‡ªåŠ¨åŒ–è¿ç»´éœ€è¦åŸºç¡€å±‚çš„è°ƒåº¦æ”¯æŒï¼Œå³äº‘è®¡ç®— IaaS å±‚çš„è®¡ç®—ã€å­˜å‚¨ã€ç½‘ç»œç­‰èµ„æºè°ƒåº¦ã€éš”ç¦»å’Œç®¡ç†ã€‚ æ•´ä½“æ¶æ„ç›‘æ§ ç›‘æ§éœ€è¦å¯¹ä¸‰å±‚ç³»ç»Ÿï¼ˆåº”ç”¨å±‚ã€ä¸­é—´ä»¶å±‚ã€åŸºç¡€å±‚ï¼‰è¿›è¡Œç›‘æ§ã€‚ æµé‡æ§åˆ¶ åŒ…æ‹¬è´Ÿè½½å‡è¡¡ã€æœåŠ¡è·¯ç”±ã€ç†”æ–­ã€é™çº§ã€é™æµç­‰å’Œæµé‡ç›¸å…³çš„è°ƒåº¦ï¼Œä¸”åŒ…æ‹¬ç°åº¦å‘å¸ƒä¹‹ç±»çš„åŠŸèƒ½ç­‰ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:4:3","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"åˆ†å¸ƒå¼ç³»ç»Ÿçº²é¢† åˆ†å¸ƒå¼ç³»ç»Ÿå…³é”®æŠ€æœ¯æ€»ç»“ä¸‹æ¥æœ‰ä»¥ä¸‹ï¼š å…¨æ ˆç³»ç»Ÿç›‘æ§ï¼› æœåŠ¡ / èµ„æºè°ƒåº¦ï¼› æµé‡è°ƒåº¦ï¼› çŠ¶æ€ / æ•°æ®è°ƒåº¦ï¼› å¼€å‘å’Œè¿ç»´çš„è‡ªåŠ¨åŒ–ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:4:4","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"åˆ†å¸ƒå¼ç³»ç»Ÿå…³é”®æŠ€æœ¯ï¼šç›‘æ§ ç›‘æ§ç³»ç»Ÿéœ€è¦å®Œæˆçš„åŠŸèƒ½ï¼š å…¨æ ˆç›‘æ§ï¼› å…³é”®åˆ†æï¼› è·¨ç³»ç»Ÿè°ƒç”¨çš„ä¸²è”ï¼› å®æ—¶æŠ¥è­¦å’Œè‡ªåŠ¨å¤„ç½®ï¼› ç³»ç»Ÿæ€§èƒ½åˆ†æï¼› ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:5:0","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"å…¨æ ˆç›‘æ§ å…¨æ ˆç›‘æ§ç®€å•æ¥è¯´å°±æ˜¯ä¸‰å±‚ç›‘æ§ï¼š åŸºç¡€å±‚ï¼šç›‘æ§ä¸»æœºå’Œåº•å±‚èµ„æºã€‚ æ¯”å¦‚ï¼šCPUã€å†…å­˜ã€ç½‘ç»œååã€ç¡¬ç›˜ I/Oã€ç¡¬ç›˜ä½¿ç”¨ç­‰ã€‚ ä¸­é—´å±‚ï¼šå°±æ˜¯ä¸­é—´ä»¶å±‚çš„ç›‘æ§ã€‚ æ¯”å¦‚ï¼šNginxã€Redisã€ActiveMQã€Kafkaã€MySQLã€Tomcat ç­‰ã€‚ åº”ç”¨å±‚ï¼šç›‘æ§åº”ç”¨å±‚çš„ä½¿ç”¨ã€‚ æ¯”å¦‚ï¼šHTTP è®¿é—®çš„ååé‡ã€å“åº”æ—¶é—´ã€è¿”å›ç ã€è°ƒç”¨é“¾è·¯åˆ†æã€æ€§èƒ½ç“¶é¢ˆï¼Œè¿˜åŒ…æ‹¬ç”¨æˆ·ç«¯çš„ç›‘æ§ã€‚ ç›‘æ§çš„æ ‡å‡†åŒ–ï¼š æ—¥å¿—æ•°æ®ç»“æ„åŒ–ï¼› ç›‘æ§æ•°æ®æ ¼å¼æ ‡å‡†åŒ–ï¼› ç»Ÿä¸€çš„ç›‘æ§å¹³å°ï¼› ç»Ÿä¸€çš„æ—¥å¿—åˆ†æï¼› ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:5:1","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"å¥½çš„ç›‘æ§ ç›‘æ§ç³»ç»Ÿä¸»è¦å­˜åœ¨ä¸¤ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼š ç›‘æ§æ•°æ®æ˜¯éš”ç¦»å¼€æ¥çš„ã€‚ ç›‘æ§çš„æ•°æ®é¡¹å¤ªå¤šã€‚ ä¸€ä¸ªå¥½çš„ç›‘æ§ç³»ç»Ÿåº”è¯¥æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹å¾ï¼š å…³æ³¨äºæ•´ä½“åº”ç”¨çš„SLAã€‚ä¸»è¦ä»ä¸ºç”¨æˆ·æœåŠ¡çš„ API æ¥ç›‘æ§æ•´ä¸ªç³»ç»Ÿã€‚ å…³è”æŒ‡æ ‡èšåˆã€‚æŠŠæœ‰å…³è”çš„ç³»ç»ŸåŠå…¶æŒ‡æ ‡èšåˆå±•ç¤ºã€‚ä¸»è¦æ˜¯ä¸‰å±‚ç³»ç»Ÿæ•°æ®ï¼šåŸºç¡€å±‚ã€å¹³å°ä¸­é—´ä»¶å±‚å’Œåº”ç”¨å±‚ã€‚æŠŠæœåŠ¡å’Œç›¸å…³çš„ä¸­é—´ä»¶ä»¥åŠä¸»æœºå…³è”åœ¨ä¸€èµ·ï¼Œå°¤å…¶éœ€è¦æŠŠæœåŠ¡çš„å…·ä½“å®ä¾‹å’Œä¸»æœºå…³è”åœ¨ä¸€èµ·ã€‚ å¿«é€Ÿæ•…éšœå®šä½ã€‚ä»¥è·Ÿè¸ªä¸€ä¸ªç”¨æˆ·è¯·æ±‚çš„traceæ¥ç›‘æ§å‡ºç°æ•´ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸Šçš„è°ƒç”¨é“¾ï¼Œæœ€å¥½æ˜¯åšæˆæ²¡æœ‰ä¾µå…¥æ€§çš„ã€‚ ä¸€ä¸ªå¥½çš„ç›‘æ§ç³»ç»Ÿä¸»è¦æ˜¯ä¸ºä»¥ä¸‹ä¸¤ä¸ªåœºæ™¯è®¾è®¡çš„ï¼š ä½“éªŒ å®¹é‡ç®¡ç†ã€‚æä¾›å…¨å±€ç³»ç»Ÿè¿è¡Œæ—¶æ•°æ®å±•ç¤ºï¼Œå¯ä»¥åˆ¤æ–­æ˜¯å¦éœ€è¦å¢åŠ æœºå™¨æˆ–è€…å…¶ä»–èµ„æºã€‚ æ€§èƒ½ç®¡ç†ã€‚é€šè¿‡æŸ¥çœ‹Dashboradæ‰¾åˆ°ç³»ç»Ÿç“¶é¢ˆï¼Œé’ˆå¯¹æ€§åœ°ä¼˜åŒ–ç³»ç»Ÿå’Œç›¸åº”ä»£ç ã€‚ æ€¥è¯Š å®šä½é—®é¢˜ã€‚å¿«é€Ÿæš´éœ²å¹¶æ‰¾åˆ°é—®é¢˜çš„å‘ç”Ÿç‚¹ï¼Œä»¥åŠ©äºè¯Šæ–­é—®é¢˜ã€‚ æ€§èƒ½åˆ†æã€‚å½“å‡ºç°éé¢„æœŸçš„æµé‡æå‡æ—¶ï¼Œå¯ä»¥å¿«é€Ÿæ‰¾åˆ°ç³»ç»Ÿç“¶é¢ˆï¼Œå¸®åŠ©å¼€å‘äººå‘˜æ·±å…¥ä»£ç ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:5:2","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"å¦‚ä½•å®ç°å¥½çš„ç›‘æ§ç³»ç»Ÿ æœåŠ¡è°ƒç”¨é“¾è·Ÿè¸ª å¯¹å¤–APIâ€”â€”å…³è”åå°å®é™…æœåŠ¡â€”â€”æœåŠ¡ä¾èµ–å…³è”â€”â€”ç›´è‡³æœ€åä¸€ä¸ªæœåŠ¡ã€‚ æœåŠ¡è°ƒç”¨æ—¶é•¿åˆ†å¸ƒ æœåŠ¡è°ƒç”¨é“¾ä¸Šçš„æ—¶é—´åˆ†å¸ƒã€‚ æœåŠ¡çš„TOPNè§†å›¾ ç³»ç»Ÿè¯·æ±‚çš„æ’åæƒ…å†µï¼Œå¯æ ¹æ®è°ƒç”¨é‡ã€è¯·æ±‚è€—æ—¶ã€çƒ­ç‚¹è¿›è¡Œæ’åã€‚ æ•°æ®åº“å…³è”æ“ä½œ æ‰§è¡Œæ•°æ®åº“æ“ä½œçš„æ‰§è¡Œæ—¶é—´ï¼Œå°†ç›¸å…³è¯·æ±‚å¯¹åº”èµ·æ¥ã€‚ æœåŠ¡èµ„æºè·Ÿè¸ª å°†æœåŠ¡è¿è¡Œçš„æœºå™¨èŠ‚ç‚¹ä¸Šçš„æ•°æ®å…³è”ã€‚ åœ¨æŠŠæ•°æ®æ”¶é›†å¥½çš„åŒæ—¶ï¼Œæ›´é‡è¦çš„æ˜¯æŠŠæ•°æ®å…³è”å¥½ï¼Œæ‰èƒ½å¤Ÿå¾ˆå¿«åœ°å®šä½æ•…éšœï¼Œè¿›è€Œæ‰èƒ½è¿›è¡Œè‡ªåŠ¨åŒ–è°ƒåº¦ã€‚å¦‚ä¸‹å›¾æ‰€å‡ºç°çš„æƒ…å†µã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:5:3","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"åˆ†å¸ƒå¼ç³»ç»Ÿå…³é”®æŠ€æœ¯ï¼šæœåŠ¡è°ƒåº¦ å…³é”®æŠ€æœ¯ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š æœåŠ¡å…³é”®ç¨‹åº¦ï¼› æœåŠ¡ä¾èµ–å…³ç³»ï¼› æœåŠ¡å‘ç°ï¼› æ•´ä¸ªæ¶æ„çš„ç‰ˆæœ¬ç®¡ç†ï¼› æœåŠ¡åº”ç”¨å£°æ˜å‘¨æœŸå®‰å…¨ç®¡ç†ï¼› ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:6:0","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"æœåŠ¡å…³é”®ç¨‹åº¦å’ŒæœåŠ¡çš„ä¾èµ–å…³ç³» æœåŠ¡å…³é”®ç¨‹åº¦ï¼Œä¸»è¦æ˜¯è¦æˆ‘ä»¬æ¢³ç†å’Œå®šä¹‰æœåŠ¡çš„é‡è¦ç¨‹åº¦ã€‚ æœåŠ¡é—´çš„ä¾èµ–å…³ç³»ï¼Œä¼ ç»Ÿçš„SOAå¸Œæœ›é€šè¿‡ESBæ¥è§£å†³æœåŠ¡é—´çš„ä¾èµ–å…³ç³»ï¼Œè€Œå¾®æœåŠ¡æ—¶æœåŠ¡ä¾èµ–æœ€ä¼˜è§£çš„ä¸Šé™ï¼Œè€Œä¸‹é™æ˜¯åƒä¸‡ä¸è¦æœ‰ä¾èµ–ç¯ã€‚ è§£å†³æœåŠ¡ä¾èµ–ç¯çš„æ–¹æ¡ˆä¸€èˆ¬æ˜¯ä¾èµ–å€’ç½®çš„è®¾è®¡æ¨¡å¼ï¼Œå³åœ¨åˆ†å¸ƒå¼æ¶æ„ä¸Šé€šè¿‡ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„æœåŠ¡æ¥è§£å†³è¿™ä¸ªäº‹ã€‚ æœåŠ¡ä¾èµ–å…³ç³»å¯é€šè¿‡æŠ€æœ¯æ‰‹æ®µå‘ç°ï¼Œå¦‚ZipkinæœåŠ¡è°ƒç”¨è·Ÿè¸ªç³»ç»Ÿã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:6:1","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"æœåŠ¡çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸçš„ç®¡ç† éœ€è¦æœåŠ¡å‘ç°çš„ä¸­é—´ä»¶æ¥ç®¡ç†æ¶æ„çš„æœåŠ¡ã€æœåŠ¡ç‰ˆæœ¬ã€æœåŠ¡å®ä¾‹ã€æœåŠ¡çŠ¶æ€ç­‰ã€‚ æœ‰äº†æœåŠ¡çš„çŠ¶æ€å’Œè¿è¡Œæƒ…å†µåï¼Œå°±éœ€è¦å¯¹æœåŠ¡çš„ç”Ÿå‘½å‘¨æœŸè¿›è¡Œç®¡ç†ï¼ŒæœåŠ¡çš„ç”Ÿå‘½å‘¨æœŸé€šå¸¸æœ‰ä»¥ä¸‹å‡ ä¸ªçŠ¶æ€ï¼š Provisionï¼Œä»£è¡¨åœ¨ä¾›åº”ä¸€ä¸ªæ–°çš„æœåŠ¡ï¼› Readyï¼Œè¡¨ç¤ºå¯åŠ¨æˆåŠŸäº†ï¼› Runï¼Œè¡¨ç¤ºé€šè¿‡äº†æœåŠ¡å¥åº·æ£€æŸ¥ï¼› Updateï¼Œè¡¨ç¤ºåœ¨å‡çº§ä¸­ï¼› Rollbackï¼Œè¡¨ç¤ºåœ¨å›æ»šä¸­ï¼› Scaleï¼Œè¡¨ç¤ºæ­£åœ¨ä¼¸ç¼©ä¸­ï¼ˆå¯ä»¥æœ‰ Scale-in å’Œ Scale-out ä¸¤ç§ï¼‰ï¼› Destroyï¼Œè¡¨ç¤ºåœ¨é”€æ¯ä¸­ï¼› Failedï¼Œè¡¨ç¤ºå¤±è´¥çŠ¶æ€ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:6:2","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"æ•´ä¸ªæ¶æ„çš„ç‰ˆæœ¬ç®¡ç† VersionSetï¼Œç”±ä¸€å †æœåŠ¡çš„ç‰ˆæœ¬é›†æ‰€å½¢æˆçš„æ•´ä¸ªæ¶æ„çš„ç‰ˆæœ¬æ§åˆ¶ã€‚ è€ƒè™‘åˆ°ç‰ˆæœ¬å…¼å®¹æ€§çš„é—®é¢˜ï¼Œé™¤äº†å„ä¸ªé¡¹ç›®çš„ç‰ˆæœ¬ç®¡ç†ä¹‹å¤–ï¼Œè¿˜éœ€è¦åœ¨ä¸Šé¢å†ç›–ä¸€å±‚ç‰ˆæœ¬ç®¡ç†ã€‚ ç‰ˆæœ¬ç®¡ç†ä¸ºå®ç°æœåŠ¡ä¹‹é—´çš„ç‰ˆæœ¬å…¼å®¹æ€§ï¼Œåˆ™éœ€è¦å®šä¹‰æœåŠ¡æ¸…å•å³å®šä¹‰äº†æ‰€æœ‰æœåŠ¡çš„ç‰ˆæœ¬è¿è¡Œç¯å¢ƒï¼Œå…¶ä¸­åŒ…æ‹¬ä½†ä¸é™äºï¼š æœåŠ¡çš„è½¯ä»¶ç‰ˆæœ¬ï¼› æœåŠ¡çš„è¿è¡Œç¯å¢ƒâ€”â€”ç¯å¢ƒå˜é‡ã€CPUã€å†…å­˜ç­‰ï¼› æœåŠ¡è¿è¡Œçš„æœ€å¤§æœ€å°å®ä¾‹æ•°ï¼› ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:6:3","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"èµ„æº/æœåŠ¡è°ƒåº¦ æœåŠ¡å’Œèµ„æºè°ƒåº¦çš„è¿‡ç¨‹ï¼Œä¸æ“ä½œç³»ç»Ÿè°ƒåº¦è¿›ç¨‹çš„æ–¹å¼å¾ˆç›¸ä¼¼ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸€äº›å…³é”®æŠ€æœ¯ï¼š æœåŠ¡çŠ¶æ€çš„ç»´æŒå’Œæ‹Ÿåˆï¼› æœåŠ¡çš„è¿è¡ŒçŠ¶æ€ï¼ŒåŒ…æ‹¬ä¸€äº›éé¢„æœŸçš„å˜åŒ–å’Œé¢„æœŸçš„å˜åŒ–ã€‚ åœ¨å‘å¸ƒæ–°ç‰ˆæœ¬æ—¶ï¼Œéœ€è¦ä¼¸ç¼©ï¼Œéœ€è¦å›æ»šã€‚é›†ç¾¤ç®¡ç†æ§åˆ¶å™¨ä¼šæŠŠé›†ç¾¤ä»ç°æœ‰çš„çŠ¶æ€è¿ç§»åˆ°å¦ä¸€ä¸ªçŠ¶æ€ï¼Œå®ƒéœ€è¦ä¸€æ­¥ä¸€æ­¥åœ°å‘é›†ç¾¤å‘é€è‹¥å¹²æ§åˆ¶å‘½ä»¤ï¼Œå³è¿™ä¸ªè¿‡ç¨‹ä¸ºâ€œæ‹Ÿåˆâ€ã€‚ æ¯”å¦‚ï¼Œå½“éœ€è¦å¯¹é›†ç¾¤è¿›è¡Œ Scale çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ï¼š å…ˆæ‰©å±•å‡ºå‡ ä¸ªç»“ç‚¹ï¼› å†å¾€ä¸Šéƒ¨ç½²æœåŠ¡ï¼› ç„¶åå¯åŠ¨æœåŠ¡ï¼› å†æ£€æŸ¥æœåŠ¡çš„å¥åº·æƒ…å†µï¼› æœ€åæŠŠæ–°æ‰©å±•å‡ºæ¥çš„æœåŠ¡å®ä¾‹åŠ å…¥æœåŠ¡å‘ç°ä¸­æä¾›æœåŠ¡ã€‚ æœåŠ¡çš„å¼¹æ€§ä¼¸ç¼©å’Œæ•…éšœè¿ç§»ï¼› æœåŠ¡ä¼¸ç¼©æ‰€éœ€è¦çš„æ“ä½œæ­¥éª¤ï¼Œå…¶ä¸­æ¶‰åŠåˆ°äº†ï¼š åº•å±‚èµ„æºçš„ä¼¸ç¼©ï¼› æœåŠ¡çš„è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼› æœåŠ¡çš„å¥åº·æ£€æŸ¥ï¼› æœåŠ¡å‘ç°çš„æ³¨å†Œï¼› æœåŠ¡æµé‡çš„è°ƒåº¦ã€‚ è€Œå¯¹äºæ•…éšœè¿ç§»ï¼Œä¹Ÿå°±æ˜¯æœåŠ¡çš„æŸä¸ªå®ä¾‹å‡ºç°é—®é¢˜æ—¶åˆ™éœ€è¦è‡ªåŠ¨åœ°æ¢å¤å®ƒã€‚å¯¹äºæœåŠ¡æ¥è¯´ï¼Œæœ‰ä¸¤ç§æ¨¡å¼ï¼Œä¸€ç§æ˜¯å® ç‰©æ¨¡å¼ï¼Œä¸€ç§æ˜¯å¥¶ç‰›æ¨¡å¼ã€‚ å¯¹äºè¿™ä¸¤ç§æ¨¡å¼ï¼Œåœ¨è¿è¡Œä¸­ä¹Ÿæ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œå…¶ä¸­æ¶‰åŠåˆ°äº†ï¼š æœåŠ¡çš„å¥åº·ç›‘æ§ï¼ˆè¿™å¯èƒ½éœ€è¦ä¸€ä¸ª APM çš„ç›‘æ§ï¼‰ã€‚ å¦‚æœæ˜¯å® ç‰©æ¨¡å¼ï¼Œéœ€è¦ï¼šæœåŠ¡çš„é‡æ–°å¯åŠ¨å’ŒæœåŠ¡çš„ç›‘æ§æŠ¥è­¦ï¼ˆå¦‚æœé‡è¯•æ¢å¤ä¸æˆåŠŸï¼Œéœ€è¦äººå·¥ä»‹å…¥ï¼‰ã€‚ å¦‚æœæ˜¯å¥¶ç‰›æ¨¡å¼ï¼Œéœ€è¦ï¼šæœåŠ¡çš„èµ„æºç”³è¯·ï¼ŒæœåŠ¡çš„è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼ŒæœåŠ¡å‘ç°çš„æ³¨å†Œï¼Œä»¥åŠæœåŠ¡çš„æµé‡è°ƒåº¦ã€‚ ä½œä¸šå’Œåº”ç”¨è°ƒåº¦ï¼› ä½œä¸šå·¥ä½œæµç¼–æ’ï¼› æœåŠ¡ç¼–æ’ï¼› ä¸€ä¸ªå¥½çš„æ“ä½œç³»ç»Ÿéœ€è¦èƒ½å¤Ÿé€šè¿‡ä¸€å®šçš„æœºåˆ¶æŠŠä¸€å †ç‹¬ç«‹å·¥ä½œçš„è¿›ç¨‹ç»™ååŒèµ·æ¥ã€‚åœ¨åˆ†å¸ƒå¼çš„æœåŠ¡è°ƒåº¦ä¸­ï¼Œè¿™ä¸ªå·¥ä½œå«åš Orchestrationï¼Œå³â€œç¼–æ’â€ã€‚ æ³¨æ„ï¼ŒESB çš„æœåŠ¡ç¼–åˆ¶å« Choreographyï¼Œä¸Orchestrationæ˜¯ä¸ä¸€æ ·çš„ï¼Œå‰è€…è¾ƒä¸ºé‡é‡çº§ã€‚ åè€…çš„æ„æ€æ˜¯æ‰€æœ‰æœåŠ¡çš„äº¤äº’æ˜¯é€šè¿‡ä¸€ä¸ªæ€»æ§åˆ¶è€…æ¥è¿›è¡Œç¼–æ’ã€‚ å‰è€…çš„æ„æ€æ˜¯åœ¨å„è‡ªå®Œæˆä¸“å±è‡ªå·±çš„å·¥ä½œçš„åŸºç¡€ä¸Šè€ƒè™‘æ€æ ·äº’ç›¸åä½œã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œå¯ä»¥é€šè¿‡API Gatewayæˆ–è€…ä¸€ä¸ªç®€å•çš„æ¶ˆæ¯é˜Ÿåˆ—æ¥åšç›¸åº”çš„ç¼–æ’å·¥ä½œï¼Œå¦‚Zuulã€Ingressç›¸ä¼¼ç­‰ã€‚ å…³äºæœåŠ¡çš„ç¼–æ’ä¼šç›´æ¥å¯¼è‡´ä¸€ä¸ªæœåŠ¡ç¼–æ’çš„å·¥ä½œæµå¼•æ“ä¸­é—´ä»¶çš„äº§ç”Ÿã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:6:4","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"åˆ†å¸ƒå¼ç³»ç»Ÿå…³é”®æŠ€æœ¯ï¼šæµé‡å’Œæ•°æ®è°ƒåº¦ æµé‡è°ƒåº¦ä¸æœåŠ¡æ²»ç†éœ€è¦åŒºåˆ†å¼€æ¥ï¼Œå®ƒä»¬å±äºä¸åŒå±‚é¢ï¼š æœåŠ¡æ²»ç†æ˜¯å†…éƒ¨ç³»ç»Ÿçš„äº‹ï¼Œè€Œæµé‡è°ƒåº¦å¯ä»¥æ˜¯å†…éƒ¨çš„ï¼Œæ›´æ˜¯å¤–éƒ¨æ¥å…¥å±‚çš„äº‹ã€‚ æœåŠ¡æ²»ç†æ˜¯æ•°æ®ä¸­å¿ƒçš„äº‹ï¼Œè€Œæµé‡è°ƒåº¦çš„æœ€ä¼˜åº”è¯¥æ˜¯æ•°æ®ä¸­å¿ƒä¹‹å¤–çš„äº‹å³è¾¹ç¼˜è®¡ç®—ï¼Œåœ¨ç±»ä¼¼äº CDN ä¸Šå®Œæˆçš„äº‹ã€‚ æµé‡è°ƒåº¦çš„ä¸»è¦åŠŸèƒ½ å¯¹äºæµé‡è°ƒåº¦ç³»ç»Ÿæ¥è¯´åº”å…·æœ‰çš„ä¸»è¦åŠŸèƒ½ï¼š ä¾æ®ç³»ç»Ÿè¿è¡Œçš„æƒ…å†µï¼Œè‡ªåŠ¨åœ°è¿›è¡Œæµé‡è°ƒåº¦ï¼Œåœ¨æ— éœ€äººå·¥å¹²é¢„çš„æƒ…å†µä¸‹ï¼Œæå‡æ•´ä¸ªç³»ç»Ÿçš„ç¨³å®šæ€§ï¼› è®©ç³»ç»Ÿåº”å¯¹çˆ†å“ç­‰çªå‘äº‹ä»¶æ—¶ï¼Œåœ¨å¼¹æ€§è®¡ç®—æ‰©ç¼©å®¹çš„è¾ƒé•¿æ—¶é—´çª—å£å†…æˆ–åº•å±‚èµ„æºæ¶ˆè€—æ®†å°½çš„æƒ…å†µä¸‹ï¼Œä¿æŠ¤ç³»ç»Ÿå¹³ç¨³è¿è¡Œã€‚ æµé‡è°ƒåº¦ç³»ç»Ÿè¿˜å¯ä»¥å®Œæˆä»¥ä¸‹å‡ æ–¹é¢çš„äº‹æƒ…ï¼š æœåŠ¡æµæ§ã€‚æœåŠ¡å‘ç°ã€æœåŠ¡è·¯ç”±ã€æœåŠ¡é™çº§ã€æœåŠ¡ç†”æ–­ã€æœåŠ¡ä¿æŠ¤ç­‰ã€‚ æµé‡æ§åˆ¶ã€‚è´Ÿè½½å‡è¡¡ã€æµé‡åˆ†é…ã€æµé‡æ§åˆ¶ã€å¼‚åœ°ç¾å¤‡ï¼ˆå¤šæ´»ï¼‰ç­‰ã€‚ æµé‡ç®¡ç†ã€‚åè®®è½¬æ¢ã€è¯·æ±‚æ ¡éªŒã€æ•°æ®ç¼“å­˜ã€æ•°æ®è®¡ç®—ç­‰ã€‚ æ‰€æœ‰è¿™äº›éƒ½æ˜¯ä¸€ä¸ªAPI GateWayåº”è¯¥åšçš„äº‹æƒ…ã€‚ æµé‡è°ƒåº¦çš„å…³é”®æŠ€æœ¯ è°ƒåº¦æµé‡é¦–å…ˆéœ€è¦æŠ—ä½æµé‡ï¼Œè€Œä¸”éœ€è¦ä¸€äº›æ¯”è¾ƒè½»é‡çš„ä¸šåŠ¡é€»è¾‘ã€‚ ä¸€ä¸ªå¥½çš„API GateWayåº”è¯¥å…·å¤‡ä»¥ä¸‹å…³é”®æŠ€æœ¯ï¼š é«˜æ€§èƒ½ã€‚é«˜æ€§èƒ½çš„æŠ€æœ¯ï¼Œä¹Ÿéœ€è¦ä½¿ç”¨é«˜æ€§èƒ½çš„è¯­è¨€ã€‚ æŠ—æµé‡ã€‚å…³é”®ç‚¹åœ¨äºé›†ç¾¤æŠ€æœ¯ï¼Œè€Œè¯¥æŠ€æœ¯çš„å…³é”®ç‚¹ä¸ºç»“ç‚¹ä¹‹é—´çš„æ•°æ®å…±äº«ã€‚ä¸”å› éƒ¨ç½²åœ¨å¹¿åŸŸç½‘ä¸Šä¹Ÿéœ€è¦é›†ç¾¤çš„åˆ†ç»„æŠ€æœ¯ã€‚ ä¸šåŠ¡é€»è¾‘ã€‚éœ€è¦æœ‰ç®€å•çš„ä¸šåŠ¡é€»è¾‘ã€‚ æœåŠ¡åŒ–ã€‚èƒ½å¤Ÿé€šè¿‡ Admin API æ¥ä¸åœæœºåœ°ç®¡ç†é…ç½®å˜æ›´ã€‚ çŠ¶æ€æ•°æ®è°ƒåº¦ çŠ¶æ€æœåŠ¡ä¼šä¿å­˜æ•°æ®ï¼Œä¸”ä¸èƒ½ä¸¢å¤±ï¼Œéœ€è¦éšæœåŠ¡ä¸€èµ·è°ƒåº¦ã€‚ ä¸€èˆ¬é€šè¿‡è½¬ç§»åˆ°ç¬¬ä¸‰æ–¹æœåŠ¡ä½¿å…¶å˜ä¸ºæ— çŠ¶æ€çš„æœåŠ¡ï¼Œä½†æ•°æ®å­˜å‚¨ç»“ç‚¹åœ¨Scaleä¸Šæ¯”è¾ƒå›°éš¾ï¼Œæ‰€ä»¥æˆäº†ä¸€ä¸ªå•ç‚¹çš„ç“¶é¢ˆã€‚ åˆ†å¸ƒå¼äº‹åŠ¡ä¸€è‡´æ€§é—®é¢˜ æ•°æ® replication åˆ™ä¼šå¸¦æ¥æ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜ï¼Œè¿›è€Œå¯¹æ€§èƒ½å¸¦æ¥ä¸¥é‡çš„å½±å“ã€‚ è§£å†³æ•°æ®ä¸ä¸¢å¤±æˆ–è€…è¯´ä¿è¯æ•°æ®é«˜å¯ç”¨æ€§çš„é—®é¢˜ï¼Œæœ¬è´¨å°±æ˜¯é€šè¿‡æ•°æ®å†—ä½™æ¥è§£å†³ã€‚ è§£å†³æ•°æ®å‰¯æœ¬é—´çš„ä¸€è‡´æ€§é—®é¢˜ï¼Œä¸€èˆ¬æœ‰ä»¥ä¸‹æ–¹æ¡ˆï¼š M-Sæ–¹æ¡ˆ M-Mæ–¹æ¡ˆ ä¸¤é˜¶æ®µå’Œä¸‰é˜¶æ®µæäº¤æ–¹æ¡ˆ Paxosæ–¹æ¡ˆ é€šè¿‡ä¸šåŠ¡è¡¥å¿çš„æ–¹å¼è§£å†³æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œå³æ˜¯åœ¨åº”ç”¨å±‚ä¸Šè§£å†³äº‹åŠ¡é—®é¢˜ã€‚ è‹¥è¦åœ¨æ•°æ®å±‚è§£å†³äº‹åŠ¡é—®é¢˜ï¼Œåˆ™Paxosç®—æ³•åˆ™å¯ä»¥å®ç°ã€‚ æ•°æ®ç»“ç‚¹çš„åˆ†å¸ƒå¼æ–¹æ¡ˆ çœŸæ­£å®Œæ•´è§£å†³æ•°æ® Scale é—®é¢˜çš„åº”è¯¥è¿˜æ˜¯æ•°æ®ç»“ç‚¹è‡ªèº«ã€‚ åªæœ‰æ•°æ®ç»“ç‚¹è‡ªèº«è§£å†³äº†è¿™ä¸ªé—®é¢˜æ‰èƒ½åšåˆ°å¯¹ä¸Šå±‚ä¸šåŠ¡å±‚çš„é€æ˜ï¼Œä¸šåŠ¡å±‚å¯ä»¥åƒæ“ä½œå•æœºæ•°æ®åº“ä¸€æ ·æ¥æ“ä½œåˆ†å¸ƒå¼æ•°æ®åº“ï¼Œè¿™æ ·æ‰èƒ½åšåˆ°æ•´ä¸ªåˆ†å¸ƒå¼æœåŠ¡æ¶æ„çš„è°ƒåº¦ã€‚å³è¯¥é—®é¢˜åº”è¯¥è§£å†³åœ¨æ•°æ®å­˜å‚¨æ–¹ã€‚æ•°æ®å­˜å‚¨ç»“æœæœ‰å¤ªå¤šä¸åŒçš„Schemeï¼Œå¦‚AWSçš„Auroraã€PingCAPçš„TiDBã€MySQLClusterã€é˜¿é‡Œçš„OceanBaseç­‰ã€‚è€Œå¯¹äºä¸€äº›éœ€è¦æ–‡ä»¶å­˜å‚¨çš„ï¼Œåˆ™éœ€è¦åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿçš„æ”¯æŒï¼Œ çŠ¶æ€æ•°æ®è°ƒåº¦åº”è¯¥æ˜¯åœ¨ IaaS å±‚çš„æ•°æ®å­˜å‚¨è§£å†³çš„é—®é¢˜ï¼Œè€Œä¸æ˜¯åœ¨ PaaS å±‚æˆ–è€… SaaS å±‚æ¥è§£å†³çš„ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:7:0","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"PaaSå¹³å° ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:8:0","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"è½¯ä»¶å·¥ç¨‹èƒ½åŠ›ä½“ç° æé«˜æœåŠ¡çš„SLA ä¸»è¦è¡¨ç°åœ¨ä¸¤ä¸ªæ–¹é¢ï¼š é«˜å¯ç”¨çš„ç³»ç»Ÿ è‡ªåŠ¨åŒ–çš„è¿ç»´ èƒ½åŠ›å’Œèµ„æºé‡ç”¨æˆ–å¤ç”¨ å…¶ä¸»è¦è¡¨ç°åœ¨ä¸¤ä¸ªæ–¹é¢ï¼š è½¯ä»¶æ¨¡å—çš„é‡ç”¨ è½¯ä»¶è¿è¡Œç¯å¢ƒå’Œèµ„æºçš„é‡ç”¨ â€œè½¯ä»¶æŠ½è±¡çš„èƒ½åŠ›â€å’Œâ€œè½¯ä»¶æ ‡å‡†åŒ–çš„èƒ½åŠ›â€ è¿‡ç¨‹çš„è‡ªåŠ¨åŒ– è½¯ä»¶ç”Ÿäº§æµæ°´çº¿ è½¯ä»¶è¿ç»´è‡ªåŠ¨åŒ– è½¯ä»¶å·¥ç¨‹çš„ä¸‰ä¸ªæœ¬è´¨ä¸åˆ†å¸ƒå¼æŠ€æœ¯ç‚¹æ˜¯é«˜åº¦ä¸€è‡´çš„ï¼Œå³ä¸‹é¢ä¸‰ä¸ªæ–¹é¢çš„èƒ½åŠ›ï¼š åˆ†å¸ƒå¼å¤šå±‚çš„ç³»ç»Ÿæ¶æ„ æœåŠ¡åŒ–çš„èƒ½åŠ›ä¾›åº” è‡ªåŠ¨åŒ–çš„è¿ç»´èƒ½åŠ› ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:8:1","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"PaaSå¹³å°çš„æœ¬è´¨ ä¸€ä¸ªå¥½çš„PaaSå¹³å°åº”è¯¥å…·æœ‰åˆ†å¸ƒå¼ã€æœåŠ¡åŒ–ã€è‡ªåŠ¨åŒ–éƒ¨ç½²ã€é«˜å¯ç”¨ã€æ•æ·ä»¥åŠåˆ†å±‚å¼€æ”¾çš„ç‰¹å¾ï¼Œå¹¶å¯ä¸IaaSå®ç°è‰¯å¥½çš„è”åŠ¨ã€‚ PaaSå’Œä¼ ç»Ÿä¸­é—´ä»¶æœ€å¤§çš„å·®åˆ«ï¼š æœåŠ¡åŒ–æ˜¯PaaSçš„æœ¬è´¨ è½¯ä»¶æ¨¡å—é‡ç”¨ï¼ŒæœåŠ¡æ²»ç†ï¼Œå¯¹å¤–æä¾›èƒ½åŠ›æ˜¯PaaSçš„æœ¬è´¨ã€‚ åˆ†å¸ƒå¼æ˜¯PaaSçš„æ ¹æœ¬ç‰¹æ€§ å¤šç§Ÿæˆ·éš”ç¦»ã€é«˜å¯ç”¨ã€æœåŠ¡ç¼–æ’æ˜¯PaaSçš„åŸºæœ¬ç‰¹æ€§ã€‚ è‡ªåŠ¨åŒ–æ˜¯PaaSçš„çµé­‚ è‡ªåŠ¨åŒ–éƒ¨ç½²å®‰è£…è¿ç»´ï¼Œè‡ªåŠ¨åŒ–ä¼¸ç¼©è°ƒåº¦æ˜¯PaaSçš„å…³é”®ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:8:2","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"PaaSå¹³å°çš„æ€»ä½“æ¶æ„ ä¸€ä¸ªå®Œæ•´çš„PaaSå¹³å°ä¼šåŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š PaaSè°ƒåº¦å±‚ â€“ ä¸»è¦æ˜¯PaaSçš„è‡ªåŠ¨åŒ–å’Œåˆ†å¸ƒå¼å¯¹äºé«˜å¯ç”¨é«˜æ€§èƒ½çš„ç®¡ç†ã€‚ PaaSèƒ½åŠ›æœåŠ¡å±‚ â€“ ä¸»è¦æ˜¯PaaSçœŸæ­£æä¾›ç»™ç”¨æˆ·çš„æœåŠ¡å’Œèƒ½åŠ›ã€‚ PaaSçš„æµé‡è°ƒåº¦ â€“ ä¸»è¦æ˜¯ä¸æµé‡è°ƒåº¦ç›¸å…³çš„ä¸œè¥¿ï¼ŒåŒ…æ‹¬å¯¹é«˜å¹¶å‘çš„ç®¡ç†ã€‚ PaaSçš„è¿è¥ç®¡ç† â€“ è½¯ä»¶èµ„æºåº“ã€è½¯ä»¶æ¥å…¥ã€è®¤è¯å’Œå¼€æ”¾å¹³å°é—¨æˆ·ã€‚ PaaSçš„è¿ç»´ç®¡ç† â€“ ä¸»è¦æ˜¯DevOpsç›¸å…³çš„ä¸œè¥¿ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:8:3","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"PaaSå¹³å°çš„ç”Ÿäº§å’Œè¿ç»´ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:8:4","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"å°ç»“ ä¸ºäº†æ„å»ºåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œæˆ‘ä»¬é¢ä¸´çš„ä¸»è¦é—®é¢˜å¦‚ä¸‹ï¼š åˆ†å¸ƒå¼ç³»ç»Ÿçš„ç¡¬ä»¶æ•…éšœå‘ç”Ÿç‡æ›´é«˜ï¼Œæ•…éšœå‘ç”Ÿæ˜¯å¸¸æ€ï¼Œéœ€è¦å°½å¯èƒ½åœ°å°†è¿ç»´æµç¨‹è‡ªåŠ¨åŒ–ã€‚ éœ€è¦è‰¯å¥½åœ°è®¾è®¡æœåŠ¡ï¼Œé¿å…æŸæœåŠ¡çš„å•ç‚¹æ•…éšœå¯¹ä¾èµ–å®ƒçš„å…¶ä»–æœåŠ¡é€ æˆå¤§é¢ç§¯å½±å“ã€‚ ä¸ºäº†å®¹é‡çš„å¯ä¼¸ç¼©æ€§ï¼ŒæœåŠ¡çš„æ‹†åˆ†ã€è‡ªæ²»å’Œæ— çŠ¶æ€å˜å¾—æ›´åŠ é‡è¦ï¼Œå¯èƒ½éœ€è¦å¯¹è€çš„è½¯ä»¶é€»è¾‘åšå¤§çš„ä¿®æ”¹ã€‚ è€çš„æœåŠ¡å¯èƒ½æ˜¯å¼‚æ„çš„ï¼Œæ­¤æ—¶éœ€è¦è®©å®ƒä»¬ä½¿ç”¨æ ‡å‡†çš„åè®®ï¼Œä»¥ä¾¿å¯ä»¥è¢«è°ƒåº¦ã€ç¼–æ’ï¼Œä¸”äº’ç›¸ä¹‹é—´å¯ä»¥é€šä¿¡ã€‚ æœåŠ¡è½¯ä»¶æ•…éšœçš„å¤„ç†ä¹Ÿå˜å¾—å¤æ‚ï¼Œéœ€è¦ä¼˜åŒ–çš„æµç¨‹ï¼Œä»¥åŠ å¿«æ•…éšœçš„æ¢å¤ã€‚ ä¸ºäº†ç®¡ç†å„ä¸ªæœåŠ¡çš„å®¹é‡ï¼Œè®©åˆ†å¸ƒå¼ç³»ç»Ÿå‘æŒ¥å‡ºæœ€ä½³æ€§èƒ½ï¼Œéœ€è¦æœ‰æµé‡è°ƒåº¦æŠ€æœ¯ã€‚ åˆ†å¸ƒå¼å­˜å‚¨ä¼šè®©äº‹åŠ¡å¤„ç†å˜å¾—å¤æ‚ï¼›åœ¨äº‹åŠ¡é‡åˆ°æ•…éšœæ— æ³•è¢«è‡ªåŠ¨æ¢å¤çš„æƒ…å†µä¸‹ï¼Œæ‰‹åŠ¨æ¢å¤æµç¨‹ä¹Ÿä¼šå˜å¾—å¤æ‚ã€‚ æµ‹è¯•å’ŒæŸ¥é”™çš„å¤æ‚åº¦å¢å¤§ã€‚ ç³»ç»Ÿçš„ååé‡ä¼šå˜å¤§ï¼Œä½†å“åº”æ—¶é—´ä¼šå˜é•¿ã€‚ ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬æ·±å…¥äº†è§£äº†ä»¥ä¸‹è¿™äº›è§£å†³æ–¹æ¡ˆï¼š éœ€è¦æœ‰å®Œå–„çš„ç›‘æ§ç³»ç»Ÿï¼Œä»¥ä¾¿å¯¹æœåŠ¡è¿è¡ŒçŠ¶æ€æœ‰å…¨é¢çš„äº†è§£ã€‚ è®¾è®¡æœåŠ¡æ—¶è¦åˆ†æå…¶ä¾èµ–é“¾ï¼›å½“éå…³é”®æœåŠ¡æ•…éšœæ—¶ï¼Œå…¶ä»–æœåŠ¡è¦è‡ªåŠ¨é™çº§åŠŸèƒ½ï¼Œé¿å…è°ƒç”¨è¯¥æœåŠ¡ã€‚ é‡æ„è€çš„è½¯ä»¶ï¼Œä½¿å…¶èƒ½è¢«æœåŠ¡åŒ–ï¼›å¯ä»¥å‚è€ƒSOAå’Œå¾®æœåŠ¡çš„è®¾è®¡æ–¹å¼ï¼Œç›®æ ‡æ˜¯å¾®æœåŠ¡åŒ–ï¼›ä½¿ç”¨Dockerå’ŒKubernetesæ¥è°ƒåº¦æœåŠ¡ã€‚ ä¸ºè€çš„æœåŠ¡ç¼–å†™æ¥å£é€»è¾‘æ¥ä½¿ç”¨æ ‡å‡†åè®®ï¼Œæˆ–åœ¨å¿…è¦æ—¶é‡æ„è€çš„æœåŠ¡ä»¥ä½¿å¾—å®ƒä»¬æœ‰è¿™äº›åŠŸèƒ½ã€‚ è‡ªåŠ¨æ„å»ºæœåŠ¡çš„ä¾èµ–åœ°å›¾ï¼Œå¹¶å¼•å…¥å¥½çš„å¤„ç†æµç¨‹ï¼Œè®©å›¢é˜Ÿèƒ½ä»¥æœ€å¿«é€Ÿåº¦å®šä½å’Œæ¢å¤æ•…éšœã€‚ ä½¿ç”¨ä¸€ä¸ªAPI Gatewayï¼Œå®ƒå…·å¤‡æœåŠ¡æµå‘æ§åˆ¶ã€æµé‡æ§åˆ¶å’Œç®¡ç†çš„åŠŸèƒ½ã€‚ äº‹åŠ¡å¤„ç†å»ºè®®åœ¨å­˜å‚¨å±‚å®ç°ï¼›æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œæˆ–è€…é™çº§ä½¿ç”¨æ›´ç®€å•ã€ååé‡æ›´å¤§çš„æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆï¼Œæˆ–è€…é€šè¿‡äºŒé˜¶æ®µæäº¤ã€Paxosã€Raftã€NWRç­‰æ–¹æ¡ˆä¹‹ä¸€ï¼Œä½¿ç”¨ååé‡å°çš„å¼ºä¸€è‡´æ–¹æ¡ˆã€‚ é€šè¿‡æ›´çœŸå®åœ°æ¨¡æ‹Ÿç”Ÿäº§ç¯å¢ƒï¼Œä¹ƒè‡³åœ¨ç”Ÿäº§ç¯å¢ƒä¸­åšç°åº¦å‘å¸ƒï¼Œä»è€Œå¢åŠ æµ‹è¯•å¼ºåº¦ï¼›åŒæ—¶åšå……åˆ†çš„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ä»¥å‘ç°å’Œæ¶ˆé™¤ç¼ºé™·ï¼›æœ€åï¼Œåœ¨æœåŠ¡æ•…éšœå‘ç”Ÿæ—¶ï¼Œç›¸å…³çš„å¤šä¸ªå›¢é˜ŸåŒ æ—¶ä¸Šçº¿è‡ªæŸ¥æœåŠ¡çŠ¶æ€ï¼Œä»¥æœ€å¿«åœ°å®šä½æ•…éšœåŸå› ã€‚ é€šè¿‡å¼‚æ­¥è°ƒç”¨æ¥å‡å°‘å¯¹çŸ­å“åº”æ—¶é—´çš„ä¾èµ–ï¼›å¯¹å…³é”®æœåŠ¡æä¾›ä¸“å±ç¡¬ä»¶èµ„æºï¼Œå¹¶ä¼˜åŒ–è½¯ä»¶é€»è¾‘ä»¥ç¼©çŸ­å“åº”æ—¶é—´ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/0.html/:9:0","tags":["åˆ†å¸ƒå¼æ¶æ„","note","æ¶æ„æœ¬è´¨"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨note","uri":"/posts/distributed_structure/structure/0.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"åˆ†å¸ƒå¼ç³»ç»Ÿå…¨å±€å”¯ä¸€IDç”Ÿæˆå™¨ ä»£ç å®ç°ç¤ºä¾‹repoåœ°å€ ä½¿ç”¨åœºæ™¯ä¸€èˆ¬ï¼š åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡æ—¶ï¼Œæ•°æ®åˆ†ç‰‡åœºæ™¯ä¸‹ï¼Œé€šå¸¸éœ€è¦ä¸€ä¸ªå…¨å±€å”¯ä¸€idï¼› åœ¨æ¶ˆæ¯ç³»ç»Ÿä¸­éœ€è¦æ¶ˆæ¯å”¯ä¸€IDæ ‡è¯†æ¥é˜²æ­¢æ¶ˆæ¯é‡å¤ï¼› å¤šç³»ç»Ÿæ‰“é€šéœ€è¦ä¸€ä¸ªå…¨å±€å”¯ä¸€æ ‡è¯† ï¼ˆå¦‚é›†å›¢å„ä¸šåŠ¡çº¿é¢å¯¹ä¸åŒç”¨æˆ·ï¼Œéœ€è¦ä¸€ä¸ªå…¨å±€ç”¨æˆ·idï¼‰ï¼› ä¸€èˆ¬æœ‰ä¸‰ç§æ–¹å¼å®ç°ï¼š UUID Universally Unique Identifier æ˜¯è‡ªç”±è½¯ä»¶åŸºé‡‘ä¼šç»„ç»‡åˆ¶å®šçš„å”¯ä¸€è¾¨è¯†IDç”Ÿæˆæ ‡å‡†ï¼Œå¤§å¤šæ•°ç³»ç»Ÿå·²å®ç°ï¼Œå¦‚å¾®è½¯çš„GUIDå®ç°ã€‚ ç”Ÿæˆæ ¼å¼å¦‚ï¼š3d422567-f034-4ab4-b98f-a34fd263d0deã€‚ sequence ä½¿ç”¨æ•°æ®åº“ç»´æŠ¤ä¸€å¼ æ˜ å°„è¡¨ï¼Œä½¿ç”¨ä¸»é”®è‡ªå¢ç”Ÿæˆå”¯ä¸€IDã€‚ SnowFlake Twitterå®ç°çš„ç®—æ³•ï¼Œä½¿ç”¨æ—¶é—´æˆ³+æœºå™¨åˆ†é…æ ‡è¯†+è‡ªå¢åºåˆ—ç»„æˆ64ä½æ•°å­—IDã€‚ ç”Ÿæˆæ ¼å¼å¦‚ï¼š1292755860950487050 ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/4.html/:0:0","tags":["åˆ†å¸ƒå¼æ¶æ„","å…¨å±€ID"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿå…¨å±€å”¯ä¸€IDç”Ÿæˆå™¨","uri":"/posts/distributed_structure/structure/4.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"UUID å®ç°å¯é€šè¿‡ä»¥ä¸‹æ–¹å¼ï¼š googleæ–¹æ¡ˆï¼šhttps://github.com/google/uuid linuxå‘½ä»¤ï¼š/usr/bin/uuidgen ä¼˜ç‚¹ï¼šæ€§èƒ½é«˜ï¼Œæœ¬åœ°ç”Ÿæˆï¼Œæ— ä¾èµ–ã€‚ ç¼ºç‚¹ï¼šç”Ÿæˆæ ¼å¼å¤ªé•¿ï¼Œä¸é€‚åˆåšæ•°æ®åº“ä¸»é”®idï¼ŒåŸºäºmacåœ°å€ç”Ÿæˆç®—æ³•å¯èƒ½å¯¼è‡´macåœ°å€æ³„æ¼ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/4.html/:1:0","tags":["åˆ†å¸ƒå¼æ¶æ„","å…¨å±€ID"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿå…¨å±€å”¯ä¸€IDç”Ÿæˆå™¨","uri":"/posts/distributed_structure/structure/4.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"sequece å®ç°çš„æ—¶å€™éœ€è¦æ³¨æ„å¹¶å‘å†™è¯»ï¼Œä½¿ç”¨äº‹åŠ¡è¿›è¡Œè§£å†³ã€‚ åœ¨å†—ä½™æœåŠ¡éƒ¨ç½²æ—¶ï¼Œå¯éƒ¨ç½²å¤šä¸ªåº“è¡¨ä¸”è®¾ç½®ä¸åŒstepï¼Œè®©æ¯ä¸ªsequenceäº§ç”Ÿä¸åŒidã€‚ å¯æå‰è¿›è¡Œåˆ†é…idç„¶ååŠ è½½åˆ°ä¸šåŠ¡ä¸­ï¼Œå¯å‡å°‘æ•°æ®åº“IOæ“ä½œï¼Œæé«˜æ€§èƒ½ã€‚ ä¼˜ç‚¹ï¼šIDå•è°ƒé€’å¢ï¼Œæ–¹ä¾¿æ’åºï¼Œä¸”æ–¹æ¡ˆæˆç†Ÿéƒ¨ç½²ç®€å•ã€‚ ç¼ºç‚¹ï¼šä¾èµ–DBï¼Œè‹¥ä¸ºå•èŠ‚ç‚¹åˆ™æœ‰æ€§èƒ½ç“¶é¢ˆï¼Œè‹¥ä¸ºä¸»ä»æ¶æ„åˆ™éœ€è¦æ³¨æ„ä¸»ä»ä¸€è‡´æ€§é—®é¢˜ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/4.html/:2:0","tags":["åˆ†å¸ƒå¼æ¶æ„","å…¨å±€ID"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿå…¨å±€å”¯ä¸€IDç”Ÿæˆå™¨","uri":"/posts/distributed_structure/structure/4.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"SnowFlake 1ä½æœ€é«˜ä½ï¼šç¬¦å·ä½ä¸ä½¿ç”¨ï¼› 41ä½æ—¶é—´æˆ³ï¼š2^41-1ä¸ªæ•°å­—ä»£è¡¨69å¹´ï¼Œæ‰€ä»¥è®¾ç½®å‘å·èµ·å§‹æ—¶é—´æœ€å¥½ä¸ºå‘å·å™¨é¦–æ¬¡è¿è¡Œæ—¶é—´ ï¼› 10ä½å·¥ä½œæœºå™¨idï¼šä¹Ÿä¼šåˆ†ä¸º5ä½datacenterIdå’Œ5ä½workerId ï¼› 12ä½åºåˆ—å·ï¼š2^12-1ä¸ªæ•°å­—æ€»å…±4095ï¼ŒåŒä¸€æ¯«ç§’åŒä¸€æœºå™¨èŠ‚ç‚¹å¯ä»¥å¹¶å‘äº§ç”Ÿ4095ä¸ªä¸åŒIdï¼› åœ¨éƒ¨ç½²ä¸Šé¢ï¼Œä¸åŒæœºå™¨ä½¿ç”¨ä¸åŒDatacenterIdï¼ˆæ•°æ®ä¸­å¿ƒé›†ç¾¤idï¼‰å’ŒWorkerId ï¼ˆæœºå™¨èŠ‚ç‚¹idï¼‰ï¼Œæœ€å¤šå¯éƒ¨ç½²1024ä¸ªèŠ‚ç‚¹ã€‚ å¤šèŠ‚ç‚¹éƒ¨ç½²æ—¶ï¼Œå¯ä½¿ç”¨zookeeperåšèŠ‚ç‚¹åˆ†å¸ƒå¼åè°ƒè¿›è¡Œä¸€è‡´æ€§ç®¡ç†ï¼Œå½“å‡ºç°æ—¶é’Ÿå›æ‹¨å¯ç”±zkæ¥åŒæ­¥æ—¶é—´æˆ–æ‘˜é™¤èŠ‚ç‚¹ã€‚ ä¼˜ç‚¹ï¼šIDå‘ˆé€’å¢è¶‹åŠ¿ï¼Œæ»¡è¶³æ’åºåœºæ™¯ï¼Œä¸ä¾èµ–äºå…¶ä»–ç»„ä»¶ä¸”æ˜“äºç»´æŠ¤ã€‚ ç¼ºç‚¹ï¼šä¾èµ–æœºå™¨æ—¶é’Ÿï¼Œä¼šå› ä¸ºæ—¶é’Ÿå›æ‹¨é—®é¢˜ä¼šå¯¼è‡´å‘å·é‡å¤æˆ–ä¸å¯ç”¨ï¼Œä»£ç å®ç°æ—¶é‡‡ç”¨å¾ªç¯ç­‰å¾…ä¸‹ä¸€æ—¶é’Ÿçš„æ–¹å¼ï¼Œå¯èƒ½ä¼šæœ‰æ€§èƒ½é—®é¢˜ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/4.html/:3:0","tags":["åˆ†å¸ƒå¼æ¶æ„","å…¨å±€ID"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿå…¨å±€å”¯ä¸€IDç”Ÿæˆå™¨","uri":"/posts/distributed_structure/structure/4.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"æ€»ç»“ UUID sequence snowflake æè¿° é›†æˆåœ¨æ ‡å‡†ç³»ç»Ÿä¸­å¯ç®€å•ç”Ÿæˆ ä½¿ç”¨DBè‡ªå¢idå®ç° æ ¹æ®æ—¶é—´+æœºå™¨åˆ†é…æ ‡è¯†+è‡ªå¢åºåˆ—ç”Ÿæˆ ä¾èµ– æ—  DB æ—  ä¼˜ç‚¹ æœ¬åœ°ç”Ÿæˆæ€§èƒ½é«˜ éƒ¨ç½²ç®€å•ç”ŸæˆIDå•è°ƒé€’å¢ éƒ¨ç½²ç®€å•ç”ŸæˆIDå•è°ƒé€’å¢ ç¼ºç‚¹ ç”Ÿæˆå·ç å¤æ‚ï¼Œå¾ˆå¤šåœºæ™¯ä¸åˆ©äºä½¿ç”¨ ä¾èµ–DBæœ‰æ€§èƒ½é—®é¢˜å’Œé‡å¤å‘å·é—®é¢˜å·ç å­˜åœ¨è§„å¾‹ä¼šæ³„éœ²ä¿¡æ¯ ä¾èµ–ç³»ç»Ÿæ—¶é’Ÿï¼Œæ—¶é’Ÿå›æ‹¨ä¼šé€ æˆé‡å¤å‘å·é—®é¢˜ é’ˆå¯¹sequenceè¡¨æ–¹å¼ã€snowflakeæ–¹å¼çš„ç¼ºç‚¹ï¼Œç¾å›¢leafç»™å‡ºäº†æ›´è¯¦ç»†çš„ä¼˜åŒ–æ–¹æ¡ˆå¯ä»¥å‚è€ƒï¼Œè¿™é‡Œå°±ä¸è¿‡å¤šå¼•ç”¨ï¼Œç›´æ¥æŸ¥çœ‹å‚è€ƒæ–‡æ¡£ã€‚ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/4.html/:4:0","tags":["åˆ†å¸ƒå¼æ¶æ„","å…¨å±€ID"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿå…¨å±€å”¯ä¸€IDç”Ÿæˆå™¨","uri":"/posts/distributed_structure/structure/4.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"å‚è€ƒ https://mp.weixin.qq.com/s/XjF_6x7uRzX-gLCdnb5DQQ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/4.html/:5:0","tags":["åˆ†å¸ƒå¼æ¶æ„","å…¨å±€ID"],"title":"åˆ†å¸ƒå¼ç³»ç»Ÿå…¨å±€å”¯ä¸€IDç”Ÿæˆå™¨","uri":"/posts/distributed_structure/structure/4.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"æœåŠ¡é™æµçš„é€šç”¨æ–¹æ¡ˆ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/2.html/:0:0","tags":["åˆ†å¸ƒå¼æ¶æ„","æœåŠ¡é™æµ"],"title":"æœåŠ¡é™æµçš„é€šç”¨æ–¹æ¡ˆ","uri":"/posts/distributed_structure/structure/2.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"æœåŠ¡é™æµåœºæ™¯ é™æµå¸¸è§ä½¿ç”¨å±‚é¢ï¼š ç”¨æˆ·ç½‘ç»œå±‚ï¼šçªå‘çš„æµé‡åœºæ™¯å¦‚çƒ­ç‚¹äº‹ä»¶æµé‡ï¼Œæ¶æ„åˆ·æµï¼Œç«å¯¹çˆ¬è™«ç­‰ï¼› å†…éƒ¨åº”ç”¨å±‚ï¼šä¸Šæ¸¸æœåŠ¡çš„å¼‚å¸¸è°ƒç”¨ï¼Œè„šæœ¬å¼‚å¸¸è¯·æ±‚ï¼Œå¤±è´¥é‡è¯•ç­–ç•¥é€ æˆçš„æµé‡çªå‘ï¼› ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/2.html/:1:0","tags":["åˆ†å¸ƒå¼æ¶æ„","æœåŠ¡é™æµ"],"title":"æœåŠ¡é™æµçš„é€šç”¨æ–¹æ¡ˆ","uri":"/posts/distributed_structure/structure/2.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"å®ç°æ–¹å¼ ä»¥ä¸‹å®ç°æ–¹å¼çš„ä»£ç ç¤ºä¾‹å‚è€ƒï¼šrepoåœ°å€ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/2.html/:2:0","tags":["åˆ†å¸ƒå¼æ¶æ„","æœåŠ¡é™æµ"],"title":"æœåŠ¡é™æµçš„é€šç”¨æ–¹æ¡ˆ","uri":"/posts/distributed_structure/structure/2.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"è®¡æ•°å™¨ æ¯”è¾ƒå¸¸è§ä¸”ç®€å•çš„æ–¹å¼å³ä¸ºè®¡æ•°å™¨æ–¹å¼ï¼Œä½¿ç”¨æŸä¸€å…¬å…±å­˜å‚¨å˜é‡è¿›è¡Œè®¡æ•°ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯åœ¨è®¡æ•°æ—¶ä¿è¯åŸå­æ€§ã€‚ ä½¿ç”¨åœºæ™¯ï¼šé€‚ç”¨äºåšAPIé™æµæˆ–è€…æ ¹æ®IPåšç²’åº¦æ§åˆ¶ç­‰ï¼› å±€é™ï¼šç”±äºè®¡æ•°ä¸€èˆ¬ä¸ºå®šé€Ÿæ‰€ä»¥å¯¹äºæ›´ç»†ç²’åº¦æ—¶é—´æ§åˆ¶èƒ½åŠ›è¾ƒä¸ºæœ‰é™ï¼› ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/2.html/:2:1","tags":["åˆ†å¸ƒå¼æ¶æ„","æœåŠ¡é™æµ"],"title":"æœåŠ¡é™æµçš„é€šç”¨æ–¹æ¡ˆ","uri":"/posts/distributed_structure/structure/2.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"æ¼æ–—æ¡¶é™æµ æ¼æ–—æ¡¶æ ¸å¿ƒåœ¨äºå®ƒæ˜¯åŒ€é€Ÿçš„ï¼Œå½“æ¡¶æ»¡äº†ï¼Œæ–°æµé‡è¿‡æ¥å°±ä¼šè¢«é™æµã€‚ ä½¿ç”¨åœºæ™¯ï¼šä¸è®¡æ•°å™¨é™æµç›¸æ¯”é™æµè¿‡åçš„æµé‡è¿˜æœ‰æœºä¼šæµå…¥è€Œä¸æ˜¯ç›´æ¥èˆå¼ƒï¼Œé€‚åˆäºé¢‘ç‡æ§åˆ¶æ“ä½œï¼› å±€é™ï¼šè‹¥çŸ­æ—¶æœ‰å¤§é‡çªå‘è¯·æ±‚å³ä½¿è´Ÿè½½å‹åŠ›ä¸å¤§ï¼Œä½†è¯·æ±‚ä»éœ€è¦åœ¨é˜Ÿåˆ—å¤„ç­‰å¾…å¤„ç†ï¼› ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/2.html/:2:2","tags":["åˆ†å¸ƒå¼æ¶æ„","æœåŠ¡é™æµ"],"title":"æœåŠ¡é™æµçš„é€šç”¨æ–¹æ¡ˆ","uri":"/posts/distributed_structure/structure/2.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"ä»¤ç‰Œæ¡¶é™æµ ä»¤ç‰Œæ¡¶ç›¸å¯¹äºæ¼æ–—æ¡¶æ§åˆ¶æ—¶é—´ç²’åº¦å’Œåº”å¯¹çªç„¶æµé‡çš„èƒ½åŠ›æ›´åŠ ä¼˜ç§€ã€‚é€šè¿‡åŒ€é€Ÿå¾€æ¡¶é‡Œæ”¾ä»¤ç‰Œï¼Œæ§åˆ¶æ¡¶æœ€å¤§å®¹é‡å’Œæ”¾å…¥ä»¤ç‰Œé€Ÿç‡ã€‚è¯·æ±‚è‹¥æ‹¿åˆ°äº†ä»¤ç‰Œåˆ™å¯ä»¥é€šè¿‡ï¼Œåä¹‹åˆ™è¢«é™æµã€‚è€Œä»¤ç‰Œæ˜¯å¯ä»¥ç§¯ç´¯çš„ï¼Œè¯´æ˜èƒ½å¤Ÿåº”å¯¹æµé‡ä¸åŒå¤§å°çš„åœºæ™¯ã€‚ ä½¿ç”¨åœºæ™¯ï¼šåº”ç”¨è¾ƒä¸ºå¹¿æ³›ï¼Œå¦‚javaä¸­çš„guavaå°±æœ‰å®ç°ï¼› ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/2.html/:2:3","tags":["åˆ†å¸ƒå¼æ¶æ„","æœåŠ¡é™æµ"],"title":"æœåŠ¡é™æµçš„é€šç”¨æ–¹æ¡ˆ","uri":"/posts/distributed_structure/structure/2.html/"},{"categories":["åˆ†å¸ƒå¼æ¶æ„"],"content":"å‚è€ƒ åˆ†å¸ƒå¼é«˜å¹¶å‘æœåŠ¡é™æµå®ç°æ–¹æ¡ˆ ","date":"2022-01-29","objectID":"/posts/distributed_structure/structure/2.html/:3:0","tags":["åˆ†å¸ƒå¼æ¶æ„","æœåŠ¡é™æµ"],"title":"æœåŠ¡é™æµçš„é€šç”¨æ–¹æ¡ˆ","uri":"/posts/distributed_structure/structure/2.html/"},{"categories":["Go"],"content":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Atomic ä»¥ä¸‹å¤§å¤šä¸ºé¸Ÿçªå¤§ä½¬çš„Go å¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ ä¸­æ‘˜å½•çš„ç¬”è®° ä»£ç repo ","date":"2022-01-29","objectID":"/posts/golang/concurrent/0.html/:0:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Atomic","uri":"/posts/golang/concurrent/0.html/"},{"categories":["Go"],"content":"åŸå­æ“ä½œåŸºç¡€ åœ¨å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œå¾ˆå¤šåœºæ™¯ä¸­ä½¿ç”¨å¹¶å‘åŸè¯­è¾ƒä¸ºå¤æ‚ï¼Œè€ŒåŸå­æ“ä½œå¯ä»¥æ›´å®¹æ˜“å®ç°åº•å±‚ä¼˜åŒ–ã€‚ å› ä¸ºåŸå­æ“ä½œå°±æ˜¯æœ€å°çš„ç²’å­ä¸å¯åˆ†å‰²ï¼Œå¹¶ä¸ä¼šåƒå…¶ä»–æ“ä½œä¸€æ ·äº§ç”Ÿç«äº‰çš„é€»è¾‘ã€‚ç”±åŸå­æ“ä½œè¿›è¡Œç»„åˆå°±èƒ½å¤Ÿå®ç°æ¯”è¾ƒå¤æ‚çš„æŒ‡ä»¤æˆ–è€…æ“ä½œã€‚ CPUæä¾›äº†åŸºç¡€çš„åŸå­æ“ä½œï¼Œä½†ä¸åŒçš„CPUæ¶æ„ç”šè‡³ä¸åŒçš„ç‰ˆæœ¬æä¾›çš„åŸå­æ“ä½œçš„æŒ‡ä»¤æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥è¦ç”¨ä¸€ç§ç¼–ç¨‹è¯­è¨€å®ç°æ”¯æŒä¸åŒæ¶æ„çš„åŸå­æ“ä½œæ˜¯ç›¸å½“æœ‰éš¾åº¦çš„ã€‚ åœ¨golangä¸­å°†æ›´åº•å±‚çš„ä¸åŒçš„æ¶æ„ä¸‹çš„å®ç°å°è£…æˆatomicåŒ…ï¼Œæä¾›äº†ä¸€ä¸ªé€šç”¨çš„åŸå­æ“ä½œAPIï¼ŒåŒ…æ‹¬äº†ä¿®æ”¹ç±»å‹çš„åŸå­æ“ä½œï¼ˆread-modify-write|RMWï¼‰å’ŒåŠ è½½å­˜å‚¨ç±»å‹çš„åŸå­æ“ä½œï¼ˆLoad|Storeï¼‰ã€‚ ä¸åŒçš„æ¶æ„ä¸­è™½ç„¶ä»£ç ä¸€æ ·ï¼Œä½†äº§ç”Ÿçš„ç¼–è¯‘æŒ‡ä»¤å´æ˜¯ä¸åŒçš„ï¼Œæ¯”å¦‚çœ‹èµ·æ¥è²Œä¼¼æ˜¯ä¸€ä¸ªåŸå­æ“ä½œä½†å®é™…ä¸Šå´ä¸æ˜¯ã€‚ æˆ‘ä»¬åˆ©ç”¨ä¸‹é¢è¿™æ®µä»£ç åœ¨ä¸åŒçš„æ¶æ„ä¸­é€šè¿‡go tool compileæ¥åˆ†æå…¶ç¼–è¯‘æŒ‡ä»¤è§‚å¯Ÿã€‚ package main // ä¸åŒæ¶æ„ä¸‹ç›¸åŒçš„ä»£ç è¿›è¡Œç¼–è¯‘æµ‹è¯• // è§‚å¯Ÿå…¶ç¼–è¯‘æŒ‡ä»¤æ˜¯å¦ä¸ºåŸå­æ“ä½œ const x int64 = 1 + 1\u003c\u003c33 func main(){ var i = x _ = i } GOOS=linux GOARCH=386çš„æ¶æ„ç¼–è¯‘ ç›®å‰Darwinæ¶æ„ä¸æ”¯æŒ386çš„æ¶æ„ GOOS=linux GOARCH=amd64çš„æ¶æ„ç¼–è¯‘ å¯ä»¥çœ‹åˆ°åœ¨386æ¶æ„æ˜¯æ‹†åˆ†æˆä¸¤æ¡èµ‹å€¼è¯­å¥æ¥æ‰§è¡Œï¼Œamd64æ¶æ„ä¸­æ˜¯ä¸€æ¡æŒ‡ä»¤æ¥æ‰§è¡Œã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/0.html/:1:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Atomic","uri":"/posts/golang/concurrent/0.html/"},{"categories":["Go"],"content":"åº”ç”¨åœºæ™¯ æˆ‘ä»¬åœ¨æŸäº›åœºæ™¯å¯ä»¥ä½¿ç”¨Mutexç­‰å¹¶å‘åŸè¯­è¿›è¡Œä¼˜åŒ–ï¼Œè™½ç„¶å¯ä»¥è§£å†³é—®é¢˜ï¼Œä½†æ˜¯è¿™äº›å¹¶å‘åŸè¯­çš„é€»è¾‘æ¯”è¾ƒå¤æ‚ä¸”å¯¹æ€§èƒ½æœ‰ä¸€å®šçš„å½±å“ï¼Œä½†æˆ‘ä»¬ä½¿ç”¨atomicçš„ä¸€äº›æ–¹æ³•æ—¶å¯ä»¥å®ç°æ›´åº•å±‚çš„éƒ¨åˆ†ä¼˜åŒ–ã€‚ æ¯”å¦‚ä¸‹é¢åœºæ™¯ï¼š é€šè¿‡æ ‡å¿—å˜é‡æ¥åˆ¤æ–­æŸç§çŠ¶æ€ è€ƒè™‘åˆ°è¯»å–å’Œä¿®æ”¹å˜é‡åœ¨å¹¶å‘æ—¶ä¼šäº§ç”Ÿç«äº‰å¯¼è‡´çº¿ç¨‹ä¸å®‰å…¨ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å¹¶å‘åŸè¯­Mutexè¿›è¡ŒåŠ é”ä¿è¯äº’æ–¥æ¥è§£å†³é—®é¢˜ï¼Œä½†æ­¤åœºæ™¯å¹¶ä¸æ¶‰åŠåˆ°èµ„æºå¤æ‚çš„ç«äº‰é€»è¾‘ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨atomicåŸå­æ“ä½œæ¥æ“ä½œè¯¥å˜é‡è¿›è¡Œè§£å†³ã€‚ func BenchmarkMutex(b *testing.B){ var k int64 = 1 l:=\u0026sync.Mutex{} var w sync.WaitGroup w.Add(10) b.ResetTimer() for i:=0;i\u003c10;i++{ go func() { defer w.Done() for j:=0;j\u003c10000;j++{ l.Lock() k = k + 1 l.Unlock() } }() } w.Wait() } func BenchmarkAtomic(b *testing.B){ var k int64 = 1 var w sync.WaitGroup w.Add(10) b.ResetTimer() for i:=0;i\u003c10;i++{ go func() { defer w.Done() for j:=0;j\u003c10000;j++{ atomic.AddInt64(\u0026k,1) } }() } w.Wait() } é€šè¿‡æ€§èƒ½è¯„æµ‹åå¯ä»¥å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š æœ‰æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨atomicå®ç°è‡ªå·±å®šä¹‰çš„åŸºæœ¬å¹¶å‘åŸè¯­ï¼Œåœ¨ç½‘ä¸Šä¹Ÿèƒ½å¤Ÿæœé›†åˆ°ç›¸å…³çš„å®ç°æ–¹æ³•ï¼Œä¸”æœ‰äº›åŸºæœ¬å¹¶å‘åŸè¯­çš„åº•å±‚å°±æ˜¯åŸºäºé€šè¿‡atomicçš„æ–¹æ³•å®ç°çš„ã€‚ é™¤æ­¤ä¹‹å¤–ï¼ŒatomicåŸå­æ“ä½œä¹Ÿæ˜¯å®ç°lock-freeæ•°æ®ç»“æ„çš„åŸºçŸ³ï¼Œlock-freeå°±æ˜¯é¿å…äº’æ–¥é”æ¥ä¼˜åŒ–å¹¶å‘çš„æ€§èƒ½ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/0.html/:2:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Atomic","uri":"/posts/golang/concurrent/0.html/"},{"categories":["Go"],"content":"atomicæä¾›çš„æ–¹æ³• å› ä¸ºgolangç›®å‰æ²¡æœ‰æ³›å‹çš„ç‰¹æ€§ï¼Œå¯¼è‡´ä¸ºäº†æ”¯æŒä¸åŒç±»å‹ä¼šåˆ†åˆ«ä¸ºæ¯ç§ç±»å‹æä¾›çš„ç›¸åŒçš„æ–¹æ³•ã€‚ atomicæ“ä½œçš„å¯¹è±¡æ˜¯ä¸€ä¸ªåœ°å€ï¼Œéœ€è¦æŠŠå¯å¯»å€çš„å˜é‡çš„åœ°å€ä½œä¸ºå‚æ•°ä¼ é€’ç»™æ–¹æ³•ï¼Œè€Œä¸æ˜¯æŠŠå˜é‡çš„å€¼ä¼ é€’ç»™æ–¹æ³•ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/0.html/:3:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Atomic","uri":"/posts/golang/concurrent/0.html/"},{"categories":["Go"],"content":"Add Addæ–¹æ³•å°±æ˜¯ç»™ç¬¬ä¸€ä¸ªå‚æ•°åœ°å€ä¸­çš„å€¼å¢åŠ ä¸€ä¸ªdeltaå€¼ã€‚ å¯¹äºæœ‰ç¬¦å·çš„æ•´æ•°æ¥è¯´deltaå¯ä»¥ä¸ºè´Ÿæ•°ï¼Œä½†å¯¹äºæ— ç¬¦å·ç±»å‹çš„æ²¡æœ‰æä¾›å‡æ³•æ“ä½œï¼Œå¯ä»¥åˆ©ç”¨è®¡ç®—æœºè¡¥ç çš„è§„åˆ™æŠŠå‡æ³•å˜æˆåŠ æ³•ã€‚ atomic.AddUint32(\u0026i,^uint32(0)) ","date":"2022-01-29","objectID":"/posts/golang/concurrent/0.html/:3:1","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Atomic","uri":"/posts/golang/concurrent/0.html/"},{"categories":["Go"],"content":"CAS func CompareAndSwapInt32(addr *int32,old,new int32)(swapped bool) å³åˆ¤æ–­ç›¸ç­‰æ‰æ›¿æ¢ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/0.html/:3:2","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Atomic","uri":"/posts/golang/concurrent/0.html/"},{"categories":["Go"],"content":"Swap ä½¿ç”¨Swapæ–¹æ³•æ›¿æ¢åè¿”å›æ—§å€¼ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/0.html/:3:3","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Atomic","uri":"/posts/golang/concurrent/0.html/"},{"categories":["Go"],"content":"Load å–å‡ºaddråœ°å€ä¸­çš„å€¼ï¼Œå³ä½¿åœ¨å¤šå¤„ç†å™¨ã€å¤šæ ¸ã€æœ‰CPU cacheçš„æƒ…å†µä¸‹ï¼Œæ­¤æ“ä½œä¹Ÿèƒ½ä¿è¯Loadæ˜¯ä¸€ä¸ªåŸå­æ“ä½œã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/0.html/:3:4","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Atomic","uri":"/posts/golang/concurrent/0.html/"},{"categories":["Go"],"content":"Store æŠŠå€¼å­˜å…¥åˆ°æŒ‡å®šçš„addråœ°å€ä¸­ï¼Œå³ä½¿åœ¨å¤šå¤„ç†å™¨ã€å¤šæ ¸ã€æœ‰CPU cacheçš„æƒ…å†µå–œçˆ±ï¼Œæ­¤æ“ä½œä¹Ÿèƒ½ä¿è¯Storeæ˜¯ä¸€ä¸ªåŸå­æ“ä½œã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/0.html/:3:5","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Atomic","uri":"/posts/golang/concurrent/0.html/"},{"categories":["Go"],"content":"Value åŸå­åœ°å­˜å–å¯¹è±¡ç±»å‹ï¼Œä½†åªèƒ½å­˜å–ã€‚å¸¸å¸¸ç”¨åœ¨é…ç½®å˜æ›´åœºæ™¯ä¸­ï¼Œå¦‚ä¸‹é¢ä»£ç å®ä¾‹ã€‚ package main import ( \"fmt\" \"go.uber.org/atomic\" \"math/rand\" \"sync\" \"time\" ) type Config struct{ AddrName string Addr string Count int32 } func loadNewConfig()Config{ return Config{ AddrName: \"åŒ—äº¬\", Addr: \"0.0.0.1\", Count: rand.Int31(), } } func main(){ var config atomic.Value config.Store(loadNewConfig()) var cond = sync.NewCond(\u0026sync.Mutex{}) go func() { for{ time.Sleep(time.Duration(5+rand.Int63n(5))*time.Second) config.Store(loadNewConfig()) cond.Broadcast() } }() go func() { for{ cond.L.Lock() cond.Wait() c := config.Load().(Config) fmt.Printf(\"new config:%+v\\n\",c) cond.L.Unlock() } }() select { } } ","date":"2022-01-29","objectID":"/posts/golang/concurrent/0.html/:3:6","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Atomic","uri":"/posts/golang/concurrent/0.html/"},{"categories":["Go"],"content":"ç¬¬ä¸‰æ–¹åº“çš„æ‰©å±• atomicçš„APIè¾ƒä¸ºç®€å•ï¼Œæä¾›åŒ…ä¸€çº§çš„å‡½æ•°ï¼Œå‡½æ•°è°ƒç”¨èµ·æ¥è¾ƒä¸ºéº»çƒ¦ã€‚ ç¬¬ä¸‰æ–¹åº“çš„æ‰©å±•ä¸­æœ‰äº›æä¾›äº†é¢å‘å¯¹è±¡çš„ä½¿ç”¨æ–¹å¼ï¼Œå¦‚uber-go/atomicåº“ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/0.html/:4:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Atomic","uri":"/posts/golang/concurrent/0.html/"},{"categories":["Go"],"content":"Lock-Free Queue atomicå¸¸å¸¸ç”¨æ¥å®ç°Lock-Freeçš„æ•°æ®ç»“æ„ã€‚ä¸‹é¢å°±é€šè¿‡Lock-Free Queueä»£ç å®ä¾‹æ¥è¿›è¡Œäº†è§£ã€‚ åé¢å¯ä»¥é€šè¿‡åˆ©ç”¨Mutexç­‰å¹¶å‘åŸè¯­æ¥å®ç°åŒæ ·çº¿ç¨‹å®‰å…¨çš„æ•°æ®ç»“æ„æ¥è¿›è¡Œå¹¶å‘åœºæ™¯ä¸‹æ€§èƒ½çš„æ¯”è¾ƒã€‚ package main import ( \"sync/atomic\" \"unsafe\" ) type LKQueue struct{ head unsafe.Pointer tail unsafe.Pointer } type node struct{ value interface{} next unsafe.Pointer } func NewLKQueue()*LKQueue{ n:=unsafe.Pointer(\u0026node{}) return \u0026LKQueue{ head: n, tail: n, } } func (q *LKQueue)Enqueue(v interface{}){ n:=\u0026node{value: v} for{ tail:=load(\u0026q.tail) next:=load(\u0026tail.next) if tail == load(\u0026q.tail){ if next == nil{ //å°¾ä¸ºç©ºå³æ²¡æœ‰æ•°æ®å…¥é˜Ÿ if cas(\u0026tail.next,next,n){ //å¢åŠ åˆ°é˜Ÿå°¾ cas(\u0026q.tail,tail,n) //å…¥é˜ŸæˆåŠŸï¼Œç§»åŠ¨å°¾å·´æŒ‡é’ˆ return } }else{ //å°¾ä¸ä¸ºç©ºåˆ™éœ€è¦ç§»åŠ¨å°¾æŒ‡é’ˆ cas(\u0026q.tail,tail,next) } } } } func (q *LKQueue)Dequeue()interface{}{ for{ head := load(\u0026q.head) tail := load(\u0026q.tail) next := load(\u0026head.next) if head == load(\u0026q.head){ if head == tail{ if next == nil{ //è¯´æ˜ä¸ºç©ºé˜Ÿåˆ— return nil } // åªæ˜¯å°¾æŒ‡é’ˆè¿˜æ²¡è°ƒæ•´ï¼Œå°è¯•è°ƒæ•´å®ƒæŒ‡å‘ä¸‹ä¸€ä¸ª cas(\u0026q.tail,tail,next) }else{ //è¯»å–å‡ºé˜Ÿçš„æ•°æ® v:=next.value if cas(\u0026q.head,head,next){ return v } } } } } func load(p *unsafe.Pointer)(n *node){ return (*node)(atomic.LoadPointer(p)) } func cas(p *unsafe.Pointer,old,new *node)(ok bool){ return atomic.CompareAndSwapPointer( p,unsafe.Pointer(old),unsafe.Pointer(new)) } ","date":"2022-01-29","objectID":"/posts/golang/concurrent/0.html/:5:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Atomic","uri":"/posts/golang/concurrent/0.html/"},{"categories":["Go"],"content":"Atomic Vs \u0026 æˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°ä¸€ä¸ªç–‘é—®ï¼šå¯¹ä¸€ä¸ªåœ°å€çš„èµ‹å€¼æ“ä½œæ˜¯å¦ä¸ºåŸå­æ“ä½œï¼Ÿ å¦‚æœæ˜¯åŸå­æ“ä½œçš„è¯atomicåŒ…å­˜åœ¨çš„æ„ä¹‰æ˜¯ä»€ä¹ˆã€‚ è¿™é‡Œæ€»ç»“äº†ä¸€ä¸‹DaveCheneyè°ˆè®ºæ­¤é—®é¢˜æ˜¯ç»™å‡ºçš„è§£é‡Šï¼š åœ¨writeçš„åœ°å€çš„å¯¹é½æ“ä½œä¸­æœ‰å¯èƒ½æ˜¯éœ€è¦å¤„ç†å™¨åˆ†æˆä¸¤ä¸ªæŒ‡ä»¤å»å¤„ç†ï¼Œè‹¥æ‰§è¡Œä¸€ä¸ªæŒ‡ä»¤ï¼Œå…¶ä»–å°±ä¼šçœ‹åˆ°æ›´æ–°äº†ä¸€åŠçš„é”™è¯¯æ•°æ®ï¼Œè¿™è¢«ç§°ä¸ºæ’•è£‚å†™ï¼ˆtorn writeï¼‰ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®¤ä¸ºèµ‹å€¼æ“ä½œæ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œè¿™ä¸ªâ€œåŸå­æ“ä½œâ€å¯ä»¥è®¤ä¸ºæ˜¯ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ã€‚ ä½†åœ¨å¤šå¤„ç†å¤šæ ¸çš„ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªæ ¸å¯¹åœ°å€çš„æ›´æ”¹åœ¨æ›´æ–°åˆ°ä¸»å†…å­˜ä¸­ä¹‹å‰ï¼Œæ˜¯åœ¨å¤šçº§ç¼“å­˜ä¸­å­˜æ”¾çš„ï¼Œå³ä¼šäº§ç”Ÿæ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜ã€‚ä¸ºå¤„ç†è¯¥ç±»é—®é¢˜ä½¿ç”¨äº†å†…å­˜å±éšœæ–¹å¼ï¼Œç®€å•æ¥è¯´å°±æ˜¯è¿›è¡Œæ“ä½œæ—¶å¿…é¡»è¦ç­‰æœªå®Œæˆçš„æ“ä½œéƒ½è¢«åˆ·æ–°åˆ°å†…å­˜ä¸­ï¼Œå¹¶ä¸”è¯¥æ“ä½œè¿˜ä¼šè®©ç›¸å…³å¤„ç†å™¨çš„CPUç¼“å­˜å¤±æ•ˆä»¥æ­¤æ¥æ‹‰å–æœ€æ–°çš„å€¼ã€‚ atomicåŒ…æä¾›çš„æ–¹æ³•ä¼šæä¾›å†…å­˜å±éšœçš„åŠŸèƒ½ï¼Œæ‰€ä»¥atomicä¸ä»…å¯ä»¥ä¿è¯èµ‹å€¼çš„æ•°æ®å®Œæ•´æ€§ï¼Œè¿˜èƒ½ä¿è¯å¤šæ ¸ä¸­çš„æ•°æ®å¯è§æ€§ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ä¸ºäº†ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œatomicæ“ä½œä¹Ÿæ˜¯ä¼šé™ä½æ€§èƒ½çš„ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/0.html/:6:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Atomic","uri":"/posts/golang/concurrent/0.html/"},{"categories":["Go"],"content":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Channel ä»¥ä¸‹å¤§å¤šä¸ºé¸Ÿçªå¤§ä½¬çš„Go å¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ ä¸­æ‘˜å½•çš„ç¬”è®° ä»£ç repo åœ¨channelçš„å‘å±•ä¸­å…³äºCSPç†è®ºçš„éƒ¨åˆ†æ˜¯ä¸å¯é¿å…çš„ï¼Œè€ŒChannelçš„å®ç°å°±æ˜¯å®ç°äº†CSPçš„æ€æƒ³ã€‚ CSPç†è®ºè®²è¿°äº†CSPå…è®¸ä½¿ç”¨è¿›ç¨‹ç»„ä»¶æ¥æè¿°ç³»ç»Ÿï¼Œå®ƒä»¬ç‹¬ç«‹è¿è¡Œï¼Œå¹¶ä¸”åªé€šè¿‡æ¶ˆæ¯ä¼ é€’çš„æ–¹å¼é€šä¿¡ã€‚ Channelç±»å‹æ˜¯Goè¯­è¨€å†…ç½®çš„ç±»å‹ï¼Œæ— éœ€å¼•å…¥åŒ…ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/1.html/:0:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Channel","uri":"/posts/golang/concurrent/1.html/"},{"categories":["Go"],"content":"Channelçš„åº”ç”¨åœºæ™¯ æ‰§è¡Œä¸šåŠ¡å¤„ç†çš„goroutineä¸è¦é€šè¿‡å…±äº«å†…å­˜çš„æ–¹å¼é€šä¿¡ï¼Œè€Œæ˜¯è¦é€šè¿‡Channelé€šä¿¡çš„æ–¹å¼æ¥åˆ†äº«æ•°æ®ã€‚ å³â€œsharing memory by communicating\"ï¼Œç±»ä¼¼äºCSPæ¨¡å‹çš„æ–¹å¼ã€‚ Channelç±»å‹å’ŒåŸºæœ¬å¹¶å‘åŸè¯­æ˜¯æœ‰ç«äº‰å…³ç³»çš„ï¼Œåº”ç”¨äºå¹¶å‘åœºæ™¯ï¼Œæ¶‰åŠåˆ°goroutineä¹‹é—´çš„é€šè®¯ï¼Œå¯ä»¥æä¾›å¹¶å‘çš„ä¿æŠ¤ã€‚ æ€»ç»“ä¸‹æ¥ï¼Œå¯ä»¥æŠŠchannelçš„åº”ç”¨åœºæ™¯åˆ†ä¸ºäº”ç§ç±»å‹ï¼š æ•°æ®äº¤æµ å½“ä½œå¹¶å‘çš„bufferæˆ–è€…queueè§£å†³ç±»ä¼¼ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜ï¼Œä¸”å¤šä¸ªgoroutineå¯ä»¥å¹¶å‘å½“ä½œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ã€‚ æ•°æ®ä¼ é€’ ä¸€ä¸ªgoroutineå°†æ•°æ®äº¤ç»™å¦ä¸€ä¸ªgorouitneï¼Œç›¸å½“äºæŠŠæ•°æ®çš„æ‹¥æœ‰æƒï¼ˆå¼•ç”¨ï¼‰æ‰˜ä»˜å‡ºå»ã€‚ ä¿¡å·é€šçŸ¥ ä¸€ä¸ªgoroutineå¯ä»¥å°†ä¿¡å·ï¼ˆclosingã€closedã€data readyç­‰ï¼‰ä¼ é€’ç»™å¦ä¸€ä¸ªæˆ–è€…å¦ä¸€ç»„groutineã€‚ ä»»åŠ¡ç¼–æ’ å¯ä»¥è®©ä¸€ç»„goroutineæŒ‰ç…§ä¸€å®šçš„é¡ºåºå¹¶å‘æˆ–è€…ä¸²è¡Œæ‰§è¡Œï¼Œå³ç¼–æ’çš„åŠŸèƒ½ã€‚ é”æœºåˆ¶ åˆ©ç”¨Channelå¯ä»¥å®ç°äº’æ–¥é”çš„æœºåˆ¶ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/1.html/:1:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Channel","uri":"/posts/golang/concurrent/1.html/"},{"categories":["Go"],"content":"ChannelåŸºæœ¬ç”¨æ³• channelåˆ†ä¸ºåªèƒ½æ¥æ”¶ã€åªèƒ½å‘é€ã€æ—¢å¯ä»¥æ¥æ”¶ä¹Ÿå¯ä»¥å‘é€çš„ä¸‰ç§ç±»å‹ã€‚ è¿™ä¸ªç®­å¤´æ€»æ˜¯å°„å‘å·¦è¾¹çš„ï¼Œå…ƒç´ ç±»å‹æ€»åœ¨æœ€å³è¾¹ï¼› è‹¥ç®­å¤´æŒ‡å‘chanå³è¡¨ç¤ºå¯ä»¥å¾€chanä¸­å¡æ•°æ®ï¼Œè‹¥ç®­å¤´è¿œç¦»chanå°±è¡¨ç¤ºchanä¼šå¾€å¤–åæ•°æ®ï¼› chan\u003c- dataType \u003c-chan dataType chan dataType channelæ ¹æ®è®¾ç½®å®¹é‡åˆ†ä¸º buffer chan å’Œ unbuffered chanã€‚ åœ¨ buffer chan è¢«é˜»å¡æ—¶åªæœ‰åœ¨å®¹é‡å·²æ»¡çš„æ—¶å€™æ‰ä¼šè¢«é˜»å¡ï¼Œè€Œ unbuffered chan åªæœ‰è¯»å†™éƒ½å‡†å¤‡å¥½ä¹‹åæ‰ä¸ä¸ä¼šé˜»å¡ã€‚ è¿˜æœ‰éœ€è¦æ³¨æ„çš„æ˜¯ nil æ˜¯ chan çš„é›¶å€¼ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„ chanï¼Œå¯¹å€¼æ˜¯ nil çš„ chan çš„å‘é€æ¥æ”¶è°ƒç”¨è€…æ€»æ˜¯ä¼šé˜»å¡ã€‚ // send the data ch \u003c- 10 // receive the data x,ok:= \u003c-ch x:= \u003c-ch \u003c-ch åœ¨ä½¿ç”¨ channel ä¸­æˆ‘ä»¬è¿˜å¯ä»¥å°† channel ä½¿ç”¨äº select çš„ case clauseï¼Œfor-rangeä¸­ã€‚ select{ case ch\u003c-i: case v:=\u003c-ch: } for v:=range ch{} for range ch{} // clean the chan ","date":"2022-01-29","objectID":"/posts/golang/concurrent/1.html/:2:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Channel","uri":"/posts/golang/concurrent/1.html/"},{"categories":["Go"],"content":"Channelçš„å®ç°åŸç† åœ¨æ­¤éƒ¨åˆ†ä¸­ä¸ä¼šè´´å‡ºç›¸åº”æºç éƒ¨åˆ†ï¼Œä»…è®²è¿°å®ç°é€»è¾‘æ€è·¯ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/1.html/:3:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Channel","uri":"/posts/golang/concurrent/1.html/"},{"categories":["Go"],"content":"chandçš„æ•°æ®ç»“æ„ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/1.html/:3:1","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Channel","uri":"/posts/golang/concurrent/1.html/"},{"categories":["Go"],"content":"chanåˆå§‹åŒ– åº•å±‚è°ƒç”¨makechanå®ç°ï¼Œæ ¹æ®chançš„å®¹é‡çš„å¤§å°å’Œå…ƒç´ çš„ç±»å‹ä¸åŒï¼Œåˆå§‹åŒ–ä¸åŒçš„å­˜å‚¨ç©ºé—´ã€‚æœ€ç»ˆï¼Œé’ˆå¯¹ä¸åŒçš„å®¹é‡å’Œå…ƒç´ ç±»å‹ï¼Œåˆ†é…ä¸åŒçš„å¯¹è±¡æ¥åˆå§‹åŒ– hchan å¯¹è±¡çš„å­—æ®µï¼Œè¿”å› hchan å¯¹è±¡ã€‚ è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯åœ¨ buffer chan ä¸­å…ƒç´ åŒ…å«æŒ‡é’ˆå’Œä¸åŒ…å«æŒ‡é’ˆä¸­åˆ†é…å†…å­˜æ–¹å¼ä¸åŒï¼Œå‰è€…æ˜¯å•ç‹¬åˆ†é…å†…å­˜ç»™ buf ï¼Œè€Œåè€…æ˜¯ä¸€æ®µè¿ç»­çš„å†…å­˜ç»™ å¯¹è±¡å’Œ bufã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/1.html/:3:2","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Channel","uri":"/posts/golang/concurrent/1.html/"},{"categories":["Go"],"content":"send åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä» send çš„å„ç§æƒ…å†µæ¥åˆ†æå‘é€çš„é€»è¾‘æ€è·¯ï¼š å¾€ nil chan ä¸­å‘é€æ•°æ® é€ æˆæ­»é”é˜»å¡é€€å‡º å¾€ close chan ä¸­å‘é€æ•°æ® panicé€€å‡º å¾€ buffer chan ä¸­å‘é€æ•°æ® buffer chan å®¹é‡æœªæ»¡ ç­‰å¾…é˜Ÿåˆ—ä¸­æœ‰ receiver ä¼˜å…ˆå°†æ•°æ®å‘é€è‡³è¯¥ receiver ç›´æ¥è¿”å› ç­‰å¾…é˜Ÿåˆ—ä¸­æ—  receiver å°†æ•°æ®å‘é€è‡³ buf ç›´æ¥è¿”å› buffer chan å®¹é‡å·²æ»¡ æ”¾å…¥ç­‰å¾…é˜Ÿåˆ— sender ä¸­é˜»å¡ç­‰å¾…ç›´è‡³è¢«å”¤é†’ å¾€ unbuffered chan ä¸­å‘é€æ•°æ® æœ‰æ¥æ”¶è€…å‡†å¤‡ chan ä¸­æ‹¥æœ‰æ•°æ® é˜»å¡ç­‰å¾…è‡³ chan ä¸­æ•°æ®è¢«è¯»å–ï¼ˆåŠ chan close æƒ…å†µï¼‰ chan ä¸­æ²¡æœ‰æ•°æ® å°†æ•°æ®å‘é€è‡³ chan ä¸­ç›´æ¥è¿”å› æ— æ¥æ”¶è€…å‡†å¤‡ chan ä¸­æ‹¥æœ‰æ•°æ® é€ æˆæ­»é”é˜»å¡é€€å‡º chan ä¸­æ²¡æœ‰æ•°æ® é€ æˆæ­»é”é˜»å¡é€€å‡º ","date":"2022-01-29","objectID":"/posts/golang/concurrent/1.html/:3:3","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Channel","uri":"/posts/golang/concurrent/1.html/"},{"categories":["Go"],"content":"receive åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä» receive çš„å„ç§æƒ…å†µæ¥åˆ†æå‘é€çš„é€»è¾‘æ€è·¯ï¼š ä» nil chan ä¸­æ¥æ”¶æ•°æ® é€ æˆæ­»é”é˜»å¡é€€å‡º ä» close chan ä¸­æ¥æ”¶æ•°æ® buf åˆ™å–å‡ºæ•°æ®ç›´æ¥è¿”å› æ—  buf åˆ™å–å‡ºç±»å‹é›¶å€¼ç›´æ¥è¿”å› ä» buffer chan ä¸­æ¥æ”¶æ•°æ® buffer chan buf ä¸ä¸ºç©º ä¼˜å…ˆå–å‡º buf æ•°æ®ç›´æ¥è¿”å› buffer chan buf ä¸ºç©º ç­‰å¾…é˜Ÿåˆ—ä¸­æ—  sender é˜»å¡ç­‰å¾…è‡³ chan ä¸­å‘é€æ•°æ®ï¼ˆåŠ chan close æƒ…å†µï¼‰ ç­‰å¾…é˜Ÿåˆ—ä¸­æœ‰ sender æ¥æ”¶è¯¥ sender ä¸­çš„æ•°æ®ç›´æ¥è¿”å› ä» unbuffered chan ä¸­æ¥æ”¶æ•°æ® æ— æ•°æ® é˜»å¡ç­‰å¾…è‡³ chan ä¸­å‘é€æ•°æ® æœ‰æ•°æ® æ¥æ”¶è¯¥æ•°æ®ç›´æ¥è¿”å› ","date":"2022-01-29","objectID":"/posts/golang/concurrent/1.html/:3:4","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Channel","uri":"/posts/golang/concurrent/1.html/"},{"categories":["Go"],"content":"close åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä» close çš„å„ç§æƒ…å†µæ¥åˆ†æå‘é€çš„é€»è¾‘æ€è·¯ï¼š nil chan panic not nil chan close chan panic not close chan æŠŠç­‰å¾…é˜Ÿåˆ—ä¸­çš„goroutineå…¨éƒ¨ç§»é™¤å¹¶å”¤é†’åè¿”å› ","date":"2022-01-29","objectID":"/posts/golang/concurrent/1.html/:3:5","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Channel","uri":"/posts/golang/concurrent/1.html/"},{"categories":["Go"],"content":"æ˜“é”™åœºæ™¯ ä½¿ç”¨ channel ä¸­æœ€å¸¸è§çš„é”™è¯¯å°±æ˜¯ panic å’Œ grouting æ³„æ¼ã€‚ panicçš„æƒ…å†µå…±æœ‰ä¸‰ç§ï¼š close the nil chan send the close chan close the close chan è¿™é‡Œæä¾›ä¸€å¥—é€‰æ‹©çš„æ–¹æ³•ï¼š å…±äº«èµ„æºçš„å¹¶å‘è®¿é—®ä½¿ç”¨ä¼ ç»Ÿå¹¶å‘åŸè¯­ï¼› å¤æ‚çš„ä»»åŠ¡ç¼–æ’å’Œæ¶ˆæ¯ä¼ é€’ä½¿ç”¨ Channelï¼› æ¶ˆæ¯é€šçŸ¥æœºåˆ¶ä½¿ç”¨ Channelï¼Œé™¤éåªæƒ³ signal ä¸€ä¸ª goroutine æ‰ä½¿ç”¨ Condï¼› ç®€å•ç­‰å¾…æ‰€æœ‰ä»»åŠ¡çš„å®Œæˆç”¨ WaitGroupï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Channelï¼› éœ€è¦å’Œ Select è¯­å¥ç»“åˆï¼Œä½¿ç”¨ Channelï¼› éœ€è¦å’Œè¶…æ—¶é…åˆï¼Œä½¿ç”¨ Channel å’Œ Contextï¼› ","date":"2022-01-29","objectID":"/posts/golang/concurrent/1.html/:4:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Channel","uri":"/posts/golang/concurrent/1.html/"},{"categories":["Go"],"content":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Cond ä»¥ä¸‹å¤§å¤šä¸ºé¸Ÿçªå¤§ä½¬çš„Go å¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ ä¸­æ‘˜å½•çš„ç¬”è®° ä»£ç repo ","date":"2022-01-29","objectID":"/posts/golang/concurrent/2.html/:0:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Cond","uri":"/posts/golang/concurrent/2.html/"},{"categories":["Go"],"content":"Goæ ‡å‡†åº“çš„Cond Go æ ‡å‡†åº“æä¾› Cond åŸè¯­çš„ç›®çš„æ˜¯ï¼Œä¸ºç­‰å¾… / é€šçŸ¥åœºæ™¯ä¸‹çš„å¹¶å‘é—®é¢˜æä¾›æ”¯æŒã€‚ Condé€šå¸¸åº”ç”¨äºç­‰å¾…æŸä¸ªæ¡ä»¶çš„ä¸€ç»„goroutineï¼Œç­‰æ¡ä»¶å˜ä¸ºtrueçš„æ—¶å€™ï¼Œå…¶ä¸­ä¸€ä¸ªgoroutineæˆ–è€…æ‰€æœ‰çš„goroutineéƒ½ä¼šè¢«å”¤é†’æ‰§è¡Œã€‚ å¼€å‘å®è·µä¸­ä½¿ç”¨åˆ°Condåœºæ™¯æ¯”è¾ƒå°‘ï¼Œä¸”Condåœºæ™¯ä¸€èˆ¬ä¹Ÿèƒ½ç”¨Channelæ–¹å¼å®ç°ï¼Œæ‰€ä»¥æ›´å¤šäººä¼šé€‰æ‹©ä½¿ç”¨Channelã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/2.html/:1:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Cond","uri":"/posts/golang/concurrent/2.html/"},{"categories":["Go"],"content":"CondåŸºæœ¬ç”¨æ³• æ ‡å‡†åº“ä¸­çš„Condå¹¶å‘åŸè¯­åˆå§‹åŒ–çš„æ—¶å€™éœ€è¦å…³è”ä¸€ä¸ªLockeræ¥å£çš„å®ä¾‹ï¼Œä¸€èˆ¬ä½¿ç”¨Mutexæˆ–è€…RWMutexã€‚ type Cond func NeWCond(l Locker) *Cond func (c *Cond) Broadcast() //å…è®¸è°ƒç”¨è€…Callerå”¤é†’æ‰€æœ‰ç­‰å¾…æ­¤Condçš„goroutineå³æ¸…ç©ºCondç­‰å¾…é˜Ÿåˆ—ä¸­æ‰€æœ‰çš„goroutine func (c *Cond) Signal() //å…è®¸è°ƒç”¨è€…CalleræŒ‰ç­‰å¾…é˜Ÿåˆ—é¡ºåºå”¤é†’ä¸€ä¸ªç­‰å¾…æ­¤Condçš„goroutine func (c *Cond) Wait() //ä¼šæŠŠè°ƒç”¨è€…Calleræ”¾å…¥Condçš„ç­‰å¾…é˜Ÿåˆ—ä¸­å¹¶é˜»å¡ï¼Œç›´åˆ°è¢«Signalæˆ–è€…Broadcastæ–¹æ³•ä»ç­‰å¾…é˜Ÿåˆ—ä¸­å”¤é†’ã€‚ Go å®ç°çš„ sync.Cond çš„æ–¹æ³•åæ˜¯ Waitã€Signal å’Œ Broadcastï¼Œè¿™æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­æ¡ä»¶å˜é‡çš„é€šç”¨æ–¹æ³•åã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/2.html/:2:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Cond","uri":"/posts/golang/concurrent/2.html/"},{"categories":["Go"],"content":"Condçš„å®ç°åŸç† type Cond struct { noCopy noCopy // å½“è§‚å¯Ÿæˆ–è€…ä¿®æ”¹ç­‰å¾…æ¡ä»¶çš„æ—¶å€™éœ€è¦åŠ é” L Locker // ç­‰å¾…é˜Ÿåˆ— notify notifyList // è¾…åŠ©ç»“æ„ï¼Œåœ¨è¿è¡Œæ—¶æ£€æŸ¥Condæ˜¯å¦è¢«å¤åˆ¶ä½¿ç”¨ checker copyChecker } func NewCond(l Locker) *Cond { return \u0026Cond{L: l} } func (c *Cond) Wait() { c.checker.check() // å¢åŠ åˆ°ç­‰å¾…é˜Ÿåˆ—ä¸­ t := runtime_notifyListAdd(\u0026c.notify) c.L.Unlock() // é˜»å¡ä¼‘çœ ç›´åˆ°è¢«å”¤é†’ runtime_notifyListWait(\u0026c.notify, t) c.L.Lock() } func (c *Cond) Signal() { c.checker.check() runtime_notifyListNotifyOne(\u0026c.notify) } func (c *Cond) Broadcast() { c.checker.check() runtime_notifyListNotifyAll(\u0026c.notifyï¼‰ } ","date":"2022-01-29","objectID":"/posts/golang/concurrent/2.html/:3:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Cond","uri":"/posts/golang/concurrent/2.html/"},{"categories":["Go"],"content":"ä½¿ç”¨æ³¨æ„ è°ƒç”¨ Wait çš„æ—¶å€™æ²¡æœ‰åŠ é”ã€‚ åªè°ƒç”¨äº†ä¸€æ¬¡Waitï¼Œæ²¡æœ‰æ£€æŸ¥ç­‰å¾…æ¡ä»¶æ˜¯å¦æ»¡è¶³ï¼Œç»“æœæ¡ä»¶æ²¡æ»¡è¶³ï¼Œç¨‹åºå°±ç»§ç»­æ‰§è¡Œäº†ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/2.html/:4:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Cond","uri":"/posts/golang/concurrent/2.html/"},{"categories":["Go"],"content":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Context ä»¥ä¸‹ä¸ºé¸Ÿçªå¤§ä½¬çš„Go å¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ ä¸­æ‘˜å½•çš„ç¬”è®° ","date":"2022-01-29","objectID":"/posts/golang/concurrent/3.html/:0:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Context","uri":"/posts/golang/concurrent/3.html/"},{"categories":["Go"],"content":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Etcd ä»¥ä¸‹ä¸ºé¸Ÿçªå¤§ä½¬çš„Go å¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ ä¸­æ‘˜å½•çš„ç¬”è®° ä»£ç repo ETCD æä¾›äº†è¾ƒå¤šçš„åˆ†å¸ƒå¼å¹¶å‘åŸè¯­ï¼Œæ¯”å¦‚åˆ†å¸ƒå¼äº’æ–¥é”ã€åˆ†å¸ƒå¼è¯»å†™é”ã€Leaderé€‰ä¸¾ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/4.html/:0:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Etcd","uri":"/posts/golang/concurrent/4.html/"},{"categories":["Go"],"content":"Leader é€‰ä¸¾ ä¸»ä»æ¶æ„çš„æœåŠ¡èŠ‚ç‚¹åˆ†ä¸ºä¸»ï¼ˆLeaderã€Masterï¼‰å’Œä»ï¼ˆFollowerã€Slaveï¼‰ä¸¤ç§è§’è‰²ã€‚ ä¸»èŠ‚ç‚¹é€šå¸¸æ‰§è¡Œå†™æ“ä½œï¼Œä»èŠ‚ç‚¹é€šå¸¸æ‰§è¡Œè¯»æ“ä½œï¼Œè‹¥è¯»å†™éƒ½åœ¨ä¸»èŠ‚ç‚¹è€Œä»èŠ‚ç‚¹æä¾›å¤‡ä»½åˆ™ä¸»ä»æ¶æ„å°±ä¼šé€€åŒ–æˆä¸»å¤‡æ¨¡å¼æ¶æ„ã€‚ é€‰ä¸»æœºåˆ¶å°±æ˜¯é€‰æ‹©ä¸€ä¸ªèŠ‚ç‚¹ä½œä¸ºä¸»èŠ‚ç‚¹ï¼Œä¿è¯ä¸»èŠ‚ç‚¹çš„å”¯ä¸€æ€§ä»è€Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/4.html/:1:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Etcd","uri":"/posts/golang/concurrent/4.html/"},{"categories":["Go"],"content":"é€‰ä¸¾ æœ‰ä»¥ä¸‹å’Œé€‰ä¸»ç›¸å…³çš„æä¾›çš„æ–¹æ³•ï¼š // æŠŠä¸€ä¸ªèŠ‚ç‚¹é€‰ä¸¾ä¸ºä¸»èŠ‚ç‚¹ä¸”ä¼šè®¾ç½®ä¸€ä¸ªå€¼ // è¿™æ˜¯ä¸€ä¸ªé˜»å¡æ–¹æ³•ï¼Œåœ¨è°ƒç”¨å®ƒçš„æ—¶å€™ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°æ»¡è¶³ä¸‹é¢çš„ä¸‰ä¸ªæ¡ä»¶ä¹‹ä¸€ï¼Œæ‰ä¼šå–æ¶ˆé˜»å¡ã€‚æˆåŠŸå½“é€‰ä¸ºä¸»ï¼›æ­¤æ–¹æ³•è¿”å›é”™è¯¯ï¼›ctx è¢«å–æ¶ˆ func (e *Election) Campaign(ctx context.Context,val string)error // é‡æ–°è®¾ç½® Leader çš„å€¼ï¼Œä½†æ˜¯ä¸ä¼šé‡æ–°é€‰ä¸»ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè¿”å›æ–°å€¼è®¾ç½®æˆåŠŸæˆ–è€…å¤±è´¥çš„ä¿¡æ¯ func (e *Election) Proclaim(ctx context.Context, val string) error // å¼€å§‹æ–°ä¸€æ¬¡é€‰ä¸¾ã€‚è¿™ä¸ªæ–¹æ³•ä¼šè¿”å›æ–°çš„é€‰ä¸¾æˆåŠŸæˆ–è€…å¤±è´¥çš„ä¿¡æ¯ func (e *Election) Resign(ctx context.Context) (err error) ","date":"2022-01-29","objectID":"/posts/golang/concurrent/4.html/:1:1","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Etcd","uri":"/posts/golang/concurrent/4.html/"},{"categories":["Go"],"content":"æŸ¥è¯¢ æœ‰ä»¥ä¸‹å’ŒæŸ¥è¯¢ç›¸å…³çš„æä¾›çš„æ–¹æ³•ï¼š // æŸ¥è¯¢å½“å‰ Leader çš„æ–¹æ³• Leaderï¼Œå¦‚æœå½“å‰è¿˜æ²¡æœ‰ Leaderï¼Œå°±è¿”å›ä¸€ä¸ªé”™è¯¯ // å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ¥æŸ¥è¯¢ä¸»èŠ‚ç‚¹ä¿¡æ¯ã€‚ func (e *Election) Leader(ctx context.Context) (*v3.GetResponse, error) // æ¯æ¬¡ä¸»èŠ‚ç‚¹çš„å˜åŠ¨éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ç‰ˆæœ¬å·ï¼Œä½ è¿˜å¯ä»¥æŸ¥è¯¢ç‰ˆæœ¬å·ä¿¡æ¯ï¼ˆRev æ–¹æ³•ï¼‰ï¼Œäº†è§£ä¸»èŠ‚ç‚¹å˜åŠ¨æƒ…å†µ func (e *Election) Rev() int64 ","date":"2022-01-29","objectID":"/posts/golang/concurrent/4.html/:1:2","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Etcd","uri":"/posts/golang/concurrent/4.html/"},{"categories":["Go"],"content":"ç›‘æ§ æœ‰ä»¥ä¸‹å’Œç›‘æ§ç›¸å…³çš„æä¾›çš„æ–¹æ³•ï¼š // ç›‘æ§ä¸»èŠ‚ç‚¹çš„å˜åŒ– // å®ƒä¼šè¿”å›ä¸€ä¸ª chanï¼Œæ˜¾ç¤ºä¸»èŠ‚ç‚¹çš„å˜åŠ¨ä¿¡æ¯ // éœ€è¦æ³¨æ„çš„æ˜¯å®ƒä¸ä¼šè¿”å›ä¸»èŠ‚ç‚¹çš„å…¨éƒ¨å†å²å˜åŠ¨ä¿¡æ¯ï¼Œè€Œæ˜¯åªè¿”å›æœ€è¿‘çš„ä¸€æ¡å˜åŠ¨ä¿¡æ¯ä»¥åŠä¹‹åçš„å˜åŠ¨ä¿¡æ¯ func (e *Election) Observe(ctx context.Context) \u003c-chan v3.GetResponse ","date":"2022-01-29","objectID":"/posts/golang/concurrent/4.html/:1:3","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Etcd","uri":"/posts/golang/concurrent/4.html/"},{"categories":["Go"],"content":"äº’æ–¥é” ä¸»è¦å…³æ³¨åœ¨åˆ†å¸ƒåœ¨ä¸åŒæœºå™¨ä¸­çš„ä¸åŒè¿›ç¨‹å†…çš„ goroutineï¼Œå¦‚ä½•åˆ©ç”¨åˆ†å¸ƒå¼äº’æ–¥é”æ¥ä¿æŠ¤å…±äº«èµ„æºã€‚ åœ¨åŒä¸€æ—¶åˆ»ï¼Œåˆ†å¸ƒå¼äº’æ–¥é”åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸­åªå…è®¸å…¶ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹æŒæœ‰é”ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/4.html/:2:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Etcd","uri":"/posts/golang/concurrent/4.html/"},{"categories":["Go"],"content":"Locker ç±»ä¼¼äºæ ‡å‡†åº“ä¸­çš„ sync.Locker æ¥å£ï¼Œæä¾›äº† Lock/Unlock çš„æœºåˆ¶ï¼š func NewLocker(s *Session,pfx string) sync.Locker ","date":"2022-01-29","objectID":"/posts/golang/concurrent/4.html/:2:1","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Etcd","uri":"/posts/golang/concurrent/4.html/"},{"categories":["Go"],"content":"Mutex Mutex å¹¶æ²¡æœ‰å®ç° sync.Locker æ¥å£ï¼Œå®ƒçš„ Lock/Unlock æ–¹æ³•éœ€è¦æä¾›ä¸€ä¸ª context.Context å®ä¾‹åšå‚æ•°ï¼Œå¯ä»¥å¾—çŸ¥åœ¨è¯·æ±‚é”çš„æ—¶å€™ï¼Œä½ å¯ä»¥è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œæˆ–è€…ä¸»åŠ¨å–æ¶ˆè¯·æ±‚ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/4.html/:2:2","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Etcd","uri":"/posts/golang/concurrent/4.html/"},{"categories":["Go"],"content":"è¯»å†™é” ETCD æä¾›çš„è¯»å†™é”ï¼Œå¯ä»¥åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­çš„ä¸åŒçš„èŠ‚ç‚¹ä½¿ç”¨ã€‚ æä¾›çš„æ–¹æ³•æ˜¯å’ŒåŠŸèƒ½ä¸æ ‡å‡†åº“ä¸­çš„è¯»å†™é”ä¸€è‡´ï¼Œåˆ†åˆ«æä¾›äº† RLock/RUnlockã€Lock/Unlockæ–¹æ³•ã€‚ å¦‚æœæŒæœ‰äº’æ–¥é”æˆ–è€…è¯»å†™é”çš„èŠ‚ç‚¹æ„å¤–å®•æœºäº†ï¼Œå®ƒæŒæœ‰çš„é”ä¼šè¢«é‡Šæ”¾ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥å…³æ³¨å¯¹åº”çš„ session ç›¸å…³å¤„ç†ã€‚ etcd æä¾›çš„è¯»å†™é”ä¸­çš„è¯»å’Œå†™æŒ‰ç…§å®ç°æ¥è¯´æ˜¯å†™é”åº”è¯¥æ¯”è¯»é”ä¼˜å…ˆçº§é«˜ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/4.html/:3:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Etcd","uri":"/posts/golang/concurrent/4.html/"},{"categories":["Go"],"content":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”GroupOperation åˆ†ç»„æ“ä½œï¼šå¤„ç†ä¸€ç»„å­ä»»åŠ¡æ‰§è¡Œçš„å¹¶å‘åŸè¯­ ä»¥ä¸‹ä¸ºé¸Ÿçªå¤§ä½¬çš„Go å¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ ä¸­æ‘˜å½•çš„ç¬”è®° ä»£ç repo ","date":"2022-01-29","objectID":"/posts/golang/concurrent/5.html/:0:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”GroupOperation","uri":"/posts/golang/concurrent/5.html/"},{"categories":["Go"],"content":"ErrGroup ErrGroupä¸ºå®˜æ–¹æä¾›çš„ä¸€ä¸ªåŒæ­¥æ‰©å±•åº“ã€‚åº”ç”¨åœºæ™¯å°±æ˜¯å°†ä¸€ä¸ªå¤§çš„ä»»åŠ¡æ‹†åˆ†æˆå‡ ä¸ªå°ä»»åŠ¡å¹¶å‘æ‰§è¡Œã€‚å®ƒä¸»è¦æä¾›çš„åŠŸèƒ½åŒ…æ‹¬ï¼š å’ŒContexté›†æˆï¼› errorå‘ä¸Šä¼ æ’­ï¼Œå¯å°†å­ä»»åŠ¡çš„é”™è¯¯ä¼ é€’ç»™Waitçš„è°ƒç”¨è€…ã€‚ è¯¥åŸè¯­åº•å±‚ä¹Ÿæ˜¯åŸºäºWaitGroupå®ç°çš„ã€‚ åœ¨ä½¿ç”¨ErrGroupæ—¶æˆ‘ä»¬ä¼šç”¨åˆ°çš„ä¸‰ä¸ªæ–¹æ³•ï¼š // ä¸€æ—¦æœ‰å­ä»»åŠ¡è¿”å›é”™è¯¯æˆ–æ˜¯Waitè°ƒç”¨è¿”å›åˆ™è¯¥è¿”å›çš„contextä¼šè¢«cancel // æ³¨æ„å½“ä¼ é€’ctxå‚æ•°æ˜¯ä¸€ä¸ªå¯ä»¥cancelçš„Contextçš„è¯åˆ™è¢«cancelçš„æ—¶å€™å¹¶ä¸ä¼šç»ˆæ­¢è¯¥æ­£åœ¨æ‰§è¡Œçš„å­ä»»åŠ¡ func WithContext(ctx context.Context)(*Group,context.Context) // ä»»åŠ¡å‡½æ•°fè‹¥æ‰§è¡ŒæˆåŠŸåˆ™è¿”å›nilï¼Œè‹¥ä¸æˆåŠŸåˆ™è¿”å›errorä¸”ä¼šcancelé‚£ä¸ªæ–°çš„Context // Waitæ–¹æ³•åªä¼šè¿”å›ç¬¬ä¸€ä¸ªé”™è¯¯ func (g *Group)Go(f func() error) // é˜»å¡ç­‰å¾…è‡³ç­‰æ‰€æœ‰å­ä»»åŠ¡æ‰§è¡Œå®Œæˆåæ‰ä¼šè¿”å› func (g *Group)Wait()error ","date":"2022-01-29","objectID":"/posts/golang/concurrent/5.html/:1:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”GroupOperation","uri":"/posts/golang/concurrent/5.html/"},{"categories":["Go"],"content":"æ‰©å±•åº“ åŸç”Ÿåº“ä¸­è‹¥æ— é™åˆ¶åœ°ä½¿ç”¨ Go æ–¹æ³•åˆ™ä¼šåˆ›å»ºéå¸¸å¤šçš„ goroutineï¼Œè¿‡å¤šçš„ goroutine ä¼šå¸¦æ¥è°ƒåº¦å’Œ GC çš„å‹åŠ›ï¼Œè€Œä¸”ä¹Ÿä¼šå ç”¨æ›´å¤šçš„å†…å­˜èµ„æºã€‚ è§£å†³æ­¤é—®é¢˜çš„å¸¸ç”¨æ‰‹æ®µå°±æ˜¯åˆ©ç”¨ worker pool(goroutine pool)ï¼Œæˆ–è€…ç±»ä¼¼åˆ©ç”¨ä¿¡å·é‡æ¥æ§åˆ¶å¹¶è¡Œçš„ goroutine çš„æ•°é‡ã€‚ bilibili/errgroup è¯¥åº“å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå›ºå®šæ•°é‡çš„ goroutine å¤„ç†å­ä»»åŠ¡ã€‚ é™¤äº†å¯ä»¥æ§åˆ¶å¹¶å‘ goroutine çš„æ•°é‡ï¼Œè¿˜æä¾›äº†ä»¥ä¸‹åŠŸèƒ½ï¼š cancelï¼šå¤±è´¥çš„å­ä»»åŠ¡å¯ä»¥ cancel æ‰€æœ‰æ­£åœ¨æ‰§è¡Œä»»åŠ¡ï¼› recoverï¼šä¼šæŠŠ panic çš„å †æ ˆä¿¡æ¯æ”¾åˆ° error ä¸­ï¼Œé¿å…å­ä»»åŠ¡ panic å¯¼è‡´çš„ç¨‹åºå´©æºƒã€‚ éœ€è¦æ³¨æ„ï¼š è‹¥å¹¶å‘çš„å­ä»»åŠ¡è¶…è¿‡äº†è®¾ç½®çš„å¹¶å‘æ•°åˆ™éœ€è¦ç­‰åˆ°è°ƒç”¨è€…è°ƒç”¨ Wait ä¹‹åæ‰ä¼šæ‰§è¡Œï¼Œè€Œä¸æ˜¯ goroutine ç©ºé—²åˆ™ä¼šæ‰§è¡Œï¼› è‹¥é«˜å¹¶å‘æƒ…å†µä¸‹ä»»åŠ¡æ•°å¤§äºè®¾å®šçš„ goroutine çš„æ•°é‡ï¼Œä¸”è¿™äº›ä»»åŠ¡è¢«é›†ä¸­åŠ å…¥åˆ° Group ä¸­ï¼Œè¯¥åº“çš„å¤„ç†æ–¹å¼æ˜¯æŠŠå­ä»»åŠ¡åŠ å…¥åˆ°æ•°ç»„ä¸­ï¼Œè€Œè¯¥æ•°ç»„ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ neilotoole/errgroup åœ¨å®˜æ–¹çš„ ErrGroup åŸºç¡€ä¸Šå¢åŠ äº†å¯ä»¥æ§åˆ¶å¹¶å‘ goroutine çš„åŠŸèƒ½ã€‚ æ–°å¢çš„ WithContextN å¯è®¾ç½®å¹¶å‘çš„ goroutine æ•°ï¼Œä»¥åŠç­‰å¾…å¤„ç†çš„å­ä»»åŠ¡é˜Ÿåˆ—çš„å¤§å°ã€‚å½“é˜Ÿåˆ—æ»¡çš„æ—¶å€™åˆ™è°ƒç”¨ Go æ–¹æ³•ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°å­ä»»åŠ¡å¯ä»¥æ”¾å…¥åˆ°é˜Ÿåˆ—ä¸­æ‰è¿”å›ã€‚ facebookgo/errgroup å®é™…ä¸Šä¸ºæ ‡å‡†åº“ WaitGroup çš„æ‰©å±•ï¼Œå¢åŠ äº† Wait æ–¹æ³•å¯è¿”å› errorï¼Œè€Œä¸”å¯ä»¥åŒ…å«å¤šä¸ª errorã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/5.html/:1:1","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”GroupOperation","uri":"/posts/golang/concurrent/5.html/"},{"categories":["Go"],"content":"å…¶ä»– Group å¹¶å‘åŸè¯­ SizedGroup/ErrSizedGroup SizeGroup å†…éƒ¨ä½¿ç”¨ä¿¡å·é‡å’Œ WaitGroup å®ç°ï¼Œé€šè¿‡ä¿¡å·é‡æ§åˆ¶å¹¶å‘çš„ goroutine æ•°é‡æˆ–è€…æ˜¯ä¸æ§åˆ¶è¯¥æ•°é‡è€Œæ§åˆ¶å­ä»»åŠ¡å¹¶å‘æ‰§è¡Œæ—¶å€™çš„æ•°é‡ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒSizedGroup æ§åˆ¶çš„æ˜¯å­ä»»åŠ¡çš„å¹¶å‘æ•°é‡ï¼Œè€Œä¸æ˜¯ goroutine çš„æ•°é‡ã€‚åœ¨è¿™ç§æ–¹å¼ä¸‹ï¼Œæ¯æ¬¡è°ƒç”¨ Go æ–¹æ³•éƒ½ä¸ä¼šè¢«é˜»å¡ï¼Œè€Œæ˜¯æ–°å»ºä¸€ä¸ª goroutine å»æ‰§è¡Œã€‚å¦‚æœæƒ³æ§åˆ¶ goroutine çš„æ•°é‡ï¼Œä½ å¯ä»¥ä½¿ç”¨ syncs.Preemptive è®¾ç½®è¿™ä¸ªå¹¶å‘åŸè¯­çš„å¯é€‰é¡¹ã€‚ package main import ( \"context\" \"fmt\" \"sync/atomic\" \"time\" \"github.com/go-pkgz/syncs\" ) func main() { // è®¾ç½®goroutineæ•°æ˜¯10 swg := syncs.NewSizedGroup(10) // swg := syncs.NewSizedGroup(10, syncs.Preemptive) var c uint32 // æ‰§è¡Œ1000ä¸ªå­ä»»åŠ¡ï¼Œåªä¼šæœ‰10ä¸ªgoroutineå»æ‰§è¡Œ for i := 0; i \u003c 1000; i++ { swg.Go(func(ctx context.Context) { time.Sleep(5 * time.Millisecond) atomic.AddUint32(\u0026c, 1) }) } // ç­‰å¾…ä»»åŠ¡å®Œæˆ swg.Wait() // è¾“å‡ºç»“æœ fmt.Println(c) } ErrSizedGroup ä¸º SizedGroup æä¾›äº† error å¤„ç†çš„åŠŸèƒ½ï¼Œä¸ Go å®˜æ–¹æ‰©å±•åº“çš„åŠŸèƒ½ä¸€æ ·ï¼Œå¦‚ç­‰å¾…å­ä»»åŠ¡å®Œæˆå¹¶è¿”å›ç¬¬ä¸€ä¸ªå‡ºç°çš„ errorã€‚å®ç°çš„é¢å¤–åŠŸèƒ½å¦‚ä¸‹ï¼š æ§åˆ¶å¹¶å‘çš„ goroutine æ•°é‡ï¼› è®¾ç½®äº† termOnError æ—¶å­ä»»åŠ¡å‡ºç°ç¬¬ä¸€ä¸ªé”™è¯¯çš„æ—¶å€™ä¼š cancel Contextï¼Œä¸”åç»­çš„ Go è°ƒç”¨ä¼šç›´æ¥è¿”å›ï¼ŒWait è°ƒç”¨è€…ä¼šå¾—åˆ°è¿™ä¸ªé”™è¯¯ï¼Œé»˜è®¤åˆ™è¿”å›æ‰€æœ‰å­ä»»åŠ¡çš„é”™è¯¯ã€‚ SizedGroup å¯ä»¥æŠŠ Context ä¼ é€’ç»™å­ä»»åŠ¡ï¼Œå¯é€šè¿‡ cancel è®©å­ä»»åŠ¡ä¸­æ–­æ‰§è¡Œï¼Œä½†ErrSizedGroup å´æ²¡æœ‰å®ç°ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/5.html/:1:2","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”GroupOperation","uri":"/posts/golang/concurrent/5.html/"},{"categories":["Go"],"content":"gollback ç”¨æ¥å¤„ç†ä¸€ç»„å­ä»»åŠ¡çš„æ‰§è¡Œçš„ï¼Œè§£å†³äº† ErrGroup æ”¶é›†å­ä»»åŠ¡è¿”å›ç»“æœçš„é—®é¢˜ï¼Œä¸”ä¼šæŠŠç»“æœå’Œ error ä¿¡æ¯éƒ½è¿”å›ã€‚ æä¾›çš„ä¸‰ä¸ªæ–¹æ³•å¦‚ä¸‹ï¼š // ç­‰å¾…æ‰€æœ‰å¼‚æ­¥å‡½æ•°æ‰§è¡Œå®Œæ‰è¿”å›ï¼Œä¸”è¿”å›ç»“æœé¡ºåºå’Œä¼ å…¥é¡ºåºä¸€è‡´ func All(ctx context.Context, fns ...AsyncFunc)([]interface{},[]error) // type AsyncFunc func(ctx context.Context) (interface{}, error) // ä¸ All æ–¹æ³•ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºåªè¦ä¸€ä¸ªå¼‚æ­¥å‡½æ•°æ‰§è¡Œæ²¡æœ‰é”™è¯¯åˆ™ç«‹é©¬è¿”å›ï¼Œè€Œä¸ä¼šè¿”å›æ‰€æœ‰å­ä»»åŠ¡çš„ä¿¡æ¯ func Race(ctx context.Context, fns ...AsyncFunc)(interface{},error) // æ‰§è¡Œä¸€ä¸ªå­ä»»åŠ¡ï¼Œè‹¥æ‰§è¡Œå¤±è´¥ä¼šå°è¯•ä¸€å®šçš„æ¬¡æ•°ï¼Œè‹¥ä¸€ç›´ä¸æˆåŠŸå°±ä¼šè¿”å›å¤±è´¥é”™è¯¯ï¼Œè‹¥æ‰§è¡ŒæˆåŠŸä¼šç«‹å³è¿”å›ï¼Œè‹¥ retires ä¸º 0 åˆ™ä¼šæ°¸è¿œå°è¯•ç›´è‡³æˆåŠŸ func Retry(ctx context.Context, retires int, fn AsyncFunc)(interface{},error) ","date":"2022-01-29","objectID":"/posts/golang/concurrent/5.html/:2:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”GroupOperation","uri":"/posts/golang/concurrent/5.html/"},{"categories":["Go"],"content":"Hunch ä¸ gollback ç±»ä¼¼ï¼Œä¸è¿‡æä¾›çš„æ–¹æ³•æ›´å¤šï¼Œä¸”ä¸ rollback çš„æ–¹æ³•ä¹Ÿæœ‰ä¸€äº›ä¸åŒã€‚ æä¾›çš„æ–¹æ³•å¦‚ä¸‹ï¼š // type Executable func(context.Context) (interface{}, error) // ä¼šä¼ å…¥ä¸€ç»„å¯æ‰§è¡Œçš„å‡½æ•°ä¸”è¿”å›å­ä»»åŠ¡çš„æ‰§è¡Œç»“æœï¼Œä¸€æ—¦ä¸€ä¸ªå­ä»»åŠ¡å‡ºç°é”™è¯¯åˆ™ä¼šè¿”å›é”™è¯¯ä¿¡æ¯ï¼Œæ‰§è¡Œç»“æœä¸º nil func All(parentCtx context.Context, execs ...Executable) ([]interface{}, error) // åªè¦æœ‰ num ä¸ªå­ä»»åŠ¡æ­£å¸¸æ‰§è¡Œå®Œæ²¡æœ‰é”™è¯¯ï¼Œè¯¥æ–¹æ³•å°±ä¼šè¿”å›è¿™å‡ ä¸ªå­ä»»åŠ¡çš„ç»“æœã€‚è‹¥å‡ºç°é”™è¯¯ä¸ All æ–¹æ³•ç±»ä¼¼ func Take(parentCtx context.Context, num int, execs ...Executableï¼‰([]interface{}, error) // åªè¿”å›æœ€å num ä¸ªæ­£å¸¸æ‰§è¡Œçš„ã€æ²¡æœ‰é”™è¯¯çš„å­ä»»åŠ¡çš„ç»“æœã€‚è‹¥å‡ºç°é”™è¯¯ä¸ All æ–¹æ³•ç±»ä¼¼ func Last(parentCtx context.Context, num int, execs ...Executable) ([]interface{}, error) // ä¸ gollback Retry æ–¹æ³•ä¸€è‡´ func Retry(parentCtx context.Context, retries int, fn Executable) (interface{}, error) // æ‰€æœ‰å­ä»»åŠ¡æ˜¯ä¸²è¡Œæ‰§è¡Œçš„ï¼Œå‰ä¸€ä¸ªå­ä»»åŠ¡çš„æ‰§è¡Œç»“æœä¼šè¢«å½“ä½œå‚æ•°ä¼ ç»™ä¸‹ä¸€ä¸ªå­ä»»åŠ¡ï¼Œç›´è‡³æ‰€æœ‰çš„ä»»åŠ¡éƒ½å®Œæˆï¼Œè¿”å›æœ€åçš„æ‰§è¡Œç»“æœ func Waterfall(parentCtx context.Context, execs ...ExecutableInSequence) (interface{}, error) ","date":"2022-01-29","objectID":"/posts/golang/concurrent/5.html/:3:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”GroupOperation","uri":"/posts/golang/concurrent/5.html/"},{"categories":["Go"],"content":"schedgroup è¯¥å¹¶å‘åŸè¯­ä¸æ—¶é—´å¤„ç†ç›¸å…³ï¼Œå¯ä¸º worker pool æŒ‡å®šä»»åŠ¡åœ¨æŸä¸ªæ—¶é—´æˆ–è€…æŸä¸ªæ—¶é—´ä¹‹åæ‰§è¡Œã€‚ type Group func New(ctx context.Context) *Group // ä¼šåœ¨ time.Now()+delay ä¹‹åæ‰§è¡Œå‡½æ•° func (g *Group) Delay(delay time.Duration, fn func()) // æŒ‡å®šæ˜ç¡®çš„æŸä¸ªæ—¶é—´æ‰§è¡Œ func (g *Group) Schedule(when time.Time, fn func()) // é˜»å¡è°ƒç”¨è€…ï¼Œç›´åˆ°ä¹‹å‰å®‰æ’çš„æ‰€æœ‰å­ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæ‰è¿”å› // è°ƒç”¨äº† Wait æ–¹æ³•åˆ™ä¸èƒ½å†è°ƒç”¨ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•ï¼Œå¦åˆ™ä¼španic // Wait æ–¹æ³•åªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼Œè‹¥å¤šæ¬¡è°ƒç”¨åˆ™ä¼š panic func (g *Group) Wait() error ","date":"2022-01-29","objectID":"/posts/golang/concurrent/5.html/:4:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”GroupOperation","uri":"/posts/golang/concurrent/5.html/"},{"categories":["Go"],"content":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Map ä»¥ä¸‹ä¸ºé¸Ÿçªå¤§ä½¬çš„Go å¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ ä¸­æ‘˜å½•çš„ç¬”è®° ","date":"2022-01-29","objectID":"/posts/golang/concurrent/6.html/:0:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Map","uri":"/posts/golang/concurrent/6.html/"},{"categories":["Go"],"content":"åŸºæœ¬ä½¿ç”¨æ–¹æ³• Goå†…å»ºçš„mapç±»å‹å¦‚ä¸‹ï¼š map[k]v Keyç±»å‹çš„Kå¿…é¡»æ˜¯å¯æ¯”è¾ƒçš„ï¼› Golangä¸­å¸ƒå°”å‹ã€æ•´æ•°ã€æµ®ç‚¹æ•°ã€å¤æ•°ã€å­—ç¬¦ä¸²ã€æŒ‡é’ˆã€Channelã€æ¥å£éƒ½æ˜¯å¯æ¯”è¾ƒçš„ï¼ŒåŒ…å«å¯æ¯”è¾ƒå…ƒç´ çš„structå’Œæ•°ç»„ï¼Œè€Œsliceã€mapã€å‡½æ•°å€¼éƒ½æ˜¯ä¸å¯æ¯”è¾ƒçš„ã€‚ è‹¥ä½¿ç”¨structç±»å‹åškeyï¼Œåˆ™éœ€è¦ä¿è¯structé€»è¾‘ä¸å˜ï¼› Map[key]è¿”å›ç»“æœå¯ä»¥æ˜¯ä¸€ä¸ªå€¼æˆ–è€…ä¸¤ä¸ªå€¼ï¼› mapæ— åºçš„ï¼Œéå†æ—¶è¿­ä»£çš„å…ƒç´ é¡ºåºæ˜¯ä¸ç¡®å®šçš„ï¼› è‹¥æƒ³ä¿è¯å…ƒç´ æœ‰åºåˆ™å¯ä»¥ä½¿ç”¨è¾…åŠ©çš„æ•°æ®ç»“æ„ordermapã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/6.html/:1:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Map","uri":"/posts/golang/concurrent/6.html/"},{"categories":["Go"],"content":"å¸¸è§é”™è¯¯ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/6.html/:2:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Map","uri":"/posts/golang/concurrent/6.html/"},{"categories":["Go"],"content":"æœªåˆå§‹åŒ– åœ¨ä½¿ç”¨mapå¯¹è±¡ä¹‹å‰å¿…é¡»åˆå§‹åŒ–ï¼Œå¦åˆ™ä¼šç›´æ¥panicã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/6.html/:2:1","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Map","uri":"/posts/golang/concurrent/6.html/"},{"categories":["Go"],"content":"å¹¶å‘è¯»å†™ Goå†…å»ºçš„mapå¯¹è±¡ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¹¶å‘è¯»å†™çš„æ—¶å€™è¿è¡Œæ—¶ä¼šæ£€æŸ¥ï¼Œé‡åˆ°å¹¶å‘é—®é¢˜æ—¶ä¼šå¯¼è‡´panicã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/6.html/:2:2","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Map","uri":"/posts/golang/concurrent/6.html/"},{"categories":["Go"],"content":"å®ç°çº¿ç¨‹å®‰å…¨çš„mapç±»å‹ ä¸ºäº†å®ç°çº¿ç¨‹å®‰å…¨çš„mapç±»å‹ä¸€èˆ¬å¸¸è§çš„æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯ï¼š è¯»å†™é” åˆ†ç‰‡åŠ é” åœ¨è¿½æ±‚æ›´é«˜æ€§èƒ½æ—¶åˆ†ç‰‡åŠ é”æ›´å¥½ï¼Œèƒ½å¤Ÿé™ä½é”çš„ç²’åº¦æ¥æé«˜æ­¤mapå¯¹è±¡çš„ååï¼Œè‹¥å¹¶å‘æ€§èƒ½è¦æ±‚ä¸é«˜çš„åœºæ™¯ç®€å•åŠ é”æ›´ç®€å•ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/6.html/:3:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Map","uri":"/posts/golang/concurrent/6.html/"},{"categories":["Go"],"content":"è¯»å†™é” åˆ©ç”¨å†…ç½®è¯»å†™é”çš„æ–¹å¼æ¥ä½¿mapå¯¹è±¡ä½¿ç”¨æ—¶ä¿è¯çº¿ç¨‹å®‰å…¨ï¼š type RWMap struct{ sync.RWMutex m map[int]int } ","date":"2022-01-29","objectID":"/posts/golang/concurrent/6.html/:3:1","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Map","uri":"/posts/golang/concurrent/6.html/"},{"categories":["Go"],"content":"åˆ†ç‰‡åŠ é” åœ¨å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šå°½é‡å‡å°‘é”çš„ä½¿ç”¨ï¼Œå› ä¸ºåœ¨å¤§é‡å¹¶å‘è¯»å†™æƒ…å†µä¸‹é”çš„ç«äº‰ä¼šéå¸¸æ¿€çƒˆï¼Œé”æ—¶æ€§èƒ½ä¸‹é™çš„ä¸‡æ¶ä¹‹æºä¹‹ä¸€ã€‚ æ‰€ä»¥æˆ‘ä»¬ä¼šå°½é‡å‡å°‘é”çš„ç²’åº¦å’Œé”çš„æŒæœ‰æ—¶é—´ï¼Œè€Œå‡å°‘é”çš„åŠ›åº¦å¸¸ç”¨çš„æ–¹æ³•å°±æ˜¯åˆ†ç‰‡ï¼Œå³å°†ä¸€æŠŠé”åˆ†æˆå‡ æŠŠé”ï¼Œæ¯ä¸€ä¸ªé”æ§åˆ¶ä¸€ä¸ªåˆ†ç‰‡ã€‚ åœ¨golangä¸­æ¯”è¾ƒè‘—åçš„åˆ†ç‰‡å¹¶å‘å®ç°æ—¶orcaman/concurrent-mapã€‚ å®ƒé»˜è®¤é‡‡ç”¨32ä¸ªåˆ†ç‰‡ï¼ŒGetShardæ˜¯ä¸€ä¸ªå…³é”®çš„æ–¹æ³•ï¼Œèƒ½å¤Ÿæ ¹æ®keyè®¡ç®—å‡ºåˆ†ç‰‡ç´¢å¼•ã€‚ å¢åŠ æˆ–è€…æŸ¥è¯¢çš„æ—¶å€™é¦–é€‰æ ¹æ®åˆ†ç‰‡ç´¢å¼•æ¥å¾—åˆ°åˆ†ç‰‡å¯¹è±¡ï¼Œç„¶åå¯¹åˆ†ç‰‡å¯¹è±¡åŠ é”è¿›è¡Œæ“ä½œã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/6.html/:3:2","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Map","uri":"/posts/golang/concurrent/6.html/"},{"categories":["Go"],"content":"sync.Map Sync.Mapå¹¶ä¸æ˜¯ç”¨æ¥æ›¿æ¢å†…å»ºçš„mapç±»å‹ï¼Œå®ƒåªèƒ½è¢«åº”ç”¨åˆ°ä¸€äº›ç‰¹æ®Šçš„åœºæ™¯é‡Œï¼Œæ¯”å¦‚åœ¨ä»¥ä¸‹åœºæ™¯ä¸­ä½¿ç”¨è¯¥ç±»å‹æ¯”åŠ é”çš„æ–¹å¼æ€§èƒ½è¦æ›´å¥½ï¼š åªä¼šå¢é•¿çš„ç¼“å­˜ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªkeyåªå†™å…¥ä¸€æ¬¡è€Œè¢«è¯»å¾ˆå¤šæ¬¡ï¼› å¤šä¸ªgoroutineä¸ºä¸ç›¸äº¤çš„é”®é›†è¯»ã€å†™å’Œé‡å†™é”®å€¼å¯¹ï¼› ä¸€èˆ¬å»ºè®®æ˜¯é’ˆå¯¹äºè‡ªå·±çš„å®é™…åœºæ™¯åšæ€§èƒ½è¯„æµ‹ï¼Œå¦‚æœç¡®å®èƒ½å¤Ÿæ˜¾è‘—æé«˜æ€§èƒ½ï¼Œå†ä½¿ç”¨sync.Mapã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/6.html/:4:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Map","uri":"/posts/golang/concurrent/6.html/"},{"categories":["Go"],"content":"å®ç° ä¸»è¦ä¼˜åŒ–ç‚¹å¦‚ä¸‹ï¼š ç©ºé—´æ¢æ—¶é—´ã€‚é€šè¿‡å†—ä½™çš„ä¸¤ä¸ªæ•°æ®ç»“æ„ï¼ˆåªè¯»çš„readå­—æ®µã€å¯å†™çš„dirtyå­—æ®µï¼‰ï¼Œæ¥å‡å°‘é”å¯¹æ€§èƒ½çš„å½±å“ï¼Œå¯¹åªè¯»å­—æ®µçš„æ“ä½œä¸éœ€è¦åŠ é”ï¼› ä¼˜å…ˆä»readå­—æ®µè¯»å–ã€æ›´æ–°ã€åˆ é™¤ï¼Œå› ä¸ºå¯¹readå­—æ®µçš„è¯»å–ä¸éœ€è¦é”ï¼› åŠ¨æ€è°ƒæ•´ã€‚missæ¬¡æ•°è¾¾åˆ°æŸå€¼å°†dirtyæ•°æ®æå‡ä¸ºreadï¼Œé¿å…æ€»æ˜¯ä»dirtyä¸­åŠ é”è¯»å–ï¼› Double-checkingã€‚åŠ é”ä¹‹åå…ˆè¿˜è¦æ£€æŸ¥readå­—æ®µï¼Œç¡®å®šçœŸçš„ä¸å­˜åœ¨æ‰æ“ä½œdirtyå­—æ®µï¼› å»¶è¿Ÿåˆ é™¤ã€‚åˆ é™¤ä¸€ä¸ªé”®å€¼åªæ˜¯æ‰“æ ‡è®°ï¼Œåªæœ‰åœ¨æå‡dirtyå­—æ®µä¸ºreadå­—æ®µçš„æ—¶å€™æ‰æ¸…ç†åˆ é™¤çš„æ•°æ®ï¼› å…·ä½“å¯ä»¥æŸ¥çœ‹ç›¸å…³çš„æºç ç†è§£ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/6.html/:4:1","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Map","uri":"/posts/golang/concurrent/6.html/"},{"categories":["Go"],"content":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Mutex ä»¥ä¸‹ä¸ºé¸Ÿçªå¤§ä½¬çš„Go å¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ ä¸­æ‘˜å½•çš„ç¬”è®° ä»£ç repo ![image-20210103003621340](https://img.zhengyua.cn/img/ åŒæ­¥åŸè¯­çš„ä½¿ç”¨åœºæ™¯ï¼š å…±äº«èµ„æºã€‚å¹¶å‘è¯»å†™å¹¶å‘èµ„æºï¼Œä¼šå‡ºç°æ•°æ®ç«äº‰çš„é—®é¢˜ï¼Œæ‰€ä»¥éœ€è¦Mutexã€RWMutexç­‰å¹¶å‘åŸè¯­çš„ä¿æŠ¤ã€‚ ä»»åŠ¡ç¼–æ’ã€‚éœ€è¦goroutineæŒ‰ç…§ä¸€å®šçš„è§„å¾‹æ‰§è¡Œï¼Œè€Œgoroutineä¹‹é—´æœ‰ç›¸äº’ç­‰å¾…æˆ–è€…ä¾èµ–çš„é¡ºåºå…³ç³»ï¼Œå¸¸å¸¸ä½¿ç”¨WaitGroupæˆ–è€…Channelæ¥å®ç°ã€‚ æ¶ˆæ¯ä¼ é€’ã€‚ä¿¡æ¯äº¤æµä»¥åŠä¸åŒçš„goroutineä¹‹é—´çš„çº¿ç¨‹å®‰å…¨çš„æ•°æ®äº¤æµï¼Œå¸¸å¸¸ä½¿ç”¨channelæ¥å®ç°ã€‚ äº’æ–¥é”Mutexæä¾›ä¸¤ä¸ªæ–¹æ³•Lockå’ŒUnlockï¼šè¿›å…¥ä¸´ç•ŒåŒºä¹‹å‰è°ƒç”¨Lockæ–¹æ³•ï¼Œé€€å‡ºä¸´ç•ŒåŒºçš„æ—¶å€™è°ƒç”¨Unlockæ–¹æ³•ã€‚ åˆ©ç”¨go race detectoræ£€æµ‹data raceçš„æƒ…å†µã€‚ æœ‰æ—¶å€™é‡‡ç”¨åµŒå…¥å­—æ®µçš„æ–¹å¼ï¼Œæ¥æ ‡æ³¨ä¸åŒä½œç”¨çš„mutexã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/7.html/:0:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Mutex","uri":"/posts/golang/concurrent/7.html/"},{"categories":["Go"],"content":"æºç è§£æ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/7.html/:1:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Mutex","uri":"/posts/golang/concurrent/7.html/"},{"categories":["Go"],"content":"åˆç‰ˆäº’æ–¥é” // CASæ“ä½œï¼Œå½“æ—¶è¿˜æ²¡æœ‰æŠ½è±¡å‡ºatomicåŒ… func cas(val *int32, old, new int32) bool func semacquire(*int32) func semrelease(*int32) // äº’æ–¥é”çš„ç»“æ„ï¼ŒåŒ…å«ä¸¤ä¸ªå­—æ®µ type Mutex struct { key int32 // é”æ˜¯å¦è¢«æŒæœ‰çš„æ ‡è¯† sema int32 // ä¿¡å·é‡ä¸“ç”¨ï¼Œç”¨ä»¥é˜»å¡/å”¤é†’goroutine } // ä¿è¯æˆåŠŸåœ¨valä¸Šå¢åŠ deltaçš„å€¼ func xadd(val *int32, delta int32) (new int32) { for { v := *val if cas(val, v, v+delta) { return v + delta } } panic(\"unreached\") } // è¯·æ±‚é” func (m *Mutex) Lock() { if xadd(\u0026m.key, 1) == 1 { //æ ‡è¯†åŠ 1ï¼Œå¦‚æœç­‰äº1ï¼ŒæˆåŠŸè·å–åˆ°é” return } semacquire(\u0026m.sema) // å¦åˆ™é˜»å¡ç­‰å¾… } func (m *Mutex) Unlock() { if xadd(\u0026m.key, -1) == 0 { // å°†æ ‡è¯†å‡å»1ï¼Œå¦‚æœç­‰äº0ï¼Œåˆ™æ²¡æœ‰å…¶å®ƒç­‰å¾…è€… return } semrelease(\u0026m.sema) // å”¤é†’å…¶å®ƒé˜»å¡çš„goroutine } ç”±äºMutex æœ¬èº«å¹¶æ²¡æœ‰åŒ…å«æŒæœ‰è¿™æŠŠé”çš„goroutineçš„ä¿¡æ¯ï¼ŒUnlockä¹Ÿä¸ä¼šå¯¹æ­¤è¿›è¡Œæ£€æŸ¥ï¼ŒUnlockæ–¹æ³•å¯ä»¥è¢«ä»»æ„çš„goroutineè°ƒç”¨é‡Šæ”¾é”ï¼Œå³ä½¿æ˜¯æ²¡æŒæœ‰è¿™ä¸ªäº’æ–¥é”çš„goroutineä¹Ÿå¯ä»¥ã€‚ æ‰€ä»¥éœ€è¦æ³¨æ„åœ¨ä½¿ç”¨ Mutex çš„æ—¶å€™ï¼Œå¿…é¡»è¦ä¿è¯ goroutine å°½å¯èƒ½ä¸å»é‡Šæ”¾è‡ªå·±æœªæŒæœ‰çš„é”ï¼Œéµå¾ª**â€œè°ç”³è¯·ï¼Œè°é‡Šæ”¾â€**çš„åŸåˆ™ã€‚ åœ¨çœŸå®çš„å®è·µä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº’æ–¥é”çš„æ—¶å€™ï¼Œ å¾ˆå°‘åœ¨ä¸€ä¸ªæ–¹æ³•ä¸­å•ç‹¬ç”³è¯·é”ï¼Œè€Œåœ¨å¦å¤–ä¸€ä¸ªæ–¹æ³•ä¸­å•ç‹¬é‡Šæ”¾é”ï¼Œä¸€èˆ¬éƒ½ä¼šåœ¨åŒä¸€ä¸ªæ–¹æ³•ä¸­è·å–é”å’Œé‡Šæ”¾é”ã€‚ åˆç‰ˆäº’æ–¥é”æœ‰ä¸€ä¸ªé—®é¢˜åœ¨äºè¯·æ±‚é”çš„goroutineä¼šæ’é˜Ÿç­‰å¾…è·å–äº’æ–¥é”ï¼Œåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ä¸æ˜¯æ€§èƒ½æœ€ä¼˜çš„ç­–ç•¥ï¼Œå¦‚æœèƒ½å¤ŸæŠŠé”äº¤ç»™æ­£åœ¨å ç”¨CPUæ—¶é—´ç‰‡çš„goroutineå°±ä¸ç”¨åšä¸Šä¸‹æ–‡çš„åˆ‡æ¢ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/7.html/:1:1","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Mutex","uri":"/posts/golang/concurrent/7.html/"},{"categories":["Go"],"content":"æ–°æ¥çš„goroutineç«äº‰ func (m *Mutex) Lock() { // Fast path: å¹¸è¿caseï¼Œèƒ½å¤Ÿç›´æ¥è·å–åˆ°é” if atomic.CompareAndSwapInt32(\u0026m.state, 0, mutexLocked) { return } awoke := false for { old := m.state new := old | mutexLocked // æ–°çŠ¶æ€åŠ é” if old\u0026mutexLocked != 0 { new = old + 1\u003c\u003cmutexWaiterShift //ç­‰å¾…è€…æ•°é‡åŠ ä¸€ } if awoke { // goroutineæ˜¯è¢«å”¤é†’çš„ï¼Œ // æ–°çŠ¶æ€æ¸…é™¤å”¤é†’æ ‡å¿— new \u0026^= mutexWoken } if atomic.CompareAndSwapInt32(\u0026m.state, old, new) {//è®¾ç½®æ–°çŠ¶æ€ if old\u0026mutexLocked == 0 { // é”åŸçŠ¶æ€æœªåŠ é” break } runtime.Semacquire(\u0026m.sema) // è¯·æ±‚ä¿¡å·é‡ awoke = true } } } Fast Pathï¼šé¦–å…ˆé€šè¿‡CASæ£€æµ‹stateå­—æ®µçš„æ ‡å¿—ï¼Œåˆ¤æ–­æ˜¯å¦æŒæœ‰é”ï¼Œè‹¥æ²¡æœ‰åˆ™ç›´æ¥è·å¾—é”ï¼› ä¸‹é¢å¾ªç¯æ£€æŸ¥ï¼Œæ¶‰åŠåˆ°stateä¸åŒæ ‡å¿—ä½çš„æ“ä½œï¼Œ func (m *Mutex) Unlock() { // Fast path: drop lock bit. new := atomic.AddInt32(\u0026m.state, -mutexLocked) //å»æ‰é”æ ‡å¿— if (new+mutexLocked)\u0026mutexLocked == 0 { //æœ¬æ¥å°±æ²¡æœ‰åŠ é” panic(\"concurrent_programming: unlock of unlocked mutex\") } old := new for { if old\u003e\u003emutexWaiterShift == 0 || old\u0026(mutexLocked|mutexWoken) != 0 return } new = (old - 1\u003c\u003cmutexWaiterShift) | mutexWoken // æ–°çŠ¶æ€ï¼Œå‡†å¤‡å”¤é†’goroutine if atomic.CompareAndSwapInt32(\u0026m.state, old, new) { runtime.Semrelease(\u0026m.sema) return } old = m.state } è‹¥æ²¡æœ‰é”çš„æƒ…å†µä¸‹è¿›è¡ŒUnlockåˆ™ç›´æ¥panicï¼› è‹¥æœ‰é”çš„æƒ…å†µä¸‹æœ‰ä¸¤ç§æƒ…å†µï¼š è‹¥æ²¡æœ‰waiterï¼Œåˆ™ç›´æ¥è¿”å›ï¼› è‹¥æœ‰waiterï¼Œä¸”æ²¡æœ‰è¢«å”¤é†’ï¼Œåˆ™éœ€è¦å”¤é†’ä¸€ä¸ªç­‰å¾…çš„waiterï¼› ç›¸å¯¹äºåˆç‰ˆçš„è®¾è®¡ï¼Œè¿™æ¬¡æ”¹åŠ¨ä¸»è¦å°±æ˜¯æ–°æ¥çš„goroutineæœ‰æœºä¼šå…ˆè·å–åˆ°é”ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/7.html/:1:2","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Mutex","uri":"/posts/golang/concurrent/7.html/"},{"categories":["Go"],"content":"è‡ªæ—‹æ£€æŸ¥é”é‡Šæ”¾ è‹¥æ–°æ¥çš„æˆ–è€…æ˜¯è¢«å”¤é†’çš„goroutineé¦–æ¬¡è·å–ä¸åˆ°é”åˆ™ä¼šè¿›è¡Œè‡ªæ—‹çŠ¶æ€å°è¯•æ£€æµ‹é”æ˜¯å¦è¢«é‡Šæ”¾ã€‚åœ¨å°è¯•ä¸€å®šçš„è‡ªæ—‹æ¬¡æ•°åï¼Œå†æ‰§è¡ŒåŸæ¥çš„é€»è¾‘ã€‚ func (m *Mutex) Lock() { // Fast path: å¹¸è¿ä¹‹è·¯ï¼Œæ­£å¥½è·å–åˆ°é” if atomic.CompareAndSwapInt32(\u0026m.state, 0, mutexLocked) { return } awoke := false iter := 0 for { // ä¸ç®¡æ˜¯æ–°æ¥çš„è¯·æ±‚é”çš„goroutine, è¿˜æ˜¯è¢«å”¤é†’çš„goroutineï¼Œéƒ½ä¸æ–­å°è¯•è¯·æ±‚é” old := m.state // å…ˆä¿å­˜å½“å‰é”çš„çŠ¶æ€ new := old | mutexLocked // æ–°çŠ¶æ€è®¾ç½®åŠ é”æ ‡å¿— if old\u0026mutexLocked != 0 { // é”è¿˜æ²¡è¢«é‡Šæ”¾ if runtime_canSpin(iter) { // è¿˜å¯ä»¥è‡ªæ—‹ if !awoke \u0026\u0026 old\u0026mutexWoken == 0 \u0026\u0026 old\u003e\u003emutexWaiterShift atomic.CompareAndSwapInt32(\u0026m.state, old, old|mutexWok awoke = true } runtime_doSpin() iter++ continue // è‡ªæ—‹ï¼Œå†æ¬¡å°è¯•è¯·æ±‚é” } new = old + 1\u003c\u003cmutexWaiterShift } if awoke { // å”¤é†’çŠ¶æ€ if new\u0026mutexWoken == 0 { panic(\"concurrent_programming: inconsistent mutex state\") } new \u0026^= mutexWoken // æ–°çŠ¶æ€æ¸…é™¤å”¤é†’æ ‡è®° } if atomic.CompareAndSwapInt32(\u0026m.state, old, new) { if old\u0026mutexLocked == 0 { // æ—§çŠ¶æ€é”å·²é‡Šæ”¾ï¼Œæ–°çŠ¶æ€æˆåŠŸæŒæœ‰äº†é”ï¼Œç›´æ¥è¿”å› break } runtime_Semacquire(\u0026m.sema) // é˜»å¡ç­‰å¾… awoke = true // è¢«å”¤é†’ iter = 0 } } å¯¹äºä¸´ç•ŒåŒºä»£ç æ‰§è¡Œéå¸¸çŸ­çš„åœºæ™¯æ¥è¯´è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¼˜åŒ–ï¼Œå› ä¸ºä¸´ç•ŒåŒºçš„ä»£ç è€—æ—¶è¾ƒçŸ­ï¼Œé”å¾ˆå¿«å°±èƒ½é‡Šæ”¾ï¼Œè€ŒæŠ¢å¤ºé”çš„goroutineä¸ç”¨é€šè¿‡ä¼‘çœ å”¤é†’æ–¹å¼ç­‰å¾…è°ƒåº¦ï¼Œç›´æ¥é€šè¿‡è‡ªæ—‹å¯èƒ½å°±è·å–åˆ°äº†é”ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/7.html/:1:3","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Mutex","uri":"/posts/golang/concurrent/7.html/"},{"categories":["Go"],"content":"è§£å†³é¥¥é¥¿ ä¸Šé¢æˆ‘ä»¬çœ‹åˆ°ä¸ºäº†æ€§èƒ½ä¼˜åŒ–å°†æ–°æ¥çš„å’Œå”¤é†’çš„goroutineå‚ä¸ç«äº‰ï¼Œå¿…ç„¶å°±ä¼šå¼•å…¥é¥¥é¥¿çš„é—®é¢˜ã€‚ Mutex ä¸èƒ½å®¹å¿è¿™ç§äº‹æƒ…å‘ç”Ÿã€‚æ‰€ä»¥ï¼Œ2016 å¹´ Go 1.9 ä¸­ Mutex å¢åŠ äº†é¥¥é¥¿æ¨¡å¼ï¼Œè®©é”å˜å¾—æ›´å…¬å¹³ï¼Œä¸å…¬å¹³çš„ç­‰å¾…æ—¶é—´é™åˆ¶åœ¨1æ¯«ç§’ï¼Œå¹¶ä¸”ä¿®å¤äº†ä¸€ä¸ªå¤§ Bugï¼šæ€»æ˜¯æŠŠå”¤é†’çš„ goroutine æ”¾åœ¨ç­‰å¾…é˜Ÿåˆ—çš„å°¾éƒ¨ï¼Œä¼šå¯¼è‡´æ›´åŠ ä¸å…¬å¹³çš„ç­‰å¾…æ—¶é—´ã€‚ä¹‹åï¼Œ2018 å¹´ï¼ŒGo å¼€å‘è€…å°† fast path å’Œ slow path æ‹†æˆç‹¬ç«‹çš„æ–¹æ³•ï¼Œä»¥ä¾¿å†…è”ï¼Œæé«˜æ€§èƒ½ã€‚2019 å¹´ä¹Ÿæœ‰ä¸€ä¸ª Mutex çš„ä¼˜åŒ–ï¼Œè™½ç„¶æ²¡æœ‰ Mutex åšä¿®æ”¹ï¼Œä½†æ˜¯ï¼Œå¯¹ Mutexå”¤é†’åæŒæœ‰é”çš„é‚£ä¸ª waiterï¼Œè°ƒåº¦å™¨å¯ä»¥æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§å»æ‰§è¡Œï¼Œè¿™å·²ç»æ˜¯å¾ˆç»†è‡´çš„æ€§èƒ½ä¼˜åŒ–äº†ã€‚ Mutexè®©æ¯ä¸€ä¸ªgoroutineéƒ½æœ‰æœºä¼šè·å–åˆ°é”ï¼Œè€Œä¸”å®ƒä¹Ÿå°½å¯èƒ½åœ°è®©ç­‰å¾…è¾ƒé•¿çš„ goroutine æ›´æœ‰æœºä¼šè·å–åˆ°é”ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/7.html/:1:4","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Mutex","uri":"/posts/golang/concurrent/7.html/"},{"categories":["Go"],"content":"é¥¥é¥¿æ¨¡å¼å’Œæ­£å¸¸æ¨¡å¼ è¯·æ±‚é”æ—¶è°ƒç”¨çš„ Lock æ–¹æ³•ä¸­ä¸€å¼€å§‹æ˜¯ fast pathï¼Œè¿™æ˜¯ä¸€ä¸ªå¹¸è¿çš„åœºæ™¯ï¼Œå½“å‰çš„ goroutine å¹¸è¿åœ°è·å¾—äº†é”ï¼Œæ²¡æœ‰ç«äº‰ï¼Œç›´æ¥è¿”å›ï¼Œå¦åˆ™å°±è¿›å…¥äº† lockSlow æ–¹æ³•ã€‚ è¿™ç§è®¾è®¡ï¼Œæ–¹ä¾¿ç¼–è¯‘å™¨å¯¹Lockæ–¹æ³•è¿›è¡Œå†…è”ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ç¨‹åºå¼€å‘ä¸­åº”ç”¨è¿™ä¸ªæŠ€å·§ã€‚ æ­£å¸¸æ¨¡å¼ä¸‹ï¼Œwaiter éƒ½æ˜¯è¿›å…¥å…ˆå…¥å…ˆå‡ºé˜Ÿåˆ—ï¼Œè¢«å”¤é†’çš„ waiter å¹¶ä¸ä¼šç›´æ¥æŒæœ‰é”ï¼Œè€Œæ˜¯è¦å’Œæ–°æ¥çš„ goroutine è¿›è¡Œç«äº‰ã€‚æ–°æ¥çš„ goroutineæœ‰å…ˆå¤©çš„ä¼˜åŠ¿ï¼Œå®ƒä»¬æ­£åœ¨CPUä¸­è¿è¡Œï¼Œå¯èƒ½å®ƒä»¬çš„æ•°é‡è¿˜ä¸å°‘ï¼Œæ‰€ä»¥åœ¨é«˜å¹¶å‘æƒ…å†µä¸‹ï¼Œè¢«å”¤é†’çš„waiterå¯èƒ½æ¯”è¾ƒæ‚²å‰§åœ°è·å–ä¸åˆ°é”ï¼Œè¿™æ—¶ï¼Œå®ƒä¼šè¢«æ’å…¥åˆ°é˜Ÿåˆ—çš„å‰é¢ã€‚å¦‚æœwaite è·å–ä¸åˆ°é”çš„æ—¶é—´è¶…è¿‡é˜ˆå€¼1æ¯«ç§’ï¼Œé‚£ä¹ˆï¼Œè¿™ä¸ªMutexå°±è¿›å…¥åˆ°äº†é¥¥é¥¿æ¨¡å¼ã€‚ åœ¨é¥¥é¥¿æ¨¡å¼ä¸‹ï¼ŒMutexçš„æ‹¥æœ‰è€…å°†ç›´æ¥æŠŠé”äº¤ç»™é˜Ÿåˆ—æœ€å‰é¢çš„ waiterã€‚æ–°æ¥çš„goroutineä¸ä¼šå°è¯•è·å–é”ï¼Œå³ä½¿çœ‹èµ·æ¥é”æ²¡æœ‰è¢«æŒæœ‰ï¼Œå®ƒä¹Ÿä¸ä¼šå»æŠ¢ï¼Œä¹Ÿä¸ä¼šspinï¼Œå®ƒä¼šä¹–ä¹–åœ°åŠ å…¥åˆ°ç­‰å¾…é˜Ÿåˆ—çš„å°¾éƒ¨ã€‚ å¦‚æœæ‹¥æœ‰ Mutex çš„ waiter å‘ç°ä¸‹é¢ä¸¤ç§æƒ…å†µçš„å…¶ä¸­ä¹‹ä¸€ï¼Œå®ƒå°±ä¼šæŠŠè¿™ä¸ª Mutex è½¬æ¢æˆæ­£å¸¸æ¨¡å¼ æ­£å¸¸æ¨¡å¼æ‹¥æœ‰æ›´å¥½çš„æ€§èƒ½ï¼Œå› ä¸ºå³ä½¿æœ‰ç­‰å¾…æŠ¢é”çš„ waiterï¼Œgoroutine ä¹Ÿå¯ä»¥è¿ç»­å¤šæ¬¡è·å–åˆ°é”ã€‚ é¥¥é¥¿æ¨¡å¼æ˜¯å¯¹å…¬å¹³æ€§å’Œæ€§èƒ½çš„ä¸€ç§å¹³è¡¡ï¼Œå®ƒé¿å…äº†æŸäº› goroutine é•¿æ—¶é—´çš„ç­‰å¾…é”ã€‚åœ¨é¥¥é¥¿æ¨¡å¼ä¸‹ï¼Œä¼˜å…ˆå¯¹å¾…çš„æ˜¯é‚£äº›ä¸€ç›´åœ¨ç­‰å¾…çš„waiterã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/7.html/:1:5","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Mutex","uri":"/posts/golang/concurrent/7.html/"},{"categories":["Go"],"content":"å¸¸ç”¨é”™è¯¯åœºæ™¯ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/7.html/:2:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Mutex","uri":"/posts/golang/concurrent/7.html/"},{"categories":["Go"],"content":"Lock/Unlockä¸æ˜¯æˆå¯¹å‡ºç° è‹¥Lock/Unlockæ²¡æœ‰æˆå¯¹å‡ºç°ï¼Œåˆ™ä¼šå‡ºç°æ­»é”çš„æƒ…å†µï¼Œæˆ–è€…æ˜¯å› ä¸ºUnlockä¸€ä¸ªæœªåŠ é”çš„Mutexè€Œå¯¼è‡´panicã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/7.html/:2:1","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Mutex","uri":"/posts/golang/concurrent/7.html/"},{"categories":["Go"],"content":"Copyå·²ä½¿ç”¨çš„Mutex Package syncçš„åŒæ­¥åŸè¯­åœ¨ä½¿ç”¨åæ˜¯ä¸èƒ½å¤åˆ¶çš„ï¼Œå› ä¸ºMutexæ˜¯ä¸€ä¸ªæœ‰çŠ¶æ€çš„å¯¹è±¡ï¼Œå®ƒçš„stateå­—æ®µä¼šè®°å½•è¿™ä¸ªé”çš„çŠ¶æ€ã€‚ Goåœ¨è¿è¡Œæ—¶ä¼šæœ‰æ­»é”çš„æ£€æŸ¥æœºåˆ¶ï¼ˆcheckdead()æ–¹æ³•ï¼‰ï¼Œèƒ½å¤Ÿå‘ç°æ­»é”çš„goroutineã€‚ vetå·¥å…·å¯ä»¥æ£€æŸ¥åŒæ­¥åŸè¯­ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“è¿›è¡Œæ£€æŸ¥ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/7.html/:2:2","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Mutex","uri":"/posts/golang/concurrent/7.html/"},{"categories":["Go"],"content":"é‡å…¥ å¯é‡å…¥é”ï¼ˆé€’å½’é”ï¼‰ï¼šå½“ä¸€ä¸ªçº¿ç¨‹è·å–é”æ—¶ï¼Œå¦‚æœæ²¡æœ‰å…¶å®ƒçº¿ç¨‹æ‹¥æœ‰è¿™ä¸ªé”ï¼Œé‚£ä¹ˆï¼Œè¿™ä¸ªçº¿ç¨‹å°±æˆåŠŸè·å–åˆ°è¿™ä¸ªé”ã€‚ä¹‹åï¼Œå¦‚æœå…¶å®ƒçº¿ç¨‹å†è¯·æ±‚è¿™ä¸ªé”ï¼Œå°±ä¼šå¤„äºé˜»å¡ç­‰å¾…çš„çŠ¶æ€ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‹¥æœ‰è¿™æŠŠé”çš„çº¿ç¨‹å†è¯·æ±‚è¿™æŠŠé”çš„è¯ï¼Œä¸ä¼šé˜»å¡ï¼Œè€Œæ˜¯æˆåŠŸè¿”å›ã€‚ åœ¨é€šè¿‡é€’å½’å®ç°ä¸€äº›ç®—æ³•æ—¶ï¼Œè°ƒç”¨è€…ä¸ä¼šé˜»å¡æˆ–è€…æ­»é”ã€‚ Mutexä¸æ˜¯å¯é‡å…¥é”ã€‚Mutexå®ç°æ²¡æœ‰è®°å½•goroutineæ˜¯å¦æ‹¥æœ‰è¯¥é”ã€‚ è‹¥è¦å®ç°å¯é‡å…¥é”ï¼Œåˆ™éœ€è¦è®°å½•æŒæœ‰è¯¥é”çš„goroutineæ ‡è¯†ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/7.html/:2:3","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Mutex","uri":"/posts/golang/concurrent/7.html/"},{"categories":["Go"],"content":"æ­»é” æ­»é”ï¼šä¸¤ä¸ªåŠä»¥ä¸Šçš„è¿›ç¨‹æˆ–çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå› äº‰å¤ºå…±äº«èµ„æºè€Œå¤„äºä¸€ç§äº’ç›¸ç­‰å¾…çš„çŠ¶æ€ï¼Œè‹¥æ— å¤–éƒ¨å¹²æ¶‰åˆ™ä¼šæ— æ³•æ¨è¿›ä¸‹å»ã€‚ å¯å¼•å…¥ç¬¬ä¸‰æ–¹çš„é”æ¥ä¾èµ–è¿™ä¸ªé”è¿›è¡Œä¸šåŠ¡å¤„ç†ï¼Œé¿å…å‡ºç°æ­»é”ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/7.html/:2:4","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Mutex","uri":"/posts/golang/concurrent/7.html/"},{"categories":["Go"],"content":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Once ä»¥ä¸‹ä¸ºé¸Ÿçªå¤§ä½¬çš„Go å¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ ä¸­æ‘˜å½•çš„ç¬”è®° ä»£ç repo ","date":"2022-01-29","objectID":"/posts/golang/concurrent/8.html/:0:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Once","uri":"/posts/golang/concurrent/8.html/"},{"categories":["Go"],"content":"OnceåŸºæœ¬æ¦‚å¿µ Onceçš„ä½¿ç”¨æ–¹æ³•è¾ƒä¸ºç®€å•ï¼Œå¯ä»¥ç”¨æ¥æ‰§è¡Œä¸”ä»…ä»…æ‰§è¡Œä¸€æ¬¡åŠ¨ä½œã€‚ å®ƒçš„ä½¿ç”¨åœºæ™¯è¾ƒå¤šåº”ç”¨äºå•ä¾‹å¯¹è±¡çš„åˆå§‹åŒ–æˆ–è€…å»¶è¿Ÿåˆå§‹åŒ–ç­‰åœºæ™¯ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/8.html/:1:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Once","uri":"/posts/golang/concurrent/8.html/"},{"categories":["Go"],"content":"Onceä½¿ç”¨ Onceå¸¸å¸¸ç”¨æ¥åˆå§‹åŒ–å•ä¾‹èµ„æºï¼Œæˆ–è€…å¹¶å‘è®¿é—®åªéœ€åˆå§‹åŒ–ä¸€æ¬¡çš„å…±äº«èµ„æºï¼Œæˆ–è€…åœ¨æµ‹è¯•çš„æ—¶å€™åˆå§‹åŒ–ä¸€æ¬¡æµ‹è¯•èµ„æºã€‚ åªæš´éœ²äº†ä¸€ä¸ªæ–¹æ³• Doï¼Œå¯ä»¥å¤šæ¬¡è°ƒç”¨ Do æ–¹æ³•ï¼Œä½†æ˜¯åªæœ‰ç¬¬ä¸€æ¬¡è°ƒç”¨ Do æ–¹æ³•æ—¶ f å‚æ•°æ‰ä¼šæ‰§è¡Œï¼Œè¿™é‡Œçš„ f æ˜¯ä¸€ä¸ªæ— å‚æ•°æ— è¿”å›å€¼çš„å‡½æ•°ã€‚ func (o *Once) Do(f func()) æ ‡å‡†åº“ä¸­è¾ƒä¸ºå¸¸è§çš„æ¯”å¦‚åœ¨æ ‡å‡†åº“å†…éƒ¨cacheçš„å®ç°ä¸Šå°±ä½¿ç”¨äº†Onceåˆå§‹åŒ–Cacheèµ„æºï¼ŒåŒ…æ‹¬defaultDirçš„è·å–ï¼Œè¿˜æœ‰ä¸€äº›æµ‹è¯•çš„æ—¶å€™åˆå§‹åŒ–æµ‹è¯•çš„èµ„æºã€‚ å…¶ä¸­math/big/sqrt.goç§å®ç°çš„ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œé€šè¿‡Onceå°è£…äº†ä¸€ä¸ªåªåˆå§‹åŒ–ä¸€æ¬¡çš„å€¼ï¼Œå€¼å¾—æˆ‘ä»¬å­¦ä¹ ã€‚ // å€¼æ˜¯3.0æˆ–è€…0.0çš„ä¸€ä¸ªæ•°æ®ç»“æ„ var threeOnce struct { sync.Once v *Float } // è¿”å›æ­¤æ•°æ®ç»“æ„çš„å€¼ï¼Œå¦‚æœè¿˜æ²¡æœ‰åˆå§‹åŒ–ä¸º3.0ï¼Œåˆ™åˆå§‹åŒ– func three() *Float { threeOnce.Do(func() { // ä½¿ç”¨Onceåˆå§‹åŒ– threeOnce.v = NewFloat(3.0) }) return threeOnce.v } ","date":"2022-01-29","objectID":"/posts/golang/concurrent/8.html/:2:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Once","uri":"/posts/golang/concurrent/8.html/"},{"categories":["Go"],"content":"å®ç°Once ä¸€ä¸ªæ­£ç¡®çš„Onceå®ç°è¦ä½¿ç”¨ä¸€ä¸ªäº’æ–¥é”ï¼Œè¿™æ ·åˆå§‹åŒ–çš„æ—¶å€™å¦‚æœæœ‰å¹¶å‘çš„ goroutineï¼Œå°±ä¼šè¿›å…¥doSlowæ–¹æ³•ã€‚äº’æ–¥é”çš„æœºåˆ¶ä¿è¯åªæœ‰ä¸€goroutineè¿›è¡Œåˆå§‹åŒ–ï¼ŒåŒæ—¶åˆ©ç”¨åŒæ£€æŸ¥çš„æœºåˆ¶ï¼ˆdouble-checkingï¼‰ï¼Œå†æ¬¡åˆ¤æ–­o.done æ˜¯å¦ä¸º0ï¼Œå¦‚æœä¸º0ï¼Œåˆ™æ˜¯ç¬¬ä¸€æ¬¡æ‰§è¡Œï¼Œæ‰§è¡Œå®Œæ¯•åï¼Œå°±å°†o.doneè®¾ç½®ä¸º 1ï¼Œç„¶åé‡Šæ”¾é”ã€‚ type Once struct { done uint32 m sync.Mutex } func (o *Once) Do(f func()) { if atomic.LoadUint32(\u0026o.done) == 0 { o.doSlow(f) } } func (o *Once) doSlow(f func()) { o.m.Lock() defer o.m.Unlock() // åŒæ£€æŸ¥ if o.done == 0 { defer atomic.StoreUint32(\u0026o.done, 1) f() } } ","date":"2022-01-29","objectID":"/posts/golang/concurrent/8.html/:3:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Once","uri":"/posts/golang/concurrent/8.html/"},{"categories":["Go"],"content":"å¯èƒ½å‡ºç°çš„é”™è¯¯ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/8.html/:4:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Once","uri":"/posts/golang/concurrent/8.html/"},{"categories":["Go"],"content":"æ­»é” æ— é™é€’å½’å¯¼è‡´çš„æ­»é”ã€‚ var once sync.Once once.Do(func() { once.Do(func() { fmt.Println(\"åˆå§‹åŒ–\") }) }) ","date":"2022-01-29","objectID":"/posts/golang/concurrent/8.html/:4:1","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Once","uri":"/posts/golang/concurrent/8.html/"},{"categories":["Go"],"content":"æœªåˆå§‹åŒ– å¦‚æœfæ–¹æ³•æ‰§è¡Œçš„æ—¶å€™panicï¼Œæˆ–è€…fæ‰§è¡Œåˆå§‹åŒ–èµ„æºçš„æ—¶å€™å¤±è´¥äº†ï¼Œè¿™ä¸ªæ—¶å€™ï¼ŒOnceè¿˜æ˜¯ä¼šè®¤ä¸ºåˆæ¬¡æ‰§è¡Œå·²ç»æˆåŠŸäº†ï¼Œå³ä½¿å†æ¬¡è°ƒç”¨Doæ–¹æ³•ï¼Œä¹Ÿä¸ä¼šå†æ¬¡æ‰§è¡Œfã€‚ å¯ä»¥é€šè¿‡è‡ªå·±å®ç°ä¸€ä¸ªç±»ä¼¼Onceçš„å¹¶å‘åŸè¯­è§£å†³ type ReOnce struct { m sync.Mutex done uint32 } // ä¼ å…¥çš„å‡½æ•°fæœ‰è¿”å›å€¼errorï¼Œå¦‚æœåˆå§‹åŒ–å¤±è´¥ï¼Œéœ€è¦è¿”å›å¤±è´¥çš„error // Doæ–¹æ³•ä¼šæŠŠè¿™ä¸ªerrorè¿”å›ç»™è°ƒç”¨è€… func (o *ReOnce) Do(f func() error) error { if atomic.LoadUint32(\u0026o.done) == 1 { //fast path return nil } return o.slowDo(f) } // å¦‚æœè¿˜æ²¡æœ‰åˆå§‹åŒ– func (o *ReOnce) slowDo(f func() error) error { o.m.Lock() defer o.m.Unlock() var err error if o.done == 0 { // åŒæ£€æŸ¥ï¼Œè¿˜æ²¡æœ‰åˆå§‹åŒ– err = f() if err == nil { // åˆå§‹åŒ–æˆåŠŸæ‰å°†æ ‡è®°ç½®ä¸ºå·²åˆå§‹åŒ– atomic.StoreUint32(\u0026o.done, 1) } } return err } è‹¥æƒ³è¦æŸ¥è¯¢åˆå§‹åŒ–è¿‡çš„æƒ…å†µåˆ™è¿˜éœ€è¦ä¸€ä¸ªè¾…åŠ©å˜é‡æ¥æ£€æŸ¥ type AnimalStore struct { once sync.Once inited uint32 } func (a *AnimalStore) Init(){ // å¯ä»¥è¢«å¹¶å‘è°ƒç”¨ a.once.Do(func() { longOperationSetupDbOpenFilesQueuesEtc() atomic.StoreUint32(\u0026a.inited, 1) }) } func (a *AnimalStore) CountOfCats() (int, error) { // å¦å¤–ä¸€ä¸ªgoroutine if atomic.LoadUint32(\u0026a.inited) == 0 { // åˆå§‹åŒ–åæ‰ä¼šæ‰§è¡ŒçœŸæ­£çš„ä¸šåŠ¡é€»è¾‘ return 0, NotYetInitedError } //Real operation } ä½†è‹¥æ˜¯æœ‰ä¸€ä¸ªDoneæ–¹æ³•ç›´æ¥ä½¿ç”¨åˆ¤æ–­æ˜¯å¦åˆå§‹åŒ–è¿‡åˆ™æ›´ä¸ºç®€ä¾¿ // Once æ˜¯ä¸€ä¸ªæ‰©å±•çš„sync.Onceç±»å‹ï¼Œæä¾›äº†ä¸€ä¸ªDoneæ–¹æ³• type Once struct { sync.Once } // Done è¿”å›æ­¤Onceæ˜¯å¦æ‰§è¡Œè¿‡ // å¦‚æœæ‰§è¡Œè¿‡åˆ™è¿”å›true // å¦‚æœæ²¡æœ‰æ‰§è¡Œè¿‡æˆ–è€…æ­£åœ¨æ‰§è¡Œï¼Œè¿”å›false func (o *Once) Done() bool { return atomic.LoadUint32((*uint32)(unsafe.Pointer(\u0026o.Once))) == 1 } ","date":"2022-01-29","objectID":"/posts/golang/concurrent/8.html/:4:2","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Once","uri":"/posts/golang/concurrent/8.html/"},{"categories":["Go"],"content":"é‡å¤åˆå§‹åŒ– è‹¥ç±»ä¼¼äºæƒ³è¦å®ç°å¢åŠ ä¸€ä¸ªResetæ–¹æ³•æ¥é‡æ–°åˆå§‹åŒ–Onceï¼Œä½¿ä¹‹èƒ½å¤Ÿé‡æ–°ä½¿ç”¨ã€‚ Goæ ¸å¿ƒå¼€å‘è€…lan Lance Tayloræä¾›äº†ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ¡ˆå³resetæ—¶ä½¿ç”¨newæ–¹æ³•é‡æ–°ç»™sync.Onceå˜é‡éå†é‡æ–°èµ‹å€¼ä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚ ä½†ä¸‹é¢è¿™ç§æƒ…å†µå°±ä¼šç›´æ¥panicï¼š type MuOnce struct { sync.RWMutex sync.Once mtime time.Time vals []string } // ç›¸å½“äºresetæ–¹æ³•ï¼Œä¼šå°†m.Onceé‡æ–°å¤åˆ¶ä¸€ä¸ªOnce func (m *MuOnce) refresh() { m.Lock() defer m.Unlock() m.Once = sync.Once{} m.mtime = time.Now() m.vals = []string{m.mtime.String()} } // è·å–æŸä¸ªåˆå§‹åŒ–çš„å€¼ï¼Œå¦‚æœè¶…è¿‡æŸä¸ªæ—¶é—´ï¼Œä¼šreset Once func (m *MuOnce) strings() []string { now := time.Now() m.RLock() if now.After(m.mtime) { defer m.Do(m.refresh) // ä½¿ç”¨refreshå‡½æ•°é‡æ–°åˆå§‹åŒ– } vals := m.vals m.RUnlock() return vals } æˆ‘ä»¬éœ€è¦æ³¨æ„ä»onceçš„å®ç°åŸç†ä¸­çš„lockï¼Œè‹¥æ›´æ”¹äº†Onceçš„æŒ‡é’ˆåˆ™ä¼šå½±å“è¯¥lockä¹Ÿé‡æ–°ç”Ÿæˆå³åˆå§‹åŒ–ï¼Œåˆ™deferä¹‹åçš„unlockå°±ä¼šé‡Šæ”¾æœªåŠ é”çš„mutexï¼Œæ‰€ä»¥æœ€åå°±ä¼šæŠ¥é”™ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/8.html/:4:3","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Once","uri":"/posts/golang/concurrent/8.html/"},{"categories":["Go"],"content":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Pool ä»¥ä¸‹ä¸ºé¸Ÿçªå¤§ä½¬çš„Go å¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ ä¸­æ‘˜å½•çš„ç¬”è®° ","date":"2022-01-29","objectID":"/posts/golang/concurrent/9.html/:0:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Pool","uri":"/posts/golang/concurrent/9.html/"},{"categories":["Go"],"content":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”RWMutex ä»¥ä¸‹ä¸ºé¸Ÿçªå¤§ä½¬çš„Go å¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ ä¸­æ‘˜å½•çš„ç¬”è®° ä»£ç repo é’ˆå¯¹è¯»å†™åœºæ™¯ï¼Œå³è€ƒè™‘readers-writersé—®é¢˜ï¼ŒåŒæ—¶å¯èƒ½æœ‰å¤šä¸ªè¯»æˆ–è€…å¤šä¸ªå†™ï¼Œä½†åªè¦æœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œå†™æ“ä½œï¼Œåˆ™å…¶ä»–çº¿ç¨‹éƒ½ä¸èƒ½æ‰§è¡Œå†™æ“ä½œï¼Œå³è¯»é”ä¸ºå…±äº«é”ï¼Œå†™é”ä¸ºæ’ä»–é”ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/10.html/:0:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”RWMutex","uri":"/posts/golang/concurrent/10.html/"},{"categories":["Go"],"content":"RWMutexæ ‡å‡†åº“ Lock/Unlockï¼šå†™æ“ä½œæ—¶è°ƒç”¨çš„æ–¹æ³•ã€‚ RLock/RUlockï¼šè¯»æ“ä½œæ—¶è°ƒç”¨çš„æ–¹æ³•ã€‚ RLockerï¼šè¿”å›è°ƒç”¨RLock/RUnlockçš„Lokceræ¥å£çš„å¯¹è±¡ã€‚ å½“å‡ºç°æ˜ç¡®åŒºåˆ†å¹¶å‘è¯»å†™åœºæ™¯ï¼Œä¸”æœ‰å¤§é‡çš„å¹¶å‘è¯»å’Œå°‘é‡çš„å¹¶å‘å†™ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨è¯»å†™é”RWMutexæ›¿æ¢Mutexã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/10.html/:1:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”RWMutex","uri":"/posts/golang/concurrent/10.html/"},{"categories":["Go"],"content":"RWMutexçš„å®ç°åŸç† Goæ ‡å‡†åº“ä¸­çš„RWMutexæ˜¯åŸºäºMutexå®ç°çš„ã€‚ readers-writersé—®é¢˜ä¸€èˆ¬æœ‰ä¸‰ç±»ï¼ŒåŸºäºå¯¹è¯»å’Œå†™æ“ä½œçš„ä¼˜å…ˆçº§ï¼Œè¯»å†™é”çš„è®¾è®¡å’Œå®ç°ä¹Ÿåˆ†æˆä¸‰ç±»ï¼š Read-preferringï¼šè¯»ä¼˜å…ˆè®¾è®¡æä¾›å¾ˆé«˜çš„å¹¶å‘å‹ï¼Œä½†æ˜¯ä¼šåœ¨ç«äº‰æ¿€çƒˆçš„æƒ…å†µä¸‹å¯¼è‡´å†™é¥¥é¥¿ã€‚ Writer-preferringï¼šå†™ä¼˜å…ˆè®¾è®¡é’ˆå¯¹æ–°æ¥çš„è¯·æ±‚ä¼˜å…ˆä¿éšœwriterï¼Œé¿å…writeré¥¥é¥¿é—®é¢˜ã€‚ ä¸æŒ‡å®šä¼˜å…ˆçº§ã€‚ Goæ ‡å‡†åº“ä¸­çš„RWMutexè®¾è®¡æ˜¯å†™ä¼˜å…ˆçš„æ–¹æ¡ˆï¼Œå³ä¸€ä¸ªæ­£åœ¨é˜»å¡çš„Lockè°ƒç”¨ä¼šæ’é™¤æ–°çš„readerè¯·æ±‚åˆ°é”ã€‚ type RWMutex struct { w Mutex // äº’æ–¥é”è§£å†³å¤šä¸ªwriterçš„ç«äº‰ writerSem uint32 // writerä¿¡å·é‡ readerSem uint32 // readerä¿¡å·é‡ readerCount int32 // readerçš„æ•°é‡ readerWait int32 // writerç­‰å¾…å®Œæˆçš„readerçš„æ•°é‡ } const rwmutexMaxReaders = 1 \u003c\u003c 30 ","date":"2022-01-29","objectID":"/posts/golang/concurrent/10.html/:2:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”RWMutex","uri":"/posts/golang/concurrent/10.html/"},{"categories":["Go"],"content":"RLock/Rulockå®ç° func (rw *RWMutex) RLock() { if atomic.AddInt32(\u0026rw.readerCount, 1) \u003c 0 { // rw.readerCountæ˜¯è´Ÿå€¼çš„æ—¶å€™ï¼Œæ„å‘³ç€æ­¤æ—¶æœ‰writerç­‰å¾…è¯·æ±‚é”ï¼Œå› ä¸ºwriterä¼˜å…ˆ runtime_SemacquireMutex(\u0026rw.readerSem, false, 0) } } func (rw *RWMutex) RUnlock() { if r := atomic.AddInt32(\u0026rw.readerCount, -1); r \u003c 0 { rw.rUnlockSlow(r) // æœ‰ç­‰å¾…çš„writer } } func (rw *RWMutex) rUnlockSlow(r int32) { if atomic.AddInt32(\u0026rw.readerWait, -1) == 0 { // æœ€åä¸€ä¸ªreaderäº†ï¼Œwriterç»ˆäºæœ‰æœºä¼šè·å¾—é”äº† runtime_Semrelease(\u0026rw.writerSem, false, 1) } } ","date":"2022-01-29","objectID":"/posts/golang/concurrent/10.html/:2:1","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”RWMutex","uri":"/posts/golang/concurrent/10.html/"},{"categories":["Go"],"content":"Lock/Unlockå®ç° func (rw *RWMutex) Lock() { // é¦–å…ˆè§£å†³å…¶ä»–writerç«äº‰é—®é¢˜ rw.w.Lock() // åè½¬readerCountï¼Œå‘Šè¯‰readeræœ‰writerç«äº‰é” r := atomic.AddInt32(\u0026rw.readerCount, -rwmutexMaxReaders) + rwmutexMaxReaders // å¦‚æœå½“å‰æœ‰readeræŒæœ‰é”ï¼Œé‚£ä¹ˆéœ€è¦ç­‰å¾… if r != 0 \u0026\u0026 atomic.AddInt32(\u0026rw.readerWait, r) != 0 { runtime_SemacquireMutex(\u0026rw.writerSem, false, 0) } } func (rw *RWMutex) Unlock() { // å‘Šè¯‰readeræ²¡æœ‰æ´»è·ƒçš„writeräº† r := atomic.AddInt32(\u0026rw.readerCount, rwmutexMaxReaders) // å”¤é†’é˜»å¡çš„readerä»¬ for i := 0; i \u003c int(r); i++ { runtime_Semrelease(\u0026rw.readerSem, false, 0) } // é‡Šæ”¾å†…éƒ¨çš„äº’æ–¥é” rw.w.Unlock() } ","date":"2022-01-29","objectID":"/posts/golang/concurrent/10.html/:2:2","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”RWMutex","uri":"/posts/golang/concurrent/10.html/"},{"categories":["Go"],"content":"é™·é˜± ","date":"2022-01-29","objectID":"/posts/golang/concurrent/10.html/:3:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”RWMutex","uri":"/posts/golang/concurrent/10.html/"},{"categories":["Go"],"content":"ä¸å¯å¤åˆ¶ äº’æ–¥é”æ˜¯ä¸å¯å¤åˆ¶çš„ï¼Œå†åŠ ä¸Šå››ä¸ªæœ‰çŠ¶æ€çš„å­—æ®µåˆ™æ›´åŠ ä¸èƒ½å¤åˆ¶ä½¿ç”¨ï¼Œå› ä¸ºå¤åˆ¶è®°å½•çš„çŠ¶æ€ä¸æœ¬èº«ä¿®æ”¹çš„çŠ¶æ€ä¸åŒæ­¥ã€‚ è§£å†³æ–¹æ¡ˆä¸äº’æ–¥é”ä¸€æ ·ï¼Œå¯ä»¥å€ŸåŠ©vetå·¥å…·è¿›è¡Œæ£€æŸ¥ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/10.html/:3:1","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”RWMutex","uri":"/posts/golang/concurrent/10.html/"},{"categories":["Go"],"content":"é‡å…¥å¯¼è‡´æ­»é” é‡å…¥å¯¼è‡´çš„æ­»é”æƒ…å†µè¾ƒå¤šä¸”å¾ˆéš¾ç¡®è®¤ã€‚ writeré‡å…¥è°ƒç”¨Lockæ—¶ä¼šå‡ºç°æ­»é”ã€‚ func re(l *sync.RWMutex){ l.Lock(); re(l); l.UnLock(); } è‹¥åœ¨readerè¯»æ“ä½œæ—¶è°ƒç”¨writerå†™æ“ä½œï¼Œåˆ™ä¼šå½¢æˆç›¸äº’ä¾èµ–çš„æ­»é”å…³ç³»ã€‚ ç¯å½¢ä¾èµ–é—®é¢˜ï¼šwriterä¾èµ–æ´»è·ƒçš„reader-\u003eæ´»è·ƒçš„readerä¾èµ–æ–°æ¥çš„reader-\u003eæ–°æ¥çš„readerä¾èµ–writerã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/10.html/:3:2","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”RWMutex","uri":"/posts/golang/concurrent/10.html/"},{"categories":["Go"],"content":"é‡Šæ”¾æœªåŠ é”çš„RWMutex ä½¿ç”¨è¯»å†™é”çš„æ—¶å€™æ³¨æ„ä¸è¦é—æ¼å’Œå¤šä½™ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/10.html/:3:3","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”RWMutex","uri":"/posts/golang/concurrent/10.html/"},{"categories":["Go"],"content":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Semaphore ä»¥ä¸‹ä¸ºé¸Ÿçªå¤§ä½¬çš„Go å¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ ä¸­æ‘˜å½•çš„ç¬”è®° ","date":"2022-01-29","objectID":"/posts/golang/concurrent/11.html/:0:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”Semaphore","uri":"/posts/golang/concurrent/11.html/"},{"categories":["Go"],"content":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”SingleFlight\u0026CyclicBarrier ä»¥ä¸‹ä¸ºé¸Ÿçªå¤§ä½¬çš„Go å¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ ä¸­æ‘˜å½•çš„ç¬”è®° ä»£ç repo ","date":"2022-01-29","objectID":"/posts/golang/concurrent/13.html/:0:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”SingleFlight\u0026CyclicBarrier","uri":"/posts/golang/concurrent/13.html/"},{"categories":["Go"],"content":"è¯·æ±‚åˆå¹¶ SingleFlight SingleFlight æ˜¯ Go å¼€å‘ç»„æä¾›çš„ä¸€ä¸ªæ‰©å±•å¹¶å‘åŸè¯­ï¼Œå…¶ä½œç”¨ä¸ºåœ¨å¤„ç†å¤šä¸ª goroutine åŒæ—¶è°ƒç”¨åŒä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œåªè®©ä¸€ä¸ª goroutine å»è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œç­‰å¾…è¿™ä¸ª goroutine è¿”å›ç»“æœçš„æ—¶å€™ï¼Œå†æŠŠç»“æœè¿”å›ç»™è¿™ä¸ªå‡ ä¸ªåŒæ—¶è°ƒç”¨çš„ goroutineã€‚è¿™æ ·å¯ä»¥å‡å°‘å¹¶å‘è°ƒç”¨çš„æ•°é‡ã€‚ ä¸ sync.Once é¢å¯¹çš„åœºæ™¯ä¸åŒï¼Œå‰è€…æ˜¯ä¸»è¦ç”¨åœ¨å•æ¬¡åˆå§‹åŒ–åœºæ™¯ä¸­ï¼Œè€Œ SingleFlight ä¸»è¦ç”¨åœ¨åˆå¹¶å¹¶å‘è¯·æ±‚çš„åœºæ™¯ä¸­ï¼Œå°¤å…¶æ˜¯ç¼“å­˜åœºæ™¯ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/13.html/:1:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”SingleFlight\u0026CyclicBarrier","uri":"/posts/golang/concurrent/13.html/"},{"categories":["Go"],"content":"å®ç°åŸç† ä½¿ç”¨äº’æ–¥é” Mutex å’Œ Map æ¥å®ç°ï¼Œå…¶ä¸­ Mutex æä¾›å¹¶å‘æ—¶çš„è¯»å†™ä¿æŠ¤ï¼Œ Map ç”¨æ¥ä¿å­˜åŒä¸€ä¸ª key çš„æ­£åœ¨å¤„ç†ï¼ˆin flightï¼‰çš„è¯·æ±‚ã€‚ SingleFlight çš„æ•°æ®ç»“æ„æ˜¯ Groupï¼Œå®ƒæä¾›äº†ä¸‰ä¸ªæ–¹æ³•ï¼š Doï¼šæ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œå¹¶è¿”å›å‡½æ•°æ‰§è¡Œçš„ç»“æœã€‚éœ€è¦æä¾›ä¸€ä¸ª keyï¼Œå¯¹äºåŒä¸€ä¸ª keyï¼Œåœ¨åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªåœ¨æ‰§è¡Œï¼ŒåŒä¸€ä¸ª key å¹¶å‘çš„è¯·æ±‚ä¼šç­‰å¾…ã€‚ç¬¬ä¸€ä¸ªæ‰§è¡Œçš„è¯·æ±‚è¿”å›çš„ç»“æœå°±æ˜¯å®ƒçš„è¿”å›ç»“æœã€‚å‡½æ•° fn æ˜¯ä¸€ä¸ªæ— å‚çš„å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªç»“æœæˆ–è€… errorï¼Œè€Œ Do æ–¹æ³•ä¼šè¿”å›å‡½æ•°æ‰§è¡Œçš„ç»“æœæˆ–è€…æ˜¯ errorï¼Œshared ä¼šæŒ‡ç¤º v æ˜¯å¦è¿”å›ç»™å¤šä¸ªè¯·æ±‚ï¼› DoChanï¼šç±»ä¼¼ Do æ–¹æ³•ä½†æ˜¯è¿”å› fn å‡½æ•°ç»“æœçš„ chan æ¥å¯¹ç»“æœè¿›è¡Œæ¥æ”¶ï¼› Forgetï¼šå‘Šè¯‰ Group å¿˜è®°è¿™ä¸ª keyã€‚è¿™æ ·ä¸€æ¥ï¼Œä¹‹åè¿™ä¸ª key è¯·æ±‚ä¼šæ‰§è¡Œ fï¼Œè€Œä¸æ˜¯ç­‰å¾…å‰ä¸€ä¸ªæœªå®Œæˆçš„ fn å‡½æ•°çš„ç»“æœã€‚ // ä»£è¡¨ä¸€ä¸ªæ­£åœ¨å¤„ç†çš„è¯·æ±‚ï¼Œæˆ–è€…å·²ç»å¤„ç†å®Œçš„è¯·æ±‚ type call struct { wg sync.WaitGroup // è¿™ä¸ªå­—æ®µä»£è¡¨å¤„ç†å®Œçš„å€¼ï¼Œåœ¨waitgroupå®Œæˆä¹‹å‰åªä¼šå†™ä¸€æ¬¡ // waitgroupå®Œæˆä¹‹åå°±è¯»å–è¿™ä¸ªå€¼ val interface{} err error // æŒ‡ç¤ºå½“callåœ¨å¤„ç†æ—¶æ˜¯å¦è¦å¿˜æ‰è¿™ä¸ªkey forgotten bool dups int chans []chan\u003c- Result } // groupä»£è¡¨ä¸€ä¸ªsingleflightå¯¹è±¡ type Group struct { mu sync.Mutex // protects m m map[string]*call // lazily initialized } func (g *Group) Do(key string, fn func() (interface{}, error)) (v interface{}, err error, shared bool) { g.mu.Lock() if g.m == nil { g.m = make(map[string]*call) } if c, ok := g.m[key]; ok {//å¦‚æœå·²ç»å­˜åœ¨ç›¸åŒçš„key c.dups++ g.mu.Unlock() c.wg.Wait() //ç­‰å¾…è¿™ä¸ªkeyçš„ç¬¬ä¸€ä¸ªè¯·æ±‚å®Œæˆ return c.val, c.err, true //ä½¿ç”¨ç¬¬ä¸€ä¸ªkeyçš„è¯·æ±‚ç»“æœ } c := new(call) // ç¬¬ä¸€ä¸ªè¯·æ±‚ï¼Œåˆ›å»ºä¸€ä¸ªcall c.wg.Add(1) g.m[key] = c //åŠ å…¥åˆ°key mapä¸­ g.mu.Unlock() g.doCall(c, key, fn) // è°ƒç”¨æ–¹æ³• return c.val, c.err, c.dups \u003e 0 } func (g *Group) doCall(c *call, key string, fn func() (interface{}, error)) { c.val, c.err = fn() c.wg.Done() g.mu.Lock() if !c.forgotten { // å·²è°ƒç”¨å®Œï¼Œåˆ é™¤è¿™ä¸ªkey // åœ¨é»˜è®¤æƒ…å†µä¸‹ forgotten == false delete(g.m, key) } for _, ch := range c.chans { ch \u003c- Result{c.val, c.err, c.dups \u003e 0} } g.mu.Unlock() } ","date":"2022-01-29","objectID":"/posts/golang/concurrent/13.html/:1:1","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”SingleFlight\u0026CyclicBarrier","uri":"/posts/golang/concurrent/13.html/"},{"categories":["Go"],"content":"åº”ç”¨åœºæ™¯ Go ä»£ç åº“ä¸­æœ‰ä¸¤ä¸ªåœ°æ–¹ç”¨åˆ°äº† SingleFlightï¼š net/lookup.goä¸­å¦‚æœåŒæ—¶æœ‰æŸ¥è¯¢åŒä¸€ä¸ª host çš„è¯·æ±‚ï¼ŒlookupGroup ä¼šæŠŠè¿™äº›è¯·æ±‚ merge åˆ°ä¸€èµ·ï¼Œåªéœ€è¦ä¸€ä¸ªè¯·æ±‚å°±å¯ä»¥äº†ï¼› Go åœ¨æŸ¥è¯¢ä»“åº“ç‰ˆæœ¬ä¿¡æ¯æ—¶ï¼Œå°†å¹¶å‘çš„è¯·æ±‚åˆå¹¶æˆä¸€ä¸ªè¯·æ±‚ï¼› func metaImportsForPrefix(importPrefix string, mod ModuleMode, security web.SecurityMode) (*urlpkg.URL, []metaImport, error) { // ä½¿ç”¨ç¼“å­˜ä¿å­˜è¯·æ±‚ç»“æœ setCache := func(res fetchResult) (fetchResult, error) { fetchCacheMu.Lock() defer fetchCacheMu.Unlock() fetchCache[importPrefix] = res return res, nil // ä½¿ç”¨ SingleFlightè¯·æ±‚ resi, _, _ := fetchGroup.Do(importPrefix, func() (resi interface{}, err error) { fetchCacheMu.Lock() // å¦‚æœç¼“å­˜ä¸­æœ‰æ•°æ®ï¼Œé‚£ä¹ˆç›´æ¥ä»ç¼“å­˜ä¸­å– if res, ok := fetchCache[importPrefix]; ok { fetchCacheMu.Unlock() return res, nil } fetchCacheMu.Unlock() ...... å…¶ä¸­éƒ½æ¶‰åŠåˆ°äº†ç¼“å­˜çš„é—®é¢˜ã€‚ç”¨ SingleFlight æ¥è§£å†³ç¼“å­˜å‡»ç©¿é—®é¢˜è¾ƒä¸ºåˆé€‚ï¼Œå¹¶å‘çš„è¯·æ±‚å¯ä»¥å…±äº«åŒä¸€ä¸ªæŸ¥è¯¢ç»“æ„ï¼Œä¸”å› ä¸ºä¸ºç¼“å­˜æŸ¥è¯¢ä¸ç”¨è€ƒè™‘å…¶å¹‚ç­‰æ€§é—®é¢˜ã€‚ SingleFilght æ—¶å¯ä»¥é€šè¿‡åˆå¹¶è¯·æ±‚çš„æ–¹å¼é™ä½å¯¹ä¸‹æ¸¸æœåŠ¡çš„å¹¶å‘å‹åŠ›ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„æ€§èƒ½ï¼Œå¸¸å¸¸ç”¨äºç¼“å­˜ç³»ç»Ÿä¸­ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/13.html/:1:2","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”SingleFlight\u0026CyclicBarrier","uri":"/posts/golang/concurrent/13.html/"},{"categories":["Go"],"content":"å¾ªç¯æ …æ  CyclicBarrier å¾ªç¯æ …æ  CyclicBarrier å¸¸å¸¸åº”ç”¨äºé‡å¤è¿›è¡Œä¸€ç»„ goroutine åŒæ—¶æ‰§è¡Œçš„åœºæ™¯ä¸­ã€‚è¯¥å¹¶å‘åŸè¯­å…è®¸ä¸€ç»„ goroutine å½¼æ­¤ç­‰å¾…ï¼Œåˆ°è¾¾ä¸€ä¸ªå…±åŒçš„æ‰§è¡Œç‚¹ã€‚åŒæ—¶å¯ä»¥è¢«é‡å¤ä½¿ç”¨ã€‚ è¿™å…¶å®ä¸ WaitGroup å¹¶å‘åŸè¯­çš„åŠŸèƒ½è¾ƒä¸ºç±»ä¼¼ï¼Œä½†æ˜¯å…¶åœ¨é‡ç”¨æ—¶éœ€è¦æ³¨æ„å…¶ panic çš„æƒ…å†µï¼Œä¸”åœ¨å¤„ç†å¯é‡ç”¨çš„å¤š goroutine ç­‰å¾…åŒä¸€ä¸ªæ‰§è¡Œç‚¹çš„åœºæ™¯çš„æ—¶å€™ï¼Œä¸¤ç§å¹¶å‘åŸè¯­çš„æ–¹æ³•è°ƒç”¨çš„å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š ","date":"2022-01-29","objectID":"/posts/golang/concurrent/13.html/:2:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”SingleFlight\u0026CyclicBarrier","uri":"/posts/golang/concurrent/13.html/"},{"categories":["Go"],"content":"å®ç°åŸç† ä¸¤ä¸ªåˆå§‹åŒ–æ–¹æ³•ï¼š func New(parties int) CyclicBarrier //æŒ‡å®šå¾ªç¯æ …æ å‚ä¸è€…çš„æ•°é‡ func NewWithAction(parties int, barrierAction func() error) CyclicBarrier //æä¾›ä¸€ä¸ªå‡½æ•°å¯ä»¥åœ¨æ¯ä¸€æ¬¡åˆ°è¾¾æ‰§è¡Œç‚¹çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡ å…¶ä¸­ç¬¬äºŒä¸ªæ–¹æ³•ä¸­å…·ä½“çš„æ—¶é—´ç‚¹æ˜¯åœ¨æœ€åä¸€ä¸ªå‚ä¸è€…åˆ°è¾¾ä¹‹åï¼Œä½†æ˜¯å…¶å®ƒçš„å‚ä¸è€…è¿˜æœªè¢«æ”¾è¡Œä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å®ƒï¼Œåšæ”¾è¡Œä¹‹å‰çš„ä¸€äº›å…±äº«çŠ¶æ€çš„æ›´æ–°ç­‰æ“ä½œã€‚ ä½¿ç”¨çš„æ—¶å€™å¾ªç¯æ …æ çš„å‚ä¸è€…åªéœ€è¦è°ƒç”¨ Await() æ–¹æ³•ç­‰å¾…ï¼Œç­‰æ‰€æœ‰çš„å‚ä¸è€…åˆ°è¾¾åå†æ‰§è¡Œä¸‹ä¸€æ­¥ï¼ŒåŒæ—¶å¾ªç¯æ …æ çš„çŠ¶æ€æ¢å¤åˆ°åˆå§‹çš„çŠ¶æ€ï¼Œå¯è¿æ¥ä¸‹ä¸€è½®åŒæ ·å¤šçš„å‚ä¸è€…ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/13.html/:2:1","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”SingleFlight\u0026CyclicBarrier","uri":"/posts/golang/concurrent/13.html/"},{"categories":["Go"],"content":"å‚è€ƒ Go å¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/13.html/:3:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”SingleFlight\u0026CyclicBarrier","uri":"/posts/golang/concurrent/13.html/"},{"categories":["Go"],"content":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”WaitGroup ä»¥ä¸‹ä¸ºé¸Ÿçªå¤§ä½¬çš„Go å¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ ä¸­æ‘˜å½•çš„ç¬”è®° ä»£ç repo ","date":"2022-01-29","objectID":"/posts/golang/concurrent/14.html/:0:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”WaitGroup","uri":"/posts/golang/concurrent/14.html/"},{"categories":["Go"],"content":"åŸºæœ¬ç”¨æ³• func (wg *WaitGroup) Add(delta int) //è®¾ç½®è®¡æ•°å€¼ func (wg *WaitGroup) Done() //Add(-1) func (wg *WaitGroup) Wait() //é˜»å¡ç›´è‡³è®¡æ•°å€¼ä¸º0 ","date":"2022-01-29","objectID":"/posts/golang/concurrent/14.html/:1:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”WaitGroup","uri":"/posts/golang/concurrent/14.html/"},{"categories":["Go"],"content":"WaitGroupå®ç° ","date":"2022-01-29","objectID":"/posts/golang/concurrent/14.html/:2:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”WaitGroup","uri":"/posts/golang/concurrent/14.html/"},{"categories":["Go"],"content":"æ•°æ®ç»“æ„å®šä¹‰ WaitGroupçš„æ•°æ®ç»“æ„å®šä¹‰ä»¥åŠstateä¿¡æ¯çš„è·å–æ–¹æ³•å¦‚ä¸‹ï¼š type WaitGroup struct { // é¿å…å¤åˆ¶ä½¿ç”¨çš„ä¸€ä¸ªæŠ€å·§ï¼Œå¯ä»¥å‘Šè¯‰vetå·¥å…·è¿åäº†å¤åˆ¶ä½¿ç”¨çš„è§„åˆ™ noCopy noCopy // 64bit(8bytes)çš„å€¼åˆ†æˆä¸¤æ®µï¼Œé«˜32bitæ˜¯è®¡æ•°å€¼ï¼Œä½32bitæ˜¯waiterçš„è®¡æ•° // å¦å¤–32bitæ˜¯ç”¨ä½œä¿¡å·é‡çš„ // å› ä¸º64bitå€¼çš„åŸå­æ“ä½œéœ€è¦64bitå¯¹é½ï¼Œä½†æ˜¯32bitç¼–è¯‘å™¨ä¸æ”¯æŒï¼Œæ‰€ä»¥æ•°ç»„ä¸­çš„å…ƒç´ åœ¨ä¸åŒçš„ // æ€»ä¹‹ï¼Œä¼šæ‰¾åˆ°å¯¹é½çš„é‚£64bitä½œä¸ºstateï¼Œå…¶ä½™çš„32bitåšä¿¡å·é‡ state1 [3]uint32 } // å¾—åˆ°stateçš„åœ°å€å’Œä¿¡å·é‡çš„åœ°å€ func (wg *WaitGroup) state() (statep *uint64, semap *uint32) { if uintptr(unsafe.Pointer(\u0026wg.state1))%8 == 0 { // å¦‚æœåœ°å€æ˜¯64bitå¯¹é½çš„ï¼Œæ•°ç»„å‰ä¸¤ä¸ªå…ƒç´ åšstateï¼Œåä¸€ä¸ªå…ƒç´ åšä¿¡å·é‡ return (*uint64)(unsafe.Pointer(\u0026wg.state1)), \u0026wg.state1[2] } else { // å¦‚æœåœ°å€æ˜¯32bitå¯¹é½çš„ï¼Œæ•°ç»„åä¸¤ä¸ªå…ƒç´ ç”¨æ¥åšstateï¼Œå®ƒå¯ä»¥ç”¨æ¥åš64bitçš„åŸå­æ“ä½œ return (*uint64)(unsafe.Pointer(\u0026wg.state1[1])), \u0026wg.state1[0] } } å…¶ä¸­åœ¨64ä½ç¯å¢ƒå’Œ32ä½ç¯å¢ƒä¸­çš„stateå­—æ®µç»„æˆæ˜¯ä¸ä¸€æ ·çš„ï¼š é™¤äº†æ–¹æ³•æœ¬èº«çš„å®ç°å¤–ï¼Œéœ€è¦ä¸€äº›raceæ£€æŸ¥å’Œå¼‚å¸¸æ£€æŸ¥çš„é¢å¤–ä»£ç ï¼Œé¿å…å‡ºç°panicã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/14.html/:2:1","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”WaitGroup","uri":"/posts/golang/concurrent/14.html/"},{"categories":["Go"],"content":"Add/Doneæ–¹æ³• è¯¥æ–¹æ³•ä¸»è¦æ“ä½œçš„æ˜¯stateçš„è®¡æ•°éƒ¨åˆ†ï¼Œé€šè¿‡åŸå­æ“ä½œæ¥æ“ä½œè¯¥è®¡æ•°å€¼ã€‚ func (wg *WaitGroup) Add(delta int) { statep, semap := wg.state() // é«˜32bitæ˜¯è®¡æ•°å€¼vï¼Œæ‰€ä»¥æŠŠdeltaå·¦ç§»32ï¼Œå¢åŠ åˆ°è®¡æ•°ä¸Š state := atomic.AddUint64(statep, uint64(delta)\u003c\u003c32) v := int32(state \u003e\u003e 32) // å½“å‰è®¡æ•°å€¼ w := uint32(state) // waiter count if v \u003e 0 || w == 0 { return } // å¦‚æœè®¡æ•°å€¼vä¸º0å¹¶ä¸”waiterçš„æ•°é‡wä¸ä¸º0ï¼Œé‚£ä¹ˆstateçš„å€¼å°±æ˜¯waiterçš„æ•°é‡ã€‚ // å°†waiterçš„æ•°é‡è®¾ç½®ä¸º0ï¼Œå› ä¸ºè®¡æ•°å€¼vä¹Ÿæ˜¯0,æ‰€ä»¥å®ƒä»¬ä¿©çš„ç»„åˆ*statepç›´æ¥è®¾ç½®ä¸º0å³å¯ã€‚ *statep = 0 for ; w != 0; w-- { runtime_Semrelease(semap, false, 0) } } // Doneæ–¹æ³•å®é™…å°±æ˜¯è®¡æ•°å™¨å‡1 func (wg *WaitGroup) Done() { wg.Add(-1) } ","date":"2022-01-29","objectID":"/posts/golang/concurrent/14.html/:2:2","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”WaitGroup","uri":"/posts/golang/concurrent/14.html/"},{"categories":["Go"],"content":"Waitæ–¹æ³• è¯¥æ–¹æ³•çš„è¯•ä¸‹é€»è¾‘å³ä¸æ–­æ£€æŸ¥stateçš„å€¼ï¼š è‹¥è¯¥å€¼ä¸º0åˆ™è¯´æ˜æ‰€æœ‰ä»»åŠ¡å®Œæˆï¼Œè°ƒç”¨è€…ä¸ç­‰å¾…ç›´æ¥è¿”å›ï¼› è‹¥è¯¥å€¼å¤§äº0åˆ™è¯´æ˜è¿˜æœ‰ä»»åŠ¡æœªå®Œæˆï¼Œåˆ™è°ƒç”¨è€…å˜æˆç­‰å¾…è€…ï¼ŒåŠ å…¥waiteré˜Ÿåˆ—ä¸”é˜»å¡è‡ªå·±ã€‚ func (wg *WaitGroup) Wait() { statep, semap := wg.state() for { state := atomic.LoadUint64(statep) v := int32(state \u003e\u003e 32) // å½“å‰è®¡æ•°å€¼ w := uint32(state) // waiterçš„æ•°é‡ if v == 0 { // å¦‚æœè®¡æ•°å€¼ä¸º0, è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„goroutineä¸å¿…å†ç­‰å¾…ï¼Œç»§ç»­æ‰§è¡Œå®ƒåé¢çš„é€»è¾‘å³å¯ return } // å¦åˆ™æŠŠwaiteræ•°é‡åŠ 1ã€‚æœŸé—´å¯èƒ½æœ‰å¹¶å‘è°ƒç”¨Waitçš„æƒ…å†µï¼Œæ‰€ä»¥æœ€å¤–å±‚ä½¿ç”¨äº†ä¸€ä¸ªforå¾ªç¯ if atomic.CompareAndSwapUint64(statep, state, state+1) { // é˜»å¡ä¼‘çœ ç­‰å¾… runtime_Semacquire(semap) // è¢«å”¤é†’ï¼Œä¸å†é˜»å¡ï¼Œè¿”å› return } } } ","date":"2022-01-29","objectID":"/posts/golang/concurrent/14.html/:2:3","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”WaitGroup","uri":"/posts/golang/concurrent/14.html/"},{"categories":["Go"],"content":"WaitGroupå¸¸è§é”™è¯¯ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/14.html/:3:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”WaitGroup","uri":"/posts/golang/concurrent/14.html/"},{"categories":["Go"],"content":"è®¡æ•°å€¼è®¾ç½®ä¸ºè´Ÿå€¼ WaitGroup çš„è®¡æ•°å™¨çš„å€¼å¿…é¡»å¤§äºç­‰äº0ã€‚ æˆ‘ä»¬åœ¨æ›´æ”¹è¿™ä¸ªè®¡æ•°å€¼çš„æ—¶å€™ï¼ŒWaitGroup ä¼šå…ˆåšæ£€æŸ¥ï¼Œå¦‚æœè®¡æ•°å€¼è¢«è®¾ç½®ä¸ºè´Ÿæ•°ï¼Œå°±ä¼šå¯¼è‡´panicã€‚ ä¸€èˆ¬æƒ…å†µä¸‹æœ‰ä¸¤ç§æ–¹æ³•ä¼šå¯¼è‡´è®¡æ•°å™¨è®¾ç½®ä¸ºè´Ÿå€¼ï¼š è°ƒç”¨Addçš„æ—¶å€™ä¼ é€’è´Ÿæ•°ï¼› è°ƒç”¨Doneæ–¹æ³•æ¬¡æ•°å¤ªå¤šè¶…è¿‡äº†è®¡æ•°å€¼ï¼› ä½¿ç”¨WaitGroupåº”è¯¥é¢„å…ˆç¡®å®šå¥½WaitGroupçš„è®¡æ•°å€¼ï¼Œç„¶åè°ƒç”¨ç›¸åŒæ¬¡æ•°çš„Doneå®Œæˆç›¸åº”çš„ä»»åŠ¡ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/14.html/:3:1","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”WaitGroup","uri":"/posts/golang/concurrent/14.html/"},{"categories":["Go"],"content":"ä¸æœŸæœ›çš„Addæ—¶æœº éœ€è¦éµå¾ªçš„åŸåˆ™ï¼šç­‰æ‰€æœ‰çš„Addæ–¹æ³•è°ƒç”¨ä¹‹åå†è°ƒç”¨Waitï¼Œå¦åˆ™å°±å¯èƒ½å¯¼è‡´panicæˆ–è€…ä¸æœŸæœ›çš„ç»“æœã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/14.html/:3:2","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”WaitGroup","uri":"/posts/golang/concurrent/14.html/"},{"categories":["Go"],"content":"å‰ä¸€ä¸ªWaitè¿˜æ²¡ç»“æŸå°±é‡ç”¨WaitGroup å› ä¸ºWaitGroupæ˜¯å¯ä»¥é‡ç”¨çš„ï¼Œåªè¦å°†è®¡æ•°å€¼æ¢å¤ä¸º0å€¼åˆ™å¯ä»¥è¢«çœ‹ä½œæ˜¯æ–°åˆ›å»ºçš„WaitGroupè¢«é‡å¤ä½¿ç”¨ã€‚ä½†æ˜¯å¦‚æœåœ¨è®¡æ•°å€¼æ²¡æœ‰æ¢å¤è‡³0å€¼æ—¶å°±é‡ç”¨ï¼Œå°±ä¼šå¯¼è‡´ç¨‹åºpanicã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/14.html/:3:3","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”WaitGroup","uri":"/posts/golang/concurrent/14.html/"},{"categories":["Go"],"content":"noCopyï¼šè¾…åŠ©vetæ£€æŸ¥ noCopy å­—æ®µçš„ç±»å‹æ˜¯ noCopyï¼Œå®ƒåªæ˜¯ä¸€ä¸ªè¾…åŠ©çš„ã€ç”¨æ¥å¸®åŠ© vet æ£€æŸ¥ç”¨çš„ç±»å‹: type noCopy struct{} // Lock is a no-op used by -copylocks checker from `go vet`. func (*noCopy) Lock() {} func (*noCopy) Unlock() {} é€šè¿‡ç»™WaitGroupæ·»åŠ ä¸€ä¸ªnoCopyå­—æ®µï¼Œå¯ä»¥ä¸ºWaitGroupå®ç° Lockeræ¥å£ï¼Œè¿™æ ·vetå·¥å…·å°±å¯ä»¥åšå¤åˆ¶æ£€æŸ¥äº†ï¼Œä¸”å› ä¸ºnoCopy å­—æ®µæ˜¯æœªè¾“å‡ºç±»å‹ï¼Œæ‰€ä»¥WaitGroupä¸ä¼šæš´éœ²Lock/Unlockæ–¹æ³•ã€‚ å¦‚æœæƒ³è¦è‡ªå·±å®šä¹‰çš„æ•°æ®ç»“æ„ä¸è¢«å¤åˆ¶ä½¿ç”¨ï¼Œæˆ–è€…è¯´ï¼Œä¸èƒ½é€šè¿‡ vet å·¥å…·æ£€æŸ¥å‡ºå¤åˆ¶ä½¿ç”¨çš„æŠ¥è­¦ï¼Œå°±å¯ä»¥é€šè¿‡åµŒå…¥ noCopy è¿™ä¸ªæ•°æ®ç±»å‹æ¥å®ç°ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/14.html/:4:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”WaitGroup","uri":"/posts/golang/concurrent/14.html/"},{"categories":["Go"],"content":"å°ç»“ å…³äºå¦‚ä½•é¿å…é”™è¯¯ä½¿ç”¨ WaitGroup çš„æƒ…å†µï¼Œæˆ‘ä»¬åªéœ€è¦å°½é‡ä¿è¯ä¸‹é¢å‡ ç‚¹ï¼š ä¸é‡ç”¨ WaitGroupã€‚æ–°å»ºä¸€ä¸ª WaitGroup ä¸ä¼šå¸¦æ¥å¤šå¤§çš„èµ„æºå¼€é”€ï¼Œé‡ç”¨åè€Œæ›´å®¹æ˜“å‡ºé”™ã€‚ ä¿è¯æ‰€æœ‰çš„Addæ–¹æ³•è°ƒç”¨éƒ½åœ¨Waitä¹‹å‰ã€‚ ä¸ä¼ é€’è´Ÿæ•°ç»™Addæ–¹æ³•ï¼Œåªé€šè¿‡ Done æ¥ç»™è®¡æ•°å€¼å‡ 1ã€‚ ä¸åšå¤šä½™çš„Doneæ–¹æ³•è°ƒç”¨ï¼Œä¿è¯Addçš„è®¡æ•°å€¼å’ŒDoneæ–¹æ³•è°ƒç”¨çš„æ•°é‡æ˜¯ä¸€æ ·çš„ã€‚ ä¸é—æ¼Doneæ–¹æ³•çš„è°ƒç”¨ï¼Œå¦åˆ™ä¼šå¯¼è‡´Wait hangä½æ— æ³•è¿”å›ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/14.html/:5:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”WaitGroup","uri":"/posts/golang/concurrent/14.html/"},{"categories":["Go"],"content":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”è¯»å†™é¡ºåº Goå®˜æ–¹æ–‡æ¡£é‡ŒçœŸé—·ä»‹ç»äº†Goçš„å†…å­˜æ¨¡å‹ï¼Œè€Œè¿™é‡Œçš„å†…å­˜æ¨¡å‹ä¸æ˜¯æŒ‡Goå¯¹è±¡çš„å†…å­˜åˆ†é…ã€å†…å­˜å›æ”¶å’Œå†…å­˜æ•´ç†çš„è§„èŒƒï¼Œè€Œæè¿°çš„æ˜¯å¹¶å‘ç¯å¢ƒä¸­å¤šgoroutineè¯»ç›¸åŒå˜é‡çš„æ—¶å€™ï¼Œå˜é‡çš„å¯è§æ€§æ¡ä»¶ã€‚ ç¼–ç¨‹è¯­è¨€éœ€è¦ä¸€ä¸ªè§„èŒƒæ¥æ˜ç¡®å¤šçº¿ç¨‹åŒæ—¶è®¿é—®åŒä¸€ä¸ªå˜é‡çš„å¯è§æ€§å’Œé¡ºåºï¼Œè€Œè¿™ä¸ªè§„èŒƒå°±è¢«å«åšå†…å­˜æ¨¡å‹ã€‚è€Œè¿™ä¸»è¦ç›®çš„åœ¨äºï¼š æä¾›ä¿è¯ï¼Œæ–¹ä¾¿åœ¨åŒä¸€ä¸ªæ•°æ®åŒæ—¶è¢«å¤šä¸ªgoroutineè®¿é—®çš„æƒ…å†µæ—¶å¯ä»¥åšä¸€äº›ä¸²è¡ŒåŒ–è®¿é—®çš„æ§åˆ¶ï¼› å…è®¸ç¼–è¯‘å™¨å’Œç¡¬ä»¶å¯¹ç¨‹åºåšä¸€äº›ä¼˜åŒ–ï¼› ","date":"2022-01-29","objectID":"/posts/golang/concurrent/12.html/:0:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”è¯»å†™é¡ºåº","uri":"/posts/golang/concurrent/12.html/"},{"categories":["Go"],"content":"é‡æ’å’Œå¯è§æ€§çš„é—®é¢˜ ç”±äºæŒ‡ä»¤é‡æ’ï¼Œä»£ç å¹¶ä¸ä¸€å®šä¼šæŒ‰ç…§ä½ å†™çš„é¡ºåºæ‰§è¡Œã€‚ å°±æ¯”å¦‚ä¸‹é¢è¿™ä¸ªä»£ç çš„ä¾‹å­ï¼Œè¿è¡Œçš„æ—¶å€™å¯èƒ½ä¼šå‡ºç°åŠåˆå§‹åŒ–ã€æœªåˆå§‹åŒ–çš„é—®é¢˜ç­‰ã€‚ var a string var done bool func setup(){ a = \"hello\" done = true } func main(){ go setup() for !done{ } print(a) } æˆ‘ä»¬å°±éœ€è¦äº†è§£happens-beforeæ¦‚å¿µï¼Œå…¶ç”¨æ¥æè¿°ä¸¤ä¸ªæ—¶é—´çš„é¡ºåºå…³ç³»ï¼Œè‹¥æ“ä½œä¹‹é—´èƒ½æä¾›happens-beforeå…³ç³»ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç¡®å®šä¿è¯å®ƒä»¬ä¹‹é—´çš„é¡ºåºã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/12.html/:1:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”è¯»å†™é¡ºåº","uri":"/posts/golang/concurrent/12.html/"},{"categories":["Go"],"content":"happens-before åœ¨ä¸€ä¸ª goroutine å†…éƒ¨ï¼Œç¨‹åºçš„æ‰§è¡Œé¡ºåºå’Œå®ƒä»¬çš„ä»£ç æŒ‡å®šçš„é¡ºåºæ˜¯ä¸€æ ·çš„ï¼Œå³ä½¿ç¼–è¯‘å™¨æˆ–è€… CPU é‡æ’äº†è¯»å†™é¡ºåºï¼Œä»è¡Œä¸ºä¸Šæ¥çœ‹ï¼Œä¹Ÿå’Œä»£ç æŒ‡å®šçš„é¡ºåºä¸€æ ·ã€‚ä½†æ˜¯åˆ«äºå¦å¤–ä¸€ä¸ª goroutine æ¥è¯´ï¼Œé‡æ’å°±ä¼šäº§ç”Ÿéå¸¸å¤§çš„å½±å“ã€‚å› ä¸º Go åªä¿è¯ goroutine å†…éƒ¨é‡æ’å¯¹è¯»å†™çš„é¡ºåºæ²¡æœ‰å½±å“ã€‚ a Happens-before b å®šä¹‰çš„é¡ºåºä¸º a -\u003e b æ¯”å¦‚æˆ‘ä»¬æƒ³è¦ä¿è¯å¯¹äºæŸä¸€ä¸ªå˜é‡çš„è¯»æ“ä½œ r1 ç»å¯¹èƒ½å¤Ÿè§‚å¯Ÿåˆ° å†™æ“ä½œ w1ï¼Œæˆ‘ä»¬å°±éœ€è¦åŒæ—¶æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š w1 happens before r1ï¼› å¦‚æœå¯¹è¯¥å˜é‡æœ‰å…¶ä»–çš„å†™æ“ä½œ w2ï¼Œå°±éœ€è¦ä¿è¯ w2-\u003ew1-\u003er1æˆ–è€… w1-\u003er1-\u003ew2ï¼Œç»å¯¹ä¸ä¼šå’Œ w1ã€r1 åŒæ—¶å‘ç”Ÿï¼Œæˆ–è€…æ˜¯åœ¨å®ƒä»¬ä¹‹é—´å‘ç”Ÿã€‚ åœ¨å•ä¸ªçš„ goroutine å†…éƒ¨ï¼Œhappens-before çš„å…³ç³»å’Œä»£ç ç¼–å†™çš„é¡ºåºæ˜¯ä¸€è‡´çš„ã€‚ åœ¨ Go è¯­è¨€ä¸­ï¼Œå¯¹å˜é‡è¿›è¡Œé›¶å€¼çš„åˆå§‹åŒ–å°±æ˜¯ä¸€ä¸ªå†™æ“ä½œï¼› å¦‚æœå¯¹è¶…è¿‡æœºå™¨ wordï¼ˆ64bitã€32bit æˆ–è€…å…¶ä»–ï¼‰å¤§å°çš„å€¼è¿›è¡Œè¯»å†™ï¼Œé‚£ä¹ˆï¼Œå°±å¯ä»¥çœ‹ä½œæ˜¯å¯¹æ‹†æˆ word å¤§å°çš„å‡ ä¸ªè¯»å†™æ— åºè¿›è¡Œï¼› Go å¹¶ä¸æä¾›ç›´æ¥çš„ CPU å±éšœï¼ˆCPU fenceï¼‰æ¥æç¤ºç¼–è¯‘å™¨æˆ–è€… CPU ä¿è¯é¡ºåºæ€§ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸åŒæ¶æ„çš„å†…å­˜å±éšœæŒ‡ä»¤æ¥å®ç°ç»Ÿä¸€çš„å¹¶å‘åŸè¯­ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/12.html/:2:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”è¯»å†™é¡ºåº","uri":"/posts/golang/concurrent/12.html/"},{"categories":["Go"],"content":"Go è¯­è¨€ä¸­ä¿è¯çš„ happens-before å…³ç³» ","date":"2022-01-29","objectID":"/posts/golang/concurrent/12.html/:3:0","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”è¯»å†™é¡ºåº","uri":"/posts/golang/concurrent/12.html/"},{"categories":["Go"],"content":"init å‡½æ•° mainå‡½æ•°ä¸€å®šåœ¨å¯¼å…¥çš„åŒ…çš„ init å‡½æ•°ä¹‹åæ‰§è¡Œï¼Œä¸”æ¯ä¸ªæ–‡ä»¶æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ª init å‡½æ•°ï¼ŒåŒ…ä¸‹é¢çš„å¤šä¸ª init å‡½æ•°æŒ‰ç…§å®ƒä»¬çš„æ–‡ä»¶åé¡ºåºé€ä¸ªåˆå§‹åŒ–ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/12.html/:3:1","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”è¯»å†™é¡ºåº","uri":"/posts/golang/concurrent/12.html/"},{"categories":["Go"],"content":"goroutine å¯åŠ¨ goroutine çš„ go è¯­å¥çš„æ‰§è¡Œï¼Œä¸€å®š happens before æ­¤ goroutine å†…çš„ä»£ç æ‰§è¡Œã€‚ æ ¹æ®è¿™ä¸ªè§„åˆ™å¯è¯´æ˜å¦‚æœ go è¯­å¥ä¼ å…¥çš„å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°æ‰§è¡Œçš„ç»“æœï¼Œé‚£è¿™ä¸ªå‡½æ•°ä¸€å®šå…ˆäº goroutine å†…éƒ¨çš„ä»£ç è¢«æ‰§è¡Œã€‚ var a string func f(){ fmt.Println(a) } func main(){ a = \"hello\" go f() } ","date":"2022-01-29","objectID":"/posts/golang/concurrent/12.html/:3:2","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”è¯»å†™é¡ºåº","uri":"/posts/golang/concurrent/12.html/"},{"categories":["Go"],"content":"Channel é€šç”¨çš„ Channel happens before å…³ç³»ä¿è¯æœ‰4æ¡è§„åˆ™ï¼š å¾€ Channel ä¸­çš„å‘é€æ“ä½œï¼Œhappens before ä»è¯¥ Channel æ¥æ”¶ç›¸åº”æ•°æ®çš„åŠ¨ä½œå®Œæˆä¹‹å‰ï¼Œå³ nSend -\u003e nReceiveã€‚ Close ä¸€ä¸ª Channel çš„è°ƒç”¨ï¼Œè‚¯å®š happens before ä»å…³é—­çš„ Channel ä¸­è¯»å–å‡ºä¸€ä¸ªé›¶å€¼ã€‚ var ch = make(chan struct{},10) var s string func f(){ s = \"hello\" //ch\u003c-struct{}{} close(ch) } func main(){ go f() \u003c-ch //èƒ½å¤Ÿåœ¨closeä¹‹å‰ä¿è¯å–å‡ºé›¶å€¼ fmt.Println(s) } å¯¹äº unbuffered çš„ Channelï¼Œè¯»å–æ•°æ®çš„è°ƒç”¨ä¸€å®š happens before å¾€æ­¤ Channel å‘é€æ•°æ®çš„è°ƒç”¨å®Œæˆã€‚ å¦‚æœ Channel çš„å®¹é‡æ˜¯ mï¼ˆm\u003e0ï¼‰ï¼Œé‚£ä¹ˆ nReceive -\u003e (n+m)Sendã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/12.html/:3:3","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”è¯»å†™é¡ºåº","uri":"/posts/golang/concurrent/12.html/"},{"categories":["Go"],"content":"Mutex/RWMutex æ ¹æ®å®˜æ–¹æè¿°çš„ happens-before å…³ç³»çš„ä¿è¯å¦‚ä¸‹ï¼š å¯¹äºè¯»å†™é” l çš„ l.RLock æ–¹æ³•è°ƒç”¨ï¼Œå¦‚æœå­˜åœ¨ä¸€ä¸ª nï¼Œè¿™æ¬¡çš„ l.RLock è°ƒç”¨ happens after ç¬¬ n æ¬¡çš„ l.Unlockï¼Œé‚£ä¹ˆå’Œè¿™ä¸ª RLock ç›¸å¯¹åº”çš„ l.RUnlock ä¸€å®š happens before ç¬¬ n+1 æ¬¡ l.Lockã€‚æ„æ€æ˜¯ï¼Œè¯»å†™é”çš„ Lock å¿…é¡»ç­‰å¾…æ—¢æœ‰çš„è¯»é”é‡Šæ”¾åæ‰èƒ½è·å–åˆ°ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/12.html/:3:4","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”è¯»å†™é¡ºåº","uri":"/posts/golang/concurrent/12.html/"},{"categories":["Go"],"content":"WaitGroup WaitGroupçš„ä¿è¯æ˜¯ Wait æ–¹æ³•ç­‰åˆ°è®¡æ•°å€¼å½’é›¶ä¹‹åæ‰è¿”å›ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/12.html/:3:5","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”è¯»å†™é¡ºåº","uri":"/posts/golang/concurrent/12.html/"},{"categories":["Go"],"content":"Once æä¾›çš„ä¿è¯ä¸ºä»¥ä¸‹ï¼š å¯¹äº once.Do(f) è°ƒç”¨ï¼Œf å‡½æ•°çš„é‚£ä¸ªå•æ¬¡è°ƒç”¨ä¸€å®š happens before ä»»ä½• once.Do(f) è°ƒç”¨è¿”å›ã€‚å³å‡½æ•° f ä¸€å®šä¼šåœ¨ Do æ–¹æ³•è¿”å›ä¹‹å‰æ‰§è¡Œã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/12.html/:3:6","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”è¯»å†™é¡ºåº","uri":"/posts/golang/concurrent/12.html/"},{"categories":["Go"],"content":"atomic å¯¹äº Go 1.15 çš„å®˜æ–¹å®ç°æ¥è¯´ï¼Œå¯ä»¥ä¿è¯ä½¿ç”¨ atomic çš„ Load/Store çš„å˜é‡ä¹‹é—´çš„é¡ºåºæ€§ã€‚ ä½†ç°é˜¶æ®µè¿˜æ˜¯ä¸è¦ä½¿ç”¨ atomic æ¥ä¿è¯é¡ºåºæ€§ã€‚ ","date":"2022-01-29","objectID":"/posts/golang/concurrent/12.html/:3:7","tags":["Go","å¹¶å‘ç¼–ç¨‹","note"],"title":"Goå¹¶å‘ç¼–ç¨‹å®æˆ˜è¯¾ç¬”è®°â€”è¯»å†™é¡ºåº","uri":"/posts/golang/concurrent/12.html/"},{"categories":["Go"],"content":"pprofæ€§èƒ½æ’æŸ¥åˆ†ænote ","date":"2022-01-28","objectID":"/posts/golang/pprof/0.html/:0:0","tags":["pprof","æ€§èƒ½ä¼˜åŒ–","Go"],"title":"pprofæ€§èƒ½æ’æŸ¥åˆ†ænote","uri":"/posts/golang/pprof/0.html/"},{"categories":["Go"],"content":"pprof ","date":"2022-01-28","objectID":"/posts/golang/pprof/0.html/:1:0","tags":["pprof","æ€§èƒ½ä¼˜åŒ–","Go"],"title":"pprofæ€§èƒ½æ’æŸ¥åˆ†ænote","uri":"/posts/golang/pprof/0.html/"},{"categories":["Go"],"content":"æ¦‚è¿° å·¥å…· runtime/pprof net/hhtp/pprof é‡‡æ · CPU Heap Goroutine Mutex Block ThreadCreate åˆ†æ ç½‘é¡µ å¯è§†åŒ–ç»ˆç«¯ å±•ç¤º Top Graph Source FlameGraph Peek Disassemble ","date":"2022-01-28","objectID":"/posts/golang/pprof/0.html/:1:1","tags":["pprof","æ€§èƒ½ä¼˜åŒ–","Go"],"title":"pprofæ€§èƒ½æ’æŸ¥åˆ†ænote","uri":"/posts/golang/pprof/0.html/"},{"categories":["Go"],"content":"æ€§èƒ½æ’æŸ¥[ç‚¸å¼¹] å‰ç½®å‡†å¤‡ ä½¿ç”¨ net/http/pprof æµè§ˆå™¨æŸ¥çœ‹æŒ‡æ ‡ ip:port/debug/pprof/ CPU go tool pprof \"http://localhost:6060/dubug/pprof/profile?seconds=10\" topN:æŸ¥çœ‹å ç”¨èµ„æºæœ€å¤šçš„å‡½æ•° å…¶ä¸­éœ€è¦æ³¨æ„ä¸¤ä¸ªå‚æ•°ï¼š flat:æœ¬å‡½æ•°çš„æ‰§è¡Œè€—æ—¶ï¼› cum:ç´¯è®¡é‡ã€‚æŒ‡è¯¥å‡½æ•°åŠ ä¸Šè¯¥å‡½æ•°è°ƒç”¨çš„å‡½æ•°æ€»è€—æ—¶ï¼› åœ¨ flat==cum æƒ…å†µä¸‹è¯´æ˜è¯¥å‡½æ•°æ²¡æœ‰å­å‡½æ•°ï¼Œè‹¥ flat == 0 åˆ™è¯´æ˜å‡½æ•°ä¸­åªæœ‰å…¶ä»–å‡½æ•°çš„è°ƒç”¨ï¼› list:æ ¹æ®ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼æŸ¥æ‰¾ä»£ç è¡Œ web:ç”Ÿæˆè°ƒç”¨å…³ç³»å›¾ Heap go tool pprof -http=:8080 \"http://localhost:6060/debug/pprof/heap\" Topè§†å›¾ Sourceè§†å›¾ï¼šæºç è§†è§’æŸ¥çœ‹èµ„æºå ç”¨ SAMPLEé€‰é¡¹ï¼š alloc_objects:ç¨‹åºç´¯è®¡ç”³è¯·çš„å¯¹è±¡æ•° alloc_sapce:ç¨‹åºç´¯è®¡ç”³è¯·çš„å†…å­˜å¤§å° infuse_objects:å½“å‰æŒæœ‰çš„å¯¹è±¡æ•° infuse_sapce:å½“å‰æŒæœ‰çš„å†…å­˜å¤§å° Goroutine goroutineæ³„æ¼ä¹Ÿä¼šå¯¼è‡´å†…å­˜æ³„æ¼ go tool pprof -http=:8080 \"http://localhost:6060/debug/pprof/goroutine\" FlameGraphï¼šç«ç„°å›¾ Mutex go tool pprof -http=:8080 \"http://localhost:6060/debug/pprof/mutex\" Block go tool pprof -http=:8080 \"http://localhost:6060/debug/pprof/block\" è‹¥é˜»å¡æ“ä½œæ¶ˆè€—æ—¶é—´ç›¸å¯¹äºå…¶ä»–é˜»å¡è¿‡å°ï¼Œåˆ™ pprof è§†å›¾ä¸­å¯èƒ½ä¼šè¢«å¿½ç•¥ï¼Œå‡ºç°è¿™ç§é—®é¢˜æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒæ•´æ¯”ä¾‹å‘ç°ï¼Œä¸” pprof çš„ httpç«¯å£ç›‘å¬è‹¥å‡ºç°é˜»å¡ä¹Ÿä¼šè¢«è®°å½•ä¸‹æ¥ã€‚ ","date":"2022-01-28","objectID":"/posts/golang/pprof/0.html/:1:2","tags":["pprof","æ€§èƒ½ä¼˜åŒ–","Go"],"title":"pprofæ€§èƒ½æ’æŸ¥åˆ†ænote","uri":"/posts/golang/pprof/0.html/"},{"categories":["Go"],"content":"proofæŒ‡æ ‡é‡‡æ ·çš„æµç¨‹å’ŒåŸç† ","date":"2022-01-28","objectID":"/posts/golang/pprof/0.html/:2:0","tags":["pprof","æ€§èƒ½ä¼˜åŒ–","Go"],"title":"pprofæ€§èƒ½æ’æŸ¥åˆ†ænote","uri":"/posts/golang/pprof/0.html/"},{"categories":["Go"],"content":"CPUé‡‡æ · é‡‡æ ·å¯¹è±¡ï¼šå‡½æ•°è°ƒç”¨å’Œå®ƒä»¬çš„å ç”¨æ—¶é—´ é‡‡æ ·ç‡ï¼š100æ¬¡/ç§’ï¼Œå›ºå®šå€¼ é‡‡æ ·æ—¶é—´ï¼šä»æ‰‹åŠ¨å¯åŠ¨åˆ°æ‰‹åŠ¨ç»“æŸ æ ¸å¿ƒåœ¨äºé€šè¿‡è®¾å®šå’Œå–æ¶ˆä¿¡å·å¤„ç†å‡½æ•°ï¼Œæ¥å¼€å¯å’Œå…³é—­å®šæ—¶å™¨ã€‚ æ“ä½œç³»ç»Ÿï¼šæ¯10mså‘è¿›ç¨‹å‘é€ä¸€æ¬¡SIGPROFä¿¡å· è¿›ç¨‹ï¼šæ¯æ¬¡æ¥å—åˆ°SIGPROFä¼šè®°å½•è°ƒç”¨æ ˆ å†™ç¼“å†²ï¼šæ¯100msè¯»å–ä¸€æ¬¡å·²ç»è®°å½•çš„è°ƒç”¨æ ˆå¹¶å†™å…¥è¾“å‡ºæµ ","date":"2022-01-28","objectID":"/posts/golang/pprof/0.html/:2:1","tags":["pprof","æ€§èƒ½ä¼˜åŒ–","Go"],"title":"pprofæ€§èƒ½æ’æŸ¥åˆ†ænote","uri":"/posts/golang/pprof/0.html/"},{"categories":["Go"],"content":"Goroutine\u0026ThreadCreateé‡‡æ · Goroutine è®°å½•æ‰€æœ‰ç”¨æˆ·å‘èµ·ä¸”åœ¨è¿è¡Œä¸­çš„ goroutineï¼ˆå³å…¥å£é runtime å¼€å¤´çš„ï¼‰å’Œ runtime.main çš„è°ƒç”¨æ ˆä¿¡æ¯ Stop-\u003eéå†allgsåˆ‡ç‰‡-\u003eè¾“å‡ºåˆ›å»ºgçš„å †æ ˆ-\u003eStart ThreadCreate è®°å½•ç¨‹åºåˆ›å»ºçš„æ‰€æœ‰ç³»ç»Ÿçº¿ç¨‹çš„ä¿¡æ¯ Stop-\u003eéå†allmé“¾è¡¨-\u003eè¾“å‡ºåˆ›å»ºmçš„å †æ ˆ-\u003eStart ","date":"2022-01-28","objectID":"/posts/golang/pprof/0.html/:2:2","tags":["pprof","æ€§èƒ½ä¼˜åŒ–","Go"],"title":"pprofæ€§èƒ½æ’æŸ¥åˆ†ænote","uri":"/posts/golang/pprof/0.html/"},{"categories":["Go"],"content":"Heapï¼ˆå †å†…å­˜ï¼‰é‡‡æ · é‡‡æ ·ç¨‹åºé€šè¿‡å†…å­˜åˆ†é…å™¨åœ¨å †ä¸Šåˆ†é…å’Œé‡Šæ”¾ä¸”å‚ä¸GCçš„å†…å­˜ï¼Œè®°å½•åˆ†é…/é‡Šæ”¾çš„å¤§å°å’Œæ•°é‡ åº•å±‚ä½¿ç”¨cgoã€è°ƒç”¨å°±å›æ”¶çš„æ ˆå†…å­˜ç­‰æ˜¯ä¸ä¼šè¢«è®°å½•çš„ã€‚ é‡‡æ ·ç‡ï¼šæ¯åˆ†é…512KBè®°å½•ä¸€æ¬¡ï¼Œå¯ä»¥åœ¨è¿è¡Œå¼€å¤´ä¿®æ”¹ï¼Œ1ä¸ºæ¯æ¬¡åˆ†é…å‡è®°å½• é‡‡æ ·æ—¶é—´ï¼šä»ç¨‹åºè¿è¡Œå¼€å§‹åˆ°é‡‡æ ·æ—¶ é‡‡ç”¨æŒ‡æ ‡ï¼šalloc_spaceã€alloc_objectsã€inuse_spaceã€inuse_objectsï¼› è®¡ç®—æ–¹å¼ï¼šinuse = alloc - free ","date":"2022-01-28","objectID":"/posts/golang/pprof/0.html/:2:3","tags":["pprof","æ€§èƒ½ä¼˜åŒ–","Go"],"title":"pprofæ€§èƒ½æ’æŸ¥åˆ†ænote","uri":"/posts/golang/pprof/0.html/"},{"categories":["Go"],"content":"Block\u0026Mutexé‡‡æ · é˜»å¡ é‡‡ç”¨é˜»å¡æ“ä½œçš„æ¬¡æ•°å’Œè€—æ—¶ é‡‡æ ·ç‡ï¼šé˜»å¡è€—æ—¶è¶…è¿‡é˜ˆå€¼å€¼æ‰ä¼šè¢«è®°å½•ï¼Œ1ä¸ºæ¯æ¬¡é˜»å¡å‡è®°å½• é˜»å¡æ“ä½œ-ä¸ŠæŠ¥è°ƒç”¨æ ˆå’Œæ¶ˆè€—æ—¶é—´-\u003eprofiler-é‡‡æ ·æ—¶-\u003eéå†é˜»å¡è®°å½•-\u003eç»Ÿè®¡é˜»å¡æ¬¡æ•°å’Œè€—æ—¶ é”ç«äº‰ é‡‡æ ·äº‰æŠ¢é”çš„æ¬¡æ•°å’Œè€—æ—¶ é‡‡æ ·ç‡ï¼šåªè®°å½•å›ºå®šæ¯”ä¾‹çš„é”æ“ä½œï¼Œ1ä¸ºæ¯æ¬¡åŠ é”å‡è®°å½• é”æ“ä½œ-ä¸ŠæŠ¥è°ƒç”¨æ ˆå’Œæ¶ˆè€—æ—¶é—´-\u003eprofiler-\u003eé‡‡æ ·æ—¶-éå†é”è®°å½•-\u003eç»Ÿè®¡é”ç«äº‰æ¬¡æ•°å’Œè€—æ—¶ ","date":"2022-01-28","objectID":"/posts/golang/pprof/0.html/:2:4","tags":["pprof","æ€§èƒ½ä¼˜åŒ–","Go"],"title":"pprofæ€§èƒ½æ’æŸ¥åˆ†ænote","uri":"/posts/golang/pprof/0.html/"},{"categories":["rust"],"content":"ã€ŠRust å®æˆ˜è¯¾ã€‹å­¦ä¹ ç¬”è®° ä»¥ä¸‹æ˜¯å­¦ä¹ å¼ æ±‰ä¸œå¤§ç¥çš„Rustè¯¾ç¨‹ ä¸­æ‘˜å½•çš„ç¬”è®° åç»­ä¼šæŒç»­æ›´æ–° ","date":"2022-01-28","objectID":"/posts/rust/0.html/:0:0","tags":["rust","note"],"title":"ã€ŠRust å®æˆ˜è¯¾ã€‹å­¦ä¹ ç¬”è®°","uri":"/posts/rust/0.html/"},{"categories":["rust"],"content":"Rustè¯­è¨€ç‰ˆæœ¬è¯´æ˜ Rustè¯­è¨€çš„ç‰ˆæœ¬åŒ…æ‹¬ä»¥ä¸‹ä¸‰ä¸ªç›¸äº’æ­£äº¤çš„æ¦‚å¿µï¼š è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆSem Verï¼ŒSemantic Versioningï¼‰ å‘è¡Œç‰ˆæœ¬ Editionç‰ˆæ¬¡ è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆSem Ver, Semantic versioningï¼‰ å…¶æ ¼å¼ä¸ºï¼šä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å· è¯­ä¹‰ç‰ˆæœ¬å·é€’å¢è§„åˆ™ï¼š ä¸»ç‰ˆæœ¬å·ï¼šå½“åšäº†ä¸å…¼å®¹çš„APIä¿®æ”¹ï¼› æ¬¡ç‰ˆæœ¬å·ï¼šå½“åšäº†å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢ï¼› ä¿®è®¢å·ï¼šå½“åšäº†å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£ï¼› å‘è¡Œç‰ˆæœ¬ Editionç‰ˆæ¬¡ ","date":"2022-01-28","objectID":"/posts/rust/0.html/:1:0","tags":["rust","note"],"title":"ã€ŠRust å®æˆ˜è¯¾ã€‹å­¦ä¹ ç¬”è®°","uri":"/posts/rust/0.html/"},{"categories":["rust"],"content":"Rustè¯æ³•ç»“æ„ ","date":"2022-01-28","objectID":"/posts/rust/0.html/:2:0","tags":["rust","note"],"title":"ã€ŠRust å®æˆ˜è¯¾ã€‹å­¦ä¹ ç¬”è®°","uri":"/posts/rust/0.html/"},{"categories":["rust"],"content":"Rustç¼–è¯‘è¿‡ç¨‹ ","date":"2022-01-28","objectID":"/posts/rust/0.html/:2:1","tags":["rust","note"],"title":"ã€ŠRust å®æˆ˜è¯¾ã€‹å­¦ä¹ ç¬”è®°","uri":"/posts/rust/0.html/"},{"categories":["rust"],"content":"Rustè¯æ³•ç»“æ„ åŒ…å«å…¶å…­å¤§éƒ¨åˆ†ï¼š å…³é”®å­—ï¼ˆKeywordsï¼‰ æ ‡è¯†ç¬¦ï¼ˆIdentifierï¼‰ æ³¨é‡Šï¼ˆCommentï¼‰ ç©ºç™½ï¼ˆWhitespaceï¼‰ è¯æ¡ï¼ˆTokensï¼‰ è·¯å¾„ï¼ˆPathï¼‰ å…³é”®å­— ä¸¥æ ¼å…³é”®å­—ï¼ˆStrictï¼‰ as/ break/ const/ continue/ crate/ if/ else/ struct/ enum/ true/ false/ fn/ for/ in/ let/ loop/ impl/ mod/ match/ move / mut /pub/ ref/ return/ self/ Self/ static/ super/ trait/ type/ unsafe/ use/ where/ while /async/ await/ dyn / main ä¿ç•™å­—ï¼ˆReservedï¼‰ abstract/ become/ box/ do/ final/ macro/ override/ priv/ typeof/ unsized/ virtual/ yield / try è¢«ä¿ç•™çš„å…³é”®å­—ä¸ä»£è¡¨å°†æ¥ä¸€å®šä¼šä½¿ç”¨ å¼±å…³é”®å­—ï¼ˆWeakï¼‰ 2018 Edition: union, â€˜static 2015 Edition: dyn è¢«ä¿ç•™çš„å…³é”®å­—ä¸ä»£è¡¨å°†æ¥ä¸€å®šä¼šä½¿ç”¨ æ ‡è¯†ç¬¦ æ³¨é‡Š ç©ºç™½ Rustä¸­ç©ºç™½å­—ç¬¦åŒ…æ‹¬ï¼š\\nã€\\tã€tabç­‰ï¼› ä»»ä½•å½¢å¼çš„ç©ºç™½å­—ç¬¦åœ¨ Rust ä¸­åªç”¨äºåˆ†éš”æ ‡è®°ï¼Œæ— è¯­ä¹‰æ„ä¹‰ï¼› è¯æ¡ è¯­è¨€é¡¹ï¼ˆitemï¼‰ å—ï¼ˆblockï¼‰ è¯­å¥ï¼ˆStmtï¼‰ è¡¨è¾¾å¼ ï¼ˆExprï¼‰ æ¨¡å¼ï¼ˆPatternï¼‰ å…³é”®å­—ï¼ˆKeywordï¼‰ æ ‡è¯†ç¬¦ï¼ˆIdentï¼‰ å­—é¢é‡ï¼ˆLiteralï¼‰ ç”Ÿå‘½å‘¨æœŸï¼ˆLifetimeï¼‰ å¯è§æ€§ï¼ˆVisï¼‰ æ ‡ç‚¹ç¬¦å·ï¼ˆPunctuationï¼‰ åˆ†éš”ç¬¦ï¼ˆdelimiterï¼‰ è¯æ¡æ ‘ï¼ˆToken Treeï¼‰ å±æ€§ï¼ˆAttributeï¼‰ è·¯å¾„ ","date":"2022-01-28","objectID":"/posts/rust/0.html/:2:2","tags":["rust","note"],"title":"ã€ŠRust å®æˆ˜è¯¾ã€‹å­¦ä¹ ç¬”è®°","uri":"/posts/rust/0.html/"},{"categories":["rust"],"content":"Rustè¯­æ³•é¢é¢è§‚ï¼šé¢å‘è¡¨è¾¾å¼ ","date":"2022-01-28","objectID":"/posts/rust/0.html/:3:0","tags":["rust","note"],"title":"ã€ŠRust å®æˆ˜è¯¾ã€‹å­¦ä¹ ç¬”è®°","uri":"/posts/rust/0.html/"},{"categories":["rust"],"content":"è¡¨è¾¾å¼å’Œè¯­å¥ è¡¨è¾¾å¼å’Œè¯­å¥ä¸­çš„å¹¿ä¹‰è§†è§’ï¼šæ¯è¡Œä»£ç éƒ½å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªè¯­å¥ã€‚ è¯­å¥çš„å››ç§ç±»å‹ï¼š å£°æ˜è¯­å¥ æµç¨‹æ§åˆ¶è¯­å¥ è¡¨è¾¾å¼è¯­å¥ å®è¯­å¥ Rust è¯­æ³•çš„â€œéª¨æ¶â€å¯ä»¥ç¼©ä¸ºä¸€è¡Œï¼Œå¹¶æœ€ç»ˆå¯ä»¥ç®€åŒ–ä¸ºä¸‰ä¸ªå…³é”®å…ƒç´ ï¼š å±æ€§ï¼Œç±»ä¼¼äº#![...]ï¼› åˆ†å·;å³è¡Œåˆ†éš”ç¬¦ï¼› èŠ±æ‹¬å·{...}å³å—åˆ†éš”ç¬¦ï¼› Rust ä¸ºé¢å‘è¡¨è¾¾å¼çš„è¯­è¨€ï¼Œå€Ÿé‰´äº†å‡½æ•°å¼è¯­è¨€ï¼Œé¢å‘è¡¨è¾¾å¼ã€‚ é¢å‘è¡¨è¾¾å¼ åˆ†å·å’Œå—æ˜¯ Rust è¯­è¨€çš„ä¸¤ä¸ªåŸºæœ¬è¡¨è¾¾å¼ã€‚ åˆ†å·è¡¨è¾¾å¼ å•å…ƒç±»å‹ï¼ˆUnit Typeï¼‰ ; -\u003e () å—è¡¨è¾¾å¼ å—ä¸­æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ Rust ä¸­çš„æ±‚å€¼è§„åˆ™ï¼š åˆ†å·è¡¨è¾¾å¼è¿”å›å€¼æ°¸è¿œä¸ºè‡ªèº«çš„å•å…ƒï¼ˆUnitï¼‰ç±»å‹ï¼š()ï¼› åˆ†å·è¡¨è¾¾å¼åªæœ‰åœ¨å—è¡¨è¾¾å¼æœ€åä¸€è¡Œæ‰ä¼šè¿›è¡Œæ±‚å€¼ï¼Œå…¶ä»–æ—¶å€™åªä½œä¸ºè¿æ¥ç¬¦å­˜åœ¨ï¼› å—è¡¨è¾¾å¼åªå¯¹å…¶æœ€åä¸€è¡Œè¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼ï¼› éªŒè¯æ±‚å€¼è§„åˆ™ fn main() { ; ; { () } { (); use std::vec::Vec; } (); \u0026{;}; // -\u003e \u0026() ; // -\u003e () ; } å¦ä¸€ç§åˆ’åˆ†æ–¹å¼ åŸºæœ¬è¯­å¥ å£°æ˜è¯­å¥ è¡¨è¾¾å¼è¯­å¥ è¡¨è¾¾å¼ å—ä¸­æœ€åä¸€è¡Œä¸åŠ åˆ†å·çš„è¡¨è¾¾å¼ æµç¨‹æ§åˆ¶ä¹Ÿæ˜¯è¡¨è¾¾å¼ã€‚ é™¤äº†åŸºæœ¬çš„å£°æ˜è¯­å¥ï¼Œå…¶ä»–çš†ä¸ºè¡¨è¾¾å¼ã€‚ ","date":"2022-01-28","objectID":"/posts/rust/0.html/:3:1","tags":["rust","note"],"title":"ã€ŠRust å®æˆ˜è¯¾ã€‹å­¦ä¹ ç¬”è®°","uri":"/posts/rust/0.html/"},{"categories":["rust"],"content":"ç¼–è¯‘æœŸè®¡ç®— ç¼–è¯‘æœŸè®¡ç®—ï¼šæœ€å…ˆç”± Lisp/Cpp è¯­è¨€æ”¯æŒï¼ŒCTFEï¼ˆcompile time function evaluationï¼‰ã€‚ ç¼–è¯‘æœŸè®¡ç®— Rust æ”¯æŒä¸¤ç§æ–¹å¼ï¼š è¿‡ç¨‹å® + Build è„šæœ¬ï¼ˆbuild.rsï¼‰ ç±»ä¼¼äº Cpp ä¸­ constexpr çš„ CTFE åŠŸèƒ½ Rust ä¸­çš„ CTFEï¼š å¸¸é‡å‡½æ•°ï¼ˆconst fnï¼‰ å¸¸é‡æ³›å‹ï¼ˆconst genericï¼‰ å¸¸é‡å‡½æ•° const fn å¸¸é‡è¡¨è¾¾å¼ä¸å¸¸é‡ä¸Šä¸‹æ–‡ï¼š fn main(){ let an = (42,).0; const AN:i32 = an; // Error: attempt to use a non-constant value in a constant // fixed error: const AN:i32 = (42,).0; } **å¸¸é‡ä¸Šä¸‹æ–‡ï¼ˆconst contextï¼‰**åŒ…å«ï¼š å¸¸é‡å€¼åˆå§‹åŒ–ä½ç½® é™æ€æ•°ç»„çš„é•¿åº¦è¡¨è¾¾å¼ï¼Œ[T; N] é‡å¤çš„é•¿åº¦è¡¨è¾¾å¼ï¼Œç±»ä¼¼äºï¼š[0; 10] é™æ€å˜é‡ã€æšä¸¾åˆ¤åˆ«å¼çš„åˆå§‹åŒ–ä½ç½® æˆ‘ä»¬éœ€è¦æ³¨æ„ï¼š å¸¸é‡ä¸Šä¸‹æ–‡æ˜¯ç¼–è¯‘å™¨å”¯ä¸€è¿è¡Œè¿›è¡Œç¼–è¯‘æœŸæ±‚å€¼çš„åœ°æ–¹ åœ¨éå¸¸é‡ä¸Šä¸‹æ–‡çš„åœ°æ–¹ï¼Œå¸¸é‡è¡¨è¾¾å¼ä¸ä¸€å®šä¼šåœ¨ç¼–è¯‘æœŸæ±‚å€¼ å¸¸é‡ä¼ æ’­ï¼ˆConst Propagationï¼‰ å¸¸é‡ä¼ æ’­å’Œç¼–è¯‘æœŸè®¡ç®—æ˜¯ä¸åŒçš„ï¼š å¸¸é‡ä¼ æ’­æ˜¯ç¼–è¯‘å™¨çš„ä¸€ç§ä¼˜åŒ–ï¼› å¸¸é‡ä¼ æ’­å¹¶ä¸èƒ½æ”¹å˜ç¨‹åºçš„ä»»ä½•è¡Œä¸ºï¼Œå¹¶ä¸”å¯¹å¼€å‘è€…æ˜¯éšè—çš„ï¼› ç¼–è¯‘æœŸè®¡ç®—åˆ™æ˜¯æŒ‡ç¼–è¯‘æ—¶æ‰§è¡Œçš„ä»£ç ï¼Œå¿…é¡»çŸ¥é“å…¶ç»“æœï¼Œæ‰èƒ½ç»§ç»­æ‰§è¡Œï¼› const X:u32 = 3 + 4; // CTFE let x:uew = 4 + 3; // ä¸æ˜¯ CTFEï¼Œä½†å¯èƒ½ä¼šè¢«å¸¸é‡ä¼ æ’­ä¼˜åŒ–ï¼Œå› ä¸ºå®ƒä¸åœ¨å¸¸é‡ä¸Šä¸‹æ–‡ å¸¸é‡å®‰å…¨ï¼ˆConst Safeï¼‰ Rust é‡Œçš„å¤§éƒ¨åˆ†è¡¨è¾¾å¼éƒ½å¯ç”¨ä½œå¸¸é‡è¡¨è¾¾å¼ï¼› å¹¶ä¸æ˜¯æ‰€æœ‰å¸¸é‡è¡¨è¾¾å¼éƒ½å¯ä»¥ç”¨åœ¨å¸¸é‡ä¸Šä¸‹æ–‡ï¼› ç¼–è¯‘æœŸæ±‚å€¼å¿…é¡»å¾—åˆ°ä¸€ä¸ªç¡®å®šæ€§çš„ç»“æœï¼› const fn gcd(a:u32,b:u32)-\u003eu32{ match (a,b) { (x,0)|(0,x) =\u003e x, (x,y) if x % 2 == 0 \u0026\u0026 y % 2 ==0 =\u003e 2 * gcd(x/2,y/2), (x,y) | (y,x) if x % 2 == 0 =\u003e gcd(x/2,y), (x,y) if x \u003c y =\u003e gcd((y-x)/2,x), (x,y) =\u003e gcd((x-y)/2,y), } } const GCD : u32 = gcd(21,7); fn main() { println!(\"{}\",GCD); } const fn fib(n:u128)-\u003eu128{ const fn helper(n:u128,a:u128,b:u128,i:u128)-\u003eu128{ if i\u003c=n { helper(n,b,a+b,i+1) }else{ b } } helper(n,1,1,2) } const X:u128 = fib(10); fn main() { println!(\"{}\",GCD); } å¸¸é‡å®‰å…¨å­ç±»å‹ç³»ç»Ÿï¼š æ™®é€šçš„ fn å…³é”®å­—å®šä¹‰çš„å‡½æ•°ï¼Œæ˜¯ Safe Rust ä¸»ç±»å‹ç³»ç»Ÿä¿è¯å®‰å…¨ã€‚ const fn å®šä¹‰çš„å‡½æ•°ï¼Œæ˜¯ Safe Rust ä¸»ç±»å‹ç³»ç»Ÿä¸‹æœ‰ä¸€ä¸ªä¸“é—¨ç”¨äºå¸¸é‡è®¡ç®—çš„å­ç±»å‹ç³»ç»Ÿæ¥ä¿è¯å¸¸é‡å®‰å…¨ã€‚ å¸¸é‡ä¸Šä¸‹æ–‡å¯æ¥å—çš„å¸¸é‡è¡¨è¾¾å¼ const fn å‡½æ•° å…ƒç»„ç»“æ„ä½“ å…ƒç»„çš„å€¼ // Error const fn hello()-\u003eString{ \"Hello\".to_string() } // Error const S : String = hello(); // Correct const fn hello()-\u003e\u0026'static str{ \"Hello\" } // Correct const Y: \u0026str = hello(); fn main(){ println!(\"{:?}\",S); } #[derive(Debug)] struct Answer(u32); const A:Answer = Answer(42); fn main(){ println!(\"{}\",A); } ç¼–è¯‘æœŸè®¡ç®—å¦‚ä½•å®ç° MIRï¼ˆä¸­çº§ä¸­é—´è¯­è¨€ï¼‰ Miriï¼ˆç¼–è¯‘æœŸå†…ç½® MIR è§£é‡Šå™¨ï¼‰ æ¯”å¦‚ä¸‹é¢çš„ä»£ç åœ¨ç¼–è¯‘æœŸï¼š const fn answer() -\u003e u32 {42} const A:u32 = answer(); fn main(){ let a = A; } å…¶ Miri ä¸­æ±‚å€¼ä¸»è¦è¿‡ç¨‹ä¸ºï¼š const A èµ‹å€¼ åœ¨ bb0 ä¸­è°ƒç”¨ const answer const answer è¿”å›å¸¸é‡ 42 æµç¨‹è·³åˆ° bb1 è¿”å›42 While true vs loop æƒ³ä½¿ç”¨æ— é™å¾ªç¯çš„æ—¶å€™å»ºè®®ä½¿ç”¨ loopï¼Œè€Œé while true fn main(){ let mut a; while true{ a=1; break; } println!(\"{}\",a); // Error } fn main(){ let mut a; loop{ a = 1; break; } println!(\"{}\",a); } å…³äºç¼–è¯‘æœŸä¸ºä»€ä¹ˆä¸è¯†åˆ« while true ä¸»è¦æœ‰ä»¥ä¸‹åŸå› ï¼š è¦è€ƒè™‘ï¼šwhile(constexpr = true)çš„æƒ…å†µï¼› ä½¿ç”¨ #[allow(while_true)]å±æ€§åœ¨æŸäº›æƒ…å†µä¸‹å…è®¸ä½¿ç”¨ while trueï¼ˆä¸Šé¢çš„ä¾‹å­ä¸ç¬¦åˆä½¿ç”¨æƒ…å†µï¼‰ï¼› ","date":"2022-01-28","objectID":"/posts/rust/0.html/:3:2","tags":["rust","note"],"title":"ã€ŠRust å®æˆ˜è¯¾ã€‹å­¦ä¹ ç¬”è®°","uri":"/posts/rust/0.html/"},{"categories":["rust"],"content":"å¸¸é‡æ³›å‹ const generic Rust ä¸­çš„é™æ€æ•°ç»„ä¸€ç›´ä»¥æ¥éƒ½å±äºâ€œäºŒç­‰å…¬æ°‘â€ï¼Œä¸æ–¹ä¾¿ä½¿ç”¨ã€‚ #![feature(min_const_generics)] use core::mem::MaybeUninit; const X:u128 = fib(10); pub struct ArrayVec\u003cT, const N: usize\u003e { items: [MaybeUninit\u003cT\u003e; N], length: usize, } ç›®å‰å­˜åœ¨çš„ç¼ºé™·ï¼š ç›®å‰ä»…é™äºæ•´æ•°åŸç”Ÿç±»å‹ï¼ŒåŒ…æ‹¬æœ‰ç¬¦å·å’Œæ— ç¬¦å·æ•´æ•°ç±»å‹ï¼Œå¸ƒå°”å€¼å’Œå­—ç¬¦è¿˜ä¸å…è®¸ä½¿ç”¨å¤åˆç±»å‹å’Œè‡ªå®šä¹‰ç±»å‹ï¼Œä¹Ÿä¸å…è®¸ä½¿ç”¨å¼•ç”¨ï¼Œå³æ„å‘³ç€ä¸å…è®¸ä½¿ç”¨å­—ç¬¦ä¸²ï¼› å¸¸é‡æ³›å‹å‚æ•°ç›®å‰åªæ”¯æŒä¸¤ç§è¡¨è¾¾å¼ï¼š ä¸€ä¸ªç®€å•çš„å¸¸é‡æ³›å‹å‚æ•° å¯ä»¥åœ¨ä¸ä¾èµ–äºä»»ä½•ç±»å‹æˆ–å¸¸é‡å‚æ•°çš„å¸¸é‡ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨çš„è¡¨è¾¾å¼ ç±»å‹ç†è®º å¸¸é‡æ³›å‹æ˜¯ä¸€ç§ä¾èµ–ç±»å‹ï¼ˆDepended Typeï¼‰ å› ä¸ºæ•°ç»„ [T;N] çš„ç±»å‹ï¼Œæœ€ç»ˆæ˜¯è¦ä¾èµ–äº N çš„å…·ä½“å€¼æ¥ç¡®å®šã€‚ #![feature(min_const_generics)] #![feature(const_in_array_repeat_expressions)] use core::mem::MaybeUninit; #[derive(Debug)] pub struct ArrayVec\u003cT, const N: usize\u003e { items: [MaybeUninit\u003cT\u003e; N], length: usize, } impl\u003cT,const N:usize\u003e ArrayVec\u003cT,{N}\u003e{ pub const fn new()-\u003eArrayVec\u003cT,{N}\u003e{ ArrayVec{ items:[MaybeUninit::uninit();N], length:0, } } #[inline] pub const fn len(\u0026self) -\u003e usize { self.length} #[inline] pub const fn is_empty(\u0026self) -\u003e bool { self.len() == 0} #[inline] pub const fn capacity(\u0026self) -\u003e usize { N} #[inline] pub const fn is_full(\u0026self) -\u003e bool { self.len() \u003e= self.capacity()} } ","date":"2022-01-28","objectID":"/posts/rust/0.html/:3:3","tags":["rust","note"],"title":"ã€ŠRust å®æˆ˜è¯¾ã€‹å­¦ä¹ ç¬”è®°","uri":"/posts/rust/0.html/"},{"categories":["rust"],"content":"ä»è¡¨è¾¾å¼çš„åˆ†ç±»è§’åº¦æ¥çœ‹ Rust çš„å˜é‡ç»‘å®šå’Œå¼•ç”¨ ","date":"2022-01-28","objectID":"/posts/rust/0.html/:4:0","tags":["rust","note"],"title":"ã€ŠRust å®æˆ˜è¯¾ã€‹å­¦ä¹ ç¬”è®°","uri":"/posts/rust/0.html/"},{"categories":["rust"],"content":"Rust ä¸­è¡¨è¾¾å¼çš„åˆ†ç±» ä½ç½®è¡¨è¾¾å¼\u0026å€¼è¡¨è¾¾å¼ è¡¨è¾¾å¼èƒŒåçš„å†…å­˜ç®¡ç† let ç»‘å®š ä½ç½®è¡¨è¾¾å¼åŒ…æ‹¬ä»¥ä¸‹ï¼š é™æ€å˜é‡åˆå§‹åŒ–ï¼š static mut LEVELS:u32 = 0; è§£å¼•ç”¨è¡¨è¾¾å¼ï¼š *expr æ•°ç»„ç´¢å¼•è¡¨è¾¾ï¼š express[expr] å­—æ®µè¡¨è¾¾å¼ï¼š expr.field ä»¥åŠä¸Šè¿°åŠ ä¸Šæ‹¬å·çš„ä½ç½®è¡¨è¾¾å¼ï¼š (expr) é™¤æ­¤ä¹‹å¤–çš„éƒ½æ˜¯å€¼è¡¨è¾¾å¼ã€‚ ä½ç½®ä¸Šä¸‹æ–‡ é™¤äº†èµ‹å€¼å·¦ä¾§çš„ä½ç½®ä¸Šä¸‹æ–‡ä¹‹å¤–ï¼Œè¿˜æœ‰å¤åˆèµ‹å€¼æ“ä½œçš„å·¦ä¾§ï¼› let mut a = 1; a += 1; ä¸€å…ƒå€Ÿç”¨å’Œè§£å¼•ç”¨æ“ä½œä¸­çš„æ“ä½œæ•°æ‰€åœ¨åŒºåŸŸï¼› let a = \u0026 mut 7; *a = 42; let b = \u0026a; å­—æ®µè¡¨è¾¾å¼çš„æ“ä½œæ•°æ‰€åœ¨åŒºåŸŸ struct A{ name:\u0026'static str, } let a = A{name:\"Alex\"}; a.name; æ•°ç»„ç´¢å¼•è¡¨è¾¾å¼çš„æ“ä½œæ•°æ‰€åœ¨åŒºåŸŸ let mut a = [1,2,3]; let b = \u0026mut a; a[1] = 42; ä»»æ„éšå¼å€Ÿç”¨æ“ä½œæ•°æ‰€åœ¨åŒºåŸŸ let mut v = vec![1,2,3]; v.push(4); let è¯­å¥åˆå§‹åŒ– let a:i32; a = 42; if let / while let / match çš„åŒ¹é…è¡¨è¾¾å¼æ‰€åœ¨åŒºåŸŸ let dish = {\"Ham\",\"Eggs\"}; if let (\"Bacon\", b) = dish{ // åŒ¹é…è¡¨è¾¾å¼æ‰€åœ¨åŒºåŸŸå°±æ˜¯ä½ç½®ä¸Šä¸‹æ–‡ println!(\"Bacon is serverd with {}\",b); } else { println!(\"No bacon will be served\"); } // while let (ä½ç½®ä¸Šä¸‹æ–‡) = ... { ... } // match (ä½ç½®ä¸Šä¸‹æ–‡) { ... } ç»“æ„ä½“æ›´æ–°è¯­æ³•ä¸­çš„ base è¡¨è¾¾å¼ï¼ˆ ..æ“ä½œç¬¦åé¢çš„æ“ä½œæ•°åŒºåŸŸï¼‰ let mut base = Point3d{x:1,y:2,z:3}; let y_ref = \u0026mut base.y; Point3d{y:0,z:10,..base}; // å¾—åˆ° base.x ","date":"2022-01-28","objectID":"/posts/rust/0.html/:4:1","tags":["rust","note"],"title":"ã€ŠRust å®æˆ˜è¯¾ã€‹å­¦ä¹ ç¬”è®°","uri":"/posts/rust/0.html/"},{"categories":["rust"],"content":"Rust æ‰€æœ‰æƒè¯­ä¹‰åœ¨è¡¨è¾¾å¼ä¸Šçš„ä½“ç° Copy è¯­ä¹‰ä»£è¡¨å¯ä»¥å®‰å…¨åœ¨æ ˆå†…å­˜å¤åˆ¶ Move è¯­ä¹‰ä»£è¡¨å¿…é¡»æ—§çš„ç»‘å®šå¤±æ•ˆï¼Œé¿å…å†…å­˜ä¸å®‰å…¨ ","date":"2022-01-28","objectID":"/posts/rust/0.html/:4:2","tags":["rust","note"],"title":"ã€ŠRust å®æˆ˜è¯¾ã€‹å­¦ä¹ ç¬”è®°","uri":"/posts/rust/0.html/"},{"categories":["rust"],"content":"ä¸å¯å˜ä¸å¯å˜ Rust å€Ÿé‰´äº†å‡½æ•°å¼è¯­è¨€çš„ä¸å¯å˜ç‰¹æ€§ï¼ŒåŒ…æ‹¬ï¼š ä¸å¯å˜ç»‘å®šä¸å¯å˜ç»‘å®š ä¸å¯å˜å¼•ç”¨ä¸å¯å˜å¼•ç”¨ ä¸å¯å˜ç»‘å®šä¸å¯å˜ç»‘å®š é»˜è®¤ä¸å¯å˜ï¼š å¦‚æœæƒ³ä¿®æ”¹å˜é‡çš„å€¼ï¼š let answer = 42; let answer = 44; // è¿™ç§æ–¹å¼ä¹Ÿå«å˜é‡é®è”½ å¯å˜ç»‘å®šä½¿ç”¨ mut ä¿®é¥°ç¬¦ï¼š ä¸å¯å˜å¼•ç”¨ä¸å¯å˜å¼•ç”¨ ä¸å¯å˜å¼•ç”¨ä¹Ÿå«åšå…±äº«å¼•ç”¨ï¼š åŒæ ·å¯å˜å¼•ç”¨ä½¿ç”¨ mut ä¿®é¥°å¼•ç”¨ï¼š let mut answer = 42; let r = \u0026mut answer; *r = 43; println!(\"{:?}\",answer); // 43 å¯å˜å¼•ç”¨ä¹Ÿå«ç‹¬å å¼•ç”¨ï¼š ","date":"2022-01-28","objectID":"/posts/rust/0.html/:4:3","tags":["rust","note"],"title":"ã€ŠRust å®æˆ˜è¯¾ã€‹å­¦ä¹ ç¬”è®°","uri":"/posts/rust/0.html/"},{"categories":["rust"],"content":"æ•°æ®ç±»å‹ ","date":"2022-01-28","objectID":"/posts/rust/0.html/:5:0","tags":["rust","note"],"title":"ã€ŠRust å®æˆ˜è¯¾ã€‹å­¦ä¹ ç¬”è®°","uri":"/posts/rust/0.html/"},{"categories":["rust"],"content":"åŸºæœ¬æ•°æ®ç±»å‹ å­—ç¬¦ä¸² å­—ç¬¦ä¸²ä¸ºå®é™…å­˜åœ¨çš„ UNIQUE çš„å­—ç¬¦ï¼Œå å››ä¸ªå­—èŠ‚ã€‚ æ ¹æ®å­—ç¬¦ä¸²ä½¿ç”¨åœºæ™¯è®¾è®¡ç±»å‹ï¼š å­—é¢é‡ åŠ¨æ€å¯å¢é•¿å­—ç¬¦ä¸² ä»ä¸€æ®µå­—ç¬¦ä¸²ä¸­æˆªå–çš„ç‰‡æ®µ å­—ç¬¦ä¸²ç¼–ç  FFi ä¸­éœ€è¦è½¬æ¢å­—ç¬¦ä¸²åˆ° C æˆ– OS æœ¬åœ°å­—ç¬¦ä¸² éµå¾ªç‰¹å®šæ ¼å¼çš„æ–‡ä»¶è·¯å¾„ å­—ç¬¦ç±»å‹ä¼—å¤šå°±æ˜¯ä¸ºäº†ä¿è¯è¦†ç›–åˆ°æ‰€æœ‰åœºæ™¯ä¸”ä¸ºäº†ä¿è¯ç±»å‹å®‰å…¨ã€‚ å­—ç¬¦ä¸²ä¸åˆ‡ç‰‡ å­—ç¬¦ä¸²ä¸º UTF-8 ç¼–ç çš„ u8 åºåˆ—ã€‚ä½† u8 åºåˆ—åˆ‡ç‰‡å¹¶ä¸ä¸€å®šæ˜¯åˆæ³•çš„å­—ç¬¦ä¸²åˆ‡ç‰Œå‘¢ã€‚ Rust å†…å­˜åˆ†é…é»˜è®¤æ˜¯åœ¨æ ˆä¸Šåˆ†é…å†…å­˜ï¼Œå¹¶ä¸”é€šè¿‡æ ˆæ¥ç®¡ç†å †å†…å­˜ï¼Œæ‰€ä»¥å¿…é¡»åœ¨ç¼–è¯‘æœŸæ¥ç¡®å®šç±»å‹çš„å¤§å°ã€‚ä½†ç¼–è¯‘æœŸä¸å¯èƒ½çŸ¥é“å¼€å‘è€…å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œæ‰€ä»¥è¿™é‡Œ str ç±»å‹æ˜¯ä¸€ä¸ªåŠ¨æ€å¤§å°çš„ç±»å‹ã€‚ str -\u003e \u0026str è¿™ç±»å¼•ç”¨è¢«ç§°ä¸ºèƒ–æŒ‡é’ˆï¼Œå®ƒè¡¨ç¤ºæ ˆä¸Šå­˜å‚¨ä¸€ä¸ªæŒ‡å‘é™æ€åŒºåŸŸæˆ–è€…æ˜¯å †å†…å­˜çš„æŒ‡é’ˆã€‚ä»¥åŠæ•°æ®çš„é•¿åº¦ï¼Œå®ƒæ¯”æ™®é€šæŒ‡é’ˆå ç”¨çš„ç©ºé—´æ›´å¤§ï¼Œæ‰€ä»¥å«åšèƒ–æŒ‡é’ˆã€‚å­—ç¬¦ä¸²å¯ä»¥å­˜å‚¨äºé™æ€å­˜å‚¨åŒºï¼Œæ ˆå†…å­˜åªå­˜æŒ‡é’ˆï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸€ä¸ªé™æ€å¼•ç”¨å­—ç¬¦ä¸²åˆ‡ç‰‡ç±»å‹ ã€‚ [T] -\u003e \u0026[T] String -\u003e Vec æŒ‡é’ˆç±»å‹ ä¸‰ç§æŒ‡é’ˆç±»å‹ï¼š åŸå§‹æŒ‡é’ˆï¼Œ*mut Tå’Œ*const Tï¼› NonNullæŒ‡é’ˆã€‚å®ƒæ˜¯ Rust è¯­è¨€å»ºè®®çš„ *mut TæŒ‡é’ˆçš„æ›¿ä»£æŒ‡é’ˆã€‚NonNullæŒ‡é’ˆæ˜¯éç©ºæŒ‡é’ˆï¼Œå¹¶ä¸”æ˜¯éµå¾ªç”Ÿå‘½å‘¨æœŸç±»å‹åå˜è§„åˆ™ã€‚ å‡½æ•°æŒ‡é’ˆï¼šå‡½æ•°æŒ‡é’ˆæ˜¯æŒ‡å‘ä»£ç çš„æŒ‡é’ˆï¼Œè€Œéæ•°æ®ã€‚å¯ä»¥ä½¿ç”¨å®ƒç›´æ¥è°ƒç”¨å‡½æ•°ã€‚ å¼•ç”¨ ä¸¤ç§å¼•ç”¨ç±»å‹ï¼š \u0026T å’Œ \u0026mut Tï¼› å¼•ç”¨ä¸æŒ‡é’ˆçš„ä¸»è¦åŒºåˆ«ï¼š å¼•ç”¨ä¸å¯èƒ½ä¸ºç©ºï¼› æ‹¥æœ‰ç”Ÿå‘½å‘¨æœŸï¼› å—å€Ÿç”¨æ£€æŸ¥å™¨ä¿æŠ¤ä¸ä¼šå‘ç”Ÿæ‚¬å‚æŒ‡é’ˆç­‰é—®é¢˜ï¼› å…ƒç»„ å”¯ä¸€çš„å¼‚æ„åºåˆ—ï¼š ä¸åŒé•¿åº¦çš„å…ƒç»„æ˜¯ä¸åŒç±»å‹ï¼› å•å…ƒç±»å‹çš„å”¯ä¸€å®ä¾‹ç­‰ä»·äºç©ºå…ƒç»„ï¼› å½“å…ƒç»„åªæœ‰ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œè¦åœ¨å…ƒç´ æœ«å°¾åŠ é€—å·åˆ†éš”ï¼Œä»¥æ­¤æ–¹ä¾¿å’Œæ‹¬å·æ“ä½œç¬¦åŒºåˆ†å¼€æ¥ã€‚ Never ç±»å‹ ä¸ºäº†ä¿è¯ç±»å‹å®‰å…¨å°±éœ€è¦è€ƒè™‘æ‰€æœ‰å¯èƒ½çš„æƒ…å†µï¼Œæ‰€æœ‰ä¹Ÿè¦è€ƒè™‘ä¸å¯èƒ½è¿”å›å€¼çš„è®¡ç®—æƒ…å†µã€‚ ä»£è¡¨çš„æ˜¯ä¸å¯èƒ½è¿”å›å€¼çš„è®¡ç®—ç±»å‹ï¼š ç±»å‹ç†è®ºä¸­å«åšåº•ç±»å‹ï¼Œåº•ç±»å‹ä¸åŒ…å«ä»»ä½•å€¼ï¼Œä½†å®ƒå¯ä»¥åˆä¸€åˆ°ä»»ä½•å…¶ä»–ç±»å‹ï¼› Never ç±»å‹ç”¨!å¹å·è¡¨ç¤ºï¼› ç›®å‰è¿˜æœªç¨³å®šï¼Œä½†åœ¨ Rust å†…éƒ¨å·²ç»åœ¨ä½¿ç”¨äº†ï¼› ","date":"2022-01-28","objectID":"/posts/rust/0.html/:5:1","tags":["rust","note"],"title":"ã€ŠRust å®æˆ˜è¯¾ã€‹å­¦ä¹ ç¬”è®°","uri":"/posts/rust/0.html/"},{"categories":["rust"],"content":"è‡ªå®šä¹‰å¤åˆç±»å‹ ç»“æ„ä½“ Struct æšä¸¾ä½“ Enum è”åˆä½“ Union åˆ†åˆ«æœ‰å…·åç»“æ„ä½“ã€å…ƒç»„ç»“æ„ä½“ã€å•å…ƒç»“æ„ä½“ã€‚ // å…·åç»“æ„ä½“ï¼ŒåŒ…å«äº†å­—æ®µ struct Point{ x: f32, y: f32, } // å…ƒç»„ç»“æ„ä½“ struct Pair(i32, f32); // å•å…ƒç»“æ„ä½“ struct Unit; fn main(){ let point = Point{x:1.0, y:2.0}; let pair = Pair(1, 2.0); assert_eq!(pair.0, 1); let unit1 = Uint; let unit2 = Unit; } å½“å…ƒç»„ç»“æ„ä½“åªåŒ…å«ä¸€ä¸ªæˆå‘˜æ—¶ï¼š struct Score(u32); impl Score{ fn pass(\u0026self) -\u003e bool{ self.0\u003e=60 } } fn main(){ let s = Score(50); assert_eq!(s.pass(), false) } å¯¹äºç»“æ„ä½“å†…å­˜å¸ƒå±€æ–¹é¢ï¼Œç¼–è¯‘å™¨ä¼šå¯¹ç»“æ„ä½“è¿›è¡Œå†…å­˜å¯¹é½ï¼Œä»¥æ­¤æå‡ CPU çš„è®¿é—®æ•ˆç‡ã€‚ä½¿ç”¨å†…å­˜å¸ƒå±€å±æ€§å¯ä»¥æŒ‡å®š C å†…å­˜å¸ƒå±€ï¼Œé˜²æ­¢ç¼–è¯‘å™¨é‡æ’ã€‚ struct A{ a: u8, b: u32, c: u16, } // ç¼–è¯‘å™¨é‡æ’å­—æ®µï¼Œä¼˜åŒ–å†…å­˜å ç”¨ //struct A{ // a: u32, // b: u16, // c: u8, //} // 8 //#[repr(C)] //struct A{ // a: u8, // b: u32, // c: u16, //} // 12 fn main(){ println!(\"{:?}\",std::mem::size_of::\u003cA\u003e()); // 8 let v = A{a:1, b:2, c:3 }; } æšä¸¾ä½“ä¸è”åˆä½“å†…å­˜å¸ƒå±€ä¸­ï¼Œä»¥æšä¸¾ç±»å‹æˆå‘˜æœ€å¤§çš„å¯¹é½å€¼ä¸ºå‡†ä¸éœ€è¦ä¸ºæ¯ä¸ªæšä¸¾å€¼éƒ½å¯¹é½ã€‚ enum A { One, Two, } enum E { N, H(u32), M(Box\u003cu32\u003e) } union U{ u: u32, v: u64 } fn main(){ println!(\"E: {:?}\",std::mem::size_of::\u003cA\u003e()); // 1 println!(\"Box\u003cu32\u003e: {:?}\",std::mem::size_of::\u003cBox\u003cu32\u003e\u003e()); // 8 println!(\"U: {:?}\",std::mem::size_of::\u003cE\u003e()); // 16 println!(\"U: {:?}\",std::mem::size_of::\u003cU\u003e()); // 8 } ","date":"2022-01-28","objectID":"/posts/rust/0.html/:5:2","tags":["rust","note"],"title":"ã€ŠRust å®æˆ˜è¯¾ã€‹å­¦ä¹ ç¬”è®°","uri":"/posts/rust/0.html/"},{"categories":["rust"],"content":"å®¹å™¨ç±»å‹ å†…éƒ¨å¯å˜æ€§ï¼ˆinterior mutabilityï¼‰ ä¸ç»§æ‰¿å¼å¯å˜ç›¸å¯¹åº”ï¼› ç”±å¯å˜æ€§æ ¸å¿ƒåŸè¯­ UnsafeCell æä¾›æ”¯æŒï¼› åŸºäº UnsafeCell æä¾›äº† Cell å’Œ RefCellã€‚ Cell \u0026 RefCell use std::cell::Cell; struct Foo { x: u32, y: Cell\u003cu32\u003e } fn main(){ let foo = Foo {x: 1, y: Cell::new(3)}; assert_eq!(1, foo.x); assert_eq!(3, foo.y.get()); foo.y.set(5); assert_eq!(5, foo.y.get()); let s = \"hello\".to_string(); let bar = Cell::new(s); let x = bar.into_inner(); // bar; // error: use of moved value: `bar` } use std::cell::RefCell; fn main(){ let x = RefCell::new(vec![1,2,3,4]); println!(\"{:?}\", x.borrow()); x.borrow_mut().push(5); println!(\"{:?}\", x.borrow()); } è¿è¡Œæ—¶å€Ÿç”¨æ£€æŸ¥ ","date":"2022-01-28","objectID":"/posts/rust/0.html/:5:3","tags":["rust","note"],"title":"ã€ŠRust å®æˆ˜è¯¾ã€‹å­¦ä¹ ç¬”è®°","uri":"/posts/rust/0.html/"},{"categories":["rust"],"content":"æ³›å‹ æ‰€è°“æ³›å‹å°±æ˜¯å‚æ•°åŒ–ç±»å‹ã€‚ fn foo\u003cT\u003e(x: T)-\u003eT{ return x; } fn main(){ assert_eq!(foo(1), 1); assert_eq!(foo(\"hello\"), \"hello\"); } é™æ€åˆ†å‘ fn main(){ fn foo_1(x: i32)-\u003ei32{ return x; } fn foo_2(x:\u0026'static' str)-\u003e\u0026'static str{ return x; } foo_1(1); foo_2(\"2\"); } å½“ç±»å‹æ¨æ–­å¤±æ•ˆï¼Œéœ€è¦æ‰‹å·¥æŒ‡å®šç±»å‹çš„æ—¶å€™ä½¿ç”¨ foo(1); //= foo::\u003ci32\u003e(1); foo(\"hello\"); //= foo::\u003c\u0026'static str\u003e(\"hello\"); ","date":"2022-01-28","objectID":"/posts/rust/0.html/:5:4","tags":["rust","note"],"title":"ã€ŠRust å®æˆ˜è¯¾ã€‹å­¦ä¹ ç¬”è®°","uri":"/posts/rust/0.html/"},{"categories":["rust"],"content":"ç‰¹å®šç±»å‹ æ‰€è°“ç‰¹å®šç±»å‹ï¼Œæ˜¯æŒ‡ä¸“é—¨æœ‰ç‰¹æ®Šç”¨é€”çš„ç±»å‹ PhantomData ï¼Œ å¹»å½±ç±»å‹ã€‚ ä¸€èˆ¬ç”¨äº Unsafe Rust çš„å®‰å…¨æŠ½è±¡ã€‚ Pinï¼Œ å›ºå®šç±»å‹ã€‚ä¸ºäº†æ”¯æŒå¼‚æ­¥å¼€å‘è€Œç‰¹æ„å¼•è¿›ï¼Œé˜²æ­¢è¢«å¼•ç”¨çš„å€¼å‘ç”Ÿç§»åŠ¨çš„ç±»å‹ã€‚ ","date":"2022-01-28","objectID":"/posts/rust/0.html/:5:5","tags":["rust","note"],"title":"ã€ŠRust å®æˆ˜è¯¾ã€‹å­¦ä¹ ç¬”è®°","uri":"/posts/rust/0.html/"},{"categories":["os"],"content":"ç¨‹åºè¿è¡ŒåŸç† Thinking ä»¥ä¸‹æ˜¯ä¸ªäººç†è§£ï¼ˆå¤§ç™½è¯è¾ƒå¤šï¼‰ ","date":"2022-01-28","objectID":"/posts/os/common/0.html/:0:0","tags":["os"],"title":"ç¨‹åºè¿è¡ŒåŸç†Thinking","uri":"/posts/os/common/0.html/"},{"categories":["os"],"content":"ç¨‹åºæ˜¯å¦‚ä½•è¿è¡Œèµ·æ¥çš„ é¦–å…ˆå¯¹äºç¨‹åºï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºå¯æ‰§è¡Œçš„ä»£ç ï¼Œç¨‹åºæ˜¯é™æ€çš„ï¼Œå³å­˜å‚¨åœ¨ç£ç›˜ä¸Šã€‚ è€Œå¦‚æœæƒ³è¦ç¨‹åºå¤„ç†æ•°æ®ï¼Œå®Œæˆè®¡ç®—ä»»åŠ¡ï¼Œå°±å¿…é¡»æŠŠç¨‹åºä»å¤–éƒ¨åŠ è½½åˆ°å†…å­˜ä¸­ã€‚åŠ è½½åˆ°å†…å­˜ä¸­åå°±ä¼šåœ¨æ“ä½œç³»ç»Ÿçš„ç®¡ç†è°ƒåº¦ä¸‹äº¤ç»™CPUå»æ‰§è¡Œï¼Œå°†è¯¥ç¨‹åºè¿è¡Œèµ·æ¥ã€‚è€Œç¨‹åºè¢«è¿è¡Œèµ·æ¥åå°±å¯ä»¥è¢«ç§°ä½œä¸ºè¿›ç¨‹ã€‚ è¿›ç¨‹é™¤äº†åŒ…å«å¯æ‰§è¡Œçš„ä»£ç ï¼Œè¿˜åŒ…æ‹¬è¿›ç¨‹åœ¨è¿è¡ŒæœŸé—´ä½¿ç”¨çš„å†…å­˜å †ç©ºé—´ã€æ ˆç©ºé—´ã€ä¾›æ“ä½œç³»ç»Ÿç®¡ç†ç”¨çš„æ•°æ®ç»“æ„ç­‰ã€‚ è€Œå¦‚æœä»æŒ‡ä»¤è§’åº¦çœ‹ï¼Œé‚£å°±æ˜¯æ“ä½œç³»ç»ŸæŠŠå¯æ‰§è¡Œä»£ç åŠ è½½åˆ°å†…å­˜ä¸­åç”Ÿæˆç›¸åº”çš„æ•°æ®ç»“æ„å’Œå˜é‡ï¼Œè€Œç”Ÿæˆè¿™äº›å°±éœ€è¦åœ¨è¿›ç¨‹çš„å †ç©ºé—´ç”³è¯·ç›¸åº”çš„å†…å­˜ç©ºé—´ï¼Œå¹¶æŠŠå†…å­˜çš„é¦–åœ°å€ä¿¡æ¯è®°å½•åœ¨è¿›ç¨‹çš„æ ˆä¸­ã€‚ å †æ˜¯ä¸€å—æ— åºçš„å†…å­˜ç©ºé—´ï¼Œä»»ä½•æ—¶å€™è¿›ç¨‹éœ€è¦ç”³è¯·å†…å­˜ï¼Œéƒ½ä¼šä»å †ç©ºé—´ä¸­åˆ†é…ï¼Œåˆ†é…åˆ°çš„å†…å­˜åœ°å€åˆ™è®°å½•åœ¨æ ˆä¸­ã€‚è€Œæ ˆä¸»è¦æ˜¯æ¥è®°å½•å‡½æ•°å†…éƒ¨çš„å±€éƒ¨å˜é‡ã€å †ç©ºé—´åˆ†é…çš„å†…å­˜ç©ºé—´åœ°å€ç­‰ã€‚ æœ€ååœ¨å†…å­˜ç©ºé—´åï¼Œå°±å¯ä»¥ä»å¯æ‰§è¡Œä»£ç çš„èµ·å§‹ä½ç½®è¯»å–æŒ‡ä»¤äº¤ç»™CPUé¡ºåºæ‰§è¡Œã€‚æŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€é‡åˆ°çš„è·³è½¬æŒ‡ä»¤ï¼Œå°±å¯èƒ½æ˜¯ç”±æˆ‘ä»¬å¸¸è§çš„å¾ªç¯ã€æ§åˆ¶åˆ¤æ–­ç­‰å¯¼è‡´çš„ã€‚ä¸”æ¯æ¬¡å‡½æ•°è°ƒç”¨æ—¶ï¼Œå°±ä¼šåˆ©ç”¨åˆ°æ ˆå¸§ï¼Œå‡½æ•°åœ¨æ ˆé¡¶æ‰§è¡Œï¼Œä¸”æ¯ä¸ªæ ˆå¸§éƒ½æ˜¯éš”ç¦»çš„å³ä¸å‘ç”Ÿæ··ä¹±ã€‚ ","date":"2022-01-28","objectID":"/posts/os/common/0.html/:1:0","tags":["os"],"title":"ç¨‹åºè¿è¡ŒåŸç†Thinking","uri":"/posts/os/common/0.html/"},{"categories":["os"],"content":"ä¸€å°è®¡ç®—æœºå¦‚ä½•åŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡ ä¸»è¦ä¾é æ“ä½œç³»ç»Ÿçš„CPUåˆ†æ—¶å…±äº«æŠ€æœ¯ï¼Œå³å®è§‚ä¸Šæ˜¯å¹¶è¡Œï¼Œå¾®è§‚ä¸Šæ˜¯ä¸²è¡Œçš„ã€‚ æ‰€ä»¥è¿›ç¨‹ä¸æ˜¯æ€»åœ¨è¿è¡Œï¼Œè¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸä¸­ä¸»è¦æœ‰ä¸‰ç§çŠ¶æ€ï¼šè¿è¡Œã€å°±ç»ªã€é˜»å¡ã€‚ ä¸åŒè¿›ç¨‹è½®æµåœ¨CPUä¸Šæ‰§è¡Œï¼Œå°±ä¼šæ¶‰åŠåˆ°è¿›ç¨‹ä¹‹é—´çš„åˆ‡æ¢é—®é¢˜ã€‚çº¿ç¨‹ä¹Ÿæ˜¯åŒæ ·çš„é—®é¢˜ï¼Œä½†çº¿ç¨‹çš„åˆ‡æ¢ä»£ä»·æ›´å°ã€‚ ä¸€å°è®¡ç®—æœºåŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡çš„æ€§èƒ½è¿˜æ˜¯è¦çœ‹å…¶è¿›ç¨‹è°ƒåº¦ï¼Œæˆ–è€…çº¿ç¨‹è°ƒåº¦ï¼Œæœ¬è´¨å°±æ˜¯ä¸ºäº†ä¿è¯æ¯ä¸€ä¸ªåˆç†çš„ä»»åŠ¡å°½å¯èƒ½åœ°è¢«å¤„ç†è¿è¡Œã€‚ ","date":"2022-01-28","objectID":"/posts/os/common/0.html/:2:0","tags":["os"],"title":"ç¨‹åºè¿è¡ŒåŸç†Thinking","uri":"/posts/os/common/0.html/"},{"categories":["os"],"content":"ç³»ç»Ÿä¸ºä»€ä¹ˆä¼šå˜æ…¢æˆ–è€…å´©æºƒ è¿™é‡Œçš„é—®é¢˜ä»¥webåº”ç”¨ç¨‹åºä½œä¸ºä¾‹å­ã€‚ é«˜å¹¶å‘è¯·æ±‚ï¼Œå¯¼è‡´ç³»ç»Ÿå˜æ…¢æˆ–è€…ä¸¥é‡è‡³å´©æºƒï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·è¯·æ±‚å“åº”å˜æ…¢ï¼Œè€Œè¿™é‡Œå¯èƒ½å¯¼è‡´çš„åŸå› å¯èƒ½å°±æ˜¯èµ„æºé™åˆ¶å¯¼è‡´çš„çº¿ç¨‹é˜»å¡é—®é¢˜ï¼Œä¸€ä¸ªçº¿ç¨‹é˜»å¡å¯èƒ½å°±ä¼šå½±å“åˆ°å…¶ä»–çº¿ç¨‹çš„è¿è¡Œï¼Œè¢«é˜»å¡çš„çº¿ç¨‹è¶Šå¤šï¼Œå æ®çš„ç³»ç»Ÿèµ„æºä¹Ÿè¶Šå¤šï¼Œè¿™äº›è¢«é˜»å¡çš„çº¿ç¨‹æ—¢ä¸èƒ½ç»§ç»­æ‰§è¡Œï¼Œä¹Ÿä¸èƒ½é‡Š æ”¾å½“å‰å·²ç»å æ®çš„èµ„æºï¼Œåœ¨ç³»ç»Ÿä¸­ä¸€è¾¹ç­‰å¾…ä¸€è¾¹æ¶ˆè€—èµ„æºã€‚ è€Œå‘ç”Ÿé˜»å¡çš„åŸå› å¯èƒ½å°±æ˜¯å‡ºç°äº†ç­‰å¾…å…¶ä»–æœåŠ¡å®Œæˆæˆ–è€…ç­‰å¾…ä¿¡å·ï¼Œæœ€å¸¸è§çš„å°±æ˜¯æˆ‘ä»¬å¹³å¸¸é‡è§çš„æ’é˜Ÿç­‰é”ï¼Œè€Œå‡ºç°é”å°±æ¶‰åŠåˆ°äº†çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚ è§£å†³çš„ä¸»è¦æ‰‹æ®µï¼Œåœ¨å•æœºä¸­å¯ä»¥é€šè¿‡è®¾è®¡æ›´ä¼˜çš„ä¿è¯çº¿ç¨‹å®‰å…¨çš„æ‰§è¡Œè°ƒåº¦æ–¹æ¡ˆï¼Œè€Œåœ¨å¤šæœºä¸­å°±å¯ä»¥ä½¿ç”¨åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„ï¼Œé€šè¿‡é›†ç¾¤æ¥å…±åŒå¤„ç†ç”¨æˆ·çš„å¹¶å‘è¯·æ±‚ï¼Œå‡å°‘èµ„æºé™åˆ¶çš„å‹åŠ›ï¼Œå¿…è¦æ—¶å¯ä»¥åœ¨å…¥å£è¿›è¡Œé™æµä»¥å‡å°‘å¹¶å‘è¯·æ±‚æ•°ï¼Œåœ¨äºåº”ç”¨å†…è¿›è¡Œé™çº§ä»¥å‡å°çº¿ç¨‹çš„èµ„æºæ¶ˆè€—ã€‚ ","date":"2022-01-28","objectID":"/posts/os/common/0.html/:3:0","tags":["os"],"title":"ç¨‹åºè¿è¡ŒåŸç†Thinking","uri":"/posts/os/common/0.html/"},{"categories":["network"],"content":"simple socks5 proxy \u0026 the c10k problem ","date":"2022-01-28","objectID":"/posts/network/socks5/0.html/:0:0","tags":["network","socks5"],"title":"simple socks5 proxy \u0026 the c10k problem","uri":"/posts/network/socks5/0.html/"},{"categories":["network"],"content":"socks5 socks5ç®€ä»‹ SOCKSæ˜¯ä¸€ç§ç½‘ç»œä¼ è¾“åè®®ï¼Œä¸»è¦ç”¨äºå®¢æˆ·ç«¯ä¸å¤–ç½‘æœåŠ¡å™¨ä¹‹é—´é€šè®¯çš„ä¸­é—´ä¼ é€’ã€‚SOCKSæ˜¯\"SOCKetS\"çš„ç¼©å†™ã€‚ å½“é˜²ç«å¢™åçš„å®¢æˆ·ç«¯è¦è®¿é—®å¤–éƒ¨çš„æœåŠ¡å™¨æ—¶ï¼Œå°±è·ŸSOCKSä»£ç†æœåŠ¡å™¨è¿æ¥ã€‚è¿™ä¸ªä»£ç†æœåŠ¡å™¨æ§åˆ¶å®¢æˆ·ç«¯è®¿é—®å¤–ç½‘çš„èµ„æ ¼ï¼Œå…è®¸çš„è¯ï¼Œå°±å°†å®¢æˆ·ç«¯çš„è¯·æ±‚å‘å¾€å¤–éƒ¨çš„æœåŠ¡å™¨ã€‚ ä¸»è¦é‡ç‚¹åœ¨äºï¼š è®¤è¯ å»ºç«‹è¿æ¥ è½¬å‘æ•°æ® ","date":"2022-01-28","objectID":"/posts/network/socks5/0.html/:1:0","tags":["network","socks5"],"title":"simple socks5 proxy \u0026 the c10k problem","uri":"/posts/network/socks5/0.html/"},{"categories":["network"],"content":"c10ké—®é¢˜ é€šè¿‡socks5äºŒè¿›åˆ¶åè®®å¯ä»¥å®ç°ä¸€ä¸ªé«˜æ€§èƒ½çš„ç½‘ç»œæœåŠ¡å™¨ä»£ç†ã€‚è€Œè¯´åˆ°æœåŠ¡å™¨ä»£ç†çš„æ€§èƒ½ç›¸å…³ï¼Œæˆ‘ä»¬ä¸ç”±å¾—æƒ³åˆ°ç»å…¸çš„c10ké—®é¢˜ã€‚ è§£å†³c10ké—®é¢˜çš„ä¸»è¦æ€è·¯å…¶å®éå¸¸ç®€å•ï¼Œåˆ†åˆ«æ˜¯ï¼š å¯¹äºæ¯ä¸ªè¿æ¥å¤„ç†åˆ†é…ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹/çº¿ç¨‹ï¼› ç”¨åŒä¸€è¿›ç¨‹/çº¿ç¨‹æ¥åŒæ—¶å¤„ç†è‹¥å¹²è¿æ¥ï¼› é¦–å…ˆç¬¬ä¸€ä¸ªæ€è·¯æ˜¯æœ€ç›´æ¥çš„æ–¹å¼ï¼Œä½†æ˜¯èµ„æºæ˜¯æœ‰é™çš„ï¼ˆåœ¨æˆ‘çœ‹æ¥ï¼Œæ€§èƒ½é—®é¢˜çš„èµ·å› å°±æ˜¯èµ„æºæœ‰é™ï¼‰ã€‚ æ‰€ä»¥é—®é¢˜éå¸¸æ˜æ˜¾ï¼Œèµ„æºå ç”¨è¿‡å¤šï¼Œå¯æ‰©å±•æ€§ä¹Ÿéå¸¸å·®ã€‚ è€Œç¬¬äºŒä¸ªæ€è·¯å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„IOå¤šè·¯å¤ç”¨çš„é—®é¢˜ã€‚ é‚£IOå¤šè·¯å¤ç”¨æœ€ç›´æ¥çš„æ–¹å¼å°±æ˜¯ä»å¾ªç¯å¤„ç†å¼€å§‹ï¼Œéå†å¤„ç†å„ä¸ªsocketï¼Œè‹¥socketä¸­éƒ½æœ‰æ•°æ®ï¼Œè¿™ç§æ–¹å¼æ˜¯å¯è¡Œçš„ã€‚ä½†å½“åº”ç”¨è¯»å–æŸä¸ªsocketçš„æ–‡ä»¶æ•°æ®äº§ç”Ÿäº†å µå¡ï¼Œå³éreadyçŠ¶æ€ï¼Œåˆ™æ•´ä¸ªåº”ç”¨ä¼šé˜»å¡åœ¨è¿™é‡Œç­‰å¾…è¯¥æ–‡ä»¶å¥æŸ„ï¼Œä»è€Œæ— æ³•å¤„ç†å…¶ä»–æ–‡ä»¶å¥æŸ„ã€‚ è¿™é‡Œå°±éœ€è¦æåˆ°selectã€pollã€epollè¿™ä¸‰ä¸ªæŠ€æœ¯äº†ã€‚ è¿™é‡Œæˆ‘ç®€å•æ€»ç»“ä¸€ä¸‹ï¼š select æ¯æ¬¡è°ƒç”¨åˆå§‹åŒ–fd_set ç»“æ„ä½“ï¼Œåˆ©ç”¨fd_setç»“æ„ä½“åœ¨å†…æ ¸åŒæ—¶ç›‘æ§å¤šä¸ªæ–‡ä»¶å¥æŸ„ï¼Œé€šè¿‡FD_ISSETæ¥æŸ¥çœ‹å…·ä½“æŸä¸ªæ–‡ä»¶å¥æŸ„æ˜¯å¦å‘ç”Ÿå˜åŒ–(ready/unready)ã€‚ æ€è·¯ï¼šæœ‰è¿æ¥è¯·æ±‚è¿›è¡Œæ— å·®åˆ«è½®è¯¢æ£€æŸ¥ã€‚ é—®é¢˜ï¼šå¥æŸ„ä¸Šé™+é‡å¤åˆå§‹åŒ–+é€ä¸ªæ’æŸ¥æ‰€æœ‰æ–‡ä»¶å¥æŸ„æ•ˆç‡ä½ã€‚ poll pollæœ¬è´¨ä¸Šå’Œselectæ²¡æœ‰åŒºåˆ«ï¼Œä¸»è¦æ˜¯ç»“æ„ä½“æ˜¯é€šè¿‡ä¸€ä¸ª pollfd æ•°ç»„å‘å†…æ ¸ä¼ é€’éœ€è¦å…³æ³¨çš„äº‹ä»¶æ¶ˆé™¤æ–‡ä»¶å¥æŸ„ä¸Šé™ï¼ˆé€šè¿‡é“¾è¡¨ï¼‰ï¼ŒåŒæ—¶ä½¿ç”¨ä¸åŒå­—æ®µåˆ†åˆ«æ ‡æ³¨å…³æ³¨äº‹ä»¶å’Œå‘ç”Ÿäº‹ä»¶ï¼Œæ¥é¿å…é‡å¤åˆå§‹åŒ–ã€‚ æ€è·¯ï¼šè®¾è®¡æ–°çš„æ•°æ®ç»“æ„æä¾›ä½¿ç”¨æ•ˆç‡ã€‚ é—®é¢˜ï¼šé€ä¸ªæ’æŸ¥æ‰€æœ‰æ–‡ä»¶å¥æŸ„æ•ˆç‡ä½ã€‚ epoll äº‹ä»¶é©±åŠ¨ï¼ˆæ¯ä¸ªäº‹ä»¶å…³è”ä¸Šfdï¼‰ï¼Œè°ƒç”¨è¿”å›çš„æ—¶å€™åªç»™å‘ç”Ÿäº†çŠ¶æ€å˜åŒ–çš„åº”ç”¨æä¾›ï¼ˆå¾ˆå¯èƒ½æ˜¯æ•°æ® readyï¼‰çš„æ–‡ä»¶å¥æŸ„ï¼Œå³åˆ©ç”¨callbackæ–¹å¼è¿›è¡Œå¼‚æ­¥å›è°ƒã€‚ä¸”åˆ©ç”¨mmap()æ–‡ä»¶æ˜ å°„å†…å­˜åŠ é€Ÿä¸å†…æ ¸ç©ºé—´çš„æ¶ˆæ¯ä¼ é€’ï¼›å³epollä½¿ç”¨mmapå‡å°‘å¤åˆ¶å¼€é”€ã€‚ æ€è·¯ï¼šåªè¿”å›çŠ¶æ€å˜åŒ–çš„æ–‡ä»¶å¥æŸ„ã€‚ é—®é¢˜ï¼šä¾èµ–ç‰¹å®šå¹³å°ï¼ˆLinuxï¼‰+ å­˜åœ¨ä¸Šé™ï¼ˆä½†æ˜¯ç›¸å¯¹äºå‰é¢ä¸¤ç§å¾ˆå¤§ï¼‰ã€‚ ç”±äºepoll, kqueue, IOCPæ¯ä¸ªæ¥å£éƒ½æœ‰è‡ªå·±çš„ç‰¹ç‚¹ï¼Œç¨‹åºç§»æ¤éå¸¸å›°éš¾ï¼Œäºæ˜¯éœ€è¦å¯¹è¿™äº›æ¥å£è¿›è¡Œå°è£…ï¼Œä»¥è®©å®ƒä»¬æ˜“äºä½¿ç”¨å’Œç§»æ¤ã€‚è€Œå°±æ˜¯libeventåº“å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚ ç›®å‰ï¼Œlibeventå·²æ”¯æŒä»¥ä¸‹æ¥å£/dev/poll, kqueue, event ports, select, poll å’Œ epollã€‚ selectï¼Œpollï¼Œepolléƒ½æ˜¯IOå¤šè·¯å¤ç”¨çš„æœºåˆ¶ã€‚I/Oå¤šè·¯å¤ç”¨å°±é€šè¿‡ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥ç›‘è§†å¤šä¸ªæè¿°ç¬¦ï¼Œä¸€æ—¦æŸä¸ªæè¿°ç¬¦å°±ç»ªï¼ˆä¸€èˆ¬æ˜¯è¯»å°±ç»ªæˆ–è€…å†™å°±ç»ªï¼‰ï¼Œèƒ½å¤Ÿé€šçŸ¥ç¨‹åºè¿›è¡Œç›¸åº”çš„è¯»å†™æ“ä½œã€‚ä½†selectï¼Œpollï¼Œepollæœ¬è´¨ä¸Šéƒ½æ˜¯åŒæ­¥I/Oï¼Œå› ä¸ºä»–ä»¬éƒ½éœ€è¦åœ¨è¯»å†™äº‹ä»¶å°±ç»ªåè‡ªå·±è´Ÿè´£è¿›è¡Œè¯»å†™ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªè¯»å†™è¿‡ç¨‹æ˜¯é˜»å¡çš„ï¼Œè€Œå¼‚æ­¥I/Oåˆ™æ— éœ€è‡ªå·±è´Ÿè´£è¿›è¡Œè¯»å†™ï¼Œå¼‚æ­¥I/Oçš„å®ç°ä¼šè´Ÿè´£æŠŠæ•°æ®ä»å†…æ ¸æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ã€‚ epollæŠ€æœ¯ä¸­è¿˜æœ‰å‡ ä¸ªç‚¹å€¼å¾—æˆ‘ä»¬å­¦ä¹ ä¸‹ã€‚ epollæ”¯æŒæ°´å¹³è§¦å‘å’Œè¾¹ç¼˜è§¦å‘ã€‚ä¸”å¯¹æ–‡ä»¶æè¿°ç¬¦çš„æ“ä½œæœ‰ä¸¤ç§æ¨¡å¼ï¼š LTæ¨¡å¼ï¼šç¼ºçœçš„å·¥ä½œæ–¹å¼ï¼Œå¹¶ä¸”åŒæ—¶æ”¯æŒblockå’Œno-block socketï¼›å½“epoll_waitæ£€æµ‹åˆ°æè¿°ç¬¦äº‹ä»¶å‘ç”Ÿå¹¶å°†æ­¤äº‹ä»¶é€šçŸ¥åº”ç”¨ç¨‹åºï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ä¸ç«‹å³å¤„ç†è¯¥äº‹ä»¶ã€‚ä¸‹æ¬¡è°ƒç”¨epoll_waitæ—¶ï¼Œä¼šå†æ¬¡å“åº”åº”ç”¨ç¨‹åºå¹¶é€šçŸ¥æ­¤äº‹ä»¶ã€‚ ETæ¨¡å¼ï¼šé«˜é€Ÿå·¥ä½œæ–¹å¼ï¼Œåªæ”¯æŒno-block socketã€‚å½“epoll_waitæ£€æµ‹åˆ°æè¿°ç¬¦äº‹ä»¶å‘ç”Ÿå¹¶å°†æ­¤äº‹ä»¶é€šçŸ¥åº”ç”¨ç¨‹åºï¼Œåº”ç”¨ç¨‹åºå¿…é¡»ç«‹å³å¤„ç†è¯¥äº‹ä»¶ã€‚å¦‚æœä¸å¤„ç†ï¼Œä¸‹æ¬¡è°ƒç”¨epoll_waitæ—¶ï¼Œä¸ä¼šå†æ¬¡å“åº”åº”ç”¨ç¨‹åºå¹¶é€šçŸ¥æ­¤äº‹ä»¶ã€‚ æ°´å¹³è§¦å‘ï¼šå¦‚æœæŠ¥å‘Šäº†fdåï¼Œæ²¡æœ‰è¢«å¤„ç†ï¼Œé‚£ä¹ˆä¸‹æ¬¡pollæ—¶ä¼šå†æ¬¡æŠ¥å‘Šè¯¥fdã€‚ è¾¹ç¼˜è§¦å‘ï¼šå®ƒåªå‘Šè¯‰è¿›ç¨‹å“ªäº›fdåˆšåˆšå˜ä¸ºå°±ç»ªæ€ï¼Œå¹¶ä¸”åªä¼šé€šçŸ¥ä¸€æ¬¡ã€‚ ","date":"2022-01-28","objectID":"/posts/network/socks5/0.html/:2:0","tags":["network","socks5"],"title":"simple socks5 proxy \u0026 the c10k problem","uri":"/posts/network/socks5/0.html/"},{"categories":["network"],"content":"åç¨‹ ä»å‰é¢çš„I/Oå¤šè·¯å¤ç”¨æŠ€æœ¯å¯ä»¥çœ‹å‡ºï¼Œå®é™…ä¸Šepollå·²ç»èƒ½å¤Ÿå¾ˆå¥½çš„å¤„ç†c10ké—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹ŸçŸ¥é“epollçš„ä¸Šé™è¿˜æ˜¯å­˜åœ¨çš„ï¼Œå¯¹äºå¦‚ä»Šè¿™ä¸ªå¯¹ç™¾ä¸‡å¹¶å‘å¸¸è§çš„æ—¶ä»£ï¼Œå¦‚æœè¦è¿›è¡Œè¿›ä¸€æ­¥çš„æ‹“å±•ï¼Œæˆ‘ä»¬å°±éœ€è¦å¼•å…¥æ–°çš„æŠ€æœ¯æ¥è§£å†³ã€‚ äº†è§£å¹¶å‘é—®é¢˜çš„æœ‹å‹å¯èƒ½éƒ½çŸ¥é“è¿™ä¹ˆä¸€ä¸ªé“ç†ï¼šå†…æ ¸ä¸æ˜¯è§£å†³æ–¹æ¡ˆï¼Œè€Œæ˜¯é—®é¢˜æ‰€åœ¨ï¼ å³å¯ä»¥ç†è§£ä¸ºï¼Œå†…æ ¸å¤„ç†æ ¸å¿ƒä»»åŠ¡ï¼Œè€Œå…¶ä»–çš„å°½é‡äº¤ç»™åº”ç”¨ç¨‹åºå¤„ç†æˆ–è€…äº¤ç»™ç”¨æˆ·æ€å»å¤„ç†ã€‚ è€Œåç¨‹å°±æ˜¯èƒ½å¤Ÿå®ç°è¿™ä¸€ç›®çš„çš„æŠ€æœ¯ï¼Œå…¶æ ¸å¿ƒæ€è·¯ä¸ºè¯•å›¾ç”¨ä¸€ç»„å°‘é‡çš„çº¿ç¨‹æ¥å®ç°å¤šä¸ªä»»åŠ¡ï¼Œä¸€æ—¦æŸä¸ªä»»åŠ¡é˜»å¡ï¼Œåˆ™å¯èƒ½ç”¨åŒä¸€çº¿ç¨‹ç»§ç»­è¿è¡Œå…¶ä»–ä»»åŠ¡ï¼Œé¿å…å¤§é‡ä¸Šä¸‹æ–‡çš„åˆ‡æ¢ã€‚æ¯ä¸ªåç¨‹æ‰€ç‹¬å çš„ç³»ç»Ÿèµ„æºå¾€å¾€åªæœ‰æ ˆéƒ¨åˆ†ã€‚è€Œä¸”ï¼Œå„ä¸ªåç¨‹ä¹‹é—´çš„åˆ‡æ¢ï¼Œå¾€å¾€æ˜¯ç”¨æˆ·é€šè¿‡ä»£ç æ¥æ˜¾å¼æŒ‡å®šçš„ï¼ˆè·Ÿå„ç§ callback ç±»ä¼¼ï¼‰ï¼Œä¸éœ€è¦å†…æ ¸å‚ä¸ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°å¼‚æ­¥ã€‚ å…¶æœ¬è´¨å°±æ˜¯å¼‚æ­¥éé˜»å¡æŠ€æœ¯ã€‚ Golangä¸­å¯¹äºåç¨‹çš„å®ç°ï¼Œå’Œå…¶GPMè°ƒåº¦ç­–ç•¥ç­‰å¤„ç†å™¨ç­–ç•¥æ˜¯éå¸¸ä¼˜ç§€çš„ï¼Œå½“ç„¶è¿™é‡Œå°±ä¸è¯¦ç»†è§£é‡Šäº†ï¼Œç¯‡å¹…æœ‰é™ã€‚ å½“ç„¶åŒæ­¥é˜»å¡ç­–ç•¥åœ¨ä¸€äº›å¹¶å‘é‡è¾ƒå°çš„åœºæ™¯ä¹Ÿéå¸¸ä¼˜ç§€ï¼Œä¸ä¼šæµªè´¹èµ„æºï¼Œæ•ˆç‡è¾ƒé«˜ï¼Œè°ƒåº¦è¾ƒå¼‚æ­¥éé˜»å¡æ›´åŠ å®¹æ˜“ã€‚ ä½†æˆ‘ä»¬ä¹Ÿéœ€è¦çŸ¥é“å¼‚æ­¥å›è°ƒç¨‹åºçš„æ€§èƒ½æ˜¯è¦ä¼˜äºåç¨‹æ¨¡å‹çš„ï¼Œå› ä¸ºå¼‚æ­¥å›è°ƒæ˜¯æ²¡æœ‰åˆ‡æ¢å¼€é”€çš„ã€‚ ","date":"2022-01-28","objectID":"/posts/network/socks5/0.html/:2:1","tags":["network","socks5"],"title":"simple socks5 proxy \u0026 the c10k problem","uri":"/posts/network/socks5/0.html/"},{"categories":["network"],"content":"socksä»£ç ç¤ºä¾‹ package socks5 import ( \"encoding/binary\" \"errors\" \"fmt\" \"io\" \"net\" ) /** * user: ZY * Date: 2020/11/24 15:38 */ func main() { server, err := net.Listen(\"tcp\", \":1080\") if err != nil { fmt.Printf(\"Listen failed: %v\\n\", err) return } for { client, err := server.Accept() if err != nil { fmt.Printf(\"Accept failed: %v\", err) continue } go process(client) } } func process(client net.Conn) { if err := Socks5Auth(client); err != nil { fmt.Println(\"auth error:\", err) client.Close() return } target, err := Socks5Connect(client) if err != nil { fmt.Println(\"connect error:\", err) client.Close() return } Socks5Forward(client, target) } func Socks5Auth(client net.Conn) (err error) { buf := make([]byte, 256) // è¯»å– VER å’Œ NMETHODS n, err := io.ReadFull(client, buf[:2]) if n != 2 { return errors.New(\"reading header: \" + err.Error()) } ver, nMethods := int(buf[0]), int(buf[1]) if ver != 5 { return errors.New(\"invalid version\") } // è¯»å– METHODS åˆ—è¡¨ n, err = io.ReadFull(client, buf[:nMethods]) if n != nMethods { return errors.New(\"reading methods: \" + err.Error()) } //æ— éœ€è®¤è¯ n, err = client.Write([]byte{0x05, 0x00}) if n != 2 || err != nil { return errors.New(\"write rsp: \" + err.Error()) } return nil } func Socks5Connect(client net.Conn) (net.Conn, error) { buf := make([]byte, 256) n, err := io.ReadFull(client, buf[:4]) if n != 4 { return nil, errors.New(\"read header: \" + err.Error()) } ver, cmd, _, atyp := buf[0], buf[1], buf[2], buf[3] if ver != 5 || cmd != 1 { return nil, errors.New(\"invalid ver/cmd\") } addr := \"\" switch atyp { case 1: n, err = io.ReadFull(client, buf[:4]) if n != 4 { return nil, errors.New(\"invalid IPv4: \" + err.Error()) } addr = fmt.Sprintf(\"%d.%d.%d.%d\", buf[0], buf[1], buf[2], buf[3]) case 3: n, err = io.ReadFull(client, buf[:1]) if n != 1 { return nil, errors.New(\"invalid hostname: \" + err.Error()) } addrLen := int(buf[0]) n, err = io.ReadFull(client, buf[:addrLen]) if n != addrLen { return nil, errors.New(\"invalid hostname: \" + err.Error()) } addr = string(buf[:addrLen]) case 4: return nil, errors.New(\"IPv6: no supported yet\") default: return nil, errors.New(\"invalid atyp\") } n, err = io.ReadFull(client, buf[:2]) if n != 2 { return nil, errors.New(\"read port: \" + err.Error()) } port := binary.BigEndian.Uint16(buf[:2]) destAddrPort := fmt.Sprintf(\"%s:%d\", addr, port) dest, err := net.Dial(\"tcp\", destAddrPort) if err != nil { return nil, errors.New(\"dial dst: \" + err.Error()) } n, err = client.Write([]byte{0x05, 0x00, 0x00, 0x01, 0, 0, 0, 0, 0, 0}) if err != nil { dest.Close() return nil, errors.New(\"write rsp: \" + err.Error()) } return dest, nil } func Socks5Forward(client, target net.Conn) { forward := func(src, dest net.Conn) { defer src.Close() defer dest.Close() io.Copy(src, dest) } go forward(client, target) go forward(target, client) } ","date":"2022-01-28","objectID":"/posts/network/socks5/0.html/:3:0","tags":["network","socks5"],"title":"simple socks5 proxy \u0026 the c10k problem","uri":"/posts/network/socks5/0.html/"},{"categories":["network"],"content":"å‚è€ƒ C10Ké—®é¢˜ èŠèŠIOå¤šè·¯å¤ç”¨ä¹‹selectã€pollã€epollè¯¦è§£ ","date":"2022-01-28","objectID":"/posts/network/socks5/0.html/:4:0","tags":["network","socks5"],"title":"simple socks5 proxy \u0026 the c10k problem","uri":"/posts/network/socks5/0.html/"},{"categories":["Go"],"content":"netrpcæºç é˜…è¯» [æºç åœ°å€] ","date":"2022-01-28","objectID":"/posts/golang/rpc/1.html/:0:0","tags":["rpc","æ¡†æ¶è®¾è®¡","æºç è§£æ","Go"],"title":"netrpcæºç é˜…è¯»","uri":"/posts/golang/rpc/1.html/"},{"categories":["Go"],"content":"Client.go æ ¸å¿ƒç»“æ„ä½“ï¼š Callï¼šä¸»è¦è¡¨ç¤ºè°ƒç”¨RPCè¿‡ç¨‹ä¸­çš„ä¿¡æ¯ Clientï¼šä¸»è¦è´Ÿè´£RPCå®¢æˆ·ç«¯ gobClientCodecï¼šä¸»è¦è´Ÿè´£è°ƒç”¨RPCå…·ä½“å®ç°æ–¹æ³• æ ¸å¿ƒæ¥å£ï¼š ClientCodec é‡ç‚¹ï¼š ClientCodecæ¥å£è§„å®šäº†åœ¨è°ƒç”¨è¿‡ç¨‹æœ€ä¸»è¦çš„å‡ ä¸ªå…·ä½“æ­¥éª¤ï¼šWriteRequest()ã€ReadResponseHeader()ã€ReadResponseBody()ã€Close()ï¼› Clientå°è£…äº†RPCå®¢æˆ·ç«¯æœªæš´éœ²çš„ä¸»è¦çš„ä¸¤ä¸ªåŠ¨ä½œå³send()ã€input()ï¼Œåˆ†åˆ«æ˜¯å‘é€æ“ä½œå’Œæ¥æ”¶æ“ä½œï¼Œåˆ©ç”¨äº’æ–¥é”ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œå…¶å¾ªç¯æ¥æ”¶responseä¸”è‹¥å‡ºç°é”™è¯¯åˆ™ç»ˆç»“æ‰æ‰€æœ‰Callç»“æ„ä½“ï¼Œéœ€è¦å…¶ä¸­å¯¹äºCallç»“æ„ä½“çš„å¤„ç†ã€‚è€ŒClientæš´éœ²çš„Go()å’ŒCall()å°±æ˜¯å…¶å®¢æˆ·ç«¯åº“çš„å…¥å£ï¼Œå®è´¨ä¸Šæ˜¯åŒæ­¥è¿›è¡Œæ“ä½œè€Œå¼‚æ­¥è¿›è¡Œè¯·æ±‚å…·ä½“æ–¹æ³•è¿”å›å…¶callä¿¡æ¯ï¼Œä¸”åŒºåˆ«ä¸»è¦åœ¨äºå‰è€…å¤šäº†ä¸€ä¸ªdoneé€šé“å¯ä»¥è¿›è¡Œå¼‚æ­¥é€šä¿¡æ“ä½œï¼ŒCall()å®è´¨ä¸Šä¹Ÿæ˜¯å¯¹äºGo()æ–¹æ³•çš„è°ƒç”¨ï¼› NewClientWith()æ–¹æ³•å³å®¢æˆ·ç«¯åˆå§‹åŒ–å…¶ä¸­åŒ…å«äº†NewClientWithCodec()ï¼Œé»˜è®¤ä»¥gobClientCodecæ–¹å¼ä½œä¸ºRPCè°ƒç”¨å…·ä½“å®ç°æ–¹æ³•ï¼Œä¸”åˆå§‹åŒ–æ—¶åç¨‹å¼€å¯è¿›è¡Œinput()å‡½æ•°è¿›è¡Œæ¥æ”¶ï¼› DailHTTP()æ–¹æ³•å’ŒDial()æ–¹æ³•å³å®¢æˆ·ç«¯ç½‘ç»œå¤„ç†ï¼Œå‰è€…åŒ…å«äº†DialHTTPPath()æ–¹æ³•å³ä»¥HTTPåè®®è¿›è¡Œé€šä¿¡ï¼Œä¸”é»˜è®¤ä¸ºHTTP1.0åè®®ï¼Œåè€…å¯ä»¥è¿æ¥å…¶ç‰¹æ®Šç½‘ç»œåœ°å€ï¼› ","date":"2022-01-28","objectID":"/posts/golang/rpc/1.html/:1:0","tags":["rpc","æ¡†æ¶è®¾è®¡","æºç è§£æ","Go"],"title":"netrpcæºç é˜…è¯»","uri":"/posts/golang/rpc/1.html/"},{"categories":["Go"],"content":"Server.go æ ¸å¿ƒç»“æ„ä½“ï¼š Request/Responseï¼šä¸»è¦è´Ÿè´£è¯·æ±‚è¿”å›æ¶‰åŠrpcçš„ä¿¡æ¯ Serverï¼šä¸»è¦è´Ÿè´£RPCæœåŠ¡ç«¯ gobServerCodecï¼šä¸»è¦è´Ÿè´£è°ƒç”¨RPCå…·ä½“å®ç°æ–¹æ³• methodType/serviceï¼šä¸»è¦è¡¨ç¤ºè°ƒç”¨æ–¹æ³•å’Œæ³¨å†ŒæœåŠ¡çš„ä¿¡æ¯ æ ¸å¿ƒæ¥å£ï¼š ServerCodec é‡ç‚¹ï¼š isExportedOrBuiltinType()æ–¹æ³•åˆ¤æ–­ç±»å‹æ˜¯å¦ä¸ºå¯¼å‡ºè¿˜æ˜¯å†…ç½®çš„ï¼Œåå°„æ–¹æ³•è°ƒç”¨ä¸­éœ€è¦ä¿è¯å…¶ç±»å‹å’Œæ–¹æ³•ä¸ºå¯å¯¼å‡ºçš„ï¼› Serverå°è£…äº†å…¶æœåŠ¡ç«¯ä¸»è¦çš„æ–¹æ³•ï¼Œæ¶‰åŠåˆ°Register()ã€ServerConn()ã€ServerCode()ã€ServerRequest()ã€ServerResponse()ã€Accepct()ã€ServerHTTP()ç­‰ï¼› Register()æ–¹æ³•åŠRegisterName()æ–¹æ³•éƒ½æ˜¯ä¸»è¦ä½œç”¨ä¸ºæ³¨å†ŒæœåŠ¡ï¼Œå…¶ä¸­æ³¨å†Œçš„æœåŠ¡ä¸­çš„å‚æ•°æ ¼å¼å’Œå‚æ•°ç±»å‹éƒ½æœ‰ç›¸å…³è¦æ±‚ï¼Œæ¶‰åŠåˆ°å‚æ•°ä¸ªæ•°ã€å‚æ•°ç±»å‹ã€å‚æ•°æ˜¯å¦å¯å¯¼å‡ºç­‰ï¼Œä¸»è¦æ˜¯åˆ©ç”¨åå°„è·å–ç›¸å…³ä¿¡æ¯è¿›è¡Œåˆ¤æ–­ï¼› ServeCodec()æ–¹æ³•å’ŒServeRequest()æ–¹æ³•å°±æ˜¯æ¥æ”¶å¤„ç†è¯·æ±‚ï¼Œå°†å¾—åˆ°çš„ä¿¡æ¯è¿›è¡Œç›¸åº”çš„Callæ“ä½œï¼Œå‰è€…ä¸ºå¾ªç¯æ¥æ”¶åŠå¼‚æ­¥è°ƒç”¨ï¼Œä¸”ä¿è¯é˜»å¡ç›´è‡³æ‰€æœ‰Callè°ƒç”¨å®Œæˆï¼Œåè€…åˆ™ä¸ºä¸€æ¬¡æ€§è°ƒç”¨ä¸”ä¸ºåŒæ­¥è°ƒç”¨ï¼› è¯·æ±‚ä¸­çš„ä¿¡æ¯éœ€è¦å…ˆè¿›è¡Œè§£ç åï¼Œç»è¿‡å¤„ç†åå†ç¼–ç å‘é€å…¶è¿”å›ä¿¡æ¯ï¼Œå…¶ä¸­call()å°±æ˜¯å¤„ç†è¿‡ç¨‹ä¸­çš„æ ¸å¿ƒæ–¹æ³•ï¼Œæ¶‰åŠinvokeæœåŠ¡æ–¹æ³•å¹¶ç¼–ç è¿›è¡Œè¿”å›ï¼› ServeHTTP()æ–¹æ³•å¤„ç†å…¶æœåŠ¡ç«¯çš„ç½‘ç»œè¿æ¥ï¼Œæ³¨å†Œåˆå§‹åŒ–æœåŠ¡ç«¯è¿æ¥ç›¸å…³ä¿¡æ¯ï¼Œè¿›è¡ŒHTTP1.0åè®®çš„é€šä¿¡ï¼› ","date":"2022-01-28","objectID":"/posts/golang/rpc/1.html/:2:0","tags":["rpc","æ¡†æ¶è®¾è®¡","æºç è§£æ","Go"],"title":"netrpcæºç é˜…è¯»","uri":"/posts/golang/rpc/1.html/"},{"categories":["Go"],"content":"RPCæ¡†æ¶è®¾è®¡æ¦‚è¦ ä»¥ä¸‹ä¸ºä¸ªäººç†è§£ï¼Œæ¬¢è¿ä¸€èµ·æ¢è®¨ ï¼ˆä¸ªäººç†è§£ï¼‰RPC å°±æ˜¯æŠŠæ‹¦æˆªåˆ°çš„æ–¹æ³•å‚æ•°ï¼Œè½¬æˆå¯ä»¥åœ¨ç½‘ç»œä¸­ä¼ è¾“çš„äºŒè¿›åˆ¶ï¼Œå¹¶ä¿è¯åœ¨æœåŠ¡æä¾›æ–¹èƒ½æ­£ç¡®åœ°è¿˜åŸå‡ºè¯­ä¹‰ï¼Œæœ€ç»ˆå®ç°åƒè°ƒç”¨æœ¬åœ°ä¸€æ ·åœ°è°ƒç”¨è¿œç¨‹çš„ç›®çš„ã€‚ ","date":"2022-01-28","objectID":"/posts/golang/rpc/0.html/:0:0","tags":["rpc","æ¡†æ¶è®¾è®¡","Go"],"title":"RPCæ¡†æ¶è®¾è®¡æ¦‚è¦","uri":"/posts/golang/rpc/0.html/"},{"categories":["Go"],"content":"RPCè°ƒç”¨æ¶‰åŠåˆ°çš„ç¯èŠ‚ socket åè®® å¯»å€ åºåˆ—åŒ–å’Œååºåˆ—åŒ– å¼‚å¸¸å¤„ç† å¯ä»¥å‚è€ƒDubboæ¡†æ¶çš„è°ƒç”¨è¿‡ç¨‹ï¼š ","date":"2022-01-28","objectID":"/posts/golang/rpc/0.html/:1:0","tags":["rpc","æ¡†æ¶è®¾è®¡","Go"],"title":"RPCæ¡†æ¶è®¾è®¡æ¦‚è¦","uri":"/posts/golang/rpc/0.html/"},{"categories":["Go"],"content":"RPCæ¡†æ¶éœ€è¦è§£å†³çš„é—®é¢˜ å¼€å‘æ•ˆç‡ æ¡†æ¶çš„åˆè¡·å³æ˜¯ä¸ºäº†å¼€å‘æ•ˆç‡ã€‚ é€šä¿¡æ•ˆç‡ RPCè°ƒç”¨ç¯èŠ‚ä¸­çš„é€šä¿¡æ˜¯ä¸å¯é¿å…çš„ã€‚ æ•°æ®ä¼ è¾“ éœ€è¦æ³¨æ„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼Œè¿˜æœ‰å°±æ˜¯åè®®å†³å®šçš„ä¼ è¾“æ•ˆç‡ã€‚ é€šç”¨åŒ– åšåˆ°æ‰€æœ‰çš„ç»„ä»¶æ˜¯å¾®æœåŠ¡åŒ–ï¼Œä¸”ç»„ä»¶æ”¯æŒä¸šåŠ¡è‡ªå®šä¹‰çš„ã€‚ æœåŠ¡æ²»ç† æ¶‰åŠåˆ°æœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ã€è¶…æ—¶ã€é‡è¯•ã€é™æµã€ç†”æ–­ã€åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªç­‰ã€‚ å•æœºæ¶æ„ï¼š ","date":"2022-01-28","objectID":"/posts/golang/rpc/0.html/:2:0","tags":["rpc","æ¡†æ¶è®¾è®¡","Go"],"title":"RPCæ¡†æ¶è®¾è®¡æ¦‚è¦","uri":"/posts/golang/rpc/0.html/"},{"categories":["Go"],"content":"æºç é˜…è¯»æ¨è GoNetRpc(https://github.com/golang/go/tree/master/src/net/rpc) grpc(https://github.com/grpc/grpc) rpcx(https://rpcx.io/) ","date":"2022-01-28","objectID":"/posts/golang/rpc/0.html/:3:0","tags":["rpc","æ¡†æ¶è®¾è®¡","Go"],"title":"RPCæ¡†æ¶è®¾è®¡æ¦‚è¦","uri":"/posts/golang/rpc/0.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":"2021 åˆåˆ°äº†æ–°çš„ä¸€å¹´ï¼Œæƒ³äº†æƒ³è¿˜æ˜¯æ¥æ€»ç»“ä¸‹å§ã€‚ è¿˜æ˜¯æ¥æ¢³ç†ä¸‹è¿™ç³Ÿç³•çš„ä¸€å¹´å§ï¼š 1æœˆï¼šå‡†å¤‡å­¦æ ¡æœŸæœ«è€ƒè¯•ï¼Œæœˆåº•å®ä¹ å…¥èŒï¼› 2æœˆï¼šç†Ÿæ‚‰å…¬å¸å†…éƒ¨å„ç§ç¯å¢ƒï¼Œæ¥è§¦åˆ†äº«æ–¹é¢ä¸šåŠ¡ï¼› 3æœˆï¼šå®Œæˆäº†åœ¨å…¬å¸çš„ç¬¬ä¸€ä¸ªéœ€æ±‚ï¼ˆå±äºä¼˜åŒ–çš„æŠ€æœ¯éœ€æ±‚ä¸”éš¾åº¦ä¸å¤§ï¼‰ï¼› 4æœˆ-5æœˆä¸Šæ—¬ï¼šå®Œæˆäº†åœ¨å…¬å¸çš„ç¬¬ä¸€ä¸ªP0çº§æ´»åŠ¨éœ€æ±‚å’Œå¤ç›˜ï¼› 5æœˆä¸­ä¸‹æ—¬ï¼šå®Œæˆäº†åœ¨å…¬å¸çš„ç¬¬ä¸€ä¸ªé‡æ„ä¼˜åŒ–æ–¹é¢çš„æŠ€æœ¯éœ€æ±‚ï¼› 6æœˆï¼šå›åˆ°å­¦æ ¡å‡†å¤‡æœŸæœ«è€ƒè¯•å’Œé›†ä¸­å¤„ç†å­¦æ ¡äº‹åŠ¡ï¼› 7æœˆï¼šæ·±æŒ–ç†è§£å…¬å¸å†…éƒ¨çš„æŸä¸šåŠ¡æŠ€æœ¯ç»„ä»¶å’Œç†Ÿæ‚‰äº¤æ¥è¿‡æ¥çš„ä¸šåŠ¡æŠ€æœ¯ç»„ä»¶ï¼Œå¹¶å‡†å¤‡ä¸²è®²å’Œå®ä¹ è½¬æ­£ç­”è¾©ï¼› 8æœˆ-10æœˆä¸Šæ—¬ï¼šå®Œæˆäº†åœ¨å…¬å¸çš„ç¬¬äºŒä¸ªP0çº§æ´»åŠ¨éœ€æ±‚å’Œå¤ç›˜ï¼› 10æœˆä¸­ä¸‹æ—¬ï¼šå®ä¹ è½¬æ­£ç­”è¾©é¡ºåˆ©é€šè¿‡ï¼› 11æœˆ-12æœˆï¼šå®ä¹ å‰æœ€åçš„æ´»åŠ¨é¡¹ç›®éœ€æ±‚è¿›è¡Œä¸­ï¼› æ¦‚æ‹¬ä¸‹æ¥å…¶å®å¤§éƒ¨åˆ†å°±æ˜¯æ¥åˆ°åŒ—äº¬ä¹‹åçš„å®ä¹ ç”Ÿæ´»ï¼Œè™½ç„¶é€æ¸æ²¦ä¸ºæ‰“å·¥äººçš„å½¢çŠ¶ï¼Œä½†è¿˜æ˜¯å°è¯•äº†å¾ˆå¤šæ–°çš„äº‹ç‰©ã€‚ åšå¾—å¥½çš„åœ°æ–¹çœ‹ä¸‹æ¥ï¼Œæœ€ä¸ºé‡è¦çš„å°±æ˜¯ç†Ÿæ‚‰äº†é¡¹ç›®å·¥ç¨‹åŒ–å’Œæ›´ä¸ºæ·±åˆ»çš„ä¸šåŠ¡åœºæ™¯ç†è§£ã€‚ é—æ†¾çš„åœ°æ–¹çœ‹ä¸‹æ¥ï¼Œç¼ºå°‘è®©è‡ªå·±æ»¡æ„çš„äº®ç‚¹å’Œå…»æˆäº†å„ä¸ªåœºæ™¯å®¹æ˜“å½¢æˆæƒ¯æ€§çš„åæ¯›ç—…ã€‚ æœ‰å¾ˆå¤šæƒ³åšçš„äº‹æƒ…å› ä¸ºè‡ªå·±çš„æ‡’æƒ°å’Œæ•ˆç‡ï¼Œæš‚æ—¶è¢«æç½®åœ¨ä¸€æ—ï¼Œæ€»å¾—æ¥è¯´è¿˜æ˜¯å˜æ‡’äº†å‘€ã€‚ åœ¨æŒ‰ç…§æƒ¯ä¾‹æ¢³ç†2022å¹´çš„flagä¹‹å‰ï¼Œå…ˆçœ‹çœ‹å»å¹´çš„flagå®Œæˆæƒ…å†µï¼š æ»¡æ„çš„å®ä¹ ç»å† ç†æƒ³çš„è½¬æ­£å·¥ä½œ æ‹’ç»æŒ‚ç§‘ å®Œæˆå­¦ä¹ æ¸…å•ä¸Šé¢çš„ä»»åŠ¡(1/5) ä¹¦å•è¿›åº¦(1/10) å†™ä¸€ä¸ªå±äºè‡ªå·±çš„é¡¹ç›® Begonia(0%) çº¢å²©ç½‘æ ¡å·¥ä½œç«™å·¥ä½œåœ†æ»¡ç»“æŸ å¼€åˆ›ä¸ªäººå¾®ä¿¡å…¬ä¼—å·å…¼åšå®¢(1%) ä¸ºç½‘æ ¡åœ¨æŠ€æœ¯æ–¹é¢è´¡çŒ®åŠ›é‡(0%) å¥èº«(5%) æ¯å‘¨è·‘æ­¥ä¸¤æ¬¡(10%) å› ä¸ºå®ä¹ å·¥ä½œçš„äº‹æƒ…ï¼Œæ— è®ºæ˜¯å¿ƒæ€è¿˜æ˜¯æ—¶é—´ï¼Œå¥½å¤šflagéƒ½æ²¡æœ‰å®Œæˆï¼Œä¹Ÿæ˜¯é—æ†¾çš„ä¸€ç‚¹ã€‚ é‚£ä¹ˆ2022å¹´çš„flagå¸Œæœ›éƒ½èƒ½å¤Ÿå®ç°å§ã€‚ æŠ€æœ¯å­¦ä¹ ç›¸å…³ï¼š å®ä¹ \u0026æ­£å¼ç›¸å…³å·¥ä½œè¾¾åˆ°é¢„æœŸ æ¯•ä¸šè®¾è®¡ ä¹¦å•\u0026è¯¾ç¨‹è¿›åº¦ï¼ˆæ¶æ„æ–¹å‘ã€æŠ€æœ¯åŸºç¡€æ–¹å‘ã€Rustæ–¹å‘ï¼‰ Begonia è½å®è‡ªå·±æ»¡æ„çš„äº®ç‚¹ï¼ˆæ€§èƒ½ä¼˜åŒ–æ–¹å‘ã€æŠ€æœ¯ç»„ä»¶æ–¹å‘ã€ä¸šåŠ¡åœºæ™¯æ–¹å‘ï¼‰ ç»è¥å¾®ä¿¡å…¬ä¼—å·å…¼åšå®¢ åšåˆ°ç‹¬å½“ä¸€é¢è¦æ±‚ï¼ˆå·¥ç¨‹ç ”å‘æ¨¡å‹ï¼‰ ä¸ªäººç”Ÿæ´»ç›¸å…³ï¼š æ»‘æ¿\u0026ç¯®çƒ\u0026è·³èˆ å°è¯•å¥èº« æ¯å‘¨è¿åŠ¨ å°è¯•å†™ä½œ ","date":"2022-01-28","objectID":"/posts/daily_life/life_record/1.html/:0:0","tags":["ç”Ÿæ´»éšç¬”","å¹´åº¦æ€»ç»“","æ—¥å¸¸ç”Ÿæ´»"],"title":"2021å¹´åº¦æ€»ç»“","uri":"/posts/daily_life/life_record/1.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":"2020 åˆåˆ°äº†ä¸€å¹´çš„æœ«å°¾ï¼Œè§åˆ°å‘¨å›´è®¸å¤šäººéƒ½å¼€å§‹ä¹¦å†™è‡ªå·±çš„å¹´ç»ˆæ€»ç»“ï¼Œè™½ç„¶æ¯ä¸€å¹´è‡ªå·±éƒ½æœ‰è¿™ä¸ªæƒ³æ³•ï¼Œä½†æ˜¯æ¯æ¬¡å†™åˆ°ä¸€åŠçš„æ—¶å€™å¿ƒæƒ…å°±å¼€å§‹å‘ç”Ÿä¸€äº›å˜åŒ–ï¼Œå¯èƒ½å›æƒ³ç€å…¶ä»–äººçš„æ€»ç»“ä¸è‡ªå·±çš„å¯¹æ¯”ä¼šäº§ç”Ÿçš„è½å·®æ„Ÿï¼Œä¹Ÿå¯èƒ½å›æƒ³ç€è‡ªå·±æ²¡æœ‰å®ç°çš„ç›®æ ‡ä¼šè§‰å¾—æœ‰å¾ˆå¤šé—æ†¾ï¼Œæœ€åå…¨é€‰æ‰€é€‰å†…å®¹åˆ é™¤ï¼Œä»¥å¤æ‚çš„å¿ƒæƒ…ä¸ºè‡ªå·±çš„ä¸€å¹´ç”»ä¸Šä¸å®Œç¾çš„å¥å·ã€‚ äºæ˜¯åˆåˆ°ä»Šå¹´çš„è¿™ä¸€å¤©ï¼Œæƒ³ä¸‹å®šå†³å¿ƒè®¤çœŸå†™ä¸‹è‡ªå·±çš„å¹´ç»ˆæ€»ç»“ã€‚é¦–å…ˆæˆ‘ä¸ç”±å¾—æ€è€ƒå¹´ç»ˆæ€»ç»“çš„æ„ä¹‰ï¼Œåˆæˆ–è€…æˆ‘æœ‰æ²¡æœ‰å¿…è¦èŠ±ä¸Šè¿™æ®µæ—¶é—´å»åšäº‹æƒ…ï¼Œå› ä¸ºå¾ˆå¤šæ—¶å€™ï¼Œæˆ‘æ€»æ˜¯ä¼šè¢«å‘¨å›´çš„æƒ³æ³•æ‰€å¼•å¯¼ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸å¥½çš„ä¹ æƒ¯ï¼Œç”±æ­¤ä¹Ÿå¯ä»¥çœ‹å‡ºæˆ‘åœ¨å¯¹äºæŸä»¶äº‹æƒ…è‹¥ä¸å¤Ÿè‡ªä¿¡ï¼Œå°±ä¼šä¸è‡ªè§‰åœ°ä¼šè¢«ä»–äººæ‰€å½±å“ï¼Œä»è€Œæ”¾å¼ƒè‡ªå·±çš„æ€è€ƒã€‚ å›åˆ°å¹´ç»ˆæ€»ç»“çš„æ„ä¹‰ï¼Œåº”è¯¥æ˜¯å¯¹äºç”Ÿæ´»çš„è®°å½•ï¼Œå¯¹äºè‡ªæˆ‘çš„åæ€ï¼Œå¯¹äºä»–äººçš„åˆ†äº«ã€‚éšç€å¹´é¾„è¶Šæ¥è¶Šå¤§ï¼Œè¶Šå‘æ„Ÿè§‰æ—¶é—´è¶Šèµ°è¶Šå¿«ï¼Œå¯¹äºä»¥å‰ä¸å–œæ¬¢è®°å½•ç”Ÿæ´»çš„æˆ‘ï¼Œç°åœ¨ä¹Ÿå˜å¾—è¶Šå‘çæƒœå¦‚ä»Šçš„ç”Ÿæ´»ã€‚è¯´èµ·é•¿å¤§çš„å˜åŒ–ï¼Œå¯èƒ½æœ€å¤§çš„å°±æ˜¯è‡ªæˆ‘çš„åæ€ï¼Œè§è¯†å¾—è¶Šå¤šè¶Šèƒ½è®¤è¯†åˆ°è‡ªå·±çš„æ¸ºå°ä¸æ— åŠ©ï¼Œæ€»æ˜¯è§‰å¾—è‡ªå·±è¿˜ç¼ºå°‘äº›ä»€ä¹ˆï¼Œæ— è®ºä¸ä»–äººç›¸æ¯”è¿˜æ˜¯ä¸è‡ªå·±ç›¸æ¯”ï¼Œæ€»æ˜¯ä¸èƒ½è®©è‡ªå·±æ»¡æ„ã€‚ å¥½äº†ï¼Œè¯´äº†è¿™ä¹ˆå¤šè¿˜æ˜¯æ¥å›é¡¾ä¸€ä¸‹è¿™ç³Ÿç³•çš„ä¸€å¹´å§ã€‚ 1æœˆï¼šå­¦æ ¡æœŸæœ«è€ƒè¯•çš„é˜¶æ®µï¼Œé™¤äº†æ¯å¤©å¤ä¹ ï¼Œä¹Ÿåœ¨å¿™ç€å­¦ä¹ springboot2ã€pythonã€å·ç§¯åˆ†ç¥ç»ç½‘ç»œç›¸å…³çš„ï¼Œå½“æ—¶å¯¹äºè®¡ç®—æœºè§†è§‰è¿™ä¸€å—æ¯”è¾ƒæ„Ÿå…´è¶£ï¼Œè¿˜æ˜¯èŠ±äº†å¾ˆå¤šæ—¶é—´åœ¨è¿™ä¸Šé¢çš„ã€‚ 2æœˆï¼šå¯’å‡æœŸé—´å‘ç”Ÿçš„ç–«æƒ…æ‰“ä¹±äº†è¿‡å¹´çš„è®¡åˆ’ï¼Œåšçš„äº‹æƒ…æ¯”è¾ƒå°‘ï¼Œå¤§æ¦‚è¿˜æ˜¯åœ¨å­¦ä¹ MySQLé«˜æ€§èƒ½åˆ†æå’Œå·ç§¯åˆ†ç¥ç»ç½‘ç»œç›¸å…³çš„ï¼Œè¿˜æœ‰å°±æ˜¯åœ¨åšGoç½‘ç›˜é¡¹ç›®å’ŒæŒä¸Šé‡é‚®é¡¹ç›®ã€‚ 3æœˆ-5æœˆï¼šåœ¨å®¶æ— è®ºæ˜¯ä¸Šè¯¾è¿˜æ˜¯å­¦ä¹ ï¼Œå­¦ä¹ æ•ˆç‡éƒ½æ¯”è¾ƒä½ï¼Œå…¶ä¸­è¿˜å°è¯•å¼€å­¦ä¹ ç›´æ’­ä¹‹ç±»çš„ï¼ŒæœŸé—´ä¸€ç›´ä¹Ÿåœ¨å­¦ä¹ æœºå™¨å­¦ä¹ ç›¸å…³ï¼Œåœ¨å¿™ç€è½»è¯­é¡¹ç›®å’Œä¸€äº›ç½‘è¯¾å®æˆ˜çš„é¡¹ç›®ã€‚ 6æœˆï¼šå›åˆ°å­¦æ ¡å°±å¼€å§‹ç»„ç»‡çš„æ¢å±Šå’ŒæœŸæœ«è€ƒè¯•äº†ï¼Œè™½ç„¶ä¹‹å‰æœ‰å¾ˆå¤šé¡¾è™‘ï¼Œä½†æ˜¯æƒ³äº†æƒ³è¿˜æ˜¯å†³å®šå»ç«é€‰ç»„ç»‡çš„è´Ÿè´£äººï¼Œæœ€åå­¦é•¿å­¦å§ä¹Ÿæ¯”è¾ƒä¿¡ä»»æˆ‘ï¼Œé‡ä»»ä¹Ÿå°±æ‹…ä»»åœ¨æˆ‘èº«ä¸Šäº†ã€‚ 7æœˆ-9æœˆï¼šè¿™æ®µæ—¶é—´å¼€å§‹æ¥æ‰‹å’Œç®¡ç†ç»„ç»‡çš„æ‰€æœ‰äº‹æƒ…ï¼ŒåŒæ—¶ä¹Ÿåœ¨å¿™ç€é‡é‚®å¸®å¾®ä¿¡å°ç¨‹åºçš„é¡¹ç›®ï¼Œç®—ä¸‹æ¥ä¸€å…±å†™äº†å·®ä¸å¤šæœ‰å°†è¿‘60å¤šä¸ªæ¥å£ï¼Œç¬¬ä¸€æ¬¡å†™è¿™ä¹ˆå¤§çš„é¡¹ç›®ï¼Œæ”¶è·è¿˜æ˜¯è›®å¤šçš„ï¼Œè¿™ä¸ªæ—¶é—´æ®µå‡ ä¹ç»„ç»‡å¤§å¤šé¡¹ç›®æˆ‘éƒ½åœ¨æ¥æ‰‹ï¼Œå› ä¸ºçŸ­æ—¶é—´è¿˜ä¸èƒ½è½¬æ¥ç»™å¹²äº‹ã€‚ä¸€è¾¹åœ¨å¤„ç†ç»„ç»‡çš„äº‹æƒ…ï¼ˆä¹Ÿæ˜¯ç»„ç»‡äº‹æƒ…æœ€å¤šçš„æ—¶é—´æ®µï¼‰ï¼Œä¹Ÿä¸€è¾¹å†™ç€é¡¹ç›®ï¼Œè¿™æ®µæ—¶é—´è¿‡å¾—éå¸¸ç´¯ï¼Œå¯èƒ½ä¸å¤ªé€‚åº”é¢†å¯¼è€…çš„èº«ä»½ï¼Œè¿˜ä¸å¤ªä¹ æƒ¯å°†ä»»åŠ¡äº‹æƒ…åˆ†æ‹…ã€‚å¯¹äº†è¿™æ®µäº‹æƒ…ä¹Ÿåœ¨å­¦ä¹ å‰ç«¯çš„ç›¸å…³çŸ¥è¯†ï¼Œä½†æ˜¯å­¦ä¹ çš„æ—¶é—´ä¸æ˜¯å¾ˆå¤šã€‚ 10æœˆï¼šè¿™ä¸ªæœˆåœ¨æ¸æ¸æŠŠé¡¹ç›®è½¬æ¥ç»™å­¦å¼Ÿï¼Œè‡ªå·±ä¹Ÿé€‚åº”äº†ç»„ç»‡é¢†å¯¼è€…çš„èº«ä»½ï¼Œè™½ç„¶äº‹æƒ…è¿˜æ˜¯æ¯”è¾ƒå¤šï¼Œä½†æ˜¯æ²¡æœ‰ä¹‹å‰é‚£ä¹ˆæ…Œä¹±å’Œå¿ƒæ€¥äº†ã€‚åŒæ—¶è¿™ä¸ªæœˆæ¥è§¦åˆ°åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„è¿˜æœ‰å°±æ˜¯CNCFç›¸å…³çš„é¡¹ç›®ï¼Œè‡ªå·±è§‰å¾—æŒºæ„Ÿå…´è¶£çš„ï¼Œä½†æ˜¯æ— å¥ˆè¦å­¦ä¹ çš„ä¸œè¥¿å¤ªå¤šäº†ï¼Œå¹³æ—¶ä¹Ÿå¼€å§‹é€›Goç¤¾åŒºè®ºå›ä¹‹ç±»çš„ã€‚ 11æœˆï¼šè¿˜æ˜¯ä¸€å¦‚æ—¢å¾€å¤„ç†ç»„ç»‡ä¸Šçš„äº‹æƒ…ï¼ŒåŒæ—¶ä¹Ÿåœ¨å‡†å¤‡å¼€å§‹åˆ·leetcodeç®—æ³•é¢˜ï¼Œä¹Ÿåœ¨å­¦ä¹ K8Sæºç ç›¸å…³å’ŒIstioæœåŠ¡ç½‘æ ¼ç›¸å…³ï¼Œå¹³å¸¸ä¹Ÿåœ¨é˜…è¯»ä¸€äº›åšå®¢æ–‡ç« ä¹‹ç±»çš„ï¼Œæœˆæœ«çš„æ—¶å€™å°±å¼€å§‹ç€æ‰‹å‡†å¤‡é¢è¯•çš„äº‹æƒ…äº†ã€‚ 12æœˆï¼šè¾ƒä¸ºå¿ƒç´¯çš„ä¸€ä¸ªæœˆï¼Œé‚£å°±æ˜¯é¢è¯•çš„æŠ˜ç£¨ï¼Œæ— è®ºæ˜¯å‡†å¤‡é¢è¯•è¿˜æ˜¯ç­‰å¾…é¢è¯•ï¼Œæ¯ä¸€å¤©éƒ½è¿‡å¾—èƒ†æˆ˜å¿ƒæƒŠï¼Œçœ‹ç€å‘¨å›´çš„äººéƒ½é™†é™†ç»­ç»­æ”¶åˆ°offerï¼Œå¿ƒé‡Œé¢éƒ½æ¯”è¾ƒç€æ€¥ï¼Œä½†è¿˜å¥½è‡ªå·±æœ€åä¹Ÿæ”¶åˆ°äº†è…¾è®¯å’Œå­—èŠ‚çš„offerï¼Œç®—æ˜¯ç»™é¢è¯•ç”Ÿæ´»ç”»ä¸Šå¥è¯ã€‚ æ€»çš„æ¥çœ‹ï¼Œä¸ŠåŠå¹´æ¥è§¦åˆ°çš„æœºå™¨å­¦ä¹ ã€å·ç§¯åˆ†ç¥ç»ç½‘ç»œã€springboot2ç­‰ï¼Œè™½ç„¶ä¸æˆ‘æœ€åçš„å°±ä¸šæ–¹å‘ä¸åŒä½†è¿˜æ˜¯å­¦ä¹ åˆ°äº†å¾ˆå¤šä¸œè¥¿ï¼Œæ‹“å®½äº†è‡ªå·±çš„é¢†åŸŸï¼Œä¸‹åŠå¹´å¼€å§‹æ¸æ¸æ‰¾åˆ°è‡ªå·±çš„å­¦ä¹ çŠ¶æ€å’Œå­¦ä¹ æ–¹å¼ï¼Œæ‘†è„±äº†ä»¥å‰è¢«åŠ¨çš„çŠ¶æ€ï¼Œå¼€å§‹æ‰¾åˆ°è‡ªå·±æ„Ÿå…´è¶£çš„æ–¹å‘å’ŒçŸ¥è¯†å»å­¦ä¹ ã€‚ è¿™ä¸€å¹´åœ¨æŠ€æœ¯æ–¹é¢å¹¶æ²¡æœ‰å¤ªå¤šæˆé•¿ï¼Œç®—æ˜¯è‡ªå·±çš„ä¸€ä¸ªé—æ†¾ï¼Œå¸Œæœ›ä¸‹ä¸€å¹´èƒ½å¤Ÿå¥½å¥½æŠŠæ¡æ—¶é—´è®¤çœŸå­¦ä¹ ï¼›è€Œåœ¨ä½œä¸ºé¢†å¯¼è€…æ–¹é¢ï¼Œè‡ªå·±ä¹Ÿæœ‰å¾ˆå¤šä¸è¶³çš„åœ°æ–¹éœ€è¦å¤šå¤šæ”¹è¿›ï¼Œå”¯ä¸€çš„é—æ†¾æ˜¯è¿˜å¹¶æ²¡æœ‰å¯¹ç»„ç»‡æŠ€æœ¯æ–¹é¢å¸¦æ¥ä¸€äº›è¾ƒå¤§çš„å¸®åŠ©ï¼Œä¸‹ä¸€å¹´ä¼šæ…¢æ…¢å»åšè¿™ä»¶äº‹æƒ…ã€‚ æŒ‰ç…§æƒ¯ä¾‹ï¼Œæ˜å¹´çš„flagæœ‰ä»¥ä¸‹ï¼Œå¸Œæœ›éƒ½èƒ½å®ç°ï¼š æ»¡æ„çš„å®ä¹ ç»å† ç†æƒ³çš„è½¬æ­£å·¥ä½œ æ‹’ç»æŒ‚ç§‘ å®Œæˆå­¦ä¹ æ¸…å•ä¸Šé¢çš„ä»»åŠ¡ ä¹¦å•è¿›åº¦ å†™ä¸€ä¸ªå±äºè‡ªå·±çš„é¡¹ç›® Begonia çº¢å²©ç½‘æ ¡å·¥ä½œç«™å·¥ä½œåœ†æ»¡ å¼€åˆ›ä¸ªäººå¾®ä¿¡å…¬ä¼—å·å…¼åšå®¢ ä¸ºç½‘æ ¡åœ¨æŠ€æœ¯æ–¹é¢è´¡çŒ®åŠ›é‡ è¡¥å……ä¸€äº›ä¸ªäººç”Ÿæ´»æ–¹é¢çš„flagå§ï¼Œå¸Œæœ›éƒ½èƒ½å®ç°ï¼š å¥èº« æ¯å‘¨è·‘æ­¥ä¸¤æ¬¡ ","date":"2022-01-28","objectID":"/posts/daily_life/life_record/0.html/:0:0","tags":["ç”Ÿæ´»éšç¬”","å¹´åº¦æ€»ç»“","æ—¥å¸¸ç”Ÿæ´»"],"title":"2020å¹´åº¦æ€»ç»“","uri":"/posts/daily_life/life_record/0.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":"ã€Šè›¤èŸ†å…ˆç”Ÿå»çœ‹å¿ƒç†åŒ»ç”Ÿã€‹é˜…è¯» ä»¥ä¸‹ä¸ºé˜…è¯»ã€Šè›¤èŸ†å…ˆç”Ÿå»çœ‹å¿ƒç†åŒ»ç”Ÿã€‹çš„æ‘˜æŠ„å’Œç¬”è®° ","date":"2022-01-28","objectID":"/posts/daily_life/reading/2.html/:0:0","tags":["note","å¿ƒç†å­¦","æ—¥å¸¸ç”Ÿæ´»"],"title":"ã€Šè›¤èŸ†å…ˆç”Ÿå»çœ‹å¿ƒç†åŒ»ç”Ÿã€‹é˜…è¯»","uri":"/posts/daily_life/reading/2.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":"æ–‡ç« æ‘˜å½• ","date":"2022-01-28","objectID":"/posts/daily_life/reading/2.html/:1:0","tags":["note","å¿ƒç†å­¦","æ—¥å¸¸ç”Ÿæ´»"],"title":"ã€Šè›¤èŸ†å…ˆç”Ÿå»çœ‹å¿ƒç†åŒ»ç”Ÿã€‹é˜…è¯»","uri":"/posts/daily_life/reading/2.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":"å„¿ç«¥è‡ªæˆ‘çŠ¶æ€ è‡ªç„¶å‹å„¿ç«¥ï¼ˆåŸºç¡€æƒ…æ„Ÿä¸‹çš„æ¨¡å¼ï¼Œå¦‚å¿«ä¹å’Œæ·±æƒ…ã€æ„¤æ€’ã€æ‚²ä¼¤ã€ææƒ§ç­‰ï¼‰ é€‚åº”å‹å„¿ç«¥ï¼ˆåœ¨åŸºç¡€æƒ…æ„Ÿä¹‹ä¸Šé€‚åº”ä¸åŒç±»å‹çš„ä¾èµ–å¾—åˆ°çš„æ¨¡å¼ï¼Œå¦‚ä¸ºé€‚åº”ä¸¥å‰çš„çˆ¶æ¯è€Œæ©é¥°è‡ªå·±çš„æ‚²ä¼¤ææƒ§ç­‰ï¼‰ ","date":"2022-01-28","objectID":"/posts/daily_life/reading/2.html/:1:1","tags":["note","å¿ƒç†å­¦","æ—¥å¸¸ç”Ÿæ´»"],"title":"ã€Šè›¤èŸ†å…ˆç”Ÿå»çœ‹å¿ƒç†åŒ»ç”Ÿã€‹é˜…è¯»","uri":"/posts/daily_life/reading/2.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":"å„¿ç«¥å¦‚ä½•é‡Šæ”¾æ„¤æ€’ å¼º\u003c-\u003eå¼±ï¼š å›é€†\u003c-æ’’æ³¼ï½œæ€„æ°”ï½œä»»æ€§ï½œéƒé—·ï½œæ‹–å»¶ï½œåŒçƒ¦-\u003eé€€ç¼© æ€„æ°”æ˜¯è¾“å®¶åœ¨å¯¹å¼ºå¤§çš„èµ¢å®¶åšå‡ºååº”ã€‚ å½“æˆå¹´äººæ€„æ°”ã€æ’’æ³¼ã€éƒé—·æˆ–æ˜¯åŒçƒ¦çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæƒ³ä»–ä»¬ç©¶ç«Ÿæ˜¯è¡Œä¸ºä¸å½“ï¼Œè¿˜æ˜¯æ— æ„è¯†æˆ–æ— æ³•æ§åˆ¶åœ°é‡æ¼”ç«¥å¹´çš„è¡Œä¸ºæ¨¡å¼ã€‚ è¿™ç±»è¡Œä¸ºä¼šå¯¼è‡´ä¸¤ä¸ªåæœï¼Œéƒ½æ˜¯è´Ÿé¢çš„ã€‚ç¬¬ä¸€ä¸ªå°±æ˜¯ä¼šè¢«å˜²ç¬‘ï¼Œè€Œæ›´ä¸¥é‡çš„åæœæ˜¯è¿™ç±»è¡Œä¸ºå‘Šè¯‰åˆ«äººï¼Œè¿™äººæ˜¯ä¸ªå¤±è´¥è€…ã€‚ ","date":"2022-01-28","objectID":"/posts/daily_life/reading/2.html/:1:2","tags":["note","å¿ƒç†å­¦","æ—¥å¸¸ç”Ÿæ´»"],"title":"ã€Šè›¤èŸ†å…ˆç”Ÿå»çœ‹å¿ƒç†åŒ»ç”Ÿã€‹é˜…è¯»","uri":"/posts/daily_life/reading/2.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":"ç§˜å¯†åè®® â€˜å…±è°‹â€™ï¼š å·å·åœ°æˆ–æ— æ„è¯†åœ°é…åˆå¯¹æ–¹ï¼Œæ¥ç»™è‡ªå·±åˆ¶é€ ä¸å¿«ï¼Œè¿™å°±æ˜¯åœ¨ç©å¿ƒç†æ¸¸æˆï¼Œè€Œä¸”åœ¨æ¸¸æˆé‡Œè¾“çš„äººæ‰ç®—æ˜¯èµ¢å®¶ã€‚ PLOM(å¯æ€œå¼±å°çš„æˆ‘å‘€) æƒ…å•†ï¼š èªæ˜ä¸ä»…ä»…æ˜¯æ™ºå•†çš„äº‹å„¿ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦æƒ…å•†ã€‚ æ‰“ç ´å¿ƒç†å¹³è¡¡ï¼š ä¹ä¸€å¬ä¼šæ˜¾å¾—æ„šè ¢ã€ä¸åˆé€»è¾‘ï¼Œç”šè‡³è®©äººå®³æ€•ã€‚ä½†æ˜¯è¶Šæ˜¯èƒ½å¸®åŠ©ä½ æ·±å…¥è‡ªæˆ‘çš„æ¦‚å¿µï¼Œä¹Ÿè¶Šå®¹æ˜“å¼•å‘æ¿€çƒˆçš„é˜»æŠ—ã€‚ è¿™äº›æ¦‚å¿µæœ€å®¹æ˜“æ‰“ç ´æˆ‘ä»¬çš„å¿ƒç†å¹³è¡¡ï¼Œå®ƒä»¬æœ€æœ‰å¯èƒ½å¸¦ä½ èµ°å‘æ·±å±‚çš„èœ•å˜ï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹å¾€å¾€æ˜¯ç—›è‹¦çš„ï¼Œæˆ‘æƒ³ä½ ç°åœ¨ä¹Ÿæ„Ÿå—åˆ°äº†ã€‚æˆ‘ä»¬çœ‹åˆ°çš„è‡ªå·±ï¼Œå¹¶ä¸ä¸€å®šæ€»æ˜¯æˆ‘ä»¬å–œæ¬¢çš„æ ·å­ã€‚ä»å½“ä¸‹çš„ä½ ï¼Œå˜æˆä½ æƒ³æˆä¸ºçš„è‡ªå·±ï¼Œå¿…å®šè¦ç»å†è¡Œä¸ºå’Œæ€åº¦çš„è½¬å˜ï¼Œéœ€è¦ä»˜å‡ºè‰°è¾›çš„åŠªåŠ›ï¼Œéœ€è¦å‹‡æ°”å’Œå†³å¿ƒã€‚æ‰€ä»¥ä½ ç°åœ¨åº”è¯¥æ‡‚äº†ï¼Œä¸ºä»€ä¹ˆä½ ä¼šæ‹’ç»æ‰“å¼€è¿™æ‰‡å­¦ä¹ ä¹‹é—¨ï¼Œå› ä¸ºå®ƒé€šå‘ä¸€æ¡è‰°è‹¦ä¹‹è·¯ã€‚ è¿™æ‰‡é—¨ä¹Ÿå¯èƒ½é€šå‘æ·±åˆ»çš„é¢†æ‚Ÿã€‚ ","date":"2022-01-28","objectID":"/posts/daily_life/reading/2.html/:1:3","tags":["note","å¿ƒç†å­¦","æ—¥å¸¸ç”Ÿæ´»"],"title":"ã€Šè›¤èŸ†å…ˆç”Ÿå»çœ‹å¿ƒç†åŒ»ç”Ÿã€‹é˜…è¯»","uri":"/posts/daily_life/reading/2.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":"çˆ¶æ¯çŠ¶æ€ çˆ¶æ¯çŠ¶æ€ï¼š æŒ‘å‰”å‹çˆ¶æ¯äººæ ¼ å›°æƒ‘é˜¶æ®µï¼š å›°æƒ‘æ˜¯å­¦ä¹ è¿‡ç¨‹çš„ç¬¬ä¸€é˜¶æ®µï¼Œå³è¯´æ˜å›ºæœ‰çŸ¥è¯†çš„å±€é™å¼€å§‹è¢«æ‰“ç ´äº†ï¼Œç›´é¢æ–°çš„ä¿¡æ¯æ¥ä¼šæŒ‘æˆ˜ç°æœ‰çš„è§‚å¿µå’Œè¡Œä¸ºæ¨¡å¼ã€‚ å›°æƒ‘äº§ç”Ÿçš„ç„¦è™‘æ˜¯è®©ä½ æ”¹å˜çš„åŠ¨åŠ›ï¼Œå¾ˆå¯èƒ½ä¹Ÿä¼šå¼€å¯ä½ çš„åˆ›é€ åŠ›ã€‚ çˆ¶æ¯çŠ¶æ€ä¸‹çš„è‡ªæˆ‘æ‰¹åˆ¤ï¼š è‡ªæˆ‘æ‰¹åˆ¤æœ€ä¸ºå¼ºçƒˆï¼Œå› ä¸ºæ²¡æœ‰ä¸€ä¸ªæ³•å®˜æ¯”æˆ‘ä»¬è‡ªå·±æ›´ä¸¥è‹›ã€‚ è‡ªæˆ‘æ‰¹åˆ¤ä¼šä¸¥å‰åœ°æƒ©ç½šï¼ŒåŒ…æ‹¬æŠ˜ç£¨è‡ªå·±ï¼Œåœ¨æç«¯æ¡ˆä¾‹é‡Œï¼Œç”šè‡³ä¼šæ–½ä»¥æåˆ‘ã€‚ä½†é—®é¢˜æ˜¯ï¼Œå³ä¾¿å¯¹è‡ªå·±è½»åˆ¤ï¼Œè¿™ç§è°´è´£å’Œæƒ©ç½šä¹Ÿå¯èƒ½ä¼´éšä¸€ç”Ÿï¼Œå˜æˆæ— æœŸå¾’åˆ‘ã€‚ ","date":"2022-01-28","objectID":"/posts/daily_life/reading/2.html/:1:4","tags":["note","å¿ƒç†å­¦","æ—¥å¸¸ç”Ÿæ´»"],"title":"ã€Šè›¤èŸ†å…ˆç”Ÿå»çœ‹å¿ƒç†åŒ»ç”Ÿã€‹é˜…è¯»","uri":"/posts/daily_life/reading/2.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":"æˆäººçŠ¶æ€ æˆäººè‡ªæˆ‘çŠ¶æ€ï¼š ç†æ€§è€Œéæƒ…ç»ªåŒ–è¡Œäº‹ï¼Œä¹Ÿåº”å¯¹ç€æ­¤æ—¶æ­¤åœ°æ­£åœ¨å‘ç”Ÿçš„ç°å®çŠ¶å†µã€‚ çˆ¶æ¯æˆäººå„¿ç«¥çš„ä¸åŒï¼š åœ¨æˆäººçŠ¶æ€ä¸‹ï¼šèƒ½è®¡åˆ’ã€è€ƒè™‘ã€å†³å®šã€è¡ŒåŠ¨ï¼Œèƒ½ç†æ€§è€Œåˆç†åœ°è¡Œäº‹ã€‚å¤„äºè¿™ä¸ªçŠ¶æ€æ—¶ï¼Œæˆ‘ä»¬æ‰€æœ‰çš„çŸ¥è¯†å’ŒæŠ€èƒ½éƒ½èƒ½ä¸ºè‡ªå·±æ‰€ç”¨ï¼Œè€Œä¸å†è¢«è„‘å­é‡Œçˆ¶æ¯è¿‡å»çš„å£°éŸ³æ‰€é©±ä½¿ï¼Œä¹Ÿä¸ä¼šè¢«ç«¥å¹´çš„æƒ…ç»ªæ‰€å›´å›°ã€‚ç›¸åï¼Œæˆ‘ä»¬èƒ½æ€è€ƒå½“ä¸‹çš„çŠ¶å†µï¼ŒåŸºäºäº‹å®æ¥å†³å®šè¦æ€ä¹ˆåšã€‚åªæœ‰åœ¨â€˜æˆäººè‡ªæˆ‘çŠ¶æ€â€™é‡Œï¼Œæ‰èƒ½å­¦åˆ°å…³äºè‡ªæˆ‘çš„æ–°çŸ¥è¯†ã€‚ åœ¨å„¿ç«¥çŠ¶æ€ä¸‹ï¼šä½“éªŒåˆ°ç«¥å¹´çš„æ„Ÿå—ï¼Œå¥½çš„åçš„éƒ½æœ‰ã€‚ä½ ä¼šå†ç°è¿‡å»çš„æƒ…å½¢ï¼Œå†æ¬¡ä½“éªŒè¿‡å»çš„æƒ…ç»ªï¼Œå¯ä½ å­¦ä¸åˆ°ä»»ä½•æ–°çš„ä¸œè¥¿ã€‚ åœ¨çˆ¶æ¯çŠ¶æ€ä¸‹ï¼šåŸºæœ¬ä¸Šä½ ä¸æ˜¯åœ¨æŒ‘å‰”å°±æ˜¯åœ¨æ•™è‚²åˆ«äººã€‚ä¸ç®¡æ˜¯å“ªç§ï¼Œä½ éƒ½åœ¨ç”¨è¨€è¡Œé‡å¤ä»çˆ¶æ¯é‚£é‡Œå­¦æ¥çš„è§‚å¿µå’Œä»·å€¼è§‚ï¼Œä½ ä¼šæƒ³è¯æ˜ç»™åˆ«äººçœ‹ï¼Œè®©åˆ«äººæ¥å—ä½ çš„è§‚å¿µå’Œä»·å€¼è§‚ã€‚è¿™ç§ç¡®ä¿¡æ— ç–‘çš„çŠ¶æ€ï¼Œå°±æ²¡æ³•ç»™æ–°çŸ¥è¯†å’Œæ–°ç†å¿µç•™å‡ºä¸€å¸­ä¹‹åœ°ã€‚æ—§çš„æ€æƒ³ä¸»å®°ç€ä½ ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå•é äº‰è®ºä¸èƒ½æ”¹å˜ä¸€ä¸ªäººçš„æƒ³æ³•ï¼Œåªä¼šè®©äººæ›´å›ºæ‰§å·±è§ã€‚ ","date":"2022-01-28","objectID":"/posts/daily_life/reading/2.html/:1:5","tags":["note","å¿ƒç†å­¦","æ—¥å¸¸ç”Ÿæ´»"],"title":"ã€Šè›¤èŸ†å…ˆç”Ÿå»çœ‹å¿ƒç†åŒ»ç”Ÿã€‹é˜…è¯»","uri":"/posts/daily_life/reading/2.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":"å¦‚ä½•è¿›å…¥æˆäººçŠ¶æ€ è¿›å…¥æˆäººçŠ¶æ€å‰çš„é€‰æ‹©ï¼š éš¾ï¼Œæ˜¯å› ä¸ºè¿™ä¸ªè¿‡ç¨‹éœ€è¦è‰°è¾›çš„åŠªåŠ›å’Œåˆ»æ„çš„æ€è€ƒã€‚æˆ‘ä»¬åœ¨å¦å¤–ä¸¤ç§çŠ¶æ€æ—¶ï¼Œåƒçˆ¶æ¯æˆ–å„¿ç«¥ä¸€æ ·è¡Œäº‹ï¼Œå‡ ä¹ä¸éœ€è¦å»æ€è€ƒï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“è¦åšä»€ä¹ˆã€è¯´ä»€ä¹ˆï¼Œå°±å¥½åƒåœ¨æ¼”æˆä¸€æ ·ã€‚ æˆ‘è®¤ä¸ºæ²¡æœ‰äººèƒ½â€˜è®©â€™æˆ‘ä»¬äº§ç”Ÿä»€ä¹ˆæ„Ÿå—ï¼Œé™¤éä»–ä»¬ç”¨è›®åŠ›èƒè¿«ä½ ã€‚è¯´åˆ°åº•ï¼Œæ˜¯æˆ‘ä»¬â€˜é€‰æ‹©â€™äº†è‡ªå·±çš„æ„Ÿå—ã€‚æˆ‘ä»¬â€˜é€‰æ‹©â€™äº†æ„¤æ€’ï¼Œæˆ‘ä»¬â€˜é€‰æ‹©â€™äº†æ‚²ä¼¤ã€‚ æ˜¯çš„ï¼Œé€‰æ‹©å°±æ˜¯ï¼šä½ è¿˜è¦ä¸ºè‡ªå·±çš„ä¸å¿«ä¹è´£æ€ªåˆ«äººå¤šä¹…ï¼Ÿ æˆ‘ä¸ç¡®å®šæ˜¯å¦æ‡‚ä½ çš„æ„æ€ï¼Œä½ æ˜¯è¯´ï¼Œæˆ‘è¯¥ä¸ºè‡ªå·±çš„è¡Œä¸ºè´Ÿè´£ï¼Ÿ è¿˜åŒ…æ‹¬ä½ è‡ªå·±çš„æƒ…ç»ªï¼Œè¿™æ‰æ˜¯æˆå¹´äººä¼šåšçš„äº‹æƒ…ã€‚æ¯«æ— ç–‘é—®ï¼Œè¿™å¾ˆéš¾ï¼Œä½†ç›¸æ¯”äºè´£æ€ªåˆ«äººï¼Œå®ƒè¿˜çœŸæœ‰ä¸ªå¤©å¤§çš„å¥½å¤„ã€‚ å°±æ˜¯ï¼Œä½ èƒ½å¼€å§‹å¯¹æ­¤è¡ŒåŠ¨äº†ã€‚å¦‚æœä½ ä¸ºè‡ªå·±è´Ÿè´£ï¼Œå°±ä¼šè®¤è¯†åˆ°ä½ å¯¹è‡ªå·±æ˜¯æœ‰è‡ªä¸»æƒçš„ã€‚å› æ­¤ä½ å°±çŸ¥é“è‡ªå·±æœ‰åŠ›é‡æ¥æ”¹å˜å¤„å¢ƒï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œæœ‰åŠ›é‡æ”¹å˜ä½ è‡ªå·±ã€‚ â€œåŸè°…ä»–ä»¬ã€‚â€ æ´»å¾—çœŸå®ï¼š æ‰€è°“æ´»å¾—çœŸå®ï¼Œå°±æ˜¯çœŸè¯šåœ°å›åº”å½“ä¸‹çš„éœ€æ±‚ã€‚è¿™èƒ½æ‰“ç ´ä»ç«¥å¹´å»¶ç»­è€Œæ¥çš„å› æœå¾ªç¯ï¼Œè®©çœŸå®çš„è‡ªæˆ‘æ‘†è„±è¿‡å»ç»å†çš„æŸç¼šï¼Œåœ¨è‡ªç”±ä¸­æˆä¸ºçœŸæ­£çš„è‡ªå·±ã€‚ å‰§æœ¬è®¾è®¡ï¼š äººç”Ÿçš„å‰§æƒ…è‹¥èƒ½é¿å¼€â€˜æ®‹æš´å‘½è¿å¦‚æŠ•çŸ³é£ç®­èˆ¬çš„æ‘§æ®‹â€™ï¼Œè¯¥å¤šå¥½ã€‚æˆ‘ä»¬åœ¨ä¹‹åå¯ä»¥æ¢ç©¶ä¸€ä¸‹æ€æ ·åº”å¯¹é‚£æ ·çš„çŠ¶å†µã€‚ä¸è¿‡ï¼Œæˆ‘ç†è§£ä½ çš„æ„æ€æ˜¯è¯´ï¼Œä½ æƒ³æ¢ç´¢ä½ çš„åŸºæœ¬æ€åº¦å’Œè¡Œä¸ºæºè‡ªå“ªé‡Œï¼Œå¯¹å—ï¼Ÿ æ˜¯çš„ï¼Œå¾ˆä¸åŒã€‚ä¸è¿‡è¦è®°ä½ï¼Œæˆ‘ä»¬è¯´çš„ä¸åªæ˜¯ç‰©ç†ä¸–ç•Œï¼Œè€Œæ˜¯ä½ å†…åœ¨çš„ã€åŒ…å«ç€æƒ…ç»ªå’Œæƒ…æ„Ÿçš„å¿ƒç†ä¸–ç•Œï¼Œé‚£æ˜¯é€šè¿‡ä½ æ—©å¹´çš„ç»å†è€Œå½¢æˆçš„ã€‚ç«¥å¹´çš„ç»å†å¦‚æ­¤å¼ºå¤§ã€å¦‚æ­¤é²œæ´»ï¼Œäºæ˜¯ä¾¿å¡‘é€ äº†æ¯ä¸ªå­©å­å¯¹ä¸–ç•Œçš„ç‹¬ç‰¹çœ‹æ³•ã€‚æ¢å¥è¯è¯´ï¼Œå¤–é¢çš„ä¸–ç•Œå˜æˆäº†åœ¨æˆ‘è¿™é‡Œçš„ä¸–ç•Œã€‚â€è‹é¹­è¾¹è¯´ï¼Œè¾¹æ‹äº†æ‹èƒ¸å£çš„ä½ç½®ã€‚â€œæ— è®ºä½ å¯¹ç”Ÿæ´»å½¢æˆäº†æ€æ ·çš„æ€åº¦ï¼Œä»æ­¤ä½ çš„è¡Œä¸ºå’Œå¹¸ç¦æ„Ÿéƒ½ä¼šå—åˆ°å½±å“ï¼Œå¾€åä½™ç”Ÿéƒ½ä¼šå¦‚æ­¤ã€‚é™¤éâ€”â€”â€æ­¤æ—¶ï¼Œè‹é¹­ç›´è§†ç€è›¤èŸ†ï¼Œâ€œä½ å†³å¿ƒè¦æ”¹å˜ã€‚â€ ææ€•æ²¡æœ‰åˆ«çš„åŠæ³•ã€‚æ¯ä¸€ä¸ªç”Ÿå‘½ä¸€å®šéƒ½å¾—ç»å†å¼€å§‹ã€ä¸­é—´å’Œç»“æŸè¿™ä¸‰ä¸ªé˜¶æ®µï¼Œè€Œå¼€å§‹çš„é˜¶æ®µä¼šæ˜¾è‘—åœ°å½±å“åæ¥çš„é˜¶æ®µã€‚å› æ­¤ä½ å¯¹ä¸–ç•Œçš„çœ‹æ³•æ˜¯åœ¨äººç”Ÿçš„æœ€åˆé˜¶æ®µé‡Œå½¢æˆçš„ã€‚ ","date":"2022-01-28","objectID":"/posts/daily_life/reading/2.html/:1:6","tags":["note","å¿ƒç†å­¦","æ—¥å¸¸ç”Ÿæ´»"],"title":"ã€Šè›¤èŸ†å…ˆç”Ÿå»çœ‹å¿ƒç†åŒ»ç”Ÿã€‹é˜…è¯»","uri":"/posts/daily_life/reading/2.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":"äººç”Ÿåæ ‡å’Œå¿ƒç†æ¸¸æˆ äººç”Ÿåæ ‡ï¼š â€œç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼šâ€˜æˆ‘æ˜¯æ€ä¹ˆçœ‹è‡ªå·±çš„ï¼Ÿæˆ‘å¥½å—ï¼Ÿâ€™ç¬¬äºŒä¸ªé—®é¢˜æ˜¯ï¼šâ€˜æˆ‘æ˜¯æ€ä¹ˆçœ‹åˆ«äººçš„ï¼Ÿä»–ä»¬å¥½å—ï¼Ÿâ€™â€ â€œä¸€åˆ‡çš„å…³é”®å°±åœ¨äºé‚£æ˜¯â€˜äººç”Ÿåæ ‡â€™ã€‚ä¸€æ—¦æˆ‘ä»¬åœ¨ç«¥å¹´å†³å®šç”¨å“ªç§æ€åº¦å’Œè§‚ç‚¹ï¼Œæˆ‘ä»¬å°±ä¼šåœ¨éšåçš„äººç”Ÿé‡Œå§‹ç»ˆåšæŒè‡ªå·±çš„é€‰æ‹©ã€‚è¿™äº›æ€åº¦å’Œè§‚ç‚¹ï¼Œå˜æˆæˆ‘ä»¬å­˜åœ¨çš„åº•å±‚æ¶æ„ã€‚ä»é‚£ä»¥åï¼Œæˆ‘ä»¬ä¾¿å»ºæ„å‡ºä¸€ä¸ªä¸–ç•Œï¼Œä¸æ–­ç¡®è®¤å’Œæ”¯æŒè¿™äº›ä¿¡å¿µå’Œé¢„æœŸã€‚æ¢ä¸€ä¸ªè¯æ¥è¯´ï¼Œæˆ‘ä»¬æŠŠè‡ªå·±çš„äººç”Ÿå˜æˆäº†ä¸€ä¸ªâ€˜è‡ªè¯é¢„è¨€â€™ã€‚â€ å¿ƒç†æ¸¸æˆï¼š â€œç¡®å®å¦‚æ­¤ã€‚è¿™ç±»æ¸¸æˆçš„å‘èµ·åŸºæœ¬ä¸Šéƒ½ä¸æ˜¯å‡ºäºçœŸè¯šï¼Œä¸åƒæ­£å¸¸æ¸¸æˆé‚£æ ·åªæ˜¯è®©äººè§‰å¾—å…´å¥‹å¥½ç©ï¼Œè€Œæ˜¯ä¼šäº§ç”Ÿéå¸¸æˆå‰§åŒ–çš„ç»“æœã€‚è¡¨é¢çœ‹èµ·æ¥å®äº‹æ±‚æ˜¯ï¼Œå…¶å®çœŸæ­£çš„æ„å›¾å´å¹¶ä¸æ­£å¤§å…‰æ˜ã€‚æ¸¸æˆä½“ç°åœ¨ä¸¤ä¸ªå±‚é¢ï¼šåœ¨ç¤¾äº¤å±‚é¢ä¸Šï¼Œä¼¼ä¹ä¸€åˆ‡éƒ½æ˜¯å…¬å¼€è¯šå®çš„ã€‚è€Œæ¸¸æˆç©å®¶çš„çœŸæ­£åŠ¨æœºå´éšè—åœ¨å¿ƒç†å±‚é¢ï¼ŒåŒæ—¶ä¹Ÿéšè—ç€æ¬ºéª—ã€‚è‡³äºæ¸¸æˆçš„å¿…ç„¶åæœå‘¢ï¼Œå…¨éƒ½æ˜¯è®©äººäº§ç”Ÿè´Ÿé¢æƒ…ç»ªã€‚â€ ä¸€æ–¹é¢ï¼Œä»–åŠªåŠ›æƒ³è¦åœ¨ç†æ€§å±‚é¢ä¸Šç†è§£è¿™äº›ç†å¿µï¼Œå¯åœ¨æ›´æ·±çš„æ½œæ„è¯†å±‚é¢ï¼Œå®ƒä»¬å´ä¹Ÿè§¦åŠ¨äº†ä»–çš„è‡ªæˆ‘ï¼Œè®©ä»–æƒ…ç»ªæ··ä¹±ã€‚ä»–æƒ³ä¸€ä¸ªäººé™é™åœ°è®©è¿™äº›ç†å¿µæ…¢æ…¢æ¸—é€ï¼Œè®©æ€ç»ªè·Ÿéšåˆ°è¯¥å»çš„åœ°æ–¹ã€‚ä»–ä¸çŸ¥é“ä¼šæ¢ç´¢åˆ°å“ªé‡Œï¼Œä½†è‚¯å®šæ˜¯å»å¾€æˆé•¿çš„æ–¹å‘ ","date":"2022-01-28","objectID":"/posts/daily_life/reading/2.html/:1:7","tags":["note","å¿ƒç†å­¦","æ—¥å¸¸ç”Ÿæ´»"],"title":"ã€Šè›¤èŸ†å…ˆç”Ÿå»çœ‹å¿ƒç†åŒ»ç”Ÿã€‹é˜…è¯»","uri":"/posts/daily_life/reading/2.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":"äººç”Ÿåæ ‡ï¼šæˆ‘ä¸å¥½ï¼Œä½ å¥½ æˆ‘ä¸å¥½ï¼Œä½ ä¸å¥½ï¼š â€œè¿™ä»£è¡¨äº†ä¸€ä¸ªäººçš„è¡Œä¸ºæ€åº¦ï¼Œè¿™ç±»äººè®¤ä¸ºè‡ªå·±å¾ˆå·®åŠ²ï¼Œåˆ«äººéƒ½æ¯”ä»–å¥½ã€‚â€ å‡ ä¹åœ¨ä»»ä½•æ–¹é¢ã€‚ä½è‡ªå°Šçš„äººé€šå¸¸è§‰å¾—ç”Ÿæ´»å¯¹ä»–ä»¬ä¸å¥½ï¼Œå´æ›´å–„å¾…åˆ«äººã€‚æ¦‚æ‹¬åœ°è¯´ï¼Œå¤„åœ¨è¿™ä¸ªåæ ‡çš„äººè®¤ä¸ºè‡ªå·±æ˜¯ç”Ÿæ´»çš„å—å®³è€…ï¼Œæ‰€ä»¥ä»–ä»¬å°±ç©é‚£äº›ä¼šæŠŠä»–ä»¬å˜æˆå—å®³è€…çš„æ¸¸æˆã€‚â€ â€œæˆ‘è¯´çš„æ˜¯æ›´ä¸¥é‡çš„æƒ…å†µï¼Œæœ‰äº›äººä¼šç«­å°½æ‰€èƒ½åœ°é€‰æ‹©è®°ä½é‚£äº›æ‚²ä¼¤å’Œä¸å¿«ä¹çš„äº‹ä»¶ï¼Œè€Œå¿˜è®°æˆ–å¿½ç•¥ç¾å¥½çš„æ—¶å…‰ã€‚ å—å®³è€…æ¸¸æˆï¼š â€œå› ä¸ºç©è¿™ä¸ªæ¸¸æˆçš„äººç¡®å®ä¼šæŠ‘éƒã€‚ä»–ä»¬è®¤ä¸ºè‡ªå·±çš„äººç”Ÿè¢«ä¸å¥½çš„åŠ›é‡å½±å“ï¼Œæ— æ³•æŒæ§äººç”Ÿï¼Œè¿™è®©ä»–ä»¬ç„¦è™‘ï¼Œè§‰å¾—è‡ªå·±ä¸å¤Ÿå¥½ã€‚â€ â€œä¸è¿‡æˆ‘ä¸æ˜¯åœ¨æ€ªä½ ç©æ¸¸æˆã€‚æˆ‘çš„ç›®çš„ä¸æ˜¯è´£æ€ªä½ ï¼Œè€Œæ˜¯å¸®åŠ©ä½ çœ‹åˆ°ä½ åœ¨ç©ä»€ä¹ˆæ ·çš„æ¸¸æˆï¼Œè¿™æ ·ä½ æ‰å¯ä»¥å°±æ­¤æ‰“ä½ã€‚â€ â€œæˆ‘åŒæ„ã€‚ä½ ç°åœ¨å¼€å§‹æ˜ç™½è¿™äº›æ¸¸æˆæœ‰å¤šå±é™©äº†ï¼Œå®ƒä»¬ä¼šä¸¥é‡ä¼¤å®³ä½ çš„å¥åº·ã€‚â€ æ‚²ä¼¤çš„å„¿ç«¥çŠ¶æ€ã€‚ ","date":"2022-01-28","objectID":"/posts/daily_life/reading/2.html/:1:8","tags":["note","å¿ƒç†å­¦","æ—¥å¸¸ç”Ÿæ´»"],"title":"ã€Šè›¤èŸ†å…ˆç”Ÿå»çœ‹å¿ƒç†åŒ»ç”Ÿã€‹é˜…è¯»","uri":"/posts/daily_life/reading/2.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":"äººç”Ÿåæ ‡ï¼šæˆ‘å¥½ï¼Œä½ ä¸å¥½ æˆ‘å¥½ï¼Œä½ ä¸å¥½ï¼š â€œæˆ‘æƒ³æ˜¯çš„ã€‚è¿™æè¿°çš„æ˜¯è§‰å¾—è‡ªå·±æ¯”åˆ«äººå¥½çš„é‚£ä¸€ç±»äººã€‚æˆ‘æƒ³ä»–ä»¬ä¼šç©æ¸¸æˆå»è¯å®è¿™ä¸€ç‚¹ï¼Œå¯¹å—ï¼Ÿâ€ â€œæ˜¯çš„ï¼Œç¡®å®å¦‚æ­¤ã€‚è¿™ç±»æ¸¸æˆé€šå¸¸èƒ½è®©ç©å®¶æ„Ÿåˆ°æ„¤æ€’ï¼Œæˆ–è€…è‡³å°‘èƒ½è®©ä»–ä»¬å¯¹åˆ«äººè¯„å¤´è®ºè¶³ã€‚å¤„äºè¿™ä¸ªå¿ƒç†åæ ‡çš„äººå¸¸å¸¸ä¼šå æ®æƒåŠ›å’Œæƒå¨çš„åˆ¶é«˜ç‚¹ï¼Œè¿™æ ·å°±èƒ½ç©ä»–ä»¬çš„æ¸¸æˆäº†ã€‚â€ ä»–ä»¬ä¼šè¯æ˜åˆ«äººæ ¹æœ¬ä¸Šéƒ½æ˜¯æ— èƒ½è€Œä¸å¯ä¿¡çš„ï¼Œæ¥ä¸‹æ¥ï¼Œä»–ä»¬ä¼šæŠŠæ–¥è´£å’Œæƒ©ç½šåˆ«äººè§†ä¸ºå·±ä»»ã€‚ä»–ä»¬ä¼šè¯´ï¼šâ€˜è¦ä¸ç„¶ï¼Œé‚£å¸®äººä¼šè§‰å¾—çŠ¯äº†é”™è¿˜èƒ½ä¾¥å¹¸é€ƒè„±ï¼â€™â€ NIGYYSOBï¼ˆæˆ‘æŠ“åˆ°ä½ äº†ï¼Œä½ ä¸ªåè›‹ï¼‰ ä½ ä¸ºä»€ä¹ˆæ€»è®©æˆ‘å¤±æœ›ï¼Ÿ ä½ æ€ä¹ˆæ•¢ï¼Ÿ å†…å¿ƒçš„æ–½è™è€…ï¼š â€œå®Œå…¨æ­£ç¡®ã€‚è¿™äº›æ–½è™è€…åˆ©ç”¨ä»»ä½•æ—¶æœºæ¥åˆ¶é€ ä¸€äº›èƒ½è®©ä»–ä»¬è¯„åˆ¤å’Œæƒ©ç½šåˆ«äººçš„æƒ…å¢ƒã€‚æ˜¯ä»–ä»¬å†…å¿ƒçš„æ–½è™è€…è®©ä»–ä»¬è¿™ä¹ˆåšï¼Œå¯å†…å¿ƒçš„æ–½è™è€…æ˜¯è°å‘¢ï¼Œè¿™æ˜¯ä¸ªæœ‰æ„æ€çš„é—®é¢˜ã€‚â€ â€œæ°¸è¿œéƒ½æ˜¯â€˜æŒ‘å‰”å‹çˆ¶æ¯çŠ¶æ€â€™ï¼Œå½“ç„¶äº†ï¼Œæœ‰æ—¶å€™ä»–ä»¬ä¼šæ‘†å‡ºâ€˜å…»è‚²å‹çˆ¶æ¯â€™çš„å§¿æ€ã€‚â€ â€œä»–ä»¬ä»æ¥ä¸ä¼šæŠ‘éƒã€‚å› ä¸ºæ„¤æ€’èƒ½å¤Ÿéå¸¸æœ‰æ•ˆåœ°æŠµæŠ—æŠ‘éƒã€‚æ„¤æ€’çš„äººä»ä¸è§‰å¾—å†…ç–šï¼Œå› ä¸ºä»–ä»¬æ€»åœ¨æ€ªç½ªåˆ«äººã€‚ä»–ä»¬è‡ªå«çš„æ–¹å¼ï¼Œæ˜¯æŠŠè‡ªå·±å†…åœ¨çš„ææƒ§å¯¹å¤–æŠ•å°„åˆ°åˆ«äººèº«ä¸Šï¼Œè¿™æ ·å°±èƒ½æŠŠå¯¹è‡ªå·±çš„æ€’ç«è½¬å‘åˆ«äººã€‚â€ ","date":"2022-01-28","objectID":"/posts/daily_life/reading/2.html/:1:9","tags":["note","å¿ƒç†å­¦","æ—¥å¸¸ç”Ÿæ´»"],"title":"ã€Šè›¤èŸ†å…ˆç”Ÿå»çœ‹å¿ƒç†åŒ»ç”Ÿã€‹é˜…è¯»","uri":"/posts/daily_life/reading/2.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":"ç†è§£è‡ªå·±çš„è¡Œä¸º ç†è§£è‡ªå·±çš„è¡Œä¸ºï¼š â€œä¸ï¼Œå½“ç„¶ä¸æ˜¯ã€‚è¿™äº›ç†å¿µä¸æ˜¯ç”¨æ¥ç»™äººè´´æ ‡ç­¾ï¼Œæ”»å‡»ç¾è¾±åˆ«äººçš„ã€‚å®ƒä»¬åªæ˜¯ç”¨æ¥ç†è§£è¡Œä¸ºçš„æ–¹æ³•ï¼Œå°¤å…¶æ˜¯ç†è§£æˆ‘ä»¬è‡ªå·±çš„è¡Œä¸ºã€‚â€ ","date":"2022-01-28","objectID":"/posts/daily_life/reading/2.html/:1:10","tags":["note","å¿ƒç†å­¦","æ—¥å¸¸ç”Ÿæ´»"],"title":"ã€Šè›¤èŸ†å…ˆç”Ÿå»çœ‹å¿ƒç†åŒ»ç”Ÿã€‹é˜…è¯»","uri":"/posts/daily_life/reading/2.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":"äººç”Ÿåæ ‡ï¼šæˆ‘å¥½ï¼Œä½ ä¹Ÿå¥½ æˆ‘å¥½ï¼Œä½ ä¹Ÿå¥½ï¼š â€œè¿™æ˜¯ä¸ªå‹‡æ•¢çš„é€‰æ‹©ã€‚â€ â€œè¯´â€˜å‹‡æ•¢â€™æ˜¯å› ä¸ºé€‰æ‹©äº†è¿™ä¸ªäººç”Ÿåæ ‡æ—¶ï¼Œä½ ä¸ä»…ä¸ºå½“ä¸‹åšå‡ºäº†é€‰æ‹©ï¼Œè¿˜è®¸ä¸‹äº†ä¸€ä¸ªæ‰¿è¯ºï¼Œç»ˆç”Ÿçš„æ‰¿è¯ºã€‚â€ â€œæˆ‘çš„æ„æ€æ˜¯ï¼Œâ€˜æˆ‘å¥½ï¼›ä½ ä¹Ÿå¥½â€™çš„äººç”Ÿåæ ‡å¹¶éé™æ­¢çš„çŠ¶æ€ï¼Œè€Œæ˜¯åŠ¨æ€çš„è¿‡ç¨‹ã€‚ä½ ä¸èƒ½è¯´â€˜å¥½äº†ï¼Œæˆ‘ç»ˆäºåˆ°äº†â€™ï¼Œå¥½åƒç™»é¡¶ç ç©†æœ—ç›å³°ä¸€æ ·ã€‚ä½ è§‰å¾—è‡ªå·±æ˜¯å¥½çš„ï¼Œä¹Ÿç›¸ä¿¡åˆ«äººæ˜¯å¥½çš„ï¼Œé‚£å°±å¾—é è¡Œä¸ºå’Œæ€åº¦æŒç»­åœ°å¯¹è‡ªå·±å’Œåˆ«äººå±•ç¤ºå‡ºæ¥ã€‚è€Œè¿™ä¸ªé€‰æ‹©è‚¯å®šä¸èƒ½ç»™ä½ åº‡æŠ¤ï¼Œå…äºâ€˜æ®‹æš´å‘½è¿å¦‚æŠ•çŸ³é£ç®­èˆ¬çš„æ‘§æ®‹â€™ã€‚â€ ","date":"2022-01-28","objectID":"/posts/daily_life/reading/2.html/:1:11","tags":["note","å¿ƒç†å­¦","æ—¥å¸¸ç”Ÿæ´»"],"title":"ã€Šè›¤èŸ†å…ˆç”Ÿå»çœ‹å¿ƒç†åŒ»ç”Ÿã€‹é˜…è¯»","uri":"/posts/daily_life/reading/2.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":"é“åˆ«ä¸æ–°ç”Ÿ ç§»æƒ…ï¼š â€œå› ä¸ºä½ æŠŠå¯¹çˆ¶äº²çš„æƒ…æ„Ÿè½¬ç§»åˆ°æˆ‘èº«ä¸Šï¼Œè¿™å«ä½œâ€˜ç§»æƒ…â€™ã€‚é€šè¿‡å¯¹æˆ‘è¡¨è¾¾è‡ªå·±çš„æƒ³æ³•ï¼Œä½ ç»ˆäºä¹Ÿèƒ½å¯¹ä»–è¡¨è¾¾äº†ã€‚ä½ çœŸæ­£æ‰¾åˆ°äº†åŠ›é‡å’Œå‹‡æ°”ï¼Œè¡¨ç°å¾—åƒä¸ªç”·äººï¼Œè€Œä¸å†æ˜¯ä¸ªç”·å­©ã€‚é‚£æ˜¯ä¸ªè½¬æŠ˜ç‚¹ï¼Œä½ æˆé•¿äº†ï¼Œä¹Ÿæˆå¹´äº†ï¼Œåœ¨ä½ å®£å‘Šå¯¹è‡ªå·±æ‹¥æœ‰ä¸»æƒçš„é‚£åˆ»èµ·ï¼Œä½ ä¾¿èƒ½ç‹¬ç«‹è¡Œäº‹äº†ã€‚â€ æƒ…ç»ªæ˜¯çœŸæ­£çš„æ ¸å¿ƒï¼š â€œåœ¨å’¨è¯¢è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…ç”¨å¤´è„‘å»æ€è€ƒï¼Œä¹Ÿç”¨æƒ…æ„Ÿå»ä½“éªŒã€‚è™½ç„¶ä½ å¼€å§‹åœ¨ç†æ™ºä¸Šç†è§£è‡ªå·±çš„è¡Œä¸ºï¼Œä½†è¦å……åˆ†ç†è§£è‡ªæˆ‘ï¼Œå”¯æœ‰é€šè¿‡å’Œè‡ªå·±çš„æƒ…ç»ªåšè”ç»“ã€‚å½“ä½ å¯¹æƒ…ç»ªçš„æ„Ÿå—è¶Šæ¥è¶Šæ¸…æ™°æ—¶ï¼Œå°±èƒ½æ˜ç™½å®ƒä»¬å¹¶éå¯æœ‰å¯æ— ï¼Œä¹Ÿä¸ä¼šå¯¹å®ƒä»¬ä¸é—»ä¸é—®ï¼Œå› ä¸ºæƒ…ç»ªæ­£æ˜¯è‡ªæˆ‘çš„æ ¸å¿ƒã€‚â€ æƒ…å•†ï¼š â€œæ„æ€æ˜¯ç†è§£ä½ å†…å¿ƒçš„æƒ…æ„Ÿä¸–ç•Œï¼Œå¹¶ä¸”è¿˜èƒ½æŒæ§å®ƒã€‚ä½ ä¹Ÿèƒ½çœ‹å‡ºæ¥ï¼Œè¿™å’Œæ™ºå•†å®Œå…¨ä¸æ˜¯ä¸€å›äº‹ã€‚â€ â€œæ¦‚æ‹¬è€Œè¨€ï¼Œä»–ä»¬éƒ½æœ‰å¼ºå¤§çš„è‡ªæˆ‘æ„è¯†ï¼Œäº†è§£è‡ªå·±çš„æƒ…æ„Ÿã€‚ä»–ä»¬èƒ½ç®¡ç†æƒ…ç»ªï¼Œèƒ½ä»æ‚²ä¼¤å’Œä¸å¹¸ä¸­é‡æ–°æŒ¯ä½œã€‚ä½†ä¹Ÿè®¸æœ€é‡è¦çš„æ˜¯ï¼Œä»–ä»¬èƒ½æ§åˆ¶å†²åŠ¨ï¼Œä¹Ÿæ‡‚å¾—å»¶è¿Ÿæ»¡è¶³ï¼Œä»è€Œé¿å…è½»ç‡çš„å†³å®šå’Œä¸å¦¥çš„è¡Œä¸ºã€‚â€ â€œâ€œæœ‰ã€‚æƒ…å•†å’Œç†è§£åˆ«äººæœ‰å…³ï¼Œä¸€ä¸ªé«˜æƒ…å•†çš„äººèƒ½è¾¨è¯†ä»–äººçš„æ„Ÿå—ï¼Œè¿™ç§æŠ€èƒ½ç§°ä¸ºâ€˜å…±æƒ…â€™ã€‚ä½†ä¹Ÿè®¸æƒ…æ„Ÿæ™ºåŠ›ä¸­æœ€å¤§çš„æŠ€èƒ½æ˜¯é€šè¿‡ç†è§£å’Œå›åº”å¯¹æ–¹çš„æƒ…æ„Ÿï¼Œä¸ä»–äººå»ºç«‹è‰¯å¥½çš„å…³ç³»ã€‚â€ ç‹¬ç«‹ä¸å…±ç”Ÿï¼š â€œæƒ…æ„Ÿæ™ºåŠ›èƒ½è®©ä½ åœ¨è‡ªæˆ‘æˆé•¿å’Œå®Œå–„çš„è·¯ä¸Šèµ°å¾—æ›´è¿œï¼Œå› ä¸ºå®ƒå°†å¸¦ä½ ä»ç‹¬ç«‹çš„ä¸ªä½“èµ°å‘å…±ç”Ÿçš„å…³ç³»ã€‚â€ â€œç‹¬ç«‹æ€§éšå«äº†åšè‡ªå·±çš„è‡ªè±ªæ„Ÿï¼Œè¿˜åŒ…æ‹¬ç‹¬ç‰¹çš„æ‰èƒ½ã€ä¸ä¼—ä¸åŒçš„éƒ¨åˆ†ã€‚ç‹¬ç«‹çš„äººæ—¶åˆ»å®ˆæŠ¤æ–°å‘ç°çš„è‡ªä¸»æƒï¼Œå¦‚åŒä¸€ä¸ªæ›¾è¢«æ®–æ°‘çš„å›½å®¶é‡è·è‡ªç”±ä¸€æ ·ã€‚è¿™å½“ç„¶æ²¡é”™ï¼Œä½†å…±ç”Ÿæ€§åˆ™ä½“ç°å‡ºæˆç†Ÿå’Œè‡ªæˆ‘æ¥çº³ï¼Œè¿˜åŒ…æ‹¬æ±‚åŒå­˜å¼‚åœ°æ¥çº³ä»–äººã€‚å…±ç”Ÿæ€§å¯ä»¥è®©ä½ åœ¨ç¤¾äº¤å’Œå·¥ä½œä¸Šä¸åˆ«äººæœ‰æ•ˆè”ç»“ï¼ŒååŒåˆä½œã€‚â€ ","date":"2022-01-28","objectID":"/posts/daily_life/reading/2.html/:1:12","tags":["note","å¿ƒç†å­¦","æ—¥å¸¸ç”Ÿæ´»"],"title":"ã€Šè›¤èŸ†å…ˆç”Ÿå»çœ‹å¿ƒç†åŒ»ç”Ÿã€‹é˜…è¯»","uri":"/posts/daily_life/reading/2.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":"æ€»ç»“\u0026æ„Ÿæ‚Ÿ è¯»å®Œè¿™æœ¬ä¹¦ï¼Œå…¶å®æ²¡æƒ³è±¡ä¸­çš„èŠ±äº†é‚£ä¹ˆå¤šæ—¶é—´ï¼ŒåŠ èµ·æ¥é˜…è¯»æ—¶é—´åº”è¯¥æœ‰5å°æ—¶å·¦å³ã€‚ æˆ‘è§‰å¾—è¿™æœ¬ä¹¦çš„ç‰¹ç‚¹å°±ä½“ç°åœ¨ï¼š é€šè¿‡\"è›¤èŸ†\"çš„è‡ªæˆ‘å¯¹è¯å’Œ\"è›¤èŸ†\"ä¸\"è‹é¹­\"çš„å¯¹è¯ï¼Œæ¥è®©æˆ‘ä»¬æœ‰è¶³å¤Ÿçš„æ—¶é—´å’Œè€å¿ƒå»ä»£å…¥è¿›å»ï¼Œä¸“æ³¨è¿›å»ï¼› æœ¬æ–‡å‡ºç°çš„å¿ƒç†å­¦çŸ¥è¯†æˆ–è€…ç†å¿µåº”è¯¥æ˜¯éå¸¸å®¹æ˜“ç†è§£çš„ï¼Œèƒ½è®©æˆ‘ä»¬æœ‰è¶³å¤Ÿçš„åŸºç¡€å»åæ€æˆ‘ä»¬çš„è¡Œä¸ºï¼Œç†è§£æˆ‘ä»¬çš„è¡Œä¸ºï¼› é€šè¯»ä¸‹æ¥ï¼Œåœ¨äºç†è§£ä»¥ä¸‹æ ¸å¿ƒç‚¹ï¼š å„¿ç«¥/æˆäºº/çˆ¶æ¯ å¿ƒç†æ¸¸æˆ\u0026äººç”Ÿåæ ‡ æƒ…å•†\u0026æƒ…ç»ª ç‹¬ç«‹\u0026ä¸å…±ç”Ÿ é€šè¿‡è‡ªç™½å’Œå¯¹è¯ï¼Œæ¸æ¸äº†è§£è¿™äº›çš„å«ä¹‰ç†å¿µï¼Œç„¶ååæ€ï¼Œç›´åˆ°æœ€åç†è§£æ„ä¹‰ã€‚æ¯ä¸ªè¿‡ç¨‹éƒ½æ˜¯è‡ªç„¶è€Œç„¶åœ°ï¼Œè®©æˆ‘æ„Ÿè§‰éå¸¸èˆ’é€‚å’Œå¹³é™ã€‚ å°±åƒä¹¦ä¸­æåˆ°çš„ï¼Œç†å¿µä¸æ˜¯ç”¨æ¥ç»™äººè´´æ ‡ç­¾ï¼Œæ”»å‡»ç¾è¾±åˆ«äººçš„ã€‚å®ƒä»¬åªæ˜¯ç”¨æ¥ç†è§£è¡Œä¸ºçš„æ–¹æ³•ï¼Œå°¤å…¶æ˜¯ç†è§£æˆ‘ä»¬è‡ªå·±çš„è¡Œä¸ºã€‚ åªæœ‰ç†è§£è‡ªå·±çš„è¡Œä¸ºï¼Œç†è§£è‡ªå·±çš„æƒ…ç»ªï¼Œè¿›å…¥è‡ªå·±çš„å†…å¿ƒæƒ…æ„Ÿä¸–ç•Œï¼Œæ‰èƒ½å¤ŸæŒæ§ï¼Œæ‰èƒ½å¤Ÿç®¡ç†æƒ…ç»ªï¼Œæé«˜è‡ªå·±çš„æƒ…å•†ã€‚ åŒæ—¶ä¹Ÿè®©æˆ‘ç†è§£åˆ°\"æƒ…å•†\"çš„é‡è¦æ€§ï¼Œå®ƒä¸ä»…ä»…æ˜¯ç†è§£å’Œå›åº”å¯¹æ–¹çš„æƒ…æ„Ÿï¼Œè¿˜æœ‰ç†è§£å’Œå›åº”è‡ªå·±çš„æƒ…æ„Ÿï¼Œè¿™å¯¹äºæˆ‘ä»¬äººç”Ÿçš„ç¾å¥½æ˜¯ä¸å¯æˆ–ç¼ºçš„ã€‚ ä¹¦ä¸­æœ€åæåˆ°äº†\"ç‹¬ç«‹\"å’Œ\"å…±ç”Ÿâ€ï¼Œæˆ‘æƒ³å°±æ˜¯\"ç‹¬ç«‹\"æ˜¯å½“å‰çš„è‡ªå·±ä¸è¿‡å»çš„è‡ªå·±å’Œè§£ï¼Œâ€œå…±ç”Ÿ\"æ˜¯å½“å‰çš„è‡ªå·±ä¸æœªæ¥çš„è‡ªå·±å’Œè§£ã€‚ ","date":"2022-01-28","objectID":"/posts/daily_life/reading/2.html/:2:0","tags":["note","å¿ƒç†å­¦","æ—¥å¸¸ç”Ÿæ´»"],"title":"ã€Šè›¤èŸ†å…ˆç”Ÿå»çœ‹å¿ƒç†åŒ»ç”Ÿã€‹é˜…è¯»","uri":"/posts/daily_life/reading/2.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":"ã€Šè®¤çŸ¥è§‰é†’ã€‹é˜…è¯» ä»¥ä¸‹ä¸ºé˜…è¯»ã€Šè®¤çŸ¥è§‰é†’ã€‹çš„æ‘˜æŠ„å’Œç¬”è®° ","date":"2022-01-28","objectID":"/posts/daily_life/reading/1.html/:0:0","tags":["note","å¿ƒç†å­¦","æ—¥å¸¸ç”Ÿæ´»"],"title":"ã€Šè®¤çŸ¥è§‰é†’ã€‹é˜…è¯»","uri":"/posts/daily_life/reading/1.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":"ä¸Šç¯‡ï¼šå†…è§‚è‡ªå·±ï¼Œæ‘†è„±ç„¦è™‘ ","date":"2022-01-28","objectID":"/posts/daily_life/reading/1.html/:1:0","tags":["note","å¿ƒç†å­¦","æ—¥å¸¸ç”Ÿæ´»"],"title":"ã€Šè®¤çŸ¥è§‰é†’ã€‹é˜…è¯»","uri":"/posts/daily_life/reading/1.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":"ç¬¬ä¸€ç«  å¤§è„‘â€”ä¸€åˆ‡é—®é¢˜çš„èµ·æº ç†æ™ºè„‘\u003cæƒ…ç»ªè„‘\u003cæœ¬èƒ½è„‘ã€‚ ç”Ÿæ´»ä¸­æ‰€åšçš„å¤§éƒ¨åˆ†å†³ç­–å¾€å¾€æºäºæœ¬èƒ½å’Œæƒ…ç»ªï¼Œè€Œéç†æ™ºã€‚ é¿éš¾è¶‹æ˜“å’Œæ€¥äºæ±‚æˆã€‚ å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬ä»¥ä¸ºè‡ªå·±åœ¨æ€è€ƒï¼Œå…¶å®éƒ½æ˜¯åœ¨å¯¹è‡ªèº«çš„è¡Œä¸ºå’Œæ¬²æœ›è¿›è¡Œåˆç†åŒ–ã€‚ ä¹ æƒ¯ä¹‹æ‰€ä»¥éš¾ä»¥æ”¹å˜ï¼Œå°±æ˜¯å› ä¸ºå®ƒæ˜¯è‡ªæˆ‘å·©å›ºçš„â€”â€”è¶Šç”¨è¶Šå¼ºï¼Œè¶Šå¼ºè¶Šç”¨ã€‚è¦æƒ³ä»æ—¢æœ‰çš„ä¹ æƒ¯ä¸­è·³å‡ºæ¥ï¼Œæœ€å¥½çš„æ–¹æ³•ä¸æ˜¯ä¾é è‡ªåˆ¶åŠ›ï¼Œè€Œæ˜¯ä¾é çŸ¥è¯†ã€‚ å› ä¸ºæœ¬èƒ½è„‘å¼ºå¤§çš„è¿ç®—èƒ½åŠ›å’Œæƒ…ç»ªè„‘å¼ºå¤§çš„è¡ŒåŠ¨èƒ½åŠ›ï¼Œéƒ½æ˜¯ä¸å¯å¤šå¾—çš„å®è´µèµ„æºã€‚ ç†æ™ºè„‘ä¸æ˜¯ç›´æ¥å¹²æ´»çš„ï¼Œå¹²æ´»æ˜¯æœ¬èƒ½è„‘å’Œæƒ…ç»ªè„‘çš„äº‹æƒ…ï¼Œå› ä¸ºå®ƒä»¬çš„â€œåŠ›æ°”â€å¤§ï¼›ä¸Šå¤©èµ‹äºˆç†æ™ºè„‘æ™ºæ…§ï¼Œæ˜¯è®©å®ƒé©±åŠ¨æœ¬èƒ½å’Œæƒ…ç»ªï¼Œè€Œä¸æ˜¯ç›´æ¥å–ä»£å®ƒä»¬ã€‚ æ— è®ºä¸ªä½“è¿˜æ˜¯ç¾¤ä½“ï¼Œäººç±»çš„å®‰å…¨æ„Ÿéƒ½æºäºè‡ªå·±åœ¨æŸä¸€æ–¹é¢æ‹¥æœ‰çš„ç‹¬ç‰¹ä¼˜åŠ¿ï¼šæˆ–èƒ½åŠ›ï¼Œæˆ–è´¢å¯Œï¼Œæˆ–æƒåŠ›ï¼Œæˆ–å½±å“åŠ›ã€‚ ç„¦è™‘çš„å‡ ç§å½¢å¼ï¼šå®Œæˆç„¦è™‘ï¼Œå®šä½ç„¦è™‘ï¼Œé€‰æ‹©ç„¦è™‘ï¼Œç¯å¢ƒç„¦è™‘ï¼Œéš¾åº¦ç„¦è™‘ã€‚ æ€¥äºæ±‚æˆï¼Œæƒ³åŒæ—¶åšå¾ˆå¤šäº‹ï¼›é¿éš¾è¶‹æ˜“ï¼Œæƒ³ä¸æ€ä¹ˆåŠªåŠ›å°±ç«‹å³çœ‹åˆ°æ•ˆæœã€‚ ","date":"2022-01-28","objectID":"/posts/daily_life/reading/1.html/:1:1","tags":["note","å¿ƒç†å­¦","æ—¥å¸¸ç”Ÿæ´»"],"title":"ã€Šè®¤çŸ¥è§‰é†’ã€‹é˜…è¯»","uri":"/posts/daily_life/reading/1.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":"ç¬¬äºŒç« ã€€æ½œæ„è¯†â€”â€”ç”Ÿå‘½ç•™ç»™æˆ‘ä»¬çš„å½©è›‹ æ¨¡ç³Šçš„æ„è¯†ç®€åŒ–è¿ä½œæµç¨‹ï¼Œä½†ä¹Ÿæœ‰å‰¯ä½œç”¨ã€‚ æ€è€ƒå’Œå­¦ä¹ æ˜¯æœ¬èƒ½ç”Ÿå­˜çš„å¨èƒã€‚ å­¦ä¹ çŸ¥è¯†çš„ç›®çš„æ˜¯â€œæ¶ˆé™¤æ¨¡ç³Šâ€ï¼Œè€Œè·å–çŸ¥è¯†çš„æ–¹æ³•ä¹Ÿæ˜¯â€œæ¶ˆé™¤æ¨¡ç³Šâ€ï¼Œç›®çš„å’Œæ–¹æ³•ç›¸ç»Ÿä¸€ã€‚ æå‡æ€è€ƒèƒ½åŠ›çš„æ–¹æ³•æ­£æ˜¯ä¸æ–­æ˜ç¡®æ ¸å¿ƒå›°éš¾å’Œå¿ƒå¾—æ„Ÿæ‚Ÿï¼Œå¹¶ä¸“æ³¨äºæ­¤ã€‚ å…·ä½“äº‹ä»¶ä¸€æ—¦å˜æ¨¡ç³Šï¼Œå…¶è¾¹ç•Œå°±ä¼šæ— é™æ‰©å¤§ï¼ŒåŸæœ¬å¹¶ä¸å›°éš¾çš„å°äº‹ï¼Œä¹Ÿä¼šåœ¨æ¨¡ç³Šçš„æ½œæ„è¯†é‡Œå˜å¾—éš¾ä»¥è§£å†³ã€‚ è¦æƒ³ä¸å—å…¶å›°æ‰°ï¼Œå”¯ä¸€çš„åŠæ³•å°±æ˜¯æ­£è§†å®ƒã€çœ‹æ¸…å®ƒã€æ‹†è§£å®ƒã€åŒ–è§£å®ƒï¼Œä¸ç»™å®ƒè¿›å…¥æ½œæ„è¯†çš„æœºä¼šï¼Œä¸ç»™å®ƒå˜æ¨¡ç³Šçš„æœºä¼šï¼›å³ä½¿å·²ç»è¿›å…¥æ½œæ„è¯†ï¼Œä¹Ÿè¦æƒ³åŠæ³•å°†å®ƒæŒ–å‡ºæ¥ã€‚æ‰€ä»¥ï¼Œå½“ä½ æ„Ÿåˆ°å¿ƒé‡Œæœ‰è¯´ä¸æ¸…ã€é“ä¸æ˜çš„éš¾å—çš„æ„Ÿè§‰æ—¶ï¼Œèµ¶ç´§åä¸‹æ¥ï¼Œå‘è‡ªå·±æé—®ã€‚ ææƒ§å°±æ˜¯ä¸€ä¸ªæ¬ºè½¯æ€•ç¡¬çš„è´§è‰²ï¼Œä½ èº²é¿å®ƒï¼Œå®ƒå°±å¼ ç‰™èˆçˆªï¼Œä½ æ­£è§†å®ƒï¼Œå®ƒå°±åŸå½¢æ¯•éœ²ã€‚ è¡ŒåŠ¨åŠ›ä¸è¶³çš„çœŸæ­£åŸå› æ˜¯é€‰æ‹©æ¨¡ç³Šã€‚ é€‰æ‹©æ¨¡ç³Šå°±æ˜¯ä¸€ç§ä¸ç¡®å®šæ€§ï¼Œè€Œäººç±»é¢å¯¹ä¸ç¡®å®šæ€§æ—¶ä¼šä¸è‡ªè§‰é€ƒé¿ï¼Œ å½“æˆ‘ä»¬æ²¡æœ‰è¶³å¤Ÿæ¸…æ™°çš„æŒ‡ä»¤æˆ–è€…ç›®æ ‡æ—¶ï¼Œå°±å¾ˆå®¹æ˜“é€‰æ‹©äº«ä¹ï¼Œæ”¾å¼ƒé‚£äº›æœ¬è¯¥åšæŒä½†æ¯”è¾ƒçƒ§è„‘çš„é€‰é¡¹ã€‚ åœ¨è¯¸å¤šå¯èƒ½æ€§ä¸­å»ºç«‹ä¸€æ¡å•è¡Œé€šé“ï¼Œè®©è‡ªå·±å§‹ç»ˆå¤„äºâ€œæ²¡å¾—é€‰â€çš„çŠ¶æ€ã€‚ æ„Ÿæ€§çš„å¤„ç†èƒ½åŠ›è¿œå¤§äºç†æ€§ï¼Œæ½œæ„è¯†å°±æ˜¯æ„Ÿæ€§çš„ä¸€éƒ¨åˆ†ï¼Œä¿—ç§°â€œå‡­æ„Ÿè§‰â€ã€‚ å…ˆç”¨æ„Ÿæ€§èƒ½åŠ›å¸®åŠ©è‡ªå·±é€‰æ‹©ï¼Œå†ç”¨ç†æ€§èƒ½åŠ›å¸®åŠ©è‡ªå·±æ€è€ƒã€‚ æ„ŸçŸ¥çœŸæ­£é€‚åˆè‡ªå·±å¹¶éœ€è¦çš„ä¸œè¥¿ï¼Œè®©è‡ªå·±å¤„äºå­¦ä¹ çš„â€œæ‹‰ä¼¸åŒºâ€ã€‚ åªå–ä¸€ä¸ªå…¨ä¹¦æœ€è§¦åŠ¨è‡ªå·±çš„ç‚¹ï¼Œç„¶åå°½å¯èƒ½å»å®è·µã€æ”¹å˜ã€‚è¿™æ ·è¯»ä¹¦ä¸ä»…æ”¶è·æ›´å¤§ï¼Œè€Œä¸”ä¹Ÿä¸ä¼šç„¦è™‘ã€‚ ç›®æ ‡æ˜¯å­˜æ”¾æˆ‘ä»¬çƒ­æƒ…å’Œç²¾åŠ›çš„åœ°æ–¹ã€‚ ç”¨æ„ŸçŸ¥åŠ›æ¥ä»£æ›¿æ€è€ƒåŠ›ã€‚ ","date":"2022-01-28","objectID":"/posts/daily_life/reading/1.html/:1:2","tags":["note","å¿ƒç†å­¦","æ—¥å¸¸ç”Ÿæ´»"],"title":"ã€Šè®¤çŸ¥è§‰é†’ã€‹é˜…è¯»","uri":"/posts/daily_life/reading/1.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":"ç¬¬ä¸‰ç« ã€€å…ƒè®¤çŸ¥â€”â€”äººç±»çš„ç»ˆæèƒ½èƒ½åŠ› å…ƒè®¤çŸ¥ï¼Œå°±æ˜¯æœ€é«˜çº§åˆ«çš„è®¤çŸ¥ï¼Œå®ƒèƒ½å¯¹è‡ªèº«çš„â€œæ€è€ƒè¿‡ç¨‹â€è¿›è¡Œè®¤çŸ¥å’Œç†è§£ã€‚ è¢«åŠ¨å…ƒè®¤çŸ¥å’Œä¸»åŠ¨å…ƒè®¤çŸ¥ã€‚è¢«åŠ¨åˆ°ä¸»åŠ¨æ˜¯ä¸ªè½¬æŠ˜ç‚¹ã€‚ ä½ èƒ½æ„è¯†åˆ°è‡ªå·±åœ¨æƒ³ä»€ä¹ˆï¼Œè¿›è€Œæ„è¯†åˆ°è¿™äº›æƒ³æ³•æ˜¯å¦æ˜æ™ºï¼Œå†è¿›ä¸€æ­¥çº æ­£é‚£äº›ä¸æ˜æ™ºçš„æƒ³æ³•ï¼Œæœ€ç»ˆåšå‡ºæ›´å¥½çš„é€‰æ‹©ã€‚ è·å–å…ƒçŸ¥åŠ›ï¼Œç¬¬ä¸€é€šè¿‡å­¦ä¹ å‰äººçš„æ™ºæ…§å’Œåæ€è‡ªèº«çš„ç»å†ï¼Œç¬¬äºŒé€šè¿‡è‡ªèº«çš„ç»å†ï¼Œç¬¬ä¸‰é€šè¿‡å¬å”¤â€œçµé­‚ä¼´ä¾£â€ï¼Œç¬¬å››é€šè¿‡å†¥æƒ³ã€‚ å…ƒè®¤çŸ¥èƒ½åŠ›æ€»èƒ½è®©ä½ ç«™åœ¨é«˜å¤„ä¿¯ç°å…¨å±€ï¼Œä¸ä¼šè®©ä½ ä¸€å¤´æ‰è¿›ç”Ÿæ´»çš„ç»†èŠ‚ï¼Œè¿·å¤±å…¶ä¸­ã€‚ åé¦ˆæ˜¯è¿™ä¸ªä¸–ç•Œçš„è¿›åŒ–æœºåˆ¶ï¼Œè€Œå…ƒè®¤çŸ¥å°±æ˜¯è®¤çŸ¥èƒ½åŠ›çš„åé¦ˆå›è·¯ã€‚ å…ƒè®¤çŸ¥èƒ½åŠ›å°±æ˜¯è‡ªæˆ‘å®¡è§†ï¼Œä¸»åŠ¨æ§åˆ¶ï¼Œé˜²æ­¢è¢«æ½œæ„è¯†å·¦å³çš„èƒ½åŠ›ã€‚ ç†æ™ºè„‘çš„æˆ˜æ–—åŠ›è¡¨ç°åœ¨ä¸¤æ–¹é¢ï¼šä¸€æ–¹é¢æ˜¯ä¾§é‡å­¦ä¹ ã€ç†è§£ã€è®°å¿†ã€è¿ç®—çš„è®¤çŸ¥èƒ½åŠ›ï¼Œå³æˆ‘ä»¬åœ¨æ ¡å­¦ä¹ æ—¶ä¸»è¦é”»ç‚¼çš„éƒ¨åˆ†ï¼Œå¦ä¸€æ–¹é¢åˆ™æ˜¯ä¾§é‡è§‚å¯Ÿã€åæ€ã€åˆ¤æ–­ã€é€‰æ‹©çš„å…ƒè®¤çŸ¥èƒ½åŠ›ã€‚ æ¯å½“é‡åˆ°éœ€è¦é€‰æ‹©çš„æƒ…å†µæ—¶ï¼Œæˆ‘ä»¬è¦æ˜¯èƒ½å…ˆåœç•™å‡ ç§’æ€è€ƒä¸€ä¸‹ï¼Œå°±æœ‰å¯èƒ½æ¿€æ´»è‡ªå·±çš„ç†æ™ºè„‘ï¼Œå¯ç”¨å…ƒè®¤çŸ¥æ¥å®¡è§†å½“å‰çš„æ€ç»´ï¼Œç„¶ååšå‡ºä¸ä¸€æ ·çš„é€‰æ‹©ã€‚ åœ¨é€‰æ‹©èŠ‚ç‚¹ä¸Šå¤šèŠ±â€œå…ƒæ—¶é—´â€ã€‚ å…ƒæ—¶é—´é€šå¸¸åˆ†å¸ƒåœ¨â€œé€‰æ‹©çš„èŠ‚ç‚¹â€ä¸Šï¼Œæ¯”å¦‚ä¸€ä»¶äº‹æƒ…ã€ä¸€ä¸ªé˜¶æ®µæˆ–ä¸€å¤©å¼€å§‹æˆ–ç»“æŸæ—¶ã€‚å–„ç”¨è¿™äº›æ—¶é—´ä¼šæå¤§ç¨‹åº¦åœ°ä¼˜åŒ–åç»­æ—¶é—´çš„è´¨é‡ã€‚ ","date":"2022-01-28","objectID":"/posts/daily_life/reading/1.html/:1:3","tags":["note","å¿ƒç†å­¦","æ—¥å¸¸ç”Ÿæ´»"],"title":"ã€Šè®¤çŸ¥è§‰é†’ã€‹é˜…è¯»","uri":"/posts/daily_life/reading/1.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":"ä¸‹ç¯‡ã€€å¤–è§‚ä¸–ç•Œï¼Œå€ŸåŠ›å‰è¡Œ ","date":"2022-01-28","objectID":"/posts/daily_life/reading/1.html/:2:0","tags":["note","å¿ƒç†å­¦","æ—¥å¸¸ç”Ÿæ´»"],"title":"ã€Šè®¤çŸ¥è§‰é†’ã€‹é˜…è¯»","uri":"/posts/daily_life/reading/1.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":"ç¬¬å››ç« ã€€ä¸“æ³¨åŠ›â€”â€”æƒ…ç»ªå’Œæ™ºæ…§çš„äº¤å‰åœ°å¸¦ ç¬¬ä¸€èŠ‚ã€€æƒ…ç»ªä¸“æ³¨ï¼šä¸€æ‹›ææŒ¯ä½ çš„æ³¨æ„åŠ› åˆ†å¿ƒèµ°ç¥çš„æœ¬è´¨æ˜¯é€ƒé¿ï¼Œæ‰€ä»¥ï¼Œé¢å¯¹å›°éš¾æ—¶ï¼Œèº«å¿ƒåˆ†ç¦»çš„äººæ€»ä¼šä¸è‡ªè§‰åœ°é€€å›èˆ’é€‚åŒºï¼Œè€Œèº«å¿ƒåˆä¸€çš„äººåˆ™æ›´å®¹æ˜“è·³å‡ºèˆ’é€‚åŒºï¼Œç›´é¢å›°éš¾ã€‚ è®©æ„Ÿå—å›å½’è¡ŒåŠ¨ã€‚ èº«ä½“æ„Ÿå—æ°¸è¿œæ˜¯è¿›å…¥å½“ä¸‹çŠ¶æ€çš„æœ€å¥½åª’ä»‹ï¼Œè€Œæ„Ÿå—äº‹ç‰©æ¶ˆå¤±çš„è¿‡ç¨‹æ›´æ˜¯ä¸€ç§å¾ˆå¥½çš„ä¸“æ³¨åŠ›è®­ç»ƒã€‚å®ƒæç¤ºæˆ‘ä»¬ï¼Œèº«å¿ƒåˆä¸€çš„è¦é¢†ä¸ä»…æ˜¯ä¸“æ³¨äºå½“ä¸‹ï¼Œæ›´æ˜¯äº«å—å½“ä¸‹ï¼Œè€Œè¿™ç§äº«å—å¿…å°†ä½¿æˆ‘ä»¬æ›´ä»å®¹ï¼Œä¸æ…Œå¼ ã€‚ ç¬¬äºŒèŠ‚ã€€å­¦ä¹ ä¸“æ³¨ï¼šæ·±åº¦æ²‰æµ¸æ˜¯è¿›åŒ–åŒåˆƒå‰‘çš„å®‰å…¨å‰‘æŸ„ å®¡è§†è‡ªå·±çš„æ³¨æ„åŠ›â€”â€”æ˜¯è¢«åŠ¨å¸å¼•è¿˜æ˜¯ä¸»åŠ¨é€‰æ‹©ï¼Ÿ å®¡è§†è‡ªå·±çš„æ²‰æµ¸åº¦â€”â€”æ˜¯åˆ†å¿ƒèµ°ç¥è¿˜æ˜¯æåº¦ä¸“æ³¨ï¼Ÿ å®¡è§†è‡ªå·±çš„ç»ƒä¹ é‡â€”â€”æ˜¯æµ…å°è¾„æ­¢è¿˜æ˜¯å¤§é‡æŠ•å…¥ï¼Ÿ ","date":"2022-01-28","objectID":"/posts/daily_life/reading/1.html/:2:1","tags":["note","å¿ƒç†å­¦","æ—¥å¸¸ç”Ÿæ´»"],"title":"ã€Šè®¤çŸ¥è§‰é†’ã€‹é˜…è¯»","uri":"/posts/daily_life/reading/1.html/"},{"categories":["æ—¥å¸¸ç”Ÿæ´»"],"content":"ç¬¬äº”ç« ã€€å­¦ä¹ åŠ›â€”â€”å­¦ä¹ ä¸æ˜¯ä¸€å‘³åœ°åŠªåŠ› ç¬¬ä¸€èŠ‚ã€€åŒ¹é…ï¼šèˆ’é€‚åŒºè¾¹ç¼˜ï¼Œé€‚ç”¨äºä¸‡ç‰©çš„æ–¹æ³•è®º å°†äº‹ç‰©åŠªåŠ›çš„æ–¹å‘åŒ¹é…åˆ°èˆ’é€‚åŒºè¾¹ç¼˜ã€‚ å› ä¸ºè·ç¦»æˆ‘ä»¬å¤ªè¿œçš„äº‹ç‰©ï¼Œæˆ‘ä»¬é€šå¸¸æ— æ³•æŠŠæ¡ï¼Œæ— è®ºå®ƒä»¬æ˜¯ä»¤äººç—›è‹¦çš„è¿˜æ˜¯ä»¤äººäº«å—çš„ã€‚ åšé€‰æ‹©æ˜¯ä¸€ä»¶æä¸ºè€—èƒ½çš„äº‹æƒ…ï¼Œå¦‚æœæ²¡æœ‰ä¸ä¹‹åŒ¹é…çš„æ¸…é†’å’Œå®šåŠ›ï¼Œç»å¤§å¤šæ•°äººæœ€ç»ˆéƒ½ä¼šè¢«å¼ºå¤§çš„å¤©æ€§æ”¯é…ï¼Œå»é€‰æ‹©å¨±ä¹æ¶ˆé£ã€‚åœ¨æœ‰çº¦æŸçš„ç¯å¢ƒä¸‹æˆ‘ä»¬åè€Œæ•ˆç‡æ›´é«˜ï¼Œç”Ÿæ´»æ›´å……å®ã€‚ èƒ½è§£é‡Šçš„ç°è±¡è¶Šå¤šï¼Œè¿™ä¸ªæ¦‚å¿µå°±è¶Šåº•å±‚ã€‚ ä¸ç®¡åšä»€ä¹ˆï¼Œä¸ç®¡å½“å‰åšå¾—æ€ä¹ˆæ ·ï¼Œåªè¦è®©è‡ªå·±å¤„åœ¨èˆ’é€‚åŒºçš„è¾¹ç¼˜æŒç»­ç»ƒä¹ ï¼Œä½ çš„èˆ’é€‚åŒºå°±ä¼šä¸æ–­æ‰©å¤§ï¼Œæ‹‰ä¼¸åŒºä¹Ÿå°±ä¼šä¸æ–­æ‰©å±•ï¼ŒåŸå…ˆçš„å›°éš¾åŒºä¹Ÿä¼šæ…¢æ…¢å˜æˆæ‹‰ä¼¸åŒºï¼Œç”šè‡³æ˜¯èˆ’é€‚åŒºï¼Œæ‰€ä»¥æˆé•¿æ˜¯å¿…ç„¶çš„ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‚¯å®šï¼šé€Ÿæˆæ˜¯ä¸å¯èƒ½çš„ã€‚ ä»èˆ’é€‚åŒºåˆ°æ‹‰ä¼¸åŒºçš„ç­–ç•¥ï¼šæç‚¼ç›®æ ‡ã€‚ åœ¨æ‹‰ä¼¸åŒºç»ƒä¹ çš„ä¸€å¤§ç‰¹ç‚¹å°±æ˜¯è¦æœ‰å…³æ³¨ç‚¹ã€‚ ç¬¬äºŒèŠ‚ã€€æ·±åº¦ï¼šæ·±åº¦å­¦ä¹ ï¼Œäººç”Ÿä¸ºæ•°ä¸å¤šçš„å¥½å‡ºè·¯ é«˜æ•ˆåœ°è·å–çŸ¥è¯†ï¼Œå®é™…ä¸ŠæŠ‘åˆ¶äº†æ·±åº¦æ€è€ƒçš„æ„è¯†ã€‚ åªæ»¡è¶³äºè¾“å…¥çš„è¿‡ç¨‹ï¼Œè¿™ç±»å­¦ä¹ çš„çŸ¥è¯†ç•™å­˜ç‡å¾ˆä½ã€‚ æ·±åº¦å­¦ä¹ ä¼šè¦æ±‚ä½ å¿…é¡»åŠ¨ç”¨å·²æœ‰çš„çŸ¥è¯†å»è§£é‡Šæ–°çŸ¥è¯†ã€‚ â€œç¼æ¥â€æ˜¯æ·±åº¦å­¦ä¹ çš„å…³é”®ï¼Œè€Œå¤§å¤šæ•°äººåªå®Œæˆäº†â€œè·å–çŸ¥è¯†â€ï¼Œå´å¿½ç•¥äº†â€œç¼æ¥çŸ¥è¯†â€è¿™ä¸€æ­¥ï¼Œå› æ­¤ï¼Œä»–ä»¬çš„å­¦ä¹ è¿‡ç¨‹æ˜¯ä¸å®Œæ•´çš„ã€‚ æµ…å±‚å­¦ä¹ æ»¡è¶³è¾“å…¥ï¼Œæ·±åº¦å­¦ä¹ æ³¨é‡è¾“å‡ºã€‚ é€¼è¿«è‡ªå·±è·å–é«˜è´¨é‡çš„çŸ¥è¯†ä»¥åŠæ·±åº¦ç¼æ¥æ–°çŸ¥è¯†ï¼Œå†ç”¨è‡ªå·±çš„è¯­è¨€æˆ–æ–‡å­—æ•™æˆä»–äººï¼Œæ˜¯ä¸ºæ·±åº¦å­¦ä¹ ä¹‹é“ã€‚ æ­£ç¡®çš„è¡ŒåŠ¨å¾€å¾€æ˜¯åå¤©æ€§çš„ã€‚ é€æ­¥æ”¹è¿›æ·±åº¦å­¦ä¹ çš„æ–¹æ³•ï¼š ä¸€æ˜¯å°½å¯èƒ½è·å–å¹¶äº²è‡ªé’»ç ”ä¸€æ‰‹çŸ¥è¯†ã€‚ äºŒæ˜¯å°½å¯èƒ½ç”¨è‡ªå·±çš„è¯æŠŠæ‰€å­¦çš„çŸ¥è¯†å†™å‡ºæ¥ã€‚ ä¸‰æ˜¯åæ€ç”Ÿæ´»ã€‚ æ·±åº¦å­¦ä¹ é™¤äº†èƒ½è®©æˆ‘ä»¬ä¸å†æµ®èºï¼Œèƒ½ç£¨ç‚¼ç†æ™ºï¼Œè¿˜èƒ½å¸¦æ¥è¯¸å¤šå¥½å¤„ï¼Œæ¯”å¦‚è·¨ç•Œèƒ½åŠ›çš„æå‡ã€‚ æ·±åº¦å­¦ä¹ è¿˜èƒ½è®©äººäº§ç”Ÿæ›´å¤šçµæ„Ÿã€‚ ä¸æ­¤åŒæ—¶ï¼Œæ·±åº¦å­¦ä¹ è¿˜èƒ½è®©æˆ‘ä»¬çœ‹åˆ°ä¸åŒäº‹ç‰©ä¹‹é—´æ›´å¤šçš„å…³è”ï¼Œäº§ç”Ÿæ´è§ã€‚ æ·±åº¦ä¹‹ä¸‹çš„å¹¿åº¦æ‰æ˜¯æœ‰æ•ˆçš„ã€‚ ä¸“æ³¨äºæ·±åº¦å­¦ä¹ ï¼ŒåŒæ—¶å¯¹æµ…å­¦ä¹ ä¿æŒå¼€æ”¾ã€‚ ç¬¬ä¸‰èŠ‚ã€€å…³è”ï¼šé«˜æ‰‹çš„â€œæš—ç®±â€ è¯»ä¹¦çš„ä¸‰ä¸ªæ­¥éª¤ï¼š ç”¨è‡ªå·±çš„è¯­è¨€é‡è¿°ä¿¡æ¯ï¼Œå³æ‰¾åˆ°è§¦åŠ¨è‡ªå·±çš„ä¿¡æ¯ç‚¹ï¼› æè¿°è‡ªå·±çš„ç›¸å…³ç»éªŒï¼Œå³å…³è”ç”Ÿæ´»ä¸­çš„å…¶ä»–çŸ¥è¯†ï¼› æˆ‘çš„åº”ç”¨ï¼Œå³è½¬åŒ–ä¸ºè¡ŒåŠ¨ï¼Œè®©è‡ªå·±åˆ‡å®æ”¹å˜ã€‚ æ·±åº¦å­¦ä¹ çš„ä¸‰ä¸ªå±‚æ¬¡ï¼š çŸ¥é“ä¿¡æ¯ç‚¹ å…³è”ä¿¡æ¯ç‚¹ è¡ŒåŠ¨å’Œæ”¹å˜ ç»å¤§å¤šæ•°äººä¹ æƒ¯ä»¥å­¤ç«‹çš„æ€ç»´çœ‹å¾…äº‹ç‰©ï¼Œå–œæ¬¢èŠ±å¤§é‡æ—¶é—´æ”¶é›†å’Œå æœ‰ä¿¡æ¯ï¼›è€Œå¦ä¸€æ‰¹å…ˆè¡Œè€…åˆ™æ›´å–œæ¬¢æ‹¨å¼„ä¿¡æ¯ä¹‹é—´çš„å…³è”ï¼Œä»è€Œåœ¨ä¸çŸ¥ä¸è§‰é—´å˜å¾—èªæ˜äº†èµ·æ¥ã€‚ æˆ‘ä»¬åœ¨å…³è”æ—¶ï¼Œéœ€è¦ç‰¢ç‰¢èšç„¦è‡ªèº«æœ€è¿«åˆ‡çš„éœ€æ±‚ï¼Œæ¢å¥è¯è¯´ï¼Œå°±æ˜¯è®©ä¸€åˆ‡ä¸è‡ªå·±æœ‰å…³ã€‚ çŸ¥è¯†çš„è·å–ä¸åœ¨äºå¤šå°‘ï¼Œè€Œåœ¨äºæ˜¯å¦ä¸è‡ªå·±æœ‰å…³è”ï¼Œä»¥åŠè¿™ç§å…³è”æœ‰å¤šå……åˆ†ã€‚ æ›´é‡è¦çš„éšè”½æ¡ä»¶ä¸èƒ½å¿½è§†ï¼šä½ éœ€è¦æ˜ç¡®çš„ç›®æ ‡æˆ–å¼ºçƒˆçš„éœ€æ±‚ã€‚ ç¬¬å››èŠ‚ã€€ä½“ç³»ï¼šå»ºç«‹ä¸ªäººè®¤çŸ¥ä½“ç³»å…¶å®å¾ˆç®€å• å› ä¸ºä¸ªäººæˆé•¿çš„ç›®çš„å·²ç»ä¸æ˜¯â€œçŸ¥é“å’Œç†è§£â€äº†ï¼Œè€Œæ˜¯â€œåˆ¤æ–­ä¸é€‰æ‹©â€ã€‚ æ‰€ä»¥åœ¨ä¸ªäººæˆé•¿é¢†åŸŸï¼Œæ²¡æœ‰æœ€ä¼˜ã€æœ€ç¡®å®šã€æœ€æƒå¨çš„è®¤çŸ¥ä½“ç³»ï¼Œåªæœ‰æœ€é€‚åˆæˆ‘ä»¬å½“å‰çŠ¶æ€çš„è®¤çŸ¥ä½“ç³»ã€‚ è®¤çŸ¥ä¹Ÿæ˜¯ä¸€ç§èƒ½åŠ›ï¼ŒåŒæ ·éµå¾ªè¿™ä¸ªåŸç†ï¼šå¤„äºè®¤çŸ¥åœˆè¾¹ç¼˜çš„çŸ¥è¯†ä¸æˆ‘ä»¬çš„å®é™…éœ€æ±‚è´´åˆå¾—æœ€ç´§å¯†ï¼Œå› æ­¤ä¹Ÿæ›´å®¹æ˜“è®©æˆ‘ä»¬äº§ç”Ÿè§¦åŠ¨ï¼Œè¿›è€Œä¸ç°æœ‰çš„çŸ¥è¯†è¿›è¡Œå…³è”ã€‚è€Œä»–äººè®¤çŸ¥ä½“ç³»ä¸­çš„å¾ˆå¤šçŸ¥è¯†ï¼Œçºµä½¿å†æœ‰é“ç†ï¼Œå¦‚æœè·ç¦»æˆ‘ä»¬çš„è®¤çŸ¥æˆ–éœ€æ±‚å¤ªè¿œï¼Œå°±ç›¸å½“äºå¤„åœ¨äº†å­¦ä¹ çš„å›°éš¾åŒºã€‚ é™¤éå¯¹æ–¹çš„è®¤çŸ¥ä½“ç³»åˆšå¥½å’Œè‡ªå·±çš„è®¤çŸ¥åœˆæ¯”è¾ƒåŒ¹é…ï¼Œå¦åˆ™ç—´è¿·äºå…¨ç›˜æ¥å—ï¼Œå­¦ä¹ æ•ˆæœæœ‰é™ï¼Œè¿˜å¾ˆæµªè´¹ ä½“ç³»çš„æœ¬è´¨å°±æ˜¯ç”¨ç‹¬ç‰¹çš„è§†è§’å°†ä¸€äº›é›¶æ•£çš„ã€ç‹¬ç«‹çš„çŸ¥è¯†ã€æ¦‚å¿µæˆ–è§‚ç‚¹æ•´åˆä¸ºåº”å¯¹è¿™ä¸ªä¸–ç•Œçš„æ–¹æ³•å’ŒæŠ€å·§ã€‚ æ‰“ç¢å„å®¶çš„è®¤çŸ¥ä½“ç³»ï¼Œåªå–å…¶ä¸­æœ€è§¦åŠ¨è‡ªå·±çš„ç‚¹æˆ–å—ï¼Œç„¶åå°†å…¶æ‹¼æ¥æˆè‡ªå·±çš„è®¤çŸ¥ç½‘ç»œã€‚ æˆ‘ä»¬æ½œæ„è¯†çš„æ„Ÿæ€§èƒ½åŠ›å®Œå…¨å¯ä»¥ä½œä¸ºå­¦ä¹ çš„ç­›é€‰å™¨â€”â€”é€šè¿‡æƒ…ç»ªè§¦åŠ¨ï¼Œè¯†åˆ«ä¸è‡ªèº«éœ€æ±‚ç»“åˆæœ€ç´§å¯†çš„å†…å®¹ã€‚ äº§ç”Ÿâ€œè§¦åŠ¨â€ä¸æ„å‘³ç€â€œè¿æ¥â€ç´§å¯†ã€‚ æœ‰æ•ˆå…³è”æ–°çŸ¥è¯†çš„ä¸‰ä¸ªæ–¹é¢ï¼š ç¬¬äº”èŠ‚ã€€æ‰“å¡ï¼šè«è¿·æ‹æ‰“å¡ï¼Œæ‰“å¡æ‰“ä¸å‡ºæœªæ¥ æ‰“å¡ä¸ä»…ä¼šè½¬ç§»è¡ŒåŠ¨çš„åŠ¨æœºï¼Œè¿˜ä¼šé™ä½è¡ŒåŠ¨çš„æ•ˆèƒ½ï¼Œå­¦ä¹ çš„å¶å°”ä¸­æ–­æ˜¯æ­£å¸¸çš„ã€‚ æ‰€è°“è®¤çŸ¥é—­åˆéœ€æ±‚ï¼Œå°±æ˜¯æŒ‡å½“äººä»¬é¢å¯¹ä¸€ä¸ªæ¨¡ç³Šçš„é—®é¢˜æ—¶ï¼Œå°±æœ‰ç»™é—®é¢˜æ‰¾å‡ºä¸€ä¸ªæ˜ç¡®çš„ç­”æ¡ˆçš„æ¬²æœ›ã€‚ æ‰“å¡å¿ƒæ€çš„ç‰¹æ€§ï¼šå­¦ä¸åˆ°ï¼Œå‡è£…ä¸€ä¸‹ï¼›å­¦åˆ°äº†ï¼Œç«‹å³åœæ­¢ã€‚ æ‰€è°“â€œå¤§ç¾ä¸è‡ªçŸ¥â€ï¼Œç ´é™¤ä»»åŠ¡å¿ƒæ€çš„æ–¹æ³•å°±æ˜¯é›†ä¸­å¿ƒåŠ›åšçœ¼å‰çš„äº‹å°±å¥½ã€‚ ç”¨è®°å½•ä»£æ›¿æ‰“å¡ã€‚ åœ¨ä»»åŠ¡è®¾ç½®æ—¶è¦ä½¿ç”¨æ–°ç­–ç•¥ï¼šè®¾ä¸‹é™ï¼Œä¸è®¾ä¸Šé™ã€‚ ä¿æŒåŠ¨æœºï¼Œåˆ›é€ åŠ¨æœºã€‚ ç¬¬å…­èŠ‚ã€€åé¦ˆï¼šæ˜¯æ—¶å€™å‘Šè¯‰ä½ ä»€ä¹ˆæ˜¯çœŸæ­£çš„å­¦ä¹ äº† æ˜¯å¦æœ‰åŠæ—¶ã€æŒç»­çš„æ­£å‘åé¦ˆï¼Œæ­£æ˜¯äº§ç”Ÿå­¦ä¹ æ•ˆæœå·®å¼‚çš„å…³é”®ã€‚ æ­£å‘åé¦ˆå°±æ˜¯å¯¹æœ¬èƒ½è„‘å’Œæƒ…ç»ªè„‘çš„é¼“åŠ±ï¼Œä½¿ä¹‹é©±åŠ¨ä½œä¸ºåŠ¨åŠ›ï¼Œç„¶åä¹Ÿå¸¦åŠ¨ç†æ™ºè„‘çš„é©±åŠ¨ã€‚ æ‹¥æœ‰æ¸…æ™°è€Œå¼ºçƒˆçš„ä½œå“æ„è¯†ï¼Œä¼šæ›´åŠ é‡è§†è¾“å‡ºå’Œè¿ç”¨ï¼Œä¼šå€¾å¿ƒæ‰“ç£¨ä½œå“ï¼Œä¸»åŠ¨æ¢å–å¤–ç•Œçš„åé¦ˆã€‚ â€œé”å®šä»·å€¼â€”æ‰“ç£¨ä½œå“â€”æ¢å–åé¦ˆâ€ã€‚ æ‰€æœ‰ç—›è‹¦éƒ½æ˜¯ä¸Šå¤©ç»™æˆ‘ä»¬çš„æˆé•¿æç¤ºï¼Œè¿™ä¹Ÿæ˜¯ç»™è‡ªå·±çš„åé¦ˆã€‚ æ— åé¦ˆå¼åŠªåŠ›æ­£æ˜¯ä½ è¢«åŠ¨ã€è½åçš„æ ¹æºã€‚ çœŸæ­£çš„å­¦ä¹ æˆé•¿ä¸æ˜¯â€œåŠªåŠ›ï¼ŒåŠªåŠ›å†åŠªåŠ›â€ï¼Œè€Œæ˜¯â€œåé¦ˆï¼Œåé¦ˆå†åé¦ˆâ€ã€‚ ç¬¬ä¸ƒèŠ‚ã€€ä¼‘æ¯ï¼šä½ æ²¡æˆåŠŸï¼Œå¯èƒ½æ˜¯å› ä¸ºå¤ªåˆ»è‹¦äº† â€œåˆ»æ„ç»ƒä¹ å››è¦ç´ â€ï¼šå®šä¹‰æ˜ç¡®çš„ç›®æ ‡ã€æåº¦çš„ä¸“æ³¨ã€æœ‰æ•ˆçš„åé¦ˆã€åœ¨æ‹‰ä¼¸åŒºç»ƒä¹ ã€‚ ä¸è¿‡åº¦æ¶ˆè€—è‡ªå·±ï¼Œå½“ç²¾åŠ›ä¸è¶³å­¦ä¼šä¸»åŠ¨ä¼‘æ¯ï¼Œä½¿ç²¾åŠ›æ¡¶çš„æ°´ä½å¾—åˆ°å¿«é€Ÿå›å‡ã€‚ é«˜æ•ˆå­¦ä¹ çš„å…³é”®åœ¨äºä¿æŒæåº¦ä¸“æ³¨ï¼Œä¾é æ„å¿—åŠ›è‹¦æ’‘æ˜¯å®¹æ˜“äº§ç”Ÿè´Ÿæ”¶ç›Šçš„ï¼Œä¿æŒæ›´é•¿æ—¶é—´çš„ä¸“æ³¨æ‰æ˜¯æˆåŠŸçš„å…³é”®å› ç´ ã€‚ ","date":"2022-01-28","objectID":"/posts/daily_life/reading/1.html/:2:2","tags":["note","å¿ƒç†å­¦","æ—¥å¸¸ç”Ÿæ´»"],"title":"ã€Šè®¤çŸ¥è§‰é†’ã€‹é˜…è¯»","uri":"/posts/daily_life/reading/1.html/"},{"categories":null,"content":"0 There is 0 begining. ","date":"2021-02-17","objectID":"/posts/0.html/:1:0","tags":null,"title":"0","uri":"/posts/0.html/"},{"categories":["machine learning"],"content":"åŸºäºæ¢¯åº¦ä¸‹é™æ³•çš„ä¸€å…ƒçº¿æ€§å›å½’åº”ç”¨ ","date":"2020-03-06","objectID":"/posts/ai/machine_learning/5.html/:1:0","tags":["ai","machine_learning","note"],"title":"çº¿æ€§å›å½’ä¸éçº¿æ€§å›å½’","uri":"/posts/ai/machine_learning/5.html/"},{"categories":["machine learning"],"content":"å›å½’Regression ä¸€å…ƒçº¿æ€§å›å½’ å›å½’åˆ†æ(regression analysis)ç”¨æ¥å»ºç«‹æ–¹ç¨‹æ¨¡æ‹Ÿä¸¤ä¸ªæˆ–è€…å¤šä¸ªå˜é‡ä¹‹é—´å¦‚ä½•å…³è” è¢«é¢„æµ‹çš„å˜é‡å«åšï¼šå› å˜é‡(dependent variable), è¾“å‡º(output) è¢«ç”¨æ¥è¿›è¡Œé¢„æµ‹çš„å˜é‡å«åšï¼š è‡ªå˜é‡(independent variable), è¾“å…¥(input) ä¸€å…ƒçº¿æ€§å›å½’åŒ…å«ä¸€ä¸ªè‡ªå˜é‡å’Œä¸€ä¸ªå› å˜é‡ ä»¥ä¸Šä¸¤ä¸ªå˜é‡çš„å…³ç³»ç”¨ä¸€æ¡ç›´çº¿æ¥æ¨¡æ‹Ÿ å¦‚æœåŒ…å«ä¸¤ä¸ªä»¥ä¸Šçš„è‡ªå˜é‡ï¼Œåˆ™ç§°ä½œå¤šå…ƒå›å½’åˆ†æ(multiple regression) â„ğœƒ ğ‘¥ = ğœƒ0 + ğœƒ1ğ‘¥ è¿™ä¸ªæ–¹ç¨‹å¯¹åº”çš„å›¾åƒæ˜¯ä¸€æ¡ç›´çº¿ï¼Œç§°ä½œå›å½’çº¿ã€‚å…¶ä¸­ï¼Œğœƒ1ä¸ºå›å½’çº¿çš„æ–œç‡ï¼Œ ğœƒ0ä¸ºå›å½’çº¿çš„æˆªè·ã€‚ çº¿æ€§å›å½’çš„ä¸‰ç§å…³ç³»: æ­£ç›¸å…³ è´Ÿç›¸å…³ ä¸ç›¸å…³ æ±‚è§£æ–¹ç¨‹ç³»æ•° ","date":"2020-03-06","objectID":"/posts/ai/machine_learning/5.html/:1:1","tags":["ai","machine_learning","note"],"title":"çº¿æ€§å›å½’ä¸éçº¿æ€§å›å½’","uri":"/posts/ai/machine_learning/5.html/"},{"categories":["machine learning"],"content":"ä»£ä»·å‡½æ•°Cost Function æœ€å°äºŒä¹˜æ³• çœŸå®å€¼yï¼Œé¢„æµ‹å€¼â„ğœƒ ğ‘¥ ï¼Œåˆ™è¯¯å·®å¹³æ–¹ä¸º(y âˆ’ â„_ğœƒ(x))^2 æ‰¾åˆ°åˆé€‚çš„å‚æ•°ï¼Œä½¿å¾—è¯¯å·®å¹³æ–¹å’Œï¼š ç›¸å…³ç³»æ•° ä½¿ç”¨ç›¸å…³ç³»æ•°å»è¡¡é‡çº¿æ€§ç›¸å…³æ€§çš„å¼ºå¼± å†³å®šç³»æ•° ç›¸å…³ç³»æ•°ğ‘…2(coefficient of determination)æ˜¯ç”¨æ¥æè¿°ä¸¤ä¸ªå˜é‡ä¹‹é—´çš„çº¿æ€§å…³ç³»çš„ï¼Œä½†å†³å®šç³»æ•°çš„é€‚ç”¨èŒƒå›´æ›´å¹¿ï¼Œå¯ä»¥ç”¨äºæè¿°éçº¿æ€§æˆ–è€…æœ‰ä¸¤ä¸ªåŠä¸¤ä¸ªä»¥ä¸Šè‡ªå˜é‡çš„ç›¸å…³å…³ç³»ã€‚å®ƒå¯ä»¥ç”¨æ¥è¯„ä»·æ¨¡å‹çš„æ•ˆæœ ","date":"2020-03-06","objectID":"/posts/ai/machine_learning/5.html/:1:2","tags":["ai","machine_learning","note"],"title":"çº¿æ€§å›å½’ä¸éçº¿æ€§å›å½’","uri":"/posts/ai/machine_learning/5.html/"},{"categories":["machine learning"],"content":"æ¢¯åº¦ä¸‹é™æ³•Gradient Descent å­¦ä¹ ç‡ä¸èƒ½å¤ªå°ï¼Œä¹Ÿä¸èƒ½å¤ªå¤§ï¼Œå¯ä»¥å¤šå°è¯•ä¸€äº›å€¼0.1,0.03,0.01,0.003,0.001,0.0003,0.0001â€¦,å¦åˆ™æœ‰å¯èƒ½ä¼šé™·å…¥å±€éƒ¨æå°å€¼ ç”¨æ¢¯åº¦ä¸‹é™æ³•æ¥æ±‚è§£çº¿æ€§å›å½’ éå‡¸å‡½æ•°å’Œå‡¸å‡½æ•° çº¿æ€§å›å½’çš„ä»£ä»·å‡½æ•°æ˜¯å‡¸å‡½æ•° ä¼˜åŒ–è¿‡ç¨‹ ä»£ç å®ç° import numpy as np import matplotlib.pyplot as plt #è½½å…¥æ•°æ® data = np.genfromtxt(\"data.csv\",delimiter=\",\") x_data = data[:,0] y_data = data[:,1] plt.scatter(x_data,y_data) plt.show() #learning rate lr = 0.0001 #æˆªè· b = 0 #æ–œç‡ k = 0 #æœ€å¤§è¿­ä»£æ¬¡æ•° epochs = 50 #æœ€å°äºŒä¹˜æ³• def compute_error(b, k, x_data, y_data): totalError = 0 for i in range(0,len(x_data)): #(çœŸå®å€¼-é¢„æµ‹å€¼)^2 totalError += (y_data[i]-(k * x_data[i] + b)) ** 2 return totalError / float(len(x_data)) / 2 def gradient_descent_runner(x_data, y_data, b, k, lr, epochs): #è®¡ç®—æ€»æ•°æ®é‡ m = float(len(x_data)) for i in range (epochs): b_grad = 0 k_grad = 0 for j in range (0, len(x_data)): b_grad += - (1/m) * (y_data[j] - ((k * x_data[j]) + b)) k_grad += - (1/m) * x_data[j] * (y_data[j] - ((k * x_data[j]) + b)) b = b - (lr * b_grad) k = k - (lr * k_grad) #æ¯è¿­ä»£äº”æ¬¡,è¾“å‡ºå›¾åƒ if i % 5 == 0: print(\"epochs :\",i) plt.plot(x_data, y_data, 'b.') plt.plot(x_data, k*x_data + b, 'r') plt.show() return b, k print(\"Starting b = {0}, k = {1}, error = {2}\".format(b, k, compute_error(b, k, x_data, y_data))) print(\"Running ...\") b, k = gradient_descent_runner(x_data, y_data, b, k, lr, epochs) print(\"After {0} iterations b = {1}, k = {2}, error = {3}\".format(epochs, b, k, compute_error(b, k, x_data, y_data))) # ç”»å›¾ plt.plot(x_data, y_data, 'b.') plt.plot(x_data, k*x_data + b, 'r') plt.show() è¿è¡Œç»“æœ ä½¿ç”¨sklearnå®ç°-ä¸€å…ƒçº¿æ€§å›å½’ from sklearn. linear_model import LinearRegression import numpy as np import matplotlib.pyplot as plt #è½½å…¥æ•°æ® data = np.genfromtxt(\"data.csv\",delimiter=\",\") x_data = data[:,0] y_data = data[:,1] plt.scatter(x_data,y_data) plt.show() print(x_data.shape) #åŠ ä¸Šçº¬åº¦ x_data = data[:,0,np.newaxis] y_data = data[:,1,np.newaxis] print(x_data.shape) print(y_data.shape) #åˆ›å»ºå¹¶æ‹Ÿåˆæ¨¡å‹ model = LinearRegression() model.fit(x_data, y_data) #ç”»å›¾ plt.plot(x_data, y_data, 'b.') plt.plot(x_data, model.predict(x_data), 'r') plt.show() è¿è¡Œç»“æœ ","date":"2020-03-06","objectID":"/posts/ai/machine_learning/5.html/:1:3","tags":["ai","machine_learning","note"],"title":"çº¿æ€§å›å½’ä¸éçº¿æ€§å›å½’","uri":"/posts/ai/machine_learning/5.html/"},{"categories":["machine learning"],"content":"åŸºäºæ¢¯åº¦ä¸‹é™æ³•çš„å¤šå…ƒçº¿æ€§å›å½’åº”ç”¨ ","date":"2020-03-06","objectID":"/posts/ai/machine_learning/5.html/:2:0","tags":["ai","machine_learning","note"],"title":"çº¿æ€§å›å½’ä¸éçº¿æ€§å›å½’","uri":"/posts/ai/machine_learning/5.html/"},{"categories":["machine learning"],"content":"å¤šå…ƒçº¿æ€§å›å½’ å•ç‰¹å¾ å¤šç‰¹å¾ ","date":"2020-03-06","objectID":"/posts/ai/machine_learning/5.html/:2:1","tags":["ai","machine_learning","note"],"title":"çº¿æ€§å›å½’ä¸éçº¿æ€§å›å½’","uri":"/posts/ai/machine_learning/5.html/"},{"categories":["machine learning"],"content":"å¤šå…ƒçº¿æ€§å›å½’æ¨¡å‹ å½“Yå€¼çš„å½±å“å› ç´ ä¸æ˜¯å”¯ä¸€æ—¶ï¼Œé‡‡ç”¨å¤šå…ƒçº¿æ€§å›å½’ ","date":"2020-03-06","objectID":"/posts/ai/machine_learning/5.html/:2:2","tags":["ai","machine_learning","note"],"title":"çº¿æ€§å›å½’ä¸éçº¿æ€§å›å½’","uri":"/posts/ai/machine_learning/5.html/"},{"categories":["machine learning"],"content":"æ¢¯åº¦ä¸‹é™æ³•-å¤šå…ƒçº¿æ€§å›å½’ ä»£ç å®ç° import numpy as np from numpy import genfromtxt import matplotlib.pyplot as plt from mpl_toolkits.mplot3d import Axes3D data = genfromtxt(r\"Delivery.csv\",delimiter=',') print(data) ''' [[100. 4. 9.3] [ 50. 3. 4.8] [100. 4. 8.9] [100. 2. 6.5] [ 50. 2. 4.2] [ 80. 2. 6.2] [ 75. 3. 7.4] [ 65. 4. 6. ] [ 90. 3. 7.6] [ 90. 2. 6.1]] ''' #åˆ‡åˆ†æ•°æ® x_data = data[:,:-1] y_data = data[:,-1] print(x_data) print(y_data) ''' [[100. 4.] [ 50. 3.] [100. 4.] [100. 2.] [ 50. 2.] [ 80. 2.] [ 75. 3.] [ 65. 4.] [ 90. 3.] [ 90. 2.]] [9.3 4.8 8.9 6.5 4.2 6.2 7.4 6. 7.6 6.1] ''' #å­¦ä¹ ç‡ lr = 0.0001 #å‚æ•° theta0 = 0 theta1 = 0 theta2 = 0 #æœ€å¤§è¿­ä»£æ¬¡æ•° epochs = 1000 #æœ€å°äºŒä¹˜æ³• def compute_error(theta0, theta1, theta2, x_data, y_data): totalError = 0 for i in range(0, len(x_data)): totalError += (y_data[i] - (theta1 * x_data[i,0] + theta2 * x_data[i,1] +theta0)) ** 2 return totalError / float(len(x_data)) def gradient_descent_runner(x_data, y_data, theta0, theta1, theta2, lr, epochs): #è®¡ç®—æ€»æ•°æ®é‡ m = float(len(x_data)) for i in range(epochs): theta0_grad = 0 theta1_grad = 0 theta2_grad = 0 #è®¡ç®—æ¢¯åº¦çš„æ€»å’Œå†æ±‚å¹³å‡ for j in range(0, len(x_data)): theta0_grad += -(1/m) * (y_data[j] - (theta1 * x_data[j,0] + theta2 * x_data[j,1] + theta0)) theta1_grad += -(1/m) * x_data[j,0] * (y_data[j] - (theta1 * x_data[j,0] + theta2 * x_data[j,1] + theta0)) theta2_grad += -(1/m) * x_data[j,1] * (y_data[j] - (theta1 * x_data[j,0] + theta2 * x_data[j,1] + theta0)) #æ›´æ–° theta0 = theta0 - (lr * theta0_grad) theta1 = theta1 - (lr * theta1_grad) theta2 = theta2 - (lr * theta2_grad) return theta0, theta1, theta2 print(\"Starting theta0 = {0}, theta1 = {1}, theta2 = {2}, error = {3}\". format(theta0, theta1, theta2, compute_error(theta0, theta1, theta2, x_data, y_data))) print(\"Running....\") theta0, theta1, theta2 = gradient_descent_runner(x_data, y_data, theta0, theta1, theta2, lr, epochs) print(\"After {0} iterations theta0 = {1}, theta1 = {2}, theta2 = {3}, error = {4}\". format(epochs, theta0, theta1, theta2, compute_error(theta0, theta1, theta2, x_data, y_data))) ''' Starting theta0 = 0, theta1 = 0, theta2 = 0, error = 47.279999999999994 Running.... After 1000 iterations theta0 = 0.006971416196678632, theta1 = 0.08021042690771771, theta2 = 0.07611036240566814, error = 0.7731271432218118 ''' ax = plt.figure().add_subplot(111, projection = '3d') ax.scatter(x_data[:,0], x_data[:,1], y_data, c = 'r', marker = 'o', s = 100) x0 = x_data[:,0] x1 = x_data[:,1] #ç”Ÿæˆç½‘æ ¼çŸ©é˜µ x0, x1 = np.meshgrid(x0, x1) z = theta0 + x0 * theta1 + x1 * theta2 #ç”»3Då›¾ ax.plot_surface(x0, x1, z) #è®¾ç½®åæ ‡è½´ ax.set_xlabel(\"Miles\") ax.set_ylabel('Num of Deleveries') ax.set_zlabel('Time') #æ˜¾ç¤º plt.show() è¿è¡Œç»“æœ åŸºäºsklearnå®ç°å¤šå…ƒçº¿æ€§å›å½’ from sklearn import linear_model import numpy as np from numpy import genfromtxt import matplotlib.pyplot as plt from mpl_toolkits.mplot3d import Axes3D data = genfromtxt(r\"Delivery.csv\",delimiter=',') print(data) #åˆ‡åˆ†æ•°æ® x_data = data[:,:-1] y_data = data[:,-1] #åˆ›å»ºæ¨¡å‹ model = linear_model.LinearRegression() model.fit(x_data,y_data) #ç³»æ•° print(\"coefficients:\",model.coef_) #æˆªè· print(\"intercept:\",model.intercept_) #æµ‹è¯• x_test = [[102,4]] predict = model.predict(x_test) print(\"predict:\",predict) ax = plt.figure().add_subplot(111, projection = '3d') ax.scatter(x_data[:,0], x_data[:,1], y_data, c = 'r', marker = 'o', s = 100) x0 = x_data[:,0] x1 = x_data[:,1] #ç”Ÿæˆç½‘æ ¼çŸ©é˜µ x0, x1 = np.meshgrid(x0, x1) z = model.intercept_ + x0 * model.coef_[0] + x1 * model.coef_[1] #ç”»3Då›¾ ax.plot_surface(x0, x1, z) #è®¾ç½®åæ ‡è½´ ax.set_xlabel(\"Miles\") ax.set_ylabel('Num of Deleveries') ax.set_zlabel('Time') #æ˜¾ç¤º plt.show() è¿è¡Œç»“æœä¸ä¸Šé¢ç±»ä¼¼,å°±ä¸å±•ç¤ºå‡ºæ¥äº† ","date":"2020-03-06","objectID":"/posts/ai/machine_learning/5.html/:2:3","tags":["ai","machine_learning","note"],"title":"çº¿æ€§å›å½’ä¸éçº¿æ€§å›å½’","uri":"/posts/ai/machine_learning/5.html/"},{"categories":["machine learning"],"content":"å¤šé¡¹å¼å›å½’åŠåº”ç”¨ ","date":"2020-03-06","objectID":"/posts/ai/machine_learning/5.html/:3:0","tags":["ai","machine_learning","note"],"title":"çº¿æ€§å›å½’ä¸éçº¿æ€§å›å½’","uri":"/posts/ai/machine_learning/5.html/"},{"categories":["machine learning"],"content":"ä»£ç å®ç° import numpy as np import matplotlib.pyplot as plt from sklearn.preprocessing import PolynomialFeatures from sklearn.lineaBr_model import LinearRegression #è½½å…¥æ•°æ® data = np.genfromtxt(\"job.csv\",delimiter=\",\") x_data = data[1:,1] y_data = data[1:,2] plt.scatter(x_data, y_data) plt.show() x_data = x_data[:,np.newaxis] y_data = y_data[:,np.newaxis] #åˆ›å»ºå¹¶æ‹Ÿåˆæ¨¡å‹ #è¿™é‡Œæ˜¯å¤šå…ƒçº¿æ€§å›å½’ model = LinearRegression() model.fit(x_data, y_data) #ç”»å›¾ plt.plot(x_data, y_data, 'b.') plt.plot(x_data, model.predict(x_data), 'r') plt.show() å¯ä»¥çœ‹å‡ºä½¿ç”¨å¤šå…ƒçº¿æ€§å›å½’,æ•ˆæœå¹¶ä¸æ˜¯å¤ªå¥½,æ‰€ä»¥æˆ‘ä»¬æ¢æˆå¤šé¡¹å¼å›å½’æ¥å¯¹æ•°æ®è¿›è¡Œç‰¹å¾å¤„ç†ä¸€ä¸‹ #å®šä¹‰å¤šé¡¹å¼å›å½’,degree(åç½®å€¼)çš„å€¼å¯ä»¥è°ƒèŠ‚å¤šé¡¹å¼çš„ç‰¹å¾ poly_reg = PolynomialFeatures(degree = 5) #ç‰¹å¾å¤„ç† x_poly = poly_reg.fit_transform(x_data) print(x_poly) #å®šä¹‰å›å½’æ¨¡å‹ lin_reg = LinearRegression() #è®­ç»ƒæ¨¡å‹ lin_reg.fit(x_poly, y_data) #ç”»å›¾ plt.plot(x_data, y_data, 'b.') plt.plot(x_data, lin_reg.predict(poly_reg.fit_transform(x_data)), c='r') plt.title(\"Truth of Bluff (Polynomial Regression)\") plt.xlabel(\"Position level\") plt.ylabel(\"Salary\") plt.show() è¿™é‡Œçœ‹åˆ°é€šè¿‡è¿›è¡Œå¤šé¡¹å¼ç‰¹å¾å¤„ç†å,æ‹Ÿåˆç»“æœå°±æ¯”è¾ƒå¥½ ","date":"2020-03-06","objectID":"/posts/ai/machine_learning/5.html/:3:1","tags":["ai","machine_learning","note"],"title":"çº¿æ€§å›å½’ä¸éçº¿æ€§å›å½’","uri":"/posts/ai/machine_learning/5.html/"},{"categories":["machine learning"],"content":"æ ‡å‡†æ–¹ç¨‹æ³•(Normal Equation) åˆ†å­å¸ƒå±€(Numerator-layout): åˆ†å­ä¸ºåˆ—å‘é‡æˆ–è€…åˆ†æ¯ä¸ºè¡Œå‘é‡ åˆ†æ¯å¸ƒå±€(Denominator-layout):åˆ†å­ä¸ºè¡Œå‘é‡æˆ–è€…åˆ†æ¯ä¸ºåˆ—å‘é‡ æ±‚å¯¼å…¬å¼:https://en.wikipedia.org/wiki/Matrix_calculus#Scalar-by-vector_identiti ","date":"2020-03-06","objectID":"/posts/ai/machine_learning/5.html/:4:0","tags":["ai","machine_learning","note"],"title":"çº¿æ€§å›å½’ä¸éçº¿æ€§å›å½’","uri":"/posts/ai/machine_learning/5.html/"},{"categories":["machine learning"],"content":"çŸ©é˜µä¸å¯é€†çš„æƒ…å†µ çº¿æ€§ç›¸å…³çš„ç‰¹å¾(å¤šé‡å…±çº¿æ€§) ç‰¹å¾æ•°æ®å¤ªå¤š(æ ·æœ¬æ•°m\u003c=ç‰¹å¾æ•°é‡n) ","date":"2020-03-06","objectID":"/posts/ai/machine_learning/5.html/:4:1","tags":["ai","machine_learning","note"],"title":"çº¿æ€§å›å½’ä¸éçº¿æ€§å›å½’","uri":"/posts/ai/machine_learning/5.html/"},{"categories":["machine learning"],"content":"æ¢¯åº¦ä¸‹é™æ³•vsæ ‡å‡†æ–¹ç¨‹æ³• ","date":"2020-03-06","objectID":"/posts/ai/machine_learning/5.html/:4:2","tags":["ai","machine_learning","note"],"title":"çº¿æ€§å›å½’ä¸éçº¿æ€§å›å½’","uri":"/posts/ai/machine_learning/5.html/"},{"categories":["machine learning"],"content":"ä»£ç å®ç° import numpy as np from numpy import genfromtxt import matplotlib.pyplot as plt #æ ‡å‡†æ–¹ç¨‹æ³•æ±‚è§£å›å½’å‚æ•° def weights(xArr, yArr): xMat = np.mat(xArr) yMat = np.mat(yArr) xTx = xMat.T * xMat #çŸ©é˜µä¹˜æ³• #è®¡ç®—çŸ©é˜µçš„å€¼,å¦‚æœå€¼ä¸º0,è¯´æ˜è¯¥çŸ©é˜µæ²¡æœ‰é€†çŸ©é˜µ if np.linalg.det(xTx) == 0.0 : print(\"This matrix cannot do inverse\") return #xTx.T ä¸º xTx çš„é€†çŸ©é˜µ ws = xTx.I * xMat.T * yMat return ws #è½½å…¥æ•°æ® data = np.genfromtxt(\"data.csv\",delimiter=\",\") x_data = data[:,0, np.newaxis] y_data = data[:,1, np.newaxis] plt.scatter(x_data, y_data) plt.show() #ç»™æ ·æœ¬æ·»åŠ åç½®é¡¹ X_data = np.concatenate((np.ones((100,1)), x_data), axis=1) print(X_data.shape) â€‹``` (100, 2) â€‹``` ws = weights(X_data, y_data) print(ws) â€‹``` [[7.99102098] [1.32243102]] â€‹``` #ç”»å›¾ x_test = np.array(([20],[80])) y_test = ws[0] + x_test*ws[1] y_data_predict = ws[0] + x_data*ws[1] plt.plot(x_data, y_data, 'b.') plt.plot(x_data, y_data_predict, 'r') plt.show() è¿è¡Œç»“æœ ","date":"2020-03-06","objectID":"/posts/ai/machine_learning/5.html/:4:3","tags":["ai","machine_learning","note"],"title":"çº¿æ€§å›å½’ä¸éçº¿æ€§å›å½’","uri":"/posts/ai/machine_learning/5.html/"},{"categories":["machine learning"],"content":"ç‰¹å¾ç¼©æ”¾äº¤å‰éªŒè¯æ³• ","date":"2020-03-06","objectID":"/posts/ai/machine_learning/5.html/:5:0","tags":["ai","machine_learning","note"],"title":"çº¿æ€§å›å½’ä¸éçº¿æ€§å›å½’","uri":"/posts/ai/machine_learning/5.html/"},{"categories":["machine learning"],"content":"ç‰¹å¾ç¼©æ”¾ æ•°æ®å½’ä¸€åŒ–: æ•°æ®å½’ä¸€åŒ–å°±æ˜¯æŠŠæ•°æ®çš„å–å€¼èŒƒå›´å¤„ç†ä¸º0-1æˆ–è€…-1-1ä¹‹é—´ã€‚ ä»»æ„æ•°æ®è½¬åŒ–ä¸º0-1ä¹‹é—´ï¼šnewValue = (oldValue-min)/(max-min) ä»»æ„æ•°æ®è½¬åŒ–ä¸º-1-1ä¹‹é—´ï¼šnewValue = ((oldValue-min)/(max-min)-0.5)*2 å‡å€¼æ ‡å‡†åŒ–: xä¸ºç‰¹å¾æ•°æ®ï¼Œuä¸ºæ•°æ®çš„å¹³å‡å€¼ï¼Œsä¸ºæ•°æ®çš„æ–¹å·® newValue = (oldValue-u)/s ","date":"2020-03-06","objectID":"/posts/ai/machine_learning/5.html/:5:1","tags":["ai","machine_learning","note"],"title":"çº¿æ€§å›å½’ä¸éçº¿æ€§å›å½’","uri":"/posts/ai/machine_learning/5.html/"},{"categories":["machine learning"],"content":"äº¤å‰éªŒè¯æ³• é€šè¿‡åˆ‡åˆ†æ•°æ®,æ¯ä¸ªéƒ¨åˆ†åˆ†æˆè®­ç»ƒé›†å’Œæµ‹è¯•é›†,ä¸”å°†æ¯ä¸ªéƒ¨åˆ†çš„è¯¯å·®åŠ èµ·æ¥è®¡ç®—å¹³å‡å€¼å³ä¸ºæœ€ç»ˆè¯¯å·® ","date":"2020-03-06","objectID":"/posts/ai/machine_learning/5.html/:5:2","tags":["ai","machine_learning","note"],"title":"çº¿æ€§å›å½’ä¸éçº¿æ€§å›å½’","uri":"/posts/ai/machine_learning/5.html/"},{"categories":["machine learning"],"content":"è¿‡æ‹Ÿåˆ(Overfitting)\u0026æ­£åˆ™åŒ–(Regularized) ","date":"2020-03-06","objectID":"/posts/ai/machine_learning/5.html/:6:0","tags":["ai","machine_learning","note"],"title":"çº¿æ€§å›å½’ä¸éçº¿æ€§å›å½’","uri":"/posts/ai/machine_learning/5.html/"},{"categories":["machine learning"],"content":"è¿‡æ‹Ÿåˆ æ‹Ÿåˆæƒ…å†µ: é˜²æ­¢è¿‡æ‹Ÿåˆ: å‡å°‘ç‰¹å¾ å¢åŠ æ•°æ®é‡ æ­£åˆ™åŒ– ","date":"2020-03-06","objectID":"/posts/ai/machine_learning/5.html/:6:1","tags":["ai","machine_learning","note"],"title":"çº¿æ€§å›å½’ä¸éçº¿æ€§å›å½’","uri":"/posts/ai/machine_learning/5.html/"},{"categories":["machine learning"],"content":"æ­£åˆ™åŒ– ","date":"2020-03-06","objectID":"/posts/ai/machine_learning/5.html/:6:2","tags":["ai","machine_learning","note"],"title":"çº¿æ€§å›å½’ä¸éçº¿æ€§å›å½’","uri":"/posts/ai/machine_learning/5.html/"},{"categories":["machine learning"],"content":"å²­å›å½’/LASSOå›å½’/å¼¹æ€§ç½‘çš„åº”ç”¨ ","date":"2020-03-06","objectID":"/posts/ai/machine_learning/5.html/:7:0","tags":["ai","machine_learning","note"],"title":"çº¿æ€§å›å½’ä¸éçº¿æ€§å›å½’","uri":"/posts/ai/machine_learning/5.html/"},{"categories":["machine learning"],"content":"å²­å›å½’(Ridge Regression) w = (ğ‘‹^ğ‘‡ğ‘‹)^(âˆ’1)ğ‘‹^ğ‘‡y å¦‚æœæ•°æ®çš„ç‰¹å¾æ¯”æ ·æœ¬ç‚¹è¿˜å¤šï¼Œæ•°æ®ç‰¹å¾nï¼Œæ ·æœ¬ä¸ªæ•°mï¼Œå¦‚æœn\u003emï¼Œåˆ™è®¡ç®—æ—¶ä¼šå‡ºé”™ã€‚å› ä¸º(ğ‘‹^ğ‘‡ğ‘‹)ä¸æ˜¯æ»¡ç§©çŸ©é˜µï¼Œæ‰€ä»¥ä¸å¯é€†ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç»Ÿè®¡å­¦å®¶å¼•å…¥äº†å²­å›å½’çš„æ¦‚å¿µã€‚ å²­å›å½’æœ€æ—©æ˜¯ç”¨æ¥å¤„ç†ç‰¹å¾æ•°å¤šäºæ ·æœ¬çš„æƒ…å†µï¼Œç°åœ¨ä¹Ÿç”¨äºåœ¨ä¼°è®¡ä¸­åŠ å…¥åå·®ï¼Œä»è€Œå¾—åˆ°æ›´å¥½çš„ä¼°è®¡ã€‚åŒæ—¶ä¹Ÿå¯ä»¥è§£å†³å¤šé‡å…±çº¿æ€§çš„é—®é¢˜ã€‚å²­å›å½’æ˜¯ä¸€ç§æœ‰åä¼°è®¡ã€‚ é€‰æ‹©ğœ†å€¼ï¼Œä½¿åˆ°ï¼š å„å›å½’ç³»æ•°çš„å²­ä¼°è®¡åŸºæœ¬ç¨³å®šã€‚ æ®‹å·®å¹³æ–¹å’Œå¢å¤§ä¸å¤ªå¤š ğœ†å€¼ä¸ºæ¨ªåæ ‡,æ‰€æ±‚å‚æ•°ä¸ºçºµåæ ‡ sklearn-ä»£ç å®ç° Longleyæ•°æ®é›† Longleyæ•°æ®é›†æ¥è‡ªJï¼Wï¼Longleyï¼ˆ1967ï¼‰å‘è¡¨åœ¨JASAä¸Šçš„ä¸€ç¯‡è®ºæ–‡ï¼Œæ˜¯å¼ºå…±çº¿æ€§çš„å®è§‚ç»æµæ•°æ®,åŒ…å«GNP deflator(GNPå¹³å‡æŒ‡æ•°)ã€GNP(å›½æ°‘ç”Ÿäº§æ€»å€¼)ã€Unemployed(å¤±ä¸šç‡)ã€ArmedForces(æ­¦è£…åŠ›é‡)ã€Population(äººå£)ã€year(å¹´ä»½)ï¼ŒEmlpoyed(å°±ä¸šç‡)ã€‚ LongLeyæ•°æ®é›†å› å­˜åœ¨ä¸¥é‡çš„å¤šé‡å…±çº¿æ€§é—®é¢˜ï¼Œåœ¨æ—©æœŸç»å¸¸ç”¨æ¥æ£€éªŒå„ç§ç®—æ³•æˆ–è®¡ç®—æœºçš„è®¡ç®—ç²¾åº¦ import numpy as np from numpy import genfromtxt from sklearn import linear_model import matplotlib.pyplot as plt #è½½å…¥æ•°æ® data = genfromtxt(r\"longley.csv\", delimiter=',') print(data) â€‹``` [[ nan nan nan nan nan nan nan nan] [ nan 83. 234.289 235.6 159. 107.608 1947. 60.323] [ nan 88.5 259.426 232.5 145.6 108.632 1948. 61.122] [ nan 88.2 258.054 368.2 161.6 109.773 1949. 60.171] [ nan 89.5 284.599 335.1 165. 110.929 1950. 61.187] [ nan 96.2 328.975 209.9 309.9 112.075 1951. 63.221] [ nan 98.1 346.999 193.2 359.4 113.27 1952. 63.639] [ nan 99. 365.385 187. 354.7 115.094 1953. 64.989] [ nan 100. 363.112 357.8 335. 116.219 1954. 63.761] [ nan 101.2 397.469 290.4 304.8 117.388 1955. 66.019] [ nan 104.6 419.18 282.2 285.7 118.734 1956. 67.857] [ nan 108.4 442.769 293.6 279.8 120.445 1957. 68.169] [ nan 110.8 444.546 468.1 263.7 121.95 1958. 66.513] [ nan 112.6 482.704 381.3 255.2 123.366 1959. 68.655] [ nan 114.2 502.601 393.1 251.4 125.368 1960. 69.564] [ nan 115.7 518.173 480.6 257.2 127.852 1961. 69.331] [ nan 116.9 554.894 400.7 282.7 130.081 1962. 70.551]] â€‹``` #åˆ‡åˆ†æ•°æ® x_data = data[1:,2:] y_data = data[1:,1] #åˆ›å»ºæ¨¡å‹ #ç”Ÿæˆ50ä¸ªå€¼ alphas_to_test = np.linspace(0.001, 1) #åˆ›å»ºæ¨¡å‹,ä¿å­˜è¯¯å·®å€¼,CV:äº¤å‰éªŒè¯ model = linear_model.RidgeCV(alphas = alphas_to_test, store_cv_values= True) model.fit(x_data, y_data) #å²­ç³»æ•° print(model.alpha_) #losså€¼ print(model.cv_values_.shape) â€‹``` 0.40875510204081633 (16, 50) â€‹``` #ç”»å›¾ #å²­ç³»æ•°è·ŸLosså€¼çš„å…³ç³» plt.plot(alphas_to_test, model.cv_values_.mean(axis=0)) #é€‰å–çš„å²­ç³»æ•°çš„ä½ç½® plt.plot(model.alpha_, min(model.cv_values_.mean(axis=0)), 'ro') plt.show() #ç®€å•æµ‹è¯• model.predict(x_data[2,np.newaxis]) y_data[2] â€‹``` out:array([88.11216213]) out:88.2 â€‹``` è¿è¡Œç»“æœ æ ‡å‡†æ–¹ç¨‹æ³•-ä»£ç å®ç° import numpy as np from numpy import genfromtxt from sklearn import linear_model import matplotlib.pyplot as plt #è½½å…¥æ•°æ® data = genfromtxt(r\"longley.csv\", delimiter=',') print(data) #åˆ‡åˆ†æ•°æ® x_data = data[1:,2:] y_data = data[1:,1,np.newaxis] print(x_data.shape) print(y_data.shape) â€‹``` [[ nan nan nan nan nan nan nan nan] [ nan 83. 234.289 235.6 159. 107.608 1947. 60.323] [ nan 88.5 259.426 232.5 145.6 108.632 1948. 61.122] [ nan 88.2 258.054 368.2 161.6 109.773 1949. 60.171] [ nan 89.5 284.599 335.1 165. 110.929 1950. 61.187] [ nan 96.2 328.975 209.9 309.9 112.075 1951. 63.221] [ nan 98.1 346.999 193.2 359.4 113.27 1952. 63.639] [ nan 99. 365.385 187. 354.7 115.094 1953. 64.989] [ nan 100. 363.112 357.8 335. 116.219 1954. 63.761] [ nan 101.2 397.469 290.4 304.8 117.388 1955. 66.019] [ nan 104.6 419.18 282.2 285.7 118.734 1956. 67.857] [ nan 108.4 442.769 293.6 279.8 120.445 1957. 68.169] [ nan 110.8 444.546 468.1 263.7 121.95 1958. 66.513] [ nan 112.6 482.704 381.3 255.2 123.366 1959. 68.655] [ nan 114.2 502.601 393.1 251.4 125.368 1960. 69.564] [ nan 115.7 518.173 480.6 257.2 127.852 1961. 69.331] [ nan 116.9 554.894 400.7 282.7 130.081 1962. 70.551]] (16, 6) (16, 1) â€‹``` print(np.mat(x_data).shape) print(np.mat(y_data).shape) #ç»™æ ·æœ¬é¡¹åŠ åç½®å€¼ X_data = np.concatenate((np.ones((16,1)), x_data),axis=1) print(X_data.shape) â€‹``` (16, 6) (16, 1) (16, 7) â€‹``` #å²­å›å½’æ ‡å‡†æ–¹ç¨‹æ³•æ±‚è§£å›å½’å‚æ•° def weights(xArr, yArr, lam=0.2): xMat = np.mat(xArr) yMat = np.mat(yArr) xTx = xMat.T * xMat #çŸ©é˜µä¹˜æ³• rxTx = xTx + np.eye(xMat.shape[1]) * lam if np.linalg.det(rxTx) == 0.0: print(\"This mattrix cannot do inverse\") return ws = rxTx.I * xMat.T * yMat return ws ws = weights(X_data, y_data) print(ws) â€‹``` [[ 7.38107882e-04] [ 2.07703836e-01] [ 2.10076376e-02] [ 5.05385441e-03] [-1.59173066e+00] [ 1.10442920e-01] [-2.42280461e-01]] â€‹``` #è®¡ç®—é¢„æµ‹å€¼ print(np.mat(X_dat","date":"2020-03-06","objectID":"/posts/ai/machine_learning/5.html/:7:1","tags":["ai","machine_learning","note"],"title":"çº¿æ€§å›å½’ä¸éçº¿æ€§å›å½’","uri":"/posts/ai/machine_learning/5.html/"},{"categories":["machine learning"],"content":"LASSO Tibshirani(1996)æå‡ºäº†Lasso(The Least Absolute Shrinkage and Selectionator operator)ç®—æ³• é€šè¿‡æ„é€ ä¸€ä¸ªä¸€é˜¶æƒ©ç½šå‡½æ•°è·å¾—ä¸€ä¸ªç²¾ç‚¼çš„æ¨¡å‹ï¼›é€šè¿‡æœ€ç»ˆç¡®å®šä¸€äº› æŒ‡æ ‡ï¼ˆå˜é‡ï¼‰çš„ç³»æ•°ä¸ºé›¶ï¼ˆå²­å›å½’ä¼°è®¡ç³»æ•°ç­‰äº0çš„æœºä¼šå¾®ä¹å…¶å¾®ï¼Œ é€ æˆç­›é€‰å˜é‡å›°éš¾ï¼‰ï¼Œè§£é‡ŠåŠ›å¾ˆå¼ºã€‚ æ“…é•¿å¤„ç†å…·æœ‰å¤šé‡å…±çº¿æ€§çš„æ•°æ®ï¼Œä¸å²­å›å½’ä¸€æ ·æ˜¯æœ‰åä¼°è®¡ ã€‚ LASSOä¸å²­å›å½’ å›¾åƒæ¯”è¾ƒ sklearn-ä»£ç å®ç°Lasso import numpy as np from numpy import genfromtxt from sklearn import linear_model #è½½å…¥æ•°æ® data = genfromtxt(r\"longley.csv\",delimiter = ',') print(data.shape) #åˆ‡åˆ†æ•°æ® x_data = data[1:,2:] y_data = data[1:,1] print(x_data.shape) print(y_data.shape) â€‹``` (17, 8) (16, 6) (16,) â€‹``` #åˆ›å»ºæ¨¡å‹,å¾—åˆ°ä¸€ä¸ªåˆé€‚çš„è¯¯å·®å€¼,ç”±äºäº¤å‰éªŒè¯å…¶å‡½æ•°å†…éƒ¨è‡ªåŠ¨ç”Ÿæˆéšæœºæ•°è¿›è¡Œæµ‹è¯• model = linear_model.LassoCV() model.fit(x_data, y_data) #lassoç³»æ•° print(model.alpha_) #ç›¸å…³ç³»æ•° print(model.coef_) #å…¶ä¸­ä¸‰ä¸ªç‰¹å¾æœ‰å…±çº¿æ€§å³ä¸º0 â€‹``` 20.03464209711722 [0.10206856 0.00409161 0.00354815 0. 0. 0. ] â€‹``` #é¢„æµ‹å€¼ print(model.predict(x_data[-2,np.newaxis])) #çœŸå®å€¼ print(y_data[-2]) â€‹``` [115.6461414] 115.7 â€‹``` ","date":"2020-03-06","objectID":"/posts/ai/machine_learning/5.html/:7:2","tags":["ai","machine_learning","note"],"title":"çº¿æ€§å›å½’ä¸éçº¿æ€§å›å½’","uri":"/posts/ai/machine_learning/5.html/"},{"categories":["machine learning"],"content":"å¼¹æ€§ç½‘(Elastic Net) å¾ˆå®¹æ˜“çœ‹å‡º,q=2æ—¶å°±æ˜¯ä¸ºå²­å›å½’,q=1ä¸ºLassoå›å½’ sklearn-ä»£ç å®ç°ElasticNet ç”±äºéƒ¨åˆ†ç»“æœä¸ä¸Šé¢ç±»ä¼¼,è¿™é‡Œå°±ä¸è´´å‡ºæ¥äº† import numpy as np from numpy import genfromtxt from sklearn import linear_model #è½½å…¥æ•°æ® data = genfromtxt(r\"longley.csv\", delimiter=',') print(data) print(data.shape) #åˆ‡åˆ†æ•°æ® x_data = data[1:,2:] y_data = data[1:,1] #åˆ›å»ºæ¨¡å‹ model = linear_model.ElasticNetCV() model.fit(x_data, y_data) #lå¼¹æ€§ç½‘ç³»æ•° print(model.alpha_) #ç›¸å…³ç³»æ•° print(model.coef_) â€‹``` 42.96498005089394 [0.1016487 0.00416716 0.00349843 0. 0. 0. ] â€‹``` #é¢„æµ‹å€¼ print(model.predict(x_data[-2,np.newaxis])) #çœŸå®å€¼ print(y_data[-2]) â€‹``` [115.6037171] 115.7 â€‹``` ","date":"2020-03-06","objectID":"/posts/ai/machine_learning/5.html/:7:3","tags":["ai","machine_learning","note"],"title":"çº¿æ€§å›å½’ä¸éçº¿æ€§å›å½’","uri":"/posts/ai/machine_learning/5.html/"},{"categories":["machine learning"],"content":"Week 9 ","date":"2019-07-27","objectID":"/posts/ai/machine_learning/4.html/:0:0","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week9","uri":"/posts/ai/machine_learning/4.html/"},{"categories":["machine learning"],"content":"Density Estimation(å¼‚å¸¸æ£€æµ‹) ","date":"2019-07-27","objectID":"/posts/ai/machine_learning/4.html/:1:0","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week9","uri":"/posts/ai/machine_learning/4.html/"},{"categories":["machine learning"],"content":"Problem Motivation Density Estimation Algotithm Anomaly detection example ","date":"2019-07-27","objectID":"/posts/ai/machine_learning/4.html/:1:1","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week9","uri":"/posts/ai/machine_learning/4.html/"},{"categories":["machine learning"],"content":"Gaussian Distribution(é«˜æ–¯åˆ†å¸ƒæˆ–æ­£æ€åˆ†å¸ƒ) The formula for the Gaussian density is: $$ p(x) = \\frac{1}{\\sqrt{2\\pi}\\sigma}\\exp\\left(-\\frac{(x-\\mu)^2}{2\\sigma^2}\\right) $$ Gaussian distribution example Parameter estimation ","date":"2019-07-27","objectID":"/posts/ai/machine_learning/4.html/:1:2","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week9","uri":"/posts/ai/machine_learning/4.html/"},{"categories":["machine learning"],"content":"Algorithm Anomaly detection example ","date":"2019-07-27","objectID":"/posts/ai/machine_learning/4.html/:1:3","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week9","uri":"/posts/ai/machine_learning/4.html/"},{"categories":["machine learning"],"content":"Building an Anomaly Detection System ","date":"2019-07-27","objectID":"/posts/ai/machine_learning/4.html/:2:0","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week9","uri":"/posts/ai/machine_learning/4.html/"},{"categories":["machine learning"],"content":"Developing and Evaluating an Anomaly Detection System the important of real-number evaluation Aircraft engines motivating example Alogorithm evaluation ","date":"2019-07-27","objectID":"/posts/ai/machine_learning/4.html/:2:1","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week9","uri":"/posts/ai/machine_learning/4.html/"},{"categories":["machine learning"],"content":"Anomaly Detection vs. Supervised Learning ","date":"2019-07-27","objectID":"/posts/ai/machine_learning/4.html/:2:2","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week9","uri":"/posts/ai/machine_learning/4.html/"},{"categories":["machine learning"],"content":"Choosing What Features to Use Non-gaussian features Error analysis for anomaly detection Monitoring computers in a data center ","date":"2019-07-27","objectID":"/posts/ai/machine_learning/4.html/:2:3","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week9","uri":"/posts/ai/machine_learning/4.html/"},{"categories":["machine learning"],"content":"Multivariate Gaussian Distribution(Optional) ","date":"2019-07-27","objectID":"/posts/ai/machine_learning/4.html/:3:0","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week9","uri":"/posts/ai/machine_learning/4.html/"},{"categories":["machine learning"],"content":"Multivariate Gaussian Distribution Motivating example:Monitoring machines in a data center Multivariate Gaussian(Normal)distribution Multivariate Gaussian(Normal) examples ","date":"2019-07-27","objectID":"/posts/ai/machine_learning/4.html/:3:1","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week9","uri":"/posts/ai/machine_learning/4.html/"},{"categories":["machine learning"],"content":"Anomaly Detection using the Multivariate Gaussian Distribution Multivariate Gaussian (Normal) distribution Anomaly detection with the multivariate Gaussian Relationship to original model Original model vs. Multivariate Gaussian ","date":"2019-07-27","objectID":"/posts/ai/machine_learning/4.html/:3:2","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week9","uri":"/posts/ai/machine_learning/4.html/"},{"categories":["machine learning"],"content":"Predicting Movie Ratings ","date":"2019-07-27","objectID":"/posts/ai/machine_learning/4.html/:4:0","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week9","uri":"/posts/ai/machine_learning/4.html/"},{"categories":["machine learning"],"content":"Problem Formulation Example : Predicting movie ratings ","date":"2019-07-27","objectID":"/posts/ai/machine_learning/4.html/:4:1","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week9","uri":"/posts/ai/machine_learning/4.html/"},{"categories":["machine learning"],"content":"Content Based Recommendations Content-based recommender systems Problem formulation Optimization objective Optimization algorithm ","date":"2019-07-27","objectID":"/posts/ai/machine_learning/4.html/:4:2","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week9","uri":"/posts/ai/machine_learning/4.html/"},{"categories":["machine learning"],"content":"Collaborative Filtering ","date":"2019-07-27","objectID":"/posts/ai/machine_learning/4.html/:5:0","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week9","uri":"/posts/ai/machine_learning/4.html/"},{"categories":["machine learning"],"content":"Collaborative Filtering Problem motivation Optimization algorithm Collaborative filtering ","date":"2019-07-27","objectID":"/posts/ai/machine_learning/4.html/:5:1","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week9","uri":"/posts/ai/machine_learning/4.html/"},{"categories":["machine learning"],"content":"Collaborative Filtering Algorithm Collaborative filtering optimization objective Collaborative filtering algorithm ","date":"2019-07-27","objectID":"/posts/ai/machine_learning/4.html/:5:2","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week9","uri":"/posts/ai/machine_learning/4.html/"},{"categories":["machine learning"],"content":"Low Rank Matrix Factorization(ä½ç§©çŸ©é˜µåˆ†è§£) ","date":"2019-07-27","objectID":"/posts/ai/machine_learning/4.html/:6:0","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week9","uri":"/posts/ai/machine_learning/4.html/"},{"categories":["machine learning"],"content":"Vectorization: Low Rank Matrix Factorization Collaborative filtering Finding related movies ","date":"2019-07-27","objectID":"/posts/ai/machine_learning/4.html/:6:1","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week9","uri":"/posts/ai/machine_learning/4.html/"},{"categories":["machine learning"],"content":"Implementational Detail: Mean Normalization Users who have not reated any movies Mean Normalizatio ","date":"2019-07-27","objectID":"/posts/ai/machine_learning/4.html/:6:2","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week9","uri":"/posts/ai/machine_learning/4.html/"},{"categories":["machine learning"],"content":"Clustering ","date":"2019-07-05","objectID":"/posts/ai/machine_learning/3.html/:1:0","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week8","uri":"/posts/ai/machine_learning/3.html/"},{"categories":["machine learning"],"content":"K-Means Algorithm(Kå‡å€¼ (K-means) ç®—æ³•) ","date":"2019-07-05","objectID":"/posts/ai/machine_learning/3.html/:1:1","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week8","uri":"/posts/ai/machine_learning/3.html/"},{"categories":["machine learning"],"content":"Optimization Objective ","date":"2019-07-05","objectID":"/posts/ai/machine_learning/3.html/:1:2","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week8","uri":"/posts/ai/machine_learning/3.html/"},{"categories":["machine learning"],"content":"Random Initialization ","date":"2019-07-05","objectID":"/posts/ai/machine_learning/3.html/:1:3","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week8","uri":"/posts/ai/machine_learning/3.html/"},{"categories":["machine learning"],"content":"Choosing the Number of Clusters ","date":"2019-07-05","objectID":"/posts/ai/machine_learning/3.html/:1:4","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week8","uri":"/posts/ai/machine_learning/3.html/"},{"categories":["machine learning"],"content":"Motivation ","date":"2019-07-05","objectID":"/posts/ai/machine_learning/3.html/:2:0","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week8","uri":"/posts/ai/machine_learning/3.html/"},{"categories":["machine learning"],"content":"Motivation I : Data Compression ","date":"2019-07-05","objectID":"/posts/ai/machine_learning/3.html/:2:1","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week8","uri":"/posts/ai/machine_learning/3.html/"},{"categories":["machine learning"],"content":"Motivation II:Visualization ","date":"2019-07-05","objectID":"/posts/ai/machine_learning/3.html/:2:2","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week8","uri":"/posts/ai/machine_learning/3.html/"},{"categories":["machine learning"],"content":"Principal Component Analysis(PCA) ","date":"2019-07-05","objectID":"/posts/ai/machine_learning/3.html/:3:0","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week8","uri":"/posts/ai/machine_learning/3.html/"},{"categories":["machine learning"],"content":"Principal Component Analysis(PCA)Problem Formulation ","date":"2019-07-05","objectID":"/posts/ai/machine_learning/3.html/:3:1","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week8","uri":"/posts/ai/machine_learning/3.html/"},{"categories":["machine learning"],"content":"Principal Component Analysisi Algorithm ","date":"2019-07-05","objectID":"/posts/ai/machine_learning/3.html/:3:2","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week8","uri":"/posts/ai/machine_learning/3.html/"},{"categories":["machine learning"],"content":"PCA Applying ","date":"2019-07-05","objectID":"/posts/ai/machine_learning/3.html/:4:0","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week8","uri":"/posts/ai/machine_learning/3.html/"},{"categories":["machine learning"],"content":"Reconstruction from Compressed Representation ","date":"2019-07-05","objectID":"/posts/ai/machine_learning/3.html/:4:1","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week8","uri":"/posts/ai/machine_learning/3.html/"},{"categories":["machine learning"],"content":"Choosing the Number of Principal Components ","date":"2019-07-05","objectID":"/posts/ai/machine_learning/3.html/:4:2","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week8","uri":"/posts/ai/machine_learning/3.html/"},{"categories":["machine learning"],"content":"Advice for Applying PCA ","date":"2019-07-05","objectID":"/posts/ai/machine_learning/3.html/:4:3","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week8","uri":"/posts/ai/machine_learning/3.html/"},{"categories":["machine learning"],"content":"Large Margin Classification Optimization Objective Large Margin Intuition Mathematics Behind Large Margin Classification ","date":"2019-06-27","objectID":"/posts/ai/machine_learning/2.html/:0:1","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week7","uri":"/posts/ai/machine_learning/2.html/"},{"categories":["machine learning"],"content":"Kernels Kernels I Kernels II ","date":"2019-06-27","objectID":"/posts/ai/machine_learning/2.html/:0:2","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week7","uri":"/posts/ai/machine_learning/2.html/"},{"categories":["machine learning"],"content":"Using An SVM ","date":"2019-06-27","objectID":"/posts/ai/machine_learning/2.html/:0:3","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week7","uri":"/posts/ai/machine_learning/2.html/"},{"categories":["machine learning"],"content":"Liner Regression Cost Function $h(x)=\\theta_0+\\theta_1x+â€¦.$ $h(x)=\\theta^Tx$ Linear Regression $J(\\theta) = \\frac{1}{2m}\\sum_{1}^{m}(h_\\theta(x^i)-y^i)$ $\\frac{\\partial{J(\\theta)}}{\\partial{\\theta_j}}=\\frac{1}{m}\\sum_{1}^{m}(h_\\theta(x^i)-y^i)$ Gradient descent algorithm repeat until convergence{ $\\theta_j := \\theta_j - \\frac{ \\alpha}{m}\\sum_{i=1}^{m}(h_\\theta(x^{(i)})-y^{(i)}) x^{(i)}$ } Feature scaling and mean normalization $x_i=\\frac{x_i-\\mu_i}{s_i}$ $\\mu_i$: the average of all the values for feature (i) $s_i$ : standard deviation learning rate If Î± is too small: slow convergence. If Î± is too large: may not decrease on every iteration and thus may not converge. Polynomial Regression change the behavior or curve of our hypothesis function by making it a quadratic, cubic or square root function (or any other form). Normal Equation $\\theta = (X^TX)^{-1}X^Ty$ ","date":"2019-06-23","objectID":"/posts/ai/machine_learning/1.html/:0:1","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week1-Week5æ€»ç»“","uri":"/posts/ai/machine_learning/1.html/"},{"categories":["machine learning"],"content":"Logistic Regression Logistic Function or Sigmoid Function Decision Boundary $\\theta^Tx \\ge 0 \\Rightarrow y=1$ $\\theta^Tx \\le 0 \\Rightarrow y=0$ Cost Function Gradient Descent $h=g(X\\theta)$ $J(\\theta)=\\frac{1}{m}(-yâ€™log(h)-(1-y)â€™log(1-h))$ $\\theta:=\\theta-\\frac{\\alpha}{m}X^T(g(\\theta X) -y)$ Advanced Optimization function [jVal, gradient] = costFunction(theta) jVal = [...code to compute J(theta)...]; gradient = [...code to compute derivative of J(theta)...]; end options = optimset('GradObj', 'on', 'MaxIter', 100); initialTheta = zeros(2,1); [optTheta, functionVal, exitFlag] = fminunc(@costFunction, initialTheta, options); Multiclass Classification: One-vs-all Train a logistic regression classifier $h_\\theta(X)$ for each class to predict the probability that y = i . To make a prediction on a new x, pick the class that maximizes $h_\\theta(X)$ Overfitting Reduce the number of features Regularization Regularized Logistic Regression ","date":"2019-06-23","objectID":"/posts/ai/machine_learning/1.html/:0:2","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week1-Week5æ€»ç»“","uri":"/posts/ai/machine_learning/1.html/"},{"categories":["machine learning"],"content":"Neural Networks Model Representation Forward propagation:Vectorized implementation Multiclass Classification one-vs-all Neural Network(Classification) L = total number of layers in the network $s_l$= number of units (not counting bias unit) in layer l K = number of output units/classes Cost Function Backpropagation Algorithm Gradient Checking Random Initialization ","date":"2019-06-23","objectID":"/posts/ai/machine_learning/1.html/:0:3","tags":["ai","machine_learning","note"],"title":"MachineLearning(AndrewNg)Notes-Week1-Week5æ€»ç»“","uri":"/posts/ai/machine_learning/1.html/"}]